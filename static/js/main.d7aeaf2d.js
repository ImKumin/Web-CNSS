/*! For license information please see main.d7aeaf2d.js.LICENSE.txt */
(function(){var __webpack_modules__={7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i},e.exports.__esModule=!0,e.exports.default=e.exports},2858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},3884:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(l){a=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},6479:function(e,t,n){var i=n(7316);e.exports=function(e,t){if(null==e)return{};var n,r,o=i(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},7316:function(e){e.exports=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r},e.exports.__esModule=!0,e.exports.default=e.exports},9591:function(e,t,n){var i=n(8).default;function r(){"use strict";e.exports=r=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(M){u=function(e,t,n){return e[t]=n}}function d(e,t,n,i){var r=t&&t.prototype instanceof p?t:p,o=Object.create(r.prototype),s=new E(i||[]);return o._invoke=function(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return A()}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var a=k(s,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=h(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,n,s),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}t.wrap=d;var f={};function p(){}function g(){}function m(){}var v={};u(v,a,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(O([])));b&&b!==n&&o.call(b,a)&&(v=b);var w=m.prototype=p.prototype=Object.create(v);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(r,s,a,l){var c=h(e[r],e,s);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==i(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var r;this._invoke=function(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var i=h(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function O(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return g.prototype=m,u(w,"constructor",m),u(m,"constructor",g),g.displayName=u(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},_(x.prototype),u(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var s=new x(d(e,n,i,r),o);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=O,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],s=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var a=o.call(r,"catchLoc"),l=o.call(r,"finallyLoc");if(a&&l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},3038:function(e,t,n){var i=n(2858),r=n(3884),o=n(379),s=n(521);e.exports=function(e,t){return i(e)||r(e,t)||o(e,t)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,n){var i=n(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},7757:function(e,t,n){var i=n(9591)();e.exports=i;try{regeneratorRuntime=i}catch(r){"object"===typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},7206:function(e){"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),i=0,r=2,o=!0;for(;r<arguments.length;)n[i++]=arguments[r++];return new Promise((function(r,s){n[i]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];r.apply(null,t)}};try{e.apply(t||null,n)}catch(a){o&&(o=!1,s(a))}}))}},1:function(e,t){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),r=new Array(123),o=0;o<64;)r[i[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;n.encode=function(e,t,n){for(var r,o=null,s=[],a=0,l=0;t<n;){var c=e[t++];switch(l){case 0:s[a++]=i[c>>2],r=(3&c)<<4,l=1;break;case 1:s[a++]=i[r|c>>4],r=(15&c)<<2,l=2;break;case 2:s[a++]=i[r|c>>6],s[a++]=i[63&c],l=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=i[r],s[a++]=61,1===l&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";n.decode=function(e,t,n){for(var i,o=n,a=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&a>1)break;if(void 0===(c=r[c]))throw Error(s);switch(a){case 0:i=c,a=1;break;case 1:t[n++]=i<<2|(48&c)>>4,i=c,a=2;break;case 2:t[n++]=(15&i)<<4|(60&c)>>2,i=c,a=3;break;case 3:t[n++]=(3&i)<<6|c,a=0}}if(1===a)throw Error(s);return n-o},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},3297:function(e){"use strict";function t(e,n){"string"===typeof e&&(n=e,e=void 0);var i=[];function r(e){if("string"!==typeof e){var n=o();if(t.verbose&&console.log("codegen: "+n),n="return "+n,e){for(var s=Object.keys(e),a=new Array(s.length+1),l=new Array(s.length),c=0;c<s.length;)a[c]=s[c],l[c]=e[s[c++]];return a[c]=n,Function.apply(null,a).apply(null,l)}return Function(n)()}for(var u=new Array(arguments.length-1),d=0;d<u.length;)u[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var n=u[d++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),d!==u.length)throw Error("parameter count mismatch");return i.push(e),r}function o(t){return"function "+(t||n||"")+"("+(e&&e.join(",")||"")+"){\n  "+i.join("\n  ")+"\n}"}return r.toString=o,r}e.exports=t,t.verbose=!1},7111:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}},7635:function(e,t,n){"use strict";e.exports=o;var i=n(7206),r=n(7172)("fs");function o(e,t,n){return"function"===typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&r&&r.readFile?r.readFile(e,(function(i,r){return i&&"undefined"!==typeof XMLHttpRequest?o.xhr(e,t,n):i?n(i):n(null,t.binary?r:r.toString("utf8"))})):o.xhr(e,t,n):i(o,this,e,t)}o.xhr=function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){if(0!==i.status&&200!==i.status)return n(Error("status "+i.status));if(t.binary){var e=i.response;if(!e){e=[];for(var r=0;r<i.responseText.length;++r)e.push(255&i.responseText.charCodeAt(r))}return n(null,"undefined"!==typeof Uint8Array?new Uint8Array(e):e)}return n(null,i.responseText)}},t.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",e),i.send()}},802:function(e){"use strict";function t(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),i=128===n[3];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3]}function o(e,i,r){t[0]=e,i[r]=n[3],i[r+1]=n[2],i[r+2]=n[1],i[r+3]=n[0]}function s(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],t[0]}function a(e,i){return n[3]=e[i],n[2]=e[i+1],n[1]=e[i+2],n[0]=e[i+3],t[0]}e.writeFloatLE=i?r:o,e.writeFloatBE=i?o:r,e.readFloatLE=i?s:a,e.readFloatBE=i?a:s}():function(){function t(e,t,n,i){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,n,i);else if(isNaN(t))e(2143289344,n,i);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,n,i);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,n,i);else{var o=Math.floor(Math.log(t)/Math.LN2);e((r<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,i)}}function s(e,t,n){var i=e(t,n),r=2*(i>>31)+1,o=i>>>23&255,s=8388607&i;return 255===o?s?NaN:r*(1/0):0===o?1401298464324817e-60*r*s:r*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,i),e.readFloatLE=s.bind(null,r),e.readFloatBE=s.bind(null,o)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),i=128===n[7];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3],i[r+4]=n[4],i[r+5]=n[5],i[r+6]=n[6],i[r+7]=n[7]}function o(e,i,r){t[0]=e,i[r]=n[7],i[r+1]=n[6],i[r+2]=n[5],i[r+3]=n[4],i[r+4]=n[3],i[r+5]=n[2],i[r+6]=n[1],i[r+7]=n[0]}function s(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],n[4]=e[i+4],n[5]=e[i+5],n[6]=e[i+6],n[7]=e[i+7],t[0]}function a(e,i){return n[7]=e[i],n[6]=e[i+1],n[5]=e[i+2],n[4]=e[i+3],n[3]=e[i+4],n[2]=e[i+5],n[1]=e[i+6],n[0]=e[i+7],t[0]}e.writeDoubleLE=i?r:o,e.writeDoubleBE=i?o:r,e.readDoubleLE=i?s:a,e.readDoubleBE=i?a:s}():function(){function t(e,t,n,i,r,o){var s=i<0?1:0;if(s&&(i=-i),0===i)e(0,r,o+t),e(1/i>0?0:2147483648,r,o+n);else if(isNaN(i))e(0,r,o+t),e(2146959360,r,o+n);else if(i>17976931348623157e292)e(0,r,o+t),e((s<<31|2146435072)>>>0,r,o+n);else{var a;if(i<22250738585072014e-324)e((a=i/5e-324)>>>0,r,o+t),e((s<<31|a/4294967296)>>>0,r,o+n);else{var l=Math.floor(Math.log(i)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=i*Math.pow(2,-l))>>>0,r,o+t),e((s<<31|l+1023<<20|1048576*a&1048575)>>>0,r,o+n)}}}function s(e,t,n,i,r){var o=e(i,r+t),s=e(i,r+n),a=2*(s>>31)+1,l=s>>>20&2047,c=4294967296*(1048575&s)+o;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=s.bind(null,r,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function n(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function i(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function r(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7172:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},7468:function(e,t){"use strict";var n=t,i=n.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},r=n.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=i(e),r="";n&&(r=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return r+t.join("/")};n.resolve=function(e,t,n){return n||(t=r(t)),i(t)?t:(n||(e=r(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?r(e+"/"+t):t)}},8236:function(e){"use strict";e.exports=function(e,t,n){var i=n||8192,r=i>>>1,o=null,s=i;return function(n){if(n<1||n>r)return e(n);s+n>i&&(o=e(i),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},3861:function(e,t){"use strict";var n=t;n.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t+=1:n<2048?t+=2:55296===(64512&n)&&56320===(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var i,r=null,o=[],s=0;t<n;)(i=e[t++])<128?o[s++]=i:i>191&&i<224?o[s++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(i>>10),o[s++]=56320+(1023&i)):o[s++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),s=0);return r?(s&&r.push(String.fromCharCode.apply(String,o.slice(0,s))),r.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.write=function(e,t,n){for(var i,r,o=n,s=0;s<e.length;++s)(i=e.charCodeAt(s))<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&56320===(64512&(r=e.charCodeAt(s+1)))?(i=65536+((1023&i)<<10)+(1023&r),++s,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-o}},5675:function(e,t,n){e=n.nmd(e),function(){var e=function(){return this}();e||"undefined"==typeof window||(e=window);var t=function e(t,n,i){"string"===typeof t?(2==arguments.length&&(i=n),e.modules[t]||(e.payloads[t]=i,e.modules[t]=null)):e.original?e.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};t.modules={},t.payloads={};var n=function(e,t,n){if("string"===typeof t){var r=o(e,t);if(void 0!=r)return n&&n(),r}else if("[object Array]"===Object.prototype.toString.call(t)){for(var s=[],a=0,l=t.length;a<l;++a){var c=o(e,t[a]);if(void 0==c&&i.original)return;s.push(c)}return n&&n.apply(null,s)||!0}},i=function e(t,i){var r=n("",t,i);return void 0==r&&e.original?e.original.apply(this,arguments):r},r=function e(t,n){if(-1!==n.indexOf("!")){var i=n.split("!");return e(t,i[0])+"!"+e(t,i[1])}if("."==n.charAt(0))for(n=t.split("/").slice(0,-1).join("/")+"/"+n;-1!==n.indexOf(".")&&r!=n;){var r=n;n=n.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return n},o=function(e,i){i=r(e,i);var o=t.modules[i];if(!o){if("function"===typeof(o=t.payloads[i])){var s={},a={id:i,uri:"",exports:s,packaged:!0};s=o((function(e,t){return n(i,e,t)}),s,a)||a.exports,t.modules[i]=s,delete t.payloads[i]}o=t.modules[i]=s||o}return o};!function(n){var r=e;n&&(e[n]||(e[n]={}),r=e[n]),r.define&&r.define.packaged||(t.original=r.define,r.define=t,r.define.packaged=!0),r.require&&r.require.packaged||(i.original=r.require,r.require=i,r.require.packaged=!0)}("ace")}(),ace.define("ace/lib/fixoldbrowsers",["require","exports","module"],(function(e,t,n){"use strict";"undefined"==typeof Element||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),ace.define("ace/lib/useragent",["require","exports","module"],(function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var i="object"==typeof navigator?navigator:{},r=(/mac|win|linux/i.exec(i.platform)||["other"])[0].toLowerCase(),o=i.userAgent||"",s=i.appName||"";t.isWin="win"==r,t.isMac="mac"==r,t.isLinux="linux"==r,t.isIE="Microsoft Internet Explorer"==s||s.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=o.match(/ Gecko\/\d+/),t.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,t.isEdge=parseFloat(o.split(" Edge/")[1])||void 0,t.isAIR=o.indexOf("AdobeAIR")>=0,t.isAndroid=o.indexOf("Android")>=0,t.isChromeOS=o.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid})),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],(function(e,t,n){"use strict";var i,r=e("./useragent");t.buildDom=function e(t,n,i){if("string"==typeof t&&t){var r=document.createTextNode(t);return n&&n.appendChild(r),r}if(!Array.isArray(t))return t&&t.appendChild&&n&&n.appendChild(t),t;if("string"!=typeof t[0]||!t[0]){for(var o=[],s=0;s<t.length;s++){var a=e(t[s],n,i);a&&o.push(a)}return o}var l=document.createElement(t[0]),c=t[1],u=1;c&&"object"==typeof c&&!Array.isArray(c)&&(u=2);for(s=u;s<t.length;s++)e(t[s],l,i);return 2==u&&Object.keys(c).forEach((function(e){var t=c[e];"class"===e?l.className=Array.isArray(t)?t.join(" "):t:"function"==typeof t||"value"==e||"$"==e[0]?l[e]=t:"ref"===e?i&&(i[t]=l):"style"===e?"string"==typeof t&&(l.style.cssText=t):null!=t&&l.setAttribute(e,t)})),n&&n.appendChild(l),l},t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||"http://www.w3.org/1999/xhtml",e):document.createElement(e)},t.removeChildren=function(e){e.innerHTML=""},t.createTextNode=function(e,t){return(t?t.ownerDocument:document).createTextNode(e)},t.createFragment=function(e){return(e?e.ownerDocument:document).createDocumentFragment()},t.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var i=n.indexOf(t);if(-1==i)break;n.splice(i,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),i=!0;;){var r=n.indexOf(t);if(-1==r)break;i=!1,n.splice(r,1)}return i&&n.push(t),e.className=n.join(" "),i},t.setCssClass=function(e,n,i){i?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n,i=0;if(n=(t=t||document).querySelectorAll("style"))for(;i<n.length;)if(n[i++].id===e)return!0};var o=[];function s(){var e=o;o=null,e&&e.forEach((function(e){a(e[0],e[1])}))}function a(e,n,r){if("undefined"!=typeof document){if(o)if(r)s();else if(!1===r)return o.push([e,n]);if(!i){var a=r;r&&r.getRootNode&&(a=r.getRootNode())&&a!=r||(a=document);var l=a.ownerDocument||a;if(n&&t.hasCssString(n,a))return null;n&&(e+="\n/*# sourceURL=ace/css/"+n+" */");var c=t.createElement("style");c.appendChild(l.createTextNode(e)),n&&(c.id=n),a==l&&(a=t.getDocumentHead(l)),a.insertBefore(c,a.firstChild)}}}if(t.useStrictCSP=function(e){i=e,0==e?s():o||(o=[])},t.importCssString=a,t.importCssStylsheet=function(e,n){t.buildDom(["link",{rel:"stylesheet",href:e}],t.getDocumentHead(n))},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var i=t.createElement("ace_outer"),r=i.style;r.position="absolute",r.left="-10000px",r.overflow="hidden",r.width="200px",r.minWidth="0px",r.height="150px",r.display="block",i.appendChild(n);var o=e.documentElement;o.appendChild(i);var s=n.offsetWidth;r.overflow="scroll";var a=n.offsetWidth;return s==a&&(a=i.clientWidth),o.removeChild(i),s-a},t.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},t.setStyle=function(e,t,n){e[t]!==n&&(e[t]=n)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=!r.isWin||"undefined"!==typeof window&&window.devicePixelRatio>=1.5,r.isChromeOS&&(t.HI_DPI=!1),"undefined"!==typeof document){var l=document.createElement("div");t.HI_DPI&&void 0!==l.style.transform&&(t.HAS_CSS_TRANSFORMS=!0),r.isEdge||"undefined"===typeof l.style.animationName||(t.HAS_CSS_ANIMATION=!0),l=null}t.HAS_CSS_TRANSFORMS?t.translate=function(e,t,n){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(n)+"px)"}:t.translate=function(e,t,n){e.style.top=Math.round(n)+"px",e.style.left=Math.round(t)+"px"}})),ace.define("ace/lib/oop",["require","exports","module"],(function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}})),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],(function(e,t,n){"use strict";var i=e("./oop"),r=function(){var e,t,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(t in n.FUNCTION_KEYS)e=n.FUNCTION_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);for(t in n.PRINTABLE_KEYS)e=n.PRINTABLE_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);return i.mixin(n,n.MODIFIER_KEYS),i.mixin(n,n.PRINTABLE_KEYS),i.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var e=["cmd","ctrl","alt","shift"],t=Math.pow(2,e.length);t--;)n.KEY_MODS[t]=e.filter((function(e){return t&n.KEY_MODS[e]})).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();i.mixin(t,r),t.keyCodeToString=function(e){var t=r[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}})),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(e,t,n){"use strict";var i,r=e("./keys"),o=e("./useragent"),s=null,a=0;function l(){return void 0==i&&function(){i=!1;try{document.createComment("").addEventListener("test",(function(){}),{get passive(){i={passive:!1}}})}catch(e){}}(),i}function c(e,t,n){this.elem=e,this.type=t,this.callback=n}c.prototype.destroy=function(){d(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var u=t.addListener=function(e,t,n,i){e.addEventListener(t,n,l()),i&&i.$toDestroy.push(new c(e,t,n))},d=t.removeListener=function(e,t,n){e.removeEventListener(t,n,l())};t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation&&e.stopPropagation()},t.preventDefault=function(e){e.preventDefault&&e.preventDefault()},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||o.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.button},t.capture=function(e,t,n){var i=e&&e.ownerDocument||document;function r(e){t&&t(e),n&&n(e),d(i,"mousemove",t),d(i,"mouseup",r),d(i,"dragstart",r)}return u(i,"mousemove",t),u(i,"mouseup",r),u(i,"dragstart",r),r},t.addMouseWheelListener=function(e,t,n){"onmousewheel"in e?u(e,"mousewheel",(function(e){void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/8,e.wheelY=-e.wheelDeltaY/8):(e.wheelX=0,e.wheelY=-e.wheelDelta/8),t(e)}),n):"onwheel"in e?u(e,"wheel",(function(e){switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.35*e.deltaX||0,e.wheelY=.35*e.deltaY||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}t(e)}),n):u(e,"DOMMouseScroll",(function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),t(e)}),n)},t.addMultiMouseDownListener=function(e,n,i,r,s){var a,l,c,d=0,h={2:"dblclick",3:"tripleclick",4:"quadclick"};function f(e){if(0!==t.getButton(e)?d=0:e.detail>1?++d>4&&(d=1):d=1,o.isIE){var s=Math.abs(e.clientX-a)>5||Math.abs(e.clientY-l)>5;c&&!s||(d=1),c&&clearTimeout(c),c=setTimeout((function(){c=null}),n[d-1]||600),1==d&&(a=e.clientX,l=e.clientY)}if(e._clicks=d,i[r]("mousedown",e),d>4)d=0;else if(d>1)return i[r](h[d],e)}Array.isArray(e)||(e=[e]),e.forEach((function(e){u(e,"mousedown",f,s)}))};var h=function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)};function f(e,t,n){var i=h(t);if(!o.isMac&&s){if(t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(i|=8),s.altGr){if(3==(3&i))return;s.altGr=0}if(18===n||17===n){var l="location"in t?t.location:t.keyLocation;if(17===n&&1===l)1==s[n]&&(a=t.timeStamp);else if(18===n&&3===i&&2===l){t.timeStamp-a<50&&(s.altGr=!0)}}}if((n in r.MODIFIER_KEYS&&(n=-1),!i&&13===n)&&(3===(l="location"in t?t.location:t.keyLocation)&&(e(t,i,-n),t.defaultPrevented)))return;if(o.isChromeOS&&8&i){if(e(t,i,n),t.defaultPrevented)return;i&=-9}return!!(i||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS)&&e(t,i,n)}function p(){s=Object.create(null)}if(t.getModifierString=function(e){return r.KEY_MODS[h(e)]},t.addCommandKeyListener=function(e,n,i){if(o.isOldGecko||o.isOpera&&!("KeyboardEvent"in window)){var r=null;u(e,"keydown",(function(e){r=e.keyCode}),i),u(e,"keypress",(function(e){return f(n,e,r)}),i)}else{var a=null;u(e,"keydown",(function(e){s[e.keyCode]=(s[e.keyCode]||0)+1;var t=f(n,e,e.keyCode);return a=e.defaultPrevented,t}),i),u(e,"keypress",(function(e){a&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),a=null)}),i),u(e,"keyup",(function(e){s[e.keyCode]=null}),i),s||(p(),u(window,"focus",p))}},"object"==typeof window&&window.postMessage&&!o.isOldIE){var g=1;t.nextTick=function(e,n){n=n||window;var i="zero-timeout-message-"+g++;u(n,"message",(function r(o){o.data==i&&(t.stopPropagation(o),d(n,"message",r),e())})),n.postMessage(i,"*")}}t.$idleBlocked=!1,t.onIdle=function(e,n){return setTimeout((function n(){t.$idleBlocked?setTimeout(n,100):e()}),n)},t.$idleBlockId=null,t.blockIdle=function(e){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout((function(){t.$idleBlocked=!1}),e||100)},t.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}})),ace.define("ace/range",["require","exports","module"],(function(e,t,n){"use strict";var i=function(e,t,n,i){this.start={row:e,column:t},this.end={row:n,column:i}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,n=e.end,i=e.start;return 1==(t=this.compare(n.row,n.column))?1==(t=this.compare(i.row,i.column))?2:0==t?1:0:-1==t?-2:-1==(t=this.compare(i.row,i.column))?-1:1==t?42:0},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)n={row:e,column:0};if(this.start.row>t)var r={row:t+1,column:0};else if(this.start.row<e)r={row:e,column:0};return i.fromPoints(r||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(0==n)return this;if(-1==n)var r={row:e,column:t};else var o={row:e,column:t};return i.fromPoints(r||this.start,o||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i})),ace.define("ace/lib/lang",["require","exports","module"],(function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n};var i=/^\s\s*/,r=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(i,"")},t.stringTrimRight=function(e){return e.replace(r,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,i=e.length;n<i;n++)e[n]&&"object"==typeof e[n]?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function e(t){if("object"!==typeof t||!t)return t;var n;if(Array.isArray(t)){n=[];for(var i=0;i<t.length;i++)n[i]=e(t[i]);return n}if("[object Object]"!==Object.prototype.toString.call(t))return t;for(var i in n={},t)n[i]=e(t[i]);return n},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,(function(e){n.push({offset:arguments[arguments.length-2],length:e.length})})),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},i=function e(i){return e.cancel(),t=setTimeout(n,i||0),e};return i.schedule=i,i.call=function(){return this.cancel(),e(),i},i.cancel=function(){return clearTimeout(t),t=null,i},i.isPending=function(){return t},i},t.delayedCall=function(e,t){var n=null,i=function(){n=null,e()},r=function(e){null==n&&(n=setTimeout(i,e||t))};return r.delay=function(e){n&&clearTimeout(n),n=setTimeout(i,e||t)},r.schedule=r,r.call=function(){this.cancel(),e()},r.cancel=function(){n&&clearTimeout(n),n=null},r.isPending=function(){return n},r}})),ace.define("ace/clipboard",["require","exports","module"],(function(e,t,n){"use strict";var i;n.exports={lineMode:!1,pasteCancelled:function(){return!!(i&&i>Date.now()-50)||(i=!1)},cancel:function(){i=Date.now()}}})),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],(function(e,t,n){"use strict";var i=e("../lib/event"),r=e("../lib/useragent"),o=e("../lib/dom"),s=e("../lib/lang"),a=e("../clipboard"),l=r.isChrome<18,c=r.isIE,u=r.isChrome>63,d=400,h=e("../lib/keys"),f=h.KEY_MODS,p=r.isIOS,g=p?/\s/:/\n/,m=r.isMobile;t.TextInput=function(e,t){var n=o.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",e.insertBefore(n,e.firstChild);var v=!1,y=!1,b=!1,w=!1,_="";m||(n.style.fontSize="1px");var x=!1,k=!1,C="",S=0,E=0,O=0;try{var A=document.activeElement===n}catch(q){}i.addListener(n,"blur",(function(e){k||(t.onBlur(e),A=!1)}),t),i.addListener(n,"focus",(function(e){if(!k){if(A=!0,r.isEdge)try{if(!document.hasFocus())return}catch(e){}t.onFocus(e),r.isEdge?setTimeout(M):M()}}),t),this.$focusScroll=!1,this.focus=function(){if(_||u||"browser"==this.$focusScroll)return n.focus({preventScroll:!0});var e=n.style.top;n.style.position="fixed",n.style.top="0px";try{var t=0!=n.getBoundingClientRect().top}catch(q){return}var i=[];if(t)for(var r=n.parentElement;r&&1==r.nodeType;)i.push(r),r.setAttribute("ace_nocontext",!0),r=!r.parentElement&&r.getRootNode?r.getRootNode().host:r.parentElement;n.focus({preventScroll:!0}),t&&i.forEach((function(e){e.removeAttribute("ace_nocontext")})),setTimeout((function(){n.style.position="","0px"==n.style.top&&(n.style.top=e)}),0)},this.blur=function(){n.blur()},this.isFocused=function(){return A},t.on("beforeEndOperation",(function(){var e=t.curOp,i=e&&e.command&&e.command.name;if("insertstring"!=i){var r=i&&(e.docChanged||e.selectionChanged);b&&r&&(C=n.value="",B()),M()}}));var M=p?function(e){if(A&&(!v||e)&&!w){e||(e="");var i="\n ab"+e+"cde fg\n";i!=n.value&&(n.value=C=i);var r=4+(e.length||(t.selection.isEmpty()?0:1));4==S&&E==r||n.setSelectionRange(4,r),S=4,E=r}}:function(){if(!b&&!w&&(A||T)){b=!0;var e=0,i=0,r="";if(t.session){var o=t.selection,s=o.getRange(),a=o.cursor.row;if(e=s.start.column,i=s.end.column,r=t.session.getLine(a),s.start.row!=a){var l=t.session.getLine(a-1);e=s.start.row<a-1?0:e,i+=l.length+1,r=l+"\n"+r}else if(s.end.row!=a){var c=t.session.getLine(a+1);i=s.end.row>a+1?c.length:i,i+=r.length+1,r=r+"\n"+c}else m&&a>0&&(r="\n"+r,i+=1,e+=1);r.length>d&&(e<d&&i<d?r=r.slice(0,d):(r="\n",e==i?e=i=0:(e=0,i=1)))}var u=r+"\n\n";if(u!=C&&(n.value=C=u,S=E=u.length),T&&(S=n.selectionStart,E=n.selectionEnd),E!=i||S!=e||n.selectionEnd!=E)try{n.setSelectionRange(e,i),S=e,E=i}catch(q){}b=!1}};this.resetSelection=M,A&&t.onFocus();var R=null;this.setInputHandler=function(e){R=e},this.getInputHandler=function(){return R};var T=!1,D=function(e,i){if(T&&(T=!1),y)return M(),e&&t.onPaste(e),y=!1,"";for(var o=n.selectionStart,s=n.selectionEnd,a=S,l=C.length-E,c=e,u=e.length-o,d=e.length-s,h=0;a>0&&C[h]==e[h];)h++,a--;for(c=c.slice(h),h=1;l>0&&C.length-h>S-1&&C[C.length-h]==e[e.length-h];)h++,l--;u-=h-1,d-=h-1;var f=c.length-h+1;if(f<0&&(a=-f,f=0),c=c.slice(0,f),!i&&!c&&!u&&!a&&!l&&!d)return"";w=!0;var p=!1;return r.isAndroid&&". "==c&&(c="  ",p=!0),c&&!a&&!l&&!u&&!d||x?t.onTextInput(c):t.onTextInput(c,{extendLeft:a,extendRight:l,restoreStart:u,restoreEnd:d}),w=!1,C=e,S=o,E=s,O=d,p?"\n":c},I=function(e){if(b)return j();if(e&&e.inputType){if("historyUndo"==e.inputType)return t.execCommand("undo");if("historyRedo"==e.inputType)return t.execCommand("redo")}var i=n.value,r=D(i,!0);(i.length>500||g.test(r)||m&&S<1&&S==E)&&M()},L=function e(t,n,i){var r=t.clipboardData||window.clipboardData;if(r&&!l){var o=c||i?"Text":"text/plain";try{return n?!1!==r.setData(o,n):r.getData(o)}catch(t){if(!i)return e(t,n,!0)}}},N=function(e,r){var o=t.getCopyText();if(!o)return i.preventDefault(e);L(e,o)?(p&&(M(o),v=o,setTimeout((function(){v=!1}),10)),r?t.onCut():t.onCopy(),i.preventDefault(e)):(v=!0,n.value=o,n.select(),setTimeout((function(){v=!1,M(),r?t.onCut():t.onCopy()})))},F=function(e){N(e,!0)},$=function(e){N(e,!1)},P=function(e){var o=L(e);a.pasteCancelled()||("string"==typeof o?(o&&t.onPaste(o,e),r.isIE&&setTimeout(M),i.preventDefault(e)):(n.value="",y=!0))};i.addCommandKeyListener(n,t.onCommandKey.bind(t),t),i.addListener(n,"select",(function(e){b||(v?v=!1:!function(e){return 0===e.selectionStart&&e.selectionEnd>=C.length&&e.value===C&&C&&e.selectionEnd!==E}(n)?m&&n.selectionStart!=S&&M():(t.selectAll(),M()))}),t),i.addListener(n,"input",I,t),i.addListener(n,"cut",F,t),i.addListener(n,"copy",$,t),i.addListener(n,"paste",P,t),"oncut"in n&&"oncopy"in n&&"onpaste"in n||i.addListener(e,"keydown",(function(e){if((!r.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:$(e);break;case 86:P(e);break;case 88:F(e)}}),t);var j=function(){if(b&&t.onCompositionUpdate&&!t.$readOnly){if(x)return z();if(b.useTextareaForIME)t.onCompositionUpdate(n.value);else{var e=n.value;D(e),b.markerRange&&(b.context&&(b.markerRange.start.column=b.selectionStart=b.context.compositionStartOffset),b.markerRange.end.column=b.markerRange.start.column+E-b.selectionStart+O)}}},B=function(e){t.onCompositionEnd&&!t.$readOnly&&(b=!1,t.onCompositionEnd(),t.off("mousedown",z),e&&I())};function z(){k=!0,n.blur(),n.focus(),k=!1}var U,V=s.delayedCall(j,50).schedule.bind(null,null);function W(){clearTimeout(U),U=setTimeout((function(){_&&(n.style.cssText=_,_=""),t.renderer.$isMousePressed=!1,t.renderer.$keepTextAreaAtCursor&&t.renderer.$moveTextAreaToCursor()}),0)}i.addListener(n,"compositionstart",(function(e){if(!b&&t.onCompositionStart&&!t.$readOnly&&(b={},!x)){e.data&&(b.useTextareaForIME=!1),setTimeout(j,0),t._signal("compositionStart"),t.on("mousedown",z);var i=t.getSelectionRange();i.end.row=i.start.row,i.end.column=i.start.column,b.markerRange=i,b.selectionStart=S,t.onCompositionStart(b),b.useTextareaForIME?(C=n.value="",S=0,E=0):(n.msGetInputContext&&(b.context=n.msGetInputContext()),n.getInputContext&&(b.context=n.getInputContext()))}}),t),i.addListener(n,"compositionupdate",j,t),i.addListener(n,"keyup",(function(e){27==e.keyCode&&n.value.length<n.selectionStart&&(b||(C=n.value),S=E=-1,M()),V()}),t),i.addListener(n,"keydown",V,t),i.addListener(n,"compositionend",B,t),this.getElement=function(){return n},this.setCommandMode=function(e){x=e,n.readOnly=!1},this.setReadOnly=function(e){x||(n.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){T=!0,M(),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,s){_||(_=n.style.cssText),n.style.cssText=(s?"z-index:100000;":"")+(r.isIE?"opacity:0.1;":"")+"text-indent: -"+(S+E)*t.renderer.characterWidth*.5+"px;";var a=t.container.getBoundingClientRect(),l=o.computedStyle(t.container),c=a.top+(parseInt(l.borderTopWidth)||0),u=a.left+(parseInt(a.borderLeftWidth)||0),d=a.bottom-c-n.clientHeight-2,h=function(e){o.translate(n,e.clientX-u-2,Math.min(e.clientY-c-2,d))};h(e),"mousedown"==e.type&&(t.renderer.$isMousePressed=!0,clearTimeout(U),r.isWin&&i.capture(t.container,h,W))},this.onContextMenuClose=W;var H=function(e){t.textInput.onContextMenu(e),W()};i.addListener(n,"mouseup",H,t),i.addListener(n,"mousedown",(function(e){e.preventDefault(),W()}),t),i.addListener(t.renderer.scroller,"contextmenu",H,t),i.addListener(n,"contextmenu",H,t),p&&function(e,t,n){var i=null,r=!1;n.addEventListener("keydown",(function(e){i&&clearTimeout(i),r=!0}),!0),n.addEventListener("keyup",(function(e){i=setTimeout((function(){r=!1}),100)}),!0);var o=function(e){if(document.activeElement===n&&!(r||b||t.$mouseHandler.isMousePressed)&&!v){var i=n.selectionStart,o=n.selectionEnd,s=null,a=0;if(0==i?s=h.up:1==i?s=h.home:o>E&&"\n"==C[o]?s=h.end:i<S&&" "==C[i-1]?(s=h.left,a=f.option):i<S||i==S&&E!=S&&i==o?s=h.left:o>E&&C.slice(0,o).split("\n").length>2?s=h.down:o>E&&" "==C[o-1]?(s=h.right,a=f.option):(o>E||o==E&&E!=S&&i==o)&&(s=h.right),i!==o&&(a|=f.shift),s){if(!t.onCommandKey({},a,s)&&t.commands){s=h.keyCodeToString(s);var l=t.commands.findKeyCommand(a,s);l&&t.execCommand(l)}S=i,E=o,M("")}}};document.addEventListener("selectionchange",o),t.on("destroy",(function(){document.removeEventListener("selectionchange",o)}))}(0,t,n)},t.$setUserAgentForTests=function(e,t){m=e,p=t}})),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("../lib/useragent");function r(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(t){e[t]=this[t]}),this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function o(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)n=2*t.row-e.start.row-e.end.row;else var n=t.column-4;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var r=this.editor,o=e.getButton();return 0!==o?((r.getSelectionRange().isEmpty()||1==o)&&r.selection.moveToPosition(n),void(2==o&&(r.textInput.onContextMenu(e.domEvent),i.isMozilla||e.preventDefault()))):(this.mousedownEvent.time=Date.now(),!t||r.isFocused()||(r.focus(),!this.$focusTimeout||this.$clickSelection||r.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e)))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(-1==i)e=this.$clickSelection.end;else if(1==i)e=this.$clickSelection.start;else{var r=o(this.$clickSelection,n);n=r.cursor,e=r.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,i=n.renderer.screenToTextCoordinates(this.x,this.y),r=n.selection[e](i.row,i.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(r.start),a=this.$clickSelection.comparePoint(r.end);if(-1==s&&a<=0)t=this.$clickSelection.end,r.end.row==i.row&&r.end.column==i.column||(i=r.start);else if(1==a&&s>=0)t=this.$clickSelection.start,r.start.row==i.row&&r.start.column==i.column||(i=r.end);else if(-1==s&&1==a)i=r.end,t=r.start;else{var l=o(this.$clickSelection,i);i=l.cursor,t=l.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(i),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e,t,n,i,r=(e=this.mousedownEvent.x,t=this.mousedownEvent.y,n=this.x,i=this.y,Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))),o=Date.now();(r>0||o-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,i=n.session.getBracketRange(t);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();i.isMultiLine()&&i.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(i.start.row),this.$clickSelection.end=n.selection.getLineRange(i.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,i=e.domEvent.timeStamp,r=i-n.t,o=r?e.wheelX/r:n.vx,s=r?e.wheelY/r:n.vy;r<550&&(o=(o+n.vx)/2,s=(s+n.vy)/2);var a=Math.abs(o/s),l=!1;if(a>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(l=!0),a<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(l=!0),l)n.allowed=i;else if(i-n.allowed<550){Math.abs(o)<=1.5*Math.abs(n.vx)&&Math.abs(s)<=1.5*Math.abs(n.vy)?(l=!0,n.allowed=i):n.allowed=0}return n.t=i,n.vx=o,n.vy=s,l?(t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}}).call(r.prototype),t.DefaultHandlers=r})),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],(function(e,t,n){"use strict";e("./lib/oop");var i=e("./lib/dom");function r(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){i.addCssClass(this.getElement(),e)},this.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(r.prototype),t.Tooltip=r})),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],(function(e,t,n){"use strict";var i=e("../lib/dom"),r=e("../lib/oop"),o=e("../lib/event"),s=e("../tooltip").Tooltip;function a(e){s.call(this,e)}r.inherits(a,s),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,r=this.getWidth(),o=this.getHeight();(e+=15)+r>n&&(e-=e+r-n),(t+=15)+o>i&&(t-=20+o),s.prototype.setPosition.call(this,e,t)}}.call(a.prototype),t.GutterHandler=function(e){var t,n,r,s=e.editor,l=s.renderer.$gutterLayer,c=new a(s.container);function u(){t&&(t=clearTimeout(t)),r&&(c.hide(),r=null,s._signal("hideGutterTooltip",c),s.off("mousewheel",u))}function d(e){c.setPosition(e.x,e.y)}e.editor.setDefaultHandler("guttermousedown",(function(t){if(s.isFocused()&&0==t.getButton()&&"foldWidgets"!=l.getRegion(t)){var n=t.getDocumentPosition().row,i=s.session.selection;if(t.getShiftKey())i.selectTo(n,0);else{if(2==t.domEvent.detail)return s.selectAll(),t.preventDefault();e.$clickSelection=s.selection.getLineRange(n)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}})),e.editor.setDefaultHandler("guttermousemove",(function(o){var a=o.domEvent.target||o.domEvent.srcElement;if(i.hasCssClass(a,"ace_fold-widget"))return u();r&&e.$tooltipFollowsMouse&&d(o),n=o,t||(t=setTimeout((function(){t=null,n&&!e.isMousePressed?function(){var t=n.getDocumentPosition().row,i=l.$annotations[t];if(!i)return u();if(t==s.session.getLength()){var o=s.renderer.pixelToScreenCoordinates(0,n.y).row,a=n.$pos;if(o>s.session.documentToScreenRow(a.row,a.column))return u()}if(r!=i)if(r=i.text.join("<br/>"),c.setHtml(r),c.show(),s._signal("showGutterTooltip",c),s.on("mousewheel",u),e.$tooltipFollowsMouse)d(n);else{var h=n.domEvent.target.getBoundingClientRect(),f=c.getElement().style;f.left=h.right+"px",f.top=h.bottom+"px"}}():u()}),50))})),o.addListener(s.renderer.$gutter,"mouseout",(function(e){n=null,r&&!t&&(t=setTimeout((function(){t=null,u()}),50))}),s),s.on("changeSession",u)}})),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("../lib/event"),r=e("../lib/useragent"),o=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var t=this.getDocumentPosition();this.$inSelection=e.contains(t.row,t.column)}return this.$inSelection},this.getButton=function(){return i.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=r.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(o.prototype)})),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("../lib/dom"),r=e("../lib/event"),o=e("../lib/useragent");function s(e){var t=e.editor,n=i.createElement("div");n.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",n.textContent="\xa0";["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(t){e[t]=this[t]}),this),t.on("mousedown",this.onMouseDown.bind(e));var s,l,c,u,d,h,f,p,g,m,v,y=t.container,b=0;function w(){var e=h;(function(e,n){var i=Date.now(),r=!n||e.row!=n.row,o=!n||e.column!=n.column;!m||r||o?(t.moveCursorToPosition(e),m=i,v={x:l,y:c}):a(v.x,v.y,l,c)>5?m=null:i-m>=200&&(t.renderer.scrollCursorIntoView(),m=null)})(h=t.renderer.screenToTextCoordinates(l,c),e),function(e,n){var i=Date.now(),r=t.renderer.layerConfig.lineHeight,o=t.renderer.layerConfig.characterWidth,s=t.renderer.scroller.getBoundingClientRect(),a={x:{left:l-s.left,right:s.right-l},y:{top:c-s.top,bottom:s.bottom-c}},u=Math.min(a.x.left,a.x.right),d=Math.min(a.y.top,a.y.bottom),h={row:e.row,column:e.column};u/o<=2&&(h.column+=a.x.left<a.x.right?-3:2),d/r<=1&&(h.row+=a.y.top<a.y.bottom?-1:1);var f=e.row!=h.row,p=e.column!=h.column,m=!n||e.row!=n.row;f||p&&!m?g?i-g>=200&&t.renderer.scrollCursorIntoView(h):g=i:g=null}(h,e)}function _(){d=t.selection.toOrientedRange(),s=t.session.addMarker(d,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(u),w(),u=setInterval(w,20),b=0,r.addListener(document,"mousemove",C)}function x(){clearInterval(u),t.session.removeMarker(s),s=null,t.selection.fromOrientedRange(d),t.isFocused()&&!p&&t.$resetCursorStyle(),d=null,h=null,b=0,g=null,m=null,r.removeListener(document,"mousemove",C)}this.onDragStart=function(e){if(this.cancelDrag||!y.draggable){var i=this;return setTimeout((function(){i.startSelect(),i.captureMouse(e)}),0),e.preventDefault()}d=t.getSelectionRange();var r=e.dataTransfer;r.effectAllowed=t.getReadOnly()?"copy":"copyMove",t.container.appendChild(n),r.setDragImage&&r.setDragImage(n,0,0),setTimeout((function(){t.container.removeChild(n)})),r.clearData(),r.setData("Text",t.session.getTextRange()),p=!0,this.setState("drag")},this.onDragEnd=function(e){if(y.draggable=!1,p=!1,this.setState(null),!t.getReadOnly()){var n=e.dataTransfer.dropEffect;f||"move"!=n||t.session.remove(t.getSelectionRange()),t.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!t.getReadOnly()&&S(e.dataTransfer))return l=e.clientX,c=e.clientY,s||_(),b++,e.dataTransfer.dropEffect=f=E(e),r.preventDefault(e)},this.onDragOver=function(e){if(!t.getReadOnly()&&S(e.dataTransfer))return l=e.clientX,c=e.clientY,s||(_(),b++),null!==k&&(k=null),e.dataTransfer.dropEffect=f=E(e),r.preventDefault(e)},this.onDragLeave=function(e){if(--b<=0&&s)return x(),f=null,r.preventDefault(e)},this.onDrop=function(e){if(h){var n=e.dataTransfer;if(p)switch(f){case"move":d=d.contains(h.row,h.column)?{start:h,end:h}:t.moveText(d,h);break;case"copy":d=t.moveText(d,h,!0)}else{var i=n.getData("Text");d={start:h,end:t.session.insert(h,i)},t.focus(),f=null}return x(),r.preventDefault(e)}},r.addListener(y,"dragstart",this.onDragStart.bind(e),t),r.addListener(y,"dragend",this.onDragEnd.bind(e),t),r.addListener(y,"dragenter",this.onDragEnter.bind(e),t),r.addListener(y,"dragover",this.onDragOver.bind(e),t),r.addListener(y,"dragleave",this.onDragLeave.bind(e),t),r.addListener(y,"drop",this.onDrop.bind(e),t);var k=null;function C(){null==k&&(k=setTimeout((function(){null!=k&&s&&x()}),20))}function S(e){var t=e.types;return!t||Array.prototype.some.call(t,(function(e){return"text/plain"==e||"Text"==e}))}function E(e){var t=["copy","copymove","all","uninitialized"],n=o.isMac?e.altKey:e.ctrlKey,i="uninitialized";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var r="none";return n&&t.indexOf(i)>=0?r="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(i)>=0?r="move":t.indexOf(i)>=0&&(r="copy"),r}}function a(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor;e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var t=o.isWin?"default":"move";e.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;o.isIE&&"dragReady"==this.state&&(a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&t.dragDrop());"dragWait"===this.state&&(a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition())))},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),i=e.getButton();if(1===(e.domEvent.detail||1)&&0===i&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var r=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in r&&(r.unselectable="on"),t.getDragDelay()){if(o.isWebKit)this.cancelDrag=!0,t.container.draggable=!0;this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(s.prototype),t.DragdropHandler=s})),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("./mouse_event").MouseEvent,r=e("../lib/event"),o=e("../lib/dom");t.addTouchListeners=function(e,t){var n,s,a,l,c,u,d,h,f,p="scroll",g=0,m=0,v=0,y=0;function b(){var e=window.navigator&&window.navigator.clipboard,n=!1,i=function(i){var r=i.target.getAttribute("action");if("more"==r||!n)return n=!n,function(){var i=t.getCopyText(),r=t.session.getUndoManager().hasUndo();f.replaceChild(o.buildDom(n?["span",!i&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],i&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],i&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],e&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],r&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),f.firstChild)}();"paste"==r?e.readText().then((function(e){t.execCommand(r,e)})):r&&("cut"!=r&&"copy"!=r||(e?e.writeText(t.getCopyText()):document.execCommand("copy")),t.execCommand(r)),f.firstChild.style.display="none",n=!1,"openCommandPallete"!=r&&t.focus()};f=o.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(e){p="menu",e.stopPropagation(),e.preventDefault(),t.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),i(e)},onclick:i},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],t.container)}function w(){f||b();var e=t.selection.cursor,n=t.renderer.textToScreenCoordinates(e.row,e.column),i=t.renderer.textToScreenCoordinates(0,0).pageX,r=t.renderer.scrollLeft,o=t.container.getBoundingClientRect();f.style.top=n.pageY-o.top-3+"px",n.pageX-o.left<o.width-70?(f.style.left="",f.style.right="10px"):(f.style.right="",f.style.left=i+r-o.left+"px"),f.style.display="",f.firstChild.style.display="none",t.on("input",_)}function _(e){f&&(f.style.display="none"),t.off("input",_)}function x(){c=null,clearTimeout(c);var e=t.selection.getRange(),n=e.contains(d.row,d.column);!e.isEmpty()&&n||(t.selection.moveToPosition(d),t.selection.selectWord()),p="wait",w()}r.addListener(e,"contextmenu",(function(e){h&&t.textInput.getElement().focus()}),t),r.addListener(e,"touchstart",(function(e){var r=e.touches;if(c||r.length>1)return clearTimeout(c),c=null,a=-1,void(p="zoom");h=t.$mouseHandler.isMousePressed=!0;var o=t.renderer.layerConfig.lineHeight,u=t.renderer.layerConfig.lineHeight,f=e.timeStamp;l=f;var b=r[0],w=b.clientX,_=b.clientY;Math.abs(n-w)+Math.abs(s-_)>o&&(a=-1),n=e.clientX=w,s=e.clientY=_,v=y=0;var k=new i(e,t);if(d=k.getDocumentPosition(),f-a<500&&1==r.length&&!g)m++,e.preventDefault(),e.button=0,function(){c=null,clearTimeout(c),t.selection.moveToPosition(d);var e=m>=2?t.selection.getLineRange(d.row):t.session.getBracketRange(d);e&&!e.isEmpty()?t.selection.setRange(e):t.selection.selectWord(),p="wait"}();else{m=0;var C=t.selection.cursor,S=t.selection.isEmpty()?C:t.selection.anchor,E=t.renderer.$cursorLayer.getPixelPosition(C,!0),O=t.renderer.$cursorLayer.getPixelPosition(S,!0),A=t.renderer.scroller.getBoundingClientRect(),M=t.renderer.layerConfig.offset,R=t.renderer.scrollLeft,T=function(e,t){return(e/=u)*e+(t=t/o-.75)*t};if(e.clientX<A.left)return void(p="zoom");var D=T(e.clientX-A.left-E.left+R,e.clientY-A.top-E.top+M),I=T(e.clientX-A.left-O.left+R,e.clientY-A.top-O.top+M);D<3.5&&I<3.5&&(p=D>I?"cursor":"anchor"),p=I<3.5?"anchor":D<3.5?"cursor":"scroll",c=setTimeout(x,450)}a=f}),t),r.addListener(e,"touchend",(function(e){h=t.$mouseHandler.isMousePressed=!1,u&&clearInterval(u),"zoom"==p?(p="",g=0):c?(t.selection.moveToPosition(d),g=0,w()):"scroll"==p?(g+=60,u=setInterval((function(){g--<=0&&(clearInterval(u),u=null),Math.abs(v)<.01&&(v=0),Math.abs(y)<.01&&(y=0),g<20&&(v*=.9),g<20&&(y*=.9);var e=t.session.getScrollTop();t.renderer.scrollBy(10*v,10*y),e==t.session.getScrollTop()&&(g=0)}),10),_()):w(),clearTimeout(c),c=null}),t),r.addListener(e,"touchmove",(function(e){c&&(clearTimeout(c),c=null);var r=e.touches;if(!(r.length>1||"zoom"==p)){var o=r[0],a=n-o.clientX,u=s-o.clientY;if("wait"==p){if(!(a*a+u*u>4))return e.preventDefault();p="cursor"}n=o.clientX,s=o.clientY,e.clientX=o.clientX,e.clientY=o.clientY;var d=e.timeStamp,h=d-l;if(l=d,"scroll"==p){var f=new i(e,t);f.speed=1,f.wheelX=a,f.wheelY=u,10*Math.abs(a)<Math.abs(u)&&(a=0),10*Math.abs(u)<Math.abs(a)&&(u=0),0!=h&&(v=a/h,y=u/h),t._emit("mousewheel",f),f.propagationStopped||(v=y=0)}else{var g=new i(e,t).getDocumentPosition();"cursor"==p?t.selection.moveCursorToPosition(g):"anchor"==p&&t.selection.setSelectionAnchor(g.row,g.column),t.renderer.scrollCursorIntoView(g),e.preventDefault()}}}),t)}})),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=i.getDocumentHead(),r=document.createElement("script");r.src=e,n.appendChild(r),r.onload=r.onreadystatechange=function(e,n){!n&&r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(r=r.onload=r.onreadystatechange=null,n||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}})),ace.define("ace/lib/event_emitter",["require","exports","module"],(function(e,t,n){"use strict";var i={},r=function(){this.propagationStopped=!0},o=function(){this.defaultPrevented=!0};i._emit=i._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],i=this._defaultHandlers[e];if(n.length||i){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=r),t.preventDefault||(t.preventDefault=o),n=n.slice();for(var s=0;s<n.length&&(n[s](t,this),!t.propagationStopped);s++);return i&&!t.defaultPrevented?i(t,this):void 0}},i._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var i=0;i<n.length;i++)n[i](t,this)}},i.once=function(e,t){var n=this;if(this.on(e,(function i(){n.off(e,i),t.apply(null,arguments)})),!t)return new Promise((function(e){t=e}))},i.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[e]){var i=n[e],r=n._disabled_[e];r||(n._disabled_[e]=r=[]),r.push(i);var o=r.indexOf(t);-1!=o&&r.splice(o,1)}n[e]=t},i.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var i=n._disabled_[e];if(n[e]==t)i&&this.setDefaultHandler(e,i.pop());else if(i){var r=i.indexOf(t);-1!=r&&i.splice(r,1)}}},i.on=i.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[e];return i||(i=this._eventRegistry[e]=[]),-1==i.indexOf(t)&&i[n?"unshift":"push"](t),t},i.off=i.removeListener=i.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}},i.removeAllListeners=function(e){e||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[e]=void 0),this._defaultHandlers&&(this._defaultHandlers[e]=void 0)},t.EventEmitter=i})),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,n){var i=e("./oop"),r=e("./event_emitter").EventEmitter,o={setOptions:function(e){Object.keys(e).forEach((function(t){this.setOption(t,e[t])}),this)},getOptions:function(e){var t={};if(e)Array.isArray(e)||(t=e,e=Object.keys(t));else{var n=this.$options;e=Object.keys(n).filter((function(e){return!n[e].hidden}))}return e.forEach((function(e){t[e]=this.getOption(e)}),this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];if(!n)return s('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:s('misspelled option "'+e+'"')}};function s(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function a(e,t){var n=new Error(e);n.data=t,"object"==typeof console&&console.error&&console.error(n),setTimeout((function(){throw n}))}var l=function(){this.$defaultOptions={}};(function(){i.implement(this,r),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach((function(t){var i=n[t];"string"==typeof i&&(i={forwardTo:i}),i.name||(i.name=t),e.$options[i.name]=i,"initialValue"in i&&(e["$"+i.name]=i.initialValue)})),i.implement(e,o),this},this.resetOptions=function(e){Object.keys(e.$options).forEach((function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)}))},this.setDefaultValue=function(e,t,n){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var i=this.$defaultOptions[e]||(this.$defaultOptions[e]={});i[t]&&(i.forwardTo?this.setDefaultValue(i.forwardTo,t,n):i[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach((function(n){this.setDefaultValue(e,n,t[n])}),this)},this.warn=s,this.reportError=a}).call(l.prototype),t.AppConfig=l})),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/dom","ace/lib/app_config"],(function(e,t,i){var r=e("./lib/lang"),o=(e("./lib/oop"),e("./lib/net")),s=e("./lib/dom"),a=e("./lib/app_config").AppConfig;i.exports=t=new a;var l=function(){return this||"undefined"!=typeof window&&window}(),c={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(e){if(!c.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return c[e]},t.set=function(e,t){if(c.hasOwnProperty(e))c[e]=t;else if(0==this.setDefaultValue("",e,t))throw new Error("Unknown config key: "+e);"useStrictCSP"==e&&s.useStrictCSP(t)},t.all=function(){return r.copyObject(c)},t.$modes={},t.moduleUrl=function(e,t){if(c.$moduleUrls[e])return c.$moduleUrls[e];var n=e.split("/"),i="snippets"==(t=t||n[n.length-2]||"")?"/":"-",r=n[n.length-1];if("worker"==t&&"-"==i){var o=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");r=r.replace(o,"")}(!r||r==t)&&n.length>1&&(r=n[n.length-2]);var s=c[t+"Path"];return null==s?s=c.basePath:"/"==i&&(t=i=""),s&&"/"!=s.slice(-1)&&(s+="/"),s+t+i+r+this.get("suffix")},t.setModuleUrl=function(e,t){return c.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,i){var r,s;Array.isArray(n)&&(s=n[0],n=n[1]);try{r=e(n)}catch(l){}if(r&&!t.$loading[n])return i&&i(r);if(t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(i),!(t.$loading[n].length>1)){var a=function(){e([n],(function(e){t._emit("load.module",{name:n,module:e});var i=t.$loading[n];t.$loading[n]=null,i.forEach((function(t){t&&t(e)}))}))};if(!t.get("packaged"))return a();o.loadScript(t.moduleUrl(n,s),a),u()}};var u=function(){c.basePath||c.workerPath||c.modePath||c.themePath||Object.keys(c.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),u=function(){})};function d(r){if(l&&l.document){c.packaged=r||e.packaged||i.packaged||l.define&&n.amdD.packaged;for(var o,s={},a="",u=document.currentScript||document._currentScript,d=(u&&u.ownerDocument||document).getElementsByTagName("script"),h=0;h<d.length;h++){var f=d[h],p=f.src||f.getAttribute("src");if(p){for(var g=f.attributes,m=0,v=g.length;m<v;m++){var y=g[m];0===y.name.indexOf("data-ace-")&&(s[(o=y.name.replace(/^data-ace-/,""),o.replace(/-(.)/g,(function(e,t){return t.toUpperCase()})))]=y.value)}var b=p.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(a=b[1])}}for(var w in a&&(s.base=s.base||a,s.packaged=!0),s.basePath=s.base,s.workerPath=s.workerPath||s.base,s.modePath=s.modePath||s.base,s.themePath=s.themePath||s.base,delete s.base,s)"undefined"!==typeof s[w]&&t.set(w,s[w])}}d(!0),t.init=d,t.version="1.4.14"})),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],(function(e,t,n){"use strict";var i=e("../lib/event"),r=e("../lib/useragent"),o=e("./default_handlers").DefaultHandlers,s=e("./default_gutter_handler").GutterHandler,a=e("./mouse_event").MouseEvent,l=e("./dragdrop_handler").DragdropHandler,c=e("./touch_handler").addTouchListeners,u=e("../config"),d=function(e){var t=this;this.editor=e,new o(this),new s(this),new l(this);var n=function(t){(!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement()))&&window.focus(),e.focus()},a=e.renderer.getMouseEventTarget();i.addListener(a,"click",this.onMouseEvent.bind(this,"click"),e),i.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove"),e),i.addMultiMouseDownListener([a,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",e),i.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"),e),c(e.container,e);var u=e.renderer.$gutter;i.addListener(u,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),e),i.addListener(u,"click",this.onMouseEvent.bind(this,"gutterclick"),e),i.addListener(u,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),e),i.addListener(u,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),e),i.addListener(a,"mousedown",n,e),i.addListener(u,"mousedown",n,e),r.isIE&&e.renderer.scrollBarV&&(i.addListener(e.renderer.scrollBarV.element,"mousedown",n,e),i.addListener(e.renderer.scrollBarH.element,"mousedown",n,e)),e.on("mousemove",(function(n){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var i=e.renderer.screenToTextCoordinates(n.x,n.y),r=e.session.selection.getRange(),o=e.renderer;!r.isEmpty()&&r.insideStart(i.row,i.column)?o.setCursorStyle("default"):o.setCursorStyle("")}}),e)};(function(){this.onMouseEvent=function(e,t){this.editor.session&&this.editor._emit(e,new a(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new a(t,this.editor))},this.onMouseWheel=function(e,t){var n=new a(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor,o=this.editor.renderer;o.$isMousePressed=!0;var s=this,l=function(e){if(e){if(r.isWebKit&&!e.which&&s.releaseMouse)return s.releaseMouse();s.x=e.clientX,s.y=e.clientY,t&&t(e),s.mouseEvent=new a(e,s.editor),s.$mouseMoved=!0}},c=function(e){n.off("beforeEndOperation",d),clearInterval(h),n.session&&u(),s[s.state+"End"]&&s[s.state+"End"](e),s.state="",s.isMousePressed=o.$isMousePressed=!1,o.$keepTextAreaAtCursor&&o.$moveTextAreaToCursor(),s.$onCaptureMouseMove=s.releaseMouse=null,e&&s.onMouseEvent("mouseup",e),n.endOperation()},u=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(r.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout((function(){c(e)}));var d=function(e){s.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(s[s.state+"End"]&&s[s.state+"End"](),s.state="",s.releaseMouse())};n.on("beforeEndOperation",d),n.startOperation({command:{name:"mouse"}}),s.$onCaptureMouseMove=l,s.releaseMouse=i.capture(this.editor.container,l,c);var h=setInterval(u,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&i.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(d.prototype),u.defineOptions(d.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:r.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=d})),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../lib/dom");t.FoldHandler=function(e){e.on("click",(function(t){var n=t.getDocumentPosition(),r=e.session,o=r.getFoldAt(n.row,n.column,1);o&&(t.getAccelKey()?r.removeFold(o):r.expandFold(o),t.stop());var s=t.domEvent&&t.domEvent.target;s&&i.hasCssClass(s,"ace_inline_button")&&i.hasCssClass(s,"ace_toggle_wrap")&&(r.setOption("wrap",!r.getUseWrapMode()),e.renderer.scrollCursorIntoView())})),e.on("gutterclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[n]&&e.session.onFoldWidgetClick(n,t),e.isFocused()||e.focus(),t.stop()}})),e.on("gutterdblclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,i=e.session,r=i.getParentFoldRangeData(n,!0),o=r.range||r.firstRange;if(o){n=o.start.row;var s=i.getFoldAt(n,i.getLine(n).length,1);s?i.removeFold(s):(i.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}}))}})),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],(function(e,t,n){"use strict";var i=e("../lib/keys"),r=e("../lib/event"),o=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),void 0==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map((function(n){return n.getStatusText&&n.getStatusText(t,e)||""})).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,i){for(var o,s=!1,a=this.$editor.commands,l=this.$handlers.length;l--&&!((o=this.$handlers[l].handleKeyboard(this.$data,e,t,n,i))&&o.command&&((s="null"==o.command||a.exec(o.command,this.$editor,o.args,i))&&i&&-1!=e&&1!=o.passEvent&&1!=o.command.passEvent&&r.stopEvent(i),s)););return s||-1!=e||(o={command:"insertstring"},s=a.exec("insertstring",this.$editor,t)),s&&this.$editor._signal&&this.$editor._signal("keyboardActivity",o),s},this.onCommandKey=function(e,t,n){var r=i.keyCodeToString(n);return this.$callKeyboardHandlers(t,r,n,e)},this.onTextInput=function(e){return this.$callKeyboardHandlers(-1,e)}}).call(o.prototype),t.KeyBinding=o})),ace.define("ace/lib/bidiutil",["require","exports","module"],(function(e,t,n){"use strict";var i=0,r=0,o=!1,s=!1,a=!1,l=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],u=11,d=18,h=[d,d,d,d,d,d,d,d,d,6,5,6,8,5,d,d,d,d,d,d,d,d,d,d,d,d,d,d,5,5,5,6,8,4,4,u,u,u,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,d,d,d,d,d,d,5,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,9,4,u,u,u,u,4,4,4,4,0,4,4,d,4,4,u,u,2,2,4,0,4,4,4,2,0,4,4,4,4,4],f=[8,8,8,8,8,8,8,8,8,8,8,d,d,d,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,u,u,u,u,u,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8];function p(e,t,n){if(!(r<e))if(1!=e||1!=i||s)for(var o,a,l,c,u=n.length,d=0;d<u;){if(t[d]>=e){for(o=d+1;o<u&&t[o]>=e;)o++;for(a=d,l=o-1;a<l;a++,l--)c=n[a],n[a]=n[l],n[l]=c;d=o}d++}else n.reverse()}function g(e,t,n,r){var l,c,h,f,p=t[r];switch(p){case 0:case 1:o=!1;case 4:case 3:return p;case 2:return o?3:2;case 7:return o=!0,!0,1;case 8:return 4;case 9:return r<1||r+1>=t.length||2!=(l=n[r-1])&&3!=l||2!=(c=t[r+1])&&3!=c?4:(o&&(c=3),c==l?c:4);case 10:return 2==(l=r>0?n[r-1]:5)&&r+1<t.length&&2==t[r+1]?2:4;case u:if(r>0&&2==n[r-1])return 2;if(o)return 4;for(f=r+1,h=t.length;f<h&&t[f]==u;)f++;return f<h&&2==t[f]?2:4;case 12:for(h=t.length,f=r+1;f<h&&12==t[f];)f++;if(f<h){var g=e[r],m=g>=1425&&g<=2303||64286==g;if(l=t[f],m&&(1==l||7==l))return 1}return r<1||5==(l=t[r-1])?4:n[r-1];case 5:return o=!1,s=!0,i;case 6:return a=!0,4;case 13:case 14:case 16:case 17:case 15:o=!1;case d:return 4}}function m(e){var t=e.charCodeAt(0),n=t>>8;return 0==n?t>191?0:h[t]:5==n?/[\u0591-\u05f4]/.test(e)?1:0:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?12:/[\u0660-\u0669\u066b-\u066c]/.test(e)?3:1642==t?u:/[\u06f0-\u06f9]/.test(e)?2:7:32==n&&t<=8287?f[255&t]:254==n&&t>=65136?7:4}t.L=0,t.R=1,t.EN=2,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xb7",t.doBidiReorder=function(e,n,u){if(e.length<2)return{};var h=e.split(""),f=new Array(h.length),v=new Array(h.length),y=[];i=u?1:0,function(e,t,n,u){var d=i?c:l,h=null,f=null,p=null,v=0,y=null,b=-1,w=null,_=null,x=[];if(!u)for(w=0,u=[];w<n;w++)u[w]=m(e[w]);for(r=i,o=!1,!1,s=!1,a=!1,_=0;_<n;_++){if(h=v,x[_]=f=g(e,u,x,_),y=240&(v=d[h][f]),v&=15,t[_]=p=d[v][5],y>0)if(16==y){for(w=b;w<_;w++)t[w]=1;b=-1}else b=-1;if(d[v][6])-1==b&&(b=_);else if(b>-1){for(w=b;w<_;w++)t[w]=p;b=-1}5==u[_]&&(t[_]=0),r|=p}if(a)for(w=0;w<n;w++)if(6==u[w]){t[w]=i;for(var k=w-1;k>=0&&8==u[k];k--)t[k]=i}}(h,y,h.length,n);for(var b=0;b<f.length;f[b]=b,b++);p(2,y,f),p(1,y,f);for(b=0;b<f.length-1;b++)3===n[b]?y[b]=t.AN:1===y[b]&&(n[b]>7&&n[b]<13||4===n[b]||n[b]===d)?y[b]=t.ON_R:b>0&&"\u0644"===h[b-1]&&/\u0622|\u0623|\u0625|\u0627/.test(h[b])&&(y[b-1]=y[b]=t.R_H,b++);h[h.length-1]===t.DOT&&(y[h.length-1]=t.B),"\u202b"===h[0]&&(y[0]=t.RLE);for(b=0;b<f.length;b++)v[b]=y[f[b]];return{logicalFromVisual:f,bidiLevels:v}},t.hasBidiCharacters=function(e,t){for(var n=!1,i=0;i<e.length;i++)t[i]=m(e.charAt(i)),n||1!=t[i]&&7!=t[i]&&3!=t[i]||(n=!0);return n},t.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}})),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],(function(e,t,n){"use strict";var i=e("./lib/bidiutil"),r=e("./lib/lang"),o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,s=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=i,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xb6",this.RLE="\u202b",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=o.test(e.getValue())};(function(){this.isBidiRow=function(e,t,n){return!!this.seenBidi&&(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(e){this.seenBidi?this.currentRow=null:"insert"==e.action&&o.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n=this.session.$getRowCacheIndex(t,this.currentRow);n>=0&&(e=this.session.$docRowCache[n])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var n,i=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-e>0&&(n=this.session.$getRowCacheIndex(t,this.currentRow-e-1))===i;)i=n,e++;else e=this.currentRow;return e},this.updateRowLine=function(e,t){void 0===e&&(e=this.getDocumentRow());var n=e===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var o=this.session.$wrapData[e];o&&(void 0===t&&(t=this.getSplitIndex()),t>0&&o.length?(this.wrapIndent=o.indent,this.wrapOffset=this.wrapIndent*this.charWidths[i.L],this.line=t<o.length?this.line.substring(o[t-1],o[t]):this.line.substring(o[o.length-1])):this.line=this.line.substring(0,o[t])),t==o.length&&(this.line+=this.showInvisibles?n:i.DOT)}else this.line+=this.showInvisibles?n:i.DOT;var s,a=this.session,l=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(e,t){return"\t"===e||a.isFullWidth(e.charCodeAt(0))?(s="\t"===e?a.getScreenTabSize(t+l):2,l+=s-1,r.stringRepeat(i.DOT,s)):e})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==i.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];i.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=i.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.characterWidth!==e.$characterSize.width){this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,n=e.$measureCharWidth("\u05d4");this.charWidths[i.L]=this.charWidths[i.EN]=this.charWidths[i.ON_R]=t,this.charWidths[i.R]=this.charWidths[i.AN]=n,this.charWidths[i.R_H]=.45*n,this.charWidths[i.B]=this.charWidths[i.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return!!this.$isRtl||(void 0!=e?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(e,t){for(var n=e.getCursorPosition(),i=e.selection.getSelectionAnchor().row;i<=n.row;i++)t||e.session.getLine(i).charAt(0)!==e.session.$bidiHandler.RLE?t&&e.session.getLine(i).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:i},e.session.$bidiHandler.RLE):e.session.doc.removeInLine(i,0,1)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,n=e>t?this.session.getOverwrite()?e:e-1:t,r=i.getVisualFromLogicalIdx(n,this.bidiMap),o=this.bidiMap.bidiLevels,s=0;!this.session.getOverwrite()&&e<=t&&o[r]%2!==0&&r++;for(var a=0;a<r;a++)s+=this.charWidths[o[a]];return!this.session.getOverwrite()&&e>t&&o[r]%2===0&&(s+=this.charWidths[o[r]]),this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(s+=this.rtlLineOffset),s},this.getSelections=function(e,t){var n,i=this.bidiMap,r=i.bidiLevels,o=[],s=0,a=Math.min(e,t)-this.wrapIndent,l=Math.max(e,t)-this.wrapIndent,c=!1,u=!1,d=0;this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var h,f=0;f<r.length;f++)h=i.logicalFromVisual[f],n=r[f],(c=h>=a&&h<l)&&!u?d=s:!c&&u&&o.push({left:d,width:s-d}),s+=this.charWidths[n],u=c;if(c&&f===r.length&&o.push({left:d,width:s-d}),this.isRtlDir)for(var p=0;p<o.length;p++)o[p].left+=this.rtlLineOffset;return o},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,n=(e=Math.max(e,0),0),i=0,r=this.bidiMap.bidiLevels,o=this.charWidths[r[i]];for(this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);e>n+o/2;){if(n+=o,i===r.length-1){o=0;break}o=this.charWidths[r[++i]]}return i>0&&r[i-1]%2!==0&&r[i]%2===0?(e<n&&i--,t=this.bidiMap.logicalFromVisual[i]):i>0&&r[i-1]%2===0&&r[i]%2!==0?t=1+(e>n?this.bidiMap.logicalFromVisual[i]:this.bidiMap.logicalFromVisual[i-1]):this.isRtlDir&&i===r.length-1&&0===o&&r[i-1]%2===0||!this.isRtlDir&&0===i&&r[i]%2!==0?t=1+this.bidiMap.logicalFromVisual[i]:(i>0&&r[i-1]%2!==0&&0!==o&&i--,t=this.bidiMap.logicalFromVisual[i]),0===t&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(s.prototype),t.BidiHandler=s})),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],(function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/lang"),o=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",(function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),t.$isEmpty||t.$silent||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)})),this.anchor.on("change",(function(){t.$anchorChanged=!0,t.$isEmpty||t.$silent||t._emit("changeSelection")}))};(function(){i.implement(this,o),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?s.fromPoints(t,t):this.isBackwards()?s.fromPoints(t,e):s.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var n=t?e.end:e.start,i=t?e.start:e.end;this.$setSelection(n.row,n.column,i.row,i.column)},this.$setSelection=function(e,t,n,i){if(!this.$silent){var r=this.$isEmpty,o=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(n,i),this.$isEmpty=!s.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||r!=this.$isEmpty||o)&&this._emit("changeSelection")}},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection((function(){this.moveCursorTo(e,t)}))},this.selectToPosition=function(e){this.$moveSelection((function(){this.moveCursorToPosition(e)}))},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if("undefined"==typeof t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n,i="number"==typeof e?e:this.lead.row,r=this.session.getFoldLine(i);return r?(i=r.start.row,n=r.end.row):n=i,!0===t?new s(i,0,n,this.session.getLine(n).length):new s(i,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,n){var i=e.column,r=e.column+t;return n<0&&(i=e.column-t,r=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(i,r).split(" ").length-1==t},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0===t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(t,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize();t=this.lead;this.wouldMoveIntoSoftTab(t,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),i=this.session.screenToDocumentPosition(n,0),r=this.session.getDisplayLine(e,null,i.row,i.column).match(/^\s*/);r[0].length==t||this.session.$useEmacsStyleLineStart||(i.column+=r[0].length),this.moveCursorToPosition(i)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var i=n.search(/\s+$/);i>0&&(t.column=i)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),i=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var r=this.session.getFoldAt(e,t,1);if(r)this.moveCursorTo(r.end.row,r.end.column);else{if(this.session.nonTokenRe.exec(i)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,i=n.substring(t)),t>=n.length)return this.moveCursorTo(e,n.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(i)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}},this.moveCursorLongWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))this.moveCursorTo(e.start.row,e.start.column);else{var i=this.session.getFoldStringAt(t,n,-1);null==i&&(i=this.doc.getLine(t).substring(0,n));var o=r.stringReverse(i);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(o)&&(n-=this.session.nonTokenRe.lastIndex,o=o.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(t,0),this.moveCursorLeft(),void(t>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(o)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,n)}},this.$shortWordEndIndex=function(e){var t,n=0,i=/\s/,r=this.session.tokenRe;if(r.lastIndex=0,this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{for(;(t=e[n])&&i.test(t);)n++;if(n<1)for(r.lastIndex=0;(t=e[n])&&!r.test(t);)if(r.lastIndex=0,n++,i.test(t)){if(n>2){n--;break}for(;(t=e[n])&&i.test(t);)n++;if(n>2)break}}return r.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),i=n.substring(t),r=this.session.getFoldAt(e,t,1);if(r)return this.moveCursorTo(r.end.row,r.end.column);if(t==n.length){var o=this.doc.getLength();do{e++,i=this.doc.getLine(e)}while(e<o&&/^\s*$/.test(i));/^\s+/.test(i)||(i=""),t=0}var s=this.$shortWordEndIndex(i);this.moveCursorTo(e,t+s)},this.moveCursorShortWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return this.moveCursorTo(e.start.row,e.start.column);var i=this.session.getLine(t).substring(0,n);if(0===n){do{t--,i=this.doc.getLine(t)}while(t>0&&/^\s*$/.test(i));n=i.length,/\s+$/.test(i)||(i="")}var o=r.stringReverse(i),s=this.$shortWordEndIndex(o);return this.moveCursorTo(t,n-s)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n,i=this.session.documentToScreenPosition(this.lead.row,this.lead.column);if(0===t&&(0!==e&&(this.session.$bidiHandler.isBidiRow(i.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(i.column),i.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=i.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column),0!=e&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var r=this.session.lineWidgets[this.lead.row];e<0?e-=r.rowsAbove||0:e>0&&(e+=r.rowCount-(r.rowsAbove||0))}var o=this.session.screenToDocumentPosition(i.row+e,i.column,n);0!==e&&0===t&&o.row===this.lead.row&&(o.column,this.lead.column),this.moveCursorTo(o.row,o.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var i=this.session.getFoldAt(e,t,1);i&&(e=i.start.row,t=i.start.column),this.$keepDesiredColumnOnChange=!0;var r=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(r.charAt(t))&&r.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var i=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(i.row,i.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach()},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return s.fromPoints(t,n)}catch(i){return s.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map((function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t}));else(e=this.getRange()).isBackwards=this.isBackwards();return e},this.fromJSON=function(e){if(void 0==e.start){if(this.rangeList&&e.length>1){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=s.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(a.prototype),t.Selection=a})),ace.define("ace/tokenizer",["require","exports","module","ace/config"],(function(e,t,n){"use strict";var i=e("./config"),r=2e3,o=function(e){for(var t in this.states=e,this.regExps={},this.matchMappings={},this.states){for(var n=this.states[t],i=[],r=0,o=this.matchMappings[t]={defaultToken:"text"},s="g",a=[],l=0;l<n.length;l++){var c=n[l];if(c.defaultToken&&(o.defaultToken=c.defaultToken),c.caseInsensitive&&(s="gi"),null!=c.regex){c.regex instanceof RegExp&&(c.regex=c.regex.toString().slice(1,-1));var u=c.regex,d=new RegExp("(?:("+u+")|(.))").exec("a").length-2;Array.isArray(c.token)?1==c.token.length||1==d?c.token=c.token[0]:d-1!=c.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:c,groupCount:d-1}),c.token=c.token[0]):(c.tokenArray=c.token,c.token=null,c.onMatch=this.$arrayTokens):"function"!=typeof c.token||c.onMatch||(c.onMatch=d>1?this.$applyToken:c.token),d>1&&(/\\\d/.test(c.regex)?u=c.regex.replace(/\\([0-9]+)/g,(function(e,t){return"\\"+(parseInt(t,10)+r+1)})):(d=1,u=this.removeCapturingGroups(c.regex)),c.splitRegex||"string"==typeof c.token||a.push(c)),o[r]=l,r+=d,i.push(u),c.onMatch||(c.onMatch=null)}}i.length||(o[0]=0,i.push("$")),a.forEach((function(e){e.splitRegex=this.createSplitterRegexp(e.regex,s)}),this),this.regExps[t]=new RegExp("("+i.join(")|(")+")|($)",s)}};(function(){this.$setMaxTokenCount=function(e){r=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"===typeof n)return[{type:n,value:e}];for(var i=[],r=0,o=n.length;r<o;r++)t[r]&&(i[i.length]={type:n[r],value:t[r]});return i},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],i=this.tokenArray,r=0,o=i.length;r<o;r++)t[r+1]&&(n[n.length]={type:i[r],value:t[r+1]});return n},this.removeCapturingGroups=function(e){return e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,(function(e,t){return t?"(?:":e}))},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var n=0,i=!1,r={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(e,t,o,s,a,l){return i?i="]"!=a:a?i=!0:s?(n==r.stack&&(r.end=l+1,r.stack=-1),n--):o&&(n++,1!=o.length&&(r.stack=n,r.start=l)),e})),null!=r.end&&/^\)*$/.test(e.substr(r.end))&&(e=e.substring(0,r.start)+e.substr(r.end))}return"^"!=e.charAt(0)&&(e="^"+e),"$"!=e.charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);"#tmp"===(t=n[0])&&(n.shift(),t=n.shift())}else n=[];var i=t||"start",o=this.states[i];o||(i="start",o=this.states[i]);var s=this.matchMappings[i],a=this.regExps[i];a.lastIndex=0;for(var l,c=[],u=0,d=0,h={type:null,value:""};l=a.exec(e);){var f=s.defaultToken,p=null,g=l[0],m=a.lastIndex;if(m-g.length>u){var v=e.substring(u,m-g.length);h.type==f?h.value+=v:(h.type&&c.push(h),h={type:f,value:v})}for(var y=0;y<l.length-2;y++)if(void 0!==l[y+1]){f=(p=o[s[y]]).onMatch?p.onMatch(g,i,n,e):p.token,p.next&&(i="string"==typeof p.next?p.next:p.next(i,n),(o=this.states[i])||(this.reportError("state doesn't exist",i),i="start",o=this.states[i]),s=this.matchMappings[i],u=m,(a=this.regExps[i]).lastIndex=m),p.consumeLineEnd&&(u=m);break}if(g)if("string"===typeof f)p&&!1===p.merge||h.type!==f?(h.type&&c.push(h),h={type:f,value:g}):h.value+=g;else if(f){h.type&&c.push(h),h={type:null,value:""};for(y=0;y<f.length;y++)c.push(f[y])}if(u==e.length)break;if(u=m,d++>r){for(d>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});u<e.length;)h.type&&c.push(h),h={value:e.substring(u,u+=500),type:"overflow"};i="start",n=[];break}}return h.type&&c.push(h),n.length>1&&n[0]!==i&&n.unshift("#tmp",i),{tokens:c,state:n.length?n:i}},this.reportError=i.reportError}).call(o.prototype),t.Tokenizer=o})),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],(function(e,t,n){"use strict";var i=e("../lib/lang"),r=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var i=e[n],r=0;r<i.length;r++){var o=i[r];(o.next||o.onMatch)&&("string"==typeof o.next&&0!==o.next.indexOf(t)&&(o.next=t+o.next),o.nextState&&0!==o.nextState.indexOf(t)&&(o.nextState=t+o.nextState))}this.$rules[t+n]=i}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,r,o){var s="function"==typeof e?(new e).getRules():e;if(r)for(var a=0;a<r.length;a++)r[a]=t+r[a];else for(var l in r=[],s)r.push(t+l);if(this.addRules(s,t),n){var c=Array.prototype[o?"push":"unshift"];for(a=0;a<r.length;a++)c.apply(this.$rules[r[a]],i.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){var n=0,i=this.$rules;Object.keys(i).forEach((function r(o){var s=i[o];s.processed=!0;for(var a=0;a<s.length;a++){var l=s[a],c=null;Array.isArray(l)&&(c=l,l={}),!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var u=l.next||l.push;if(u&&Array.isArray(u)){var d=l.stateName;d||("string"!=typeof(d=l.token)&&(d=d[0]||""),i[d]&&(d+=n++)),i[d]=u,l.next=d,r(d)}else"pop"==u&&(l.next=t);if(l.push&&(l.nextState=l.next||l.push,l.next=e,delete l.push),l.rules)for(var h in l.rules)i[h]?i[h].push&&i[h].push.apply(i[h],l.rules[h]):i[h]=l.rules[h];var f="string"==typeof l?l:l.include;if(f&&(c=Array.isArray(f)?f.map((function(e){return i[e]})):i[f]),c){var p=[a,1].concat(c);l.noEscape&&(p=p.filter((function(e){return!e.next}))),s.splice.apply(s,p),a--}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}),this)},this.createKeywordMapper=function(e,t,n,i){var r=Object.create(null);return this.$keywordList=[],Object.keys(e).forEach((function(t){for(var o=e[t].split(i||"|"),s=o.length;s--;){var a=o[s];this.$keywordList.push(a),n&&(a=a.toLowerCase()),r[a]=t}}),this),e=null,n?function(e){return r[e.toLowerCase()]||t}:function(e){return r[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(r.prototype),t.TextHighlightRules=r})),ace.define("ace/mode/behaviour",["require","exports","module"],(function(e,t,n){"use strict";var i=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"===typeof e)var n=(new e).getBehaviours(t);else n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(e){for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}return this.$behaviours}}).call(i.prototype),t.Behaviour=i})),ace.define("ace/token_iterator",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("./range").Range,r=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var i=e.getTokenAt(t,n);this.$tokenIndex=i?i.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var e;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;for(n=0;t>0;)n+=e[t-=1].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new i(this.$row,t,this.$row,t+e.value.length)}}).call(r.prototype),t.TokenIterator=r})),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(e,t,n){"use strict";var i,r=e("../../lib/oop"),o=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),l=["text","paren.rparen","rparen","paren","punctuation.operator"],c=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],u={},d={'"':'"',"'":"'"},h=function(e){var t=-1;if(e.multiSelect&&(t=e.selection.index,u.rangeCount!=e.multiSelect.rangeCount&&(u={rangeCount:e.multiSelect.rangeCount})),u[t])return i=u[t];i=u[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},f=function(e,t,n,i){var r=e.end.row-e.start.row;return{text:n+t+i,selection:[0,e.start.column+1,r,e.end.column+(r?0:1)]}},p=function e(t){this.add("braces","insertion",(function(n,r,o,s,l){var c=o.getCursorPosition(),u=s.doc.getLine(c.row);if("{"==l){h(o);var d=o.getSelectionRange(),p=s.doc.getTextRange(d);if(""!==p&&"{"!==p&&o.getWrapBehavioursEnabled())return f(d,p,"{","}");if(e.isSaneInsertion(o,s))return/[\]\}\)]/.test(u[c.column])||o.inMultiSelectMode||t&&t.braces?(e.recordAutoInsert(o,s,"}"),{text:"{}",selection:[1,1]}):(e.recordMaybeInsert(o,s,"{"),{text:"{",selection:[1,1]})}else if("}"==l){if(h(o),"}"==u.substring(c.column,c.column+1))if(null!==s.$findOpeningBracket("}",{column:c.column+1,row:c.row})&&e.isAutoInsertedClosing(c,u,l))return e.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==l||"\r\n"==l){h(o);var g="";if(e.isMaybeInsertedClosing(c,u)&&(g=a.stringRepeat("}",i.maybeInsertedBrackets),e.clearMaybeInsertedClosing()),"}"===u.substring(c.column,c.column+1)){var m=s.findMatchingBracket({row:c.row,column:c.column+1},"}");if(!m)return null;var v=this.$getIndent(s.getLine(m.row))}else{if(!g)return void e.clearMaybeInsertedClosing();v=this.$getIndent(u)}var y=v+s.getTabString();return{text:"\n"+y+"\n"+v+g,selection:[1,y.length,1,y.length]}}e.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(e,t,n,r,o){var s=r.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==s){if(h(n),"}"==r.doc.getLine(o.start.row).substring(o.end.column,o.end.column+1))return o.end.column++,o;i.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(t,n,i,r,o){if("("==o){h(i);var s=i.getSelectionRange(),a=r.doc.getTextRange(s);if(""!==a&&i.getWrapBehavioursEnabled())return f(s,a,"(",")");if(e.isSaneInsertion(i,r))return e.recordAutoInsert(i,r,")"),{text:"()",selection:[1,1]}}else if(")"==o){h(i);var l=i.getCursorPosition(),c=r.doc.getLine(l.row);if(")"==c.substring(l.column,l.column+1))if(null!==r.$findOpeningBracket(")",{column:l.column+1,row:l.row})&&e.isAutoInsertedClosing(l,c,o))return e.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("parens","deletion",(function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"("==o&&(h(n),")"==i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)))return r.end.column++,r})),this.add("brackets","insertion",(function(t,n,i,r,o){if("["==o){h(i);var s=i.getSelectionRange(),a=r.doc.getTextRange(s);if(""!==a&&i.getWrapBehavioursEnabled())return f(s,a,"[","]");if(e.isSaneInsertion(i,r))return e.recordAutoInsert(i,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==o){h(i);var l=i.getCursorPosition(),c=r.doc.getLine(l.row);if("]"==c.substring(l.column,l.column+1))if(null!==r.$findOpeningBracket("]",{column:l.column+1,row:l.row})&&e.isAutoInsertedClosing(l,c,o))return e.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("brackets","deletion",(function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"["==o&&(h(n),"]"==i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)))return r.end.column++,r})),this.add("string_dquotes","insertion",(function(e,t,n,i,r){var o=i.$mode.$quotes||d;if(1==r.length&&o[r]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(r))return;h(n);var s=r,a=n.getSelectionRange(),l=i.doc.getTextRange(a);if(!(""===l||1==l.length&&o[l])&&n.getWrapBehavioursEnabled())return f(a,l,s,s);if(!l){var c=n.getCursorPosition(),u=i.doc.getLine(c.row),p=u.substring(c.column-1,c.column),g=u.substring(c.column,c.column+1),m=i.getTokenAt(c.row,c.column),v=i.getTokenAt(c.row,c.column+1);if("\\"==p&&m&&/escape/.test(m.type))return null;var y,b=m&&/string|escape/.test(m.type),w=!v||/string|escape/.test(v.type);if(g==s)(y=b!==w)&&/string\.end/.test(v.type)&&(y=!1);else{if(b&&!w)return null;if(b&&w)return null;var _=i.$mode.tokenRe;_.lastIndex=0;var x=_.test(p);_.lastIndex=0;var k=_.test(p);if(x||k)return null;if(g&&!/[\s;,.})\]\\]/.test(g))return null;var C=u[c.column-2];if(p==s&&(C==s||_.test(C)))return null;y=!0}return{text:y?s+s:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(e,t,n,i,r){var o=i.$mode.$quotes||d,s=i.doc.getTextRange(r);if(!r.isMultiLine()&&o.hasOwnProperty(s)&&(h(n),i.doc.getLine(r.start.row).substring(r.start.column+1,r.start.column+2)==s))return r.end.column++,r}))};p.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),i=new s(t,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",l)){if(/[)}\]]/.test(e.session.getLine(n.row)[n.column]))return!0;var r=new s(t,n.row,n.column+1);if(!this.$matchTokenType(r.getCurrentToken()||"text",l))return!1}return i.stepForward(),i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",c)},p.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},p.recordAutoInsert=function(e,t,n){var r=e.getCursorPosition(),o=t.doc.getLine(r.row);this.isAutoInsertedClosing(r,o,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=r.row,i.autoInsertedLineEnd=n+o.substr(r.column),i.autoInsertedBrackets++},p.recordMaybeInsert=function(e,t,n){var r=e.getCursorPosition(),o=t.doc.getLine(r.row);this.isMaybeInsertedClosing(r,o)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=r.row,i.maybeInsertedLineStart=o.substr(0,r.column)+n,i.maybeInsertedLineEnd=o.substr(r.column),i.maybeInsertedBrackets++},p.isAutoInsertedClosing=function(e,t,n){return i.autoInsertedBrackets>0&&e.row===i.autoInsertedRow&&n===i.autoInsertedLineEnd[0]&&t.substr(e.column)===i.autoInsertedLineEnd},p.isMaybeInsertedClosing=function(e,t){return i.maybeInsertedBrackets>0&&e.row===i.maybeInsertedRow&&t.substr(e.column)===i.maybeInsertedLineEnd&&t.substr(0,e.column)==i.maybeInsertedLineStart},p.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},p.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},r.inherits(p,o),t.CstyleBehaviour=p})),ace.define("ace/unicode",["require","exports","module"],(function(e,t,n){"use strict";for(var i=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],r=0,o=[],s=0;s<i.length;s+=2)o.push(r+=i[s]),i[s+1]&&o.push(45,r+=i[s+1]);t.wordChars=String.fromCharCode.apply(null,o)})),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],(function(e,t,n){"use strict";var i=e("../config"),r=e("../tokenizer").Tokenizer,o=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour/cstyle").CstyleBehaviour,a=e("../unicode"),l=e("../lib/lang"),c=e("../token_iterator").TokenIterator,u=e("../range").Range,d=function(){this.HighlightRules=o};(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+a.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+a.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new r(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,i){var r=t.doc,o=!0,s=!0,a=1/0,c=t.getTabSize(),u=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))g=this.lineCommentStart.map(l.escapeRegExp).join("|"),f=this.lineCommentStart[0];else g=l.escapeRegExp(this.lineCommentStart),f=this.lineCommentStart;g=new RegExp("^(\\s*)(?:"+g+") ?"),u=t.getUseSoftTabs();y=function(e,t){var n=e.match(g);if(n){var i=n[1].length,o=n[0].length;h(e,i,o)||" "!=n[0][o-1]||o--,r.removeInLine(t,i,o)}};var d=f+" ",h=(v=function(e,t){o&&!/\S/.test(e)||(h(e,a,a)?r.insertInLine({row:t,column:a},d):r.insertInLine({row:t,column:a},f))},b=function(e,t){return g.test(e)},function(e,t,n){for(var i=0;t--&&" "==e.charAt(t);)i++;if(i%c!=0)return!1;for(i=0;" "==e.charAt(n++);)i++;return c>2?i%c!=c-1:i%c==0})}else{if(!this.blockComment)return!1;var f=this.blockComment.start,p=this.blockComment.end,g=new RegExp("^(\\s*)(?:"+l.escapeRegExp(f)+")"),m=new RegExp("(?:"+l.escapeRegExp(p)+")\\s*$"),v=function(e,t){b(e,t)||o&&!/\S/.test(e)||(r.insertInLine({row:t,column:e.length},p),r.insertInLine({row:t,column:a},f))},y=function(e,t){var n;(n=e.match(m))&&r.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(g))&&r.removeInLine(t,n[1].length,n[0].length)},b=function(e,n){if(g.test(e))return!0;for(var i=t.getTokens(n),r=0;r<i.length;r++)if("comment"===i[r].type)return!0}}function w(e){for(var t=n;t<=i;t++)e(r.getLine(t),t)}var _=1/0;w((function(e,t){var n=e.search(/\S/);-1!==n?(n<a&&(a=n),s&&!b(e,t)&&(s=!1)):_>e.length&&(_=e.length)})),a==1/0&&(a=_,o=!1,s=!1),u&&a%c!=0&&(a=Math.floor(a/c)*c),w(s?y:v)},this.toggleBlockComment=function(e,t,n,i){var r=this.blockComment;if(r){!r.start&&r[0]&&(r=r[0]);var o,s,a=(g=new c(t,i.row,i.column)).getCurrentToken(),l=(t.selection,t.selection.toOrientedRange());if(a&&/comment/.test(a.type)){for(var d,h;a&&/comment/.test(a.type);){if(-1!=(m=a.value.indexOf(r.start))){var f=g.getCurrentTokenRow(),p=g.getCurrentTokenColumn()+m;d=new u(f,p,f,p+r.start.length);break}a=g.stepBackward()}var g;for(a=(g=new c(t,i.row,i.column)).getCurrentToken();a&&/comment/.test(a.type);){var m;if(-1!=(m=a.value.indexOf(r.end))){f=g.getCurrentTokenRow(),p=g.getCurrentTokenColumn()+m;h=new u(f,p,f,p+r.end.length);break}a=g.stepForward()}h&&t.remove(h),d&&(t.remove(d),o=d.start.row,s=-r.start.length)}else s=r.start.length,o=n.start.row,t.insert(n.end,r.end),t.insert(n.start,r.start);l.start.row==o&&(l.start.column+=s),l.end.row==o&&(l.end.column+=s),t.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){for(var t in this.$embeds=[],this.$modes={},e)if(e[t]){var n=e[t],r=n.prototype.$id,o=i.$modes[r];o||(i.$modes[r]=o=new n),i.$modes[t]||(i.$modes[t]=o),this.$embeds.push(t),this.$modes[t]=o}var s=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(t=0;t<s.length;t++)!function(e){var n=s[t],i=e[n];e[s[t]]=function(){return this.$delegator(n,arguments,i)}}(this)},this.$delegator=function(e,t,n){var i=t[0]||"start";if("string"!=typeof i){if(Array.isArray(i[2])){var r=i[2][i[2].length-1];if(s=this.$modes[r])return s[e].apply(s,[i[1]].concat([].slice.call(t,1)))}i=i[0]||"start"}for(var o=0;o<this.$embeds.length;o++)if(this.$modes[this.$embeds[o]]){var s,a=i.split(this.$embeds[o]);if(!a[0]&&a[1])return t[0]=a[1],(s=this.$modes[this.$embeds[o]])[e].apply(s,t)}var l=n.apply(this,t);return n?l:void 0},this.transformAction=function(e,t,n,i,r){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var s in o)if(o[s][t]){var a=o[s][t].apply(this,arguments);if(a)return a}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var i in t)for(var r=t[i],o=0,s=r.length;o<s;o++)if("string"===typeof r[o].token)/keyword|support|storage/.test(r[o].token)&&n.push(r[o].regex);else if("object"===typeof r[o].token)for(var a=0,l=r[o].token.length;a<l;a++)if(/keyword|support|storage/.test(r[o].token[a])){i=r[o].regex.match(/\(.+?\)/g)[a];n.push(i.substr(1,i.length-2))}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,i){return(this.$keywordList||this.$createKeywordList()).map((function(e){return{name:e,value:e,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call(d.prototype),t.Mode=d})),ace.define("ace/apply_delta",["require","exports","module"],(function(e,t,n){"use strict";t.applyDelta=function(e,t,n){var i=t.start.row,r=t.start.column,o=e[i]||"";switch(t.action){case"insert":if(1===t.lines.length)e[i]=o.substring(0,r)+t.lines[0]+o.substring(r);else{var s=[i,1].concat(t.lines);e.splice.apply(e,s),e[i]=o.substring(0,r)+e[i],e[i+t.lines.length-1]+=o.substring(r)}break;case"remove":var a=t.end.column,l=t.end.row;i===l?e[i]=o.substring(0,r)+o.substring(a):e.splice(i,l-i+1,o.substring(0,r)+e[l].substring(a))}}})),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/event_emitter").EventEmitter,o=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),"undefined"==typeof n?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var i=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&i}i.implement(this,r),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(t){if((t.start.row!=t.end.row||t.start.row==this.row)&&!(t.start.row>this.row)){var n=function(t,n,i){var r="insert"==t.action,o=(r?1:-1)*(t.end.row-t.start.row),s=(r?1:-1)*(t.end.column-t.start.column),a=t.start,l=r?a:t.end;if(e(n,a,i))return{row:n.row,column:n.column};if(e(l,n,!i))return{row:n.row+o,column:n.column+(n.row==l.row?s:0)};return{row:a.row,column:a.column}}(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(e,t,n){var i;if(i=n?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=i.row||this.column!=i.column){var r={row:this.row,column:this.column};this.row=i.row,this.column=i.column,this._signal("change",{old:r,value:i})}},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(o.prototype)})),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],(function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./apply_delta").applyDelta,o=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=e("./anchor").Anchor,l=function(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){i.implement(this,o),this.setValue=function(e){var t=this.getLength()-1;this.remove(new s(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new a(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{(t=this.getLines(e.start.row,e.end.row))[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),i=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:i,action:"insert",lines:[t]},!0),this.clonePos(i)},this.clippedPos=function(e,t){var n=this.getLength();void 0===e?e=n:e<0?e=0:e>=n&&(e=n-1,t=void 0);var i=this.getLine(e);return void 0==t&&(t=i.length),{row:e,column:t=Math.min(Math.max(t,0),i.length)}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){var n=0;(e=Math.min(Math.max(e,0),this.getLength()))<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),i={row:n.row+t.length-1,column:(1==t.length?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:i,action:"insert",lines:t}),this.clonePos(i)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var i=this.clippedPos(e,t),r=this.clippedPos(e,n);return this.applyDelta({start:i,end:r,action:"remove",lines:this.getLinesForRange({start:i,end:r})},!0),this.clonePos(i)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1);var n=(t=Math.min(Math.max(0,t),this.getLength()-1))==this.getLength()-1&&e>0,i=t<this.getLength()-1,r=n?e-1:e,o=n?this.getLine(r).length:0,a=i?t+1:t,l=i?0:this.getLine(a).length,c=new s(r,o,a,l),u=this.$lines.slice(e,t+1);return this.applyDelta({start:c.start,end:c.end,action:"remove",lines:this.getLinesForRange(c)}),u},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){return e instanceof s||(e=s.fromPoints(e.start,e.end)),0===t.length&&e.isEmpty()?e.start:t==this.getTextRange(e)?e.end:(this.remove(e),t?this.insert(e.start,t):e.start)},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n="insert"==e.action;(n?e.lines.length<=1&&!e.lines[0]:!s.comparePoints(e.start,e.end))||(n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(r(this.$lines,e,t),this._signal("change",e)))},this.$safeApplyDelta=function(e){var t=this.$lines.length;("remove"==e.action&&e.start.row<t&&e.end.row<t||"insert"==e.action&&e.start.row<=t)&&this.applyDelta(e)},this.$splitAndapplyLargeDelta=function(e,t){for(var n=e.lines,i=n.length-t+1,r=e.start.row,o=e.start.column,s=0,a=0;s<i;s=a){a+=t-1;var l=n.slice(s,a);l.push(""),this.applyDelta({start:this.pos(r+s,o),end:this.pos(r+a,o=0),action:e.action,lines:l},!0)}e.lines=n.slice(s),e.start.row=r+s,e.start.column=o,this.applyDelta(e,!0)},this.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=t||0,o=n.length;r<o;r++)if((e-=n[r].length+i)<0)return{row:r,column:e+n[r].length+i};return{row:o-1,column:e+n[o-1].length+i}},this.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=0,o=Math.min(e.row,n.length),s=t||0;s<o;++s)r+=n[s].length+i;return r+e.column}}).call(l.prototype),t.Document=l})),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/event_emitter").EventEmitter,o=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(n.running){for(var e=new Date,t=n.currentLine,i=-1,r=n.doc,o=t;n.lines[t];)t++;var s=r.getLength(),a=0;for(n.running=!1;t<s;){n.$tokenizeRow(t),i=t;do{t++}while(n.lines[t]);if(++a%5===0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,-1==i&&(i=t),o<=i&&n.fireUpdateEvent(o,i)}}};(function(){i.implement(this,r),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var i=Array(n+1);i.unshift(t,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],i=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!==i.state+""?(this.states[e]=i.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=i.tokens}}).call(o.prototype),t.BackgroundTokenizer=o})),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(e,t,n){"use strict";var i=e("./lib/lang"),r=(e("./lib/oop"),e("./range").Range),o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,o){if(this.regExp)for(var s=o.firstRow,a=o.lastRow,l=s;l<=a;l++){var c=this.cache[l];null==c&&((c=i.getMatchOffsets(n.getLine(l),this.regExp)).length>this.MAX_RANGES&&(c=c.slice(0,this.MAX_RANGES)),c=c.map((function(e){return new r(l,e.offset,l,e.offset+e.length)})),this.cache[l]=c.length?c:"");for(var u=c.length;u--;)t.drawSingleLineMarker(e,c[u].toScreenRange(n),this.clazz,o)}}}).call(o.prototype),t.SearchHighlight=o})),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("../range").Range;function r(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new i(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(e){e.setFoldLine(this)}),this)}(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach((function(t){t.start.row+=e,t.end.row+=e}))},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort((function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)})),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var i,r,o=0,s=this.folds,a=!0;null==t&&(t=this.end.row,n=this.end.column);for(var l=0;l<s.length;l++){if(-1==(r=(i=s[l]).range.compareStart(t,n)))return void e(null,t,n,o,a);if(!e(null,i.start.row,i.start.column,o,a)&&e(i.placeholder,i.start.row,i.start.column,o)||0===r)return;a=!i.sameRow,o=i.end.column}e(null,t,n,o,a)},this.getNextFoldTo=function(e,t){for(var n,i,r=0;r<this.folds.length;r++){if(-1==(i=(n=this.folds[r]).range.compareEnd(e,t)))return{fold:n,kind:"after"};if(0===i)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var i,r,o=this.getNextFoldTo(e,t);if(o)if(i=o.fold,"inside"==o.kind&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){var s=(r=this.folds).indexOf(i);for(0===s&&(this.start.column+=n);s<r.length;s++){if((i=r[s]).start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||"inside"==n.kind)return null;var i=n.fold,o=this.folds,s=this.foldData,a=o.indexOf(i),l=o[a-1];this.end.row=l.end.row,this.end.column=l.end.column;var c=new r(s,o=o.splice(a,o.length-a));return s.splice(s.indexOf(this)+1,0,c),c},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var i=this.foldData;i.splice(i.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach((function(t){e.push("  "+t.toString())})),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t=0,n=0;n<this.folds.length;n++){var i=this.folds[n];if((e-=i.start.column-t)<0)return{row:i.start.row,column:i.start.column+e};if((e-=i.placeholder.length)<0)return i.start;t=i.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(r.prototype),t.FoldLine=r})),ace.define("ace/range_list",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("./range").Range.comparePoints,r=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=i,this.pointIndex=function(e,t,n){for(var r=this.ranges,o=n||0;o<r.length;o++){var s=r[o],a=i(e,s.end);if(!(a>0)){var l=i(e,s.start);return 0===a?t&&0!==l?-o-2:o:l>0||0===l&&!t?o:-o-1}}return-o-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var i=this.pointIndex(e.end,t,n);return i<0?i=-i-1:i++,this.ranges.splice(n,i-n,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){for(var e,t=[],n=this.ranges,r=(n=n.sort((function(e,t){return i(e.start,t.start)})))[0],o=1;o<n.length;o++){e=r,r=n[o];var s=i(e.end,r.start);s<0||(0!=s||e.isEmpty()||r.isEmpty())&&(i(e.end,r.end)<0&&(e.end.row=r.end.row,e.end.column=r.end.column),n.splice(o,1),t.push(r),r=e,o--)}return this.ranges=n,t},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var i=this.pointIndex({row:e,column:0});i<0&&(i=-i-1);var r=this.pointIndex({row:t,column:0},i);r<0&&(r=-r-1);for(var o=[],s=i;s<r;s++)o.push(n[s]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){for(var t=e.start,n=e.end,i=t.row,r=n.row,o=this.ranges,s=0,a=o.length;s<a;s++){if((u=o[s]).end.row>=i)break}if("insert"==e.action)for(var l=r-i,c=-t.column+n.column;s<a;s++){if((u=o[s]).start.row>i)break;if(u.start.row==i&&u.start.column>=t.column&&(u.start.column==t.column&&this.$bias<=0||(u.start.column+=c,u.start.row+=l)),u.end.row==i&&u.end.column>=t.column){if(u.end.column==t.column&&this.$bias<0)continue;u.end.column==t.column&&c>0&&s<a-1&&u.end.column>u.start.column&&u.end.column==o[s+1].start.column&&(u.end.column-=c),u.end.column+=c,u.end.row+=l}}else for(l=i-r,c=t.column-n.column;s<a;s++){if((u=o[s]).start.row>r)break;u.end.row<r&&(i<u.end.row||i==u.end.row&&t.column<u.end.column)?(u.end.row=i,u.end.column=t.column):u.end.row==r?u.end.column<=n.column?(l||u.end.column>t.column)&&(u.end.column=t.column,u.end.row=t.row):(u.end.column+=c,u.end.row+=l):u.end.row>r&&(u.end.row+=l),u.start.row<r&&(i<u.start.row||i==u.start.row&&t.column<u.start.column)?(u.start.row=i,u.start.column=t.column):u.start.row==r?u.start.column<=n.column?(l||u.start.column>t.column)&&(u.start.column=t.column,u.start.row=t.row):(u.start.column+=c,u.start.row+=l):u.start.row>r&&(u.start.row+=l)}if(0!=l&&s<a)for(;s<a;s++){var u;(u=o[s]).start.row+=l,u.end.row+=l}}}).call(r.prototype),t.RangeList=r})),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],(function(e,t,n){"use strict";var i=e("../range_list").RangeList,r=e("../lib/oop"),o=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};function s(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function a(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}r.inherits(o,i),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach((function(t){t.setFoldLine(e)}))},this.clone=function(){var e=this.range.clone(),t=new o(e,this.placeholder);return this.subFolds.forEach((function(e){t.subFolds.push(e.clone())})),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){var t,n;t=e,n=this.start,s(t.start,n),s(t.end,n);for(var i=e.start.row,r=e.start.column,o=0,a=-1;o<this.subFolds.length&&1==(a=this.subFolds[o].range.compare(i,r));o++);var l=this.subFolds[o],c=0;if(0==a){if(l.range.containsRange(e))return l.addSubFold(e);c=1}i=e.range.end.row,r=e.range.end.column;var u=o;for(a=-1;u<this.subFolds.length&&1==(a=this.subFolds[u].range.compare(i,r));u++);0==a&&u++;for(var d=this.subFolds.splice(o,u-o,e),h=0==a?d.length-1:d.length,f=c;f<h;f++)e.addSubFold(d[f]);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return function(e,t){a(e.start,t),a(e.end,t)}(e,this.start)}}.call(o.prototype)})),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],(function(e,t,n){"use strict";var i=e("../range").Range,r=e("./fold_line").FoldLine,o=e("./fold").Fold,s=e("../token_iterator").TokenIterator;t.Folding=function(){this.getFoldAt=function(e,t,n){var i=this.getFoldLine(e);if(!i)return null;for(var r=i.folds,o=0;o<r.length;o++){var s=r[o].range;if(s.contains(e,t)){if(1==n&&s.isEnd(e,t)&&!s.isEmpty())continue;if(-1==n&&s.isStart(e,t)&&!s.isEmpty())continue;return r[o]}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,i=this.$foldData,r=[];t.column+=1,n.column-=1;for(var o=0;o<i.length;o++){var s=i[o].range.compareRange(e);if(2!=s){if(-2==s)break;for(var a=i[o].folds,l=0;l<a.length;l++){var c=a[l];if(-2==(s=c.range.compareRange(e)))break;if(2!=s){if(42==s)break;r.push(c)}}}}return t.column-=1,n.column+=1,r},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach((function(e){t=t.concat(this.getFoldsInRange(e))}),this)}else t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var i=0;i<t[n].folds.length;i++)e.push(t[n].folds[i]);return e},this.getFoldStringAt=function(e,t,n,i){if(!(i=i||this.getFoldLine(e)))return null;for(var r,o,s={end:{column:0}},a=0;a<i.folds.length;a++){var l=(o=i.folds[a]).range.compareEnd(e,t);if(-1==l){r=this.getLine(o.start.row).substring(s.end.column,o.start.column);break}if(0===l)return null;s=o}return r||(r=this.getLine(o.start.row).substring(s.end.column)),-1==n?r.substring(0,t-s.end.column):1==n?r.substring(t-s.end.column):r},this.getFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0);i<n.length;i++){var r=n[i];if(r.start.row<=e&&r.end.row>=e)return r;if(r.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0);i<n.length;i++){var r=n[i];if(r.end.row>=e)return r}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,i=t-e+1,r=0;r<n.length;r++){var o=n[r],s=o.end.row,a=o.start.row;if(s>=t){a<t&&(a>=e?i-=t-a:i=0);break}s>=e&&(i-=a>=e?s-a:s-e+1)}return i},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort((function(e,t){return e.start.row-t.start.row})),e},this.addFold=function(e,t){var n,i=this.$foldData,s=!1;e instanceof o?n=e:(n=new o(t,e)).collapseChildren=t.collapseChildren,this.$clipRangeToDocument(n.range);var a=n.start.row,l=n.start.column,c=n.end.row,u=n.end.column,d=this.getFoldAt(a,l,1),h=this.getFoldAt(c,u,-1);if(d&&h==d)return d.addSubFold(n);d&&!d.range.isStart(a,l)&&this.removeFold(d),h&&!h.range.isEnd(c,u)&&this.removeFold(h);var f=this.getFoldsInRange(n.range);f.length>0&&(this.removeFolds(f),n.collapseChildren||f.forEach((function(e){n.addSubFold(e)})));for(var p=0;p<i.length;p++){var g=i[p];if(c==g.start.row){g.addFold(n),s=!0;break}if(a==g.end.row){if(g.addFold(n),s=!0,!n.sameRow){var m=i[p+1];if(m&&m.start.row==c){g.merge(m);break}}break}if(c<=g.start.row)break}return s||(g=this.$addFoldLine(new r(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(e){e.forEach((function(e){this.addFold(e)}),this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,i=t.end.row,r=this.$foldData,o=t.folds;if(1==o.length)r.splice(r.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))o.pop(),t.end.row=o[o.length-1].end.row,t.end.column=o[o.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))o.shift(),t.start.row=o[0].start.row,t.start.column=o[0].start.column;else if(e.sameRow)o.splice(o.indexOf(e),1);else{var s=t.split(e.start.row,e.start.column);(o=s.folds).shift(),s.start.row=o[0].start.row,s.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,i):this.$updateRowLengthCache(n,i)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach((function(e){this.removeFold(e)}),this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach((function(t){e.restoreRange(t),this.addFold(t)}),this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach((function(e){this.expandFold(e)}),this)},this.unfold=function(e,t){var n,r;if(null==e)n=new i(0,0,this.getLength(),0),null==t&&(t=!0);else if("number"==typeof e)n=new i(e,0,e,this.getLine(e).length);else if("row"in e)n=i.fromPoints(e,e);else{if(Array.isArray(e))return r=[],e.forEach((function(e){r=r.concat(this.unfold(e))}),this),r;n=e}for(var o=r=this.getFoldsInRangeList(n);1==r.length&&i.comparePoints(r[0].start,n.start)<0&&i.comparePoints(r[0].end,n.end)>0;)this.expandFolds(r),r=this.getFoldsInRangeList(n);if(0!=t?this.removeFolds(r):this.expandFolds(r),o.length)return o},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,i,r){null==i&&(i=e.start.row),null==r&&(r=0),null==t&&(t=e.end.row),null==n&&(n=this.getLine(t).length);var o=this.doc,s="";return e.walk((function(e,t,n,a){if(!(t<i)){if(t==i){if(n<r)return;a=Math.max(r,a)}s+=null!=e?e:o.getLine(t).substring(a,n)}}),t,n),s},this.getDisplayLine=function(e,t,n,i){var r,o=this.getFoldLine(e);return o?this.getFoldDisplayLine(o,e,t,n,i):(r=this.doc.getLine(e)).substring(i||0,t||r.length)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map((function(t){var n=t.folds.map((function(e){return e.clone()}));return new r(e,n)}))},this.toggleFold=function(e){var t,n,i=this.selection.getRange();if(i.isEmpty()){var r=i.start;if(t=this.getFoldAt(r.row,r.column))return void this.expandFold(t);(n=this.findMatchingBracket(r))?1==i.comparePoint(n)?i.end=n:(i.start=n,i.start.column++,i.end.column--):(n=this.findMatchingBracket({row:r.row,column:r.column+1}))?(1==i.comparePoint(n)?i.end=n:i.start=n,i.start.column++):i=this.getCommentFoldRange(r.row,r.column)||i}else{var o=this.getFoldsInRange(i);if(e&&o.length)return void this.expandFolds(o);1==o.length&&(t=o[0])}if(t||(t=this.getFoldAt(i.start.row,i.start.column)),t&&t.range.toString()==i.toString())this.expandFold(t);else{var s="...";if(!i.isMultiLine()){if((s=this.getTextRange(i)).length<4)return;s=s.trim().substring(0,2)+".."}this.addFold(s,i)}},this.getCommentFoldRange=function(e,t,n){var r=new s(this,e,t),o=r.getCurrentToken(),a=o&&o.type;if(o&&/^comment|string/.test(a)){"comment"==(a=a.match(/comment|string/)[0])&&(a+="|doc-start");var l=new RegExp(a),c=new i;if(1!=n){do{o=r.stepBackward()}while(o&&l.test(o.type));r.stepForward()}if(c.start.row=r.getCurrentTokenRow(),c.start.column=r.getCurrentTokenColumn()+2,r=new s(this,e,t),-1!=n){var u=-1;do{if(o=r.stepForward(),-1==u){var d=this.getState(r.$row);l.test(d)||(u=r.$row)}else if(r.$row>u)break}while(o&&l.test(o.type));o=r.stepBackward()}else o=r.getCurrentToken();return c.end.row=r.getCurrentTokenRow(),c.end.column=r.getCurrentTokenColumn()+o.value.length-2,c}},this.foldAll=function(e,t,n,i){void 0==n&&(n=1e5);var r=this.foldWidgets;if(r){t=t||this.getLength();for(var o=e=e||0;o<t;o++)if(null==r[o]&&(r[o]=this.getFoldWidget(o)),"start"==r[o]&&(!i||i(o))){var s=this.getFoldWidgetRange(o);s&&s.isMultiLine()&&s.end.row<=t&&s.start.row>=e&&(o=s.end.row,s.collapseChildren=n,this.addFold("...",s))}}},this.foldToLevel=function(e){for(this.foldAll();e-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var e=this;this.foldAll(null,null,null,(function(t){for(var n=e.getTokens(t),i=0;i<n.length;i++){var r=n[i];if("text"!=r.type||!/^\s+$/.test(r.value))return!!/comment/.test(r.type)}}))},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){this.$foldMode!=e&&(this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var i,r=e-1;r>=0;){var o=n[r];if(null==o&&(o=n[r]=this.getFoldWidget(r)),"start"==o){var s=this.getFoldWidgetRange(r);if(i||(i=s),s&&s.end.row>=e)break}r--}return{range:-1!==r&&s,firstRange:i}},this.onFoldWidgetClick=function(e,t){var n={children:(t=t.domEvent).shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};if(!this.$toggleFoldWidget(e,n)){var i=t.target||t.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),i=this.getLine(e),r="end"===n?-1:1,o=this.getFoldAt(e,-1===r?0:i.length,r);if(o)return t.children||t.all?this.removeFold(o):this.expandFold(o),o;var s=this.getFoldWidgetRange(e,!0);if(s&&!s.isMultiLine()&&(o=this.getFoldAt(s.start.row,s.start.column,1))&&s.isEqual(o.range))return this.removeFold(o),o;if(t.siblings){var a=this.getParentFoldRangeData(e);if(a.range)var l=a.range.start.row+1,c=a.range.end.row;this.foldAll(l,c,t.all?1e4:0)}else t.children?(c=s?s.end.row:this.getLength(),this.foldAll(e+1,c,t.all?1e4:0)):s&&(t.all&&(s.collapseChildren=1e4),this.addFold("...",s));return s}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(!n){var i=this.getParentFoldRangeData(t,!0);if(n=i.range||i.firstRange){t=n.start.row;var r=this.getFoldAt(t,this.getLine(t).length,1);r?this.removeFold(r):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.foldWidgets[t]=null;else if("remove"==e.action)this.foldWidgets.splice(t,n+1,null);else{var i=Array(n+1);i.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,i)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],(function(e,t,n){"use strict";var i=e("../token_iterator").TokenIterator,r=e("../range").Range;t.BracketMatch=function(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(""==n)return null;var i=n.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],e):this.$findOpeningBracket(i[2],e):null},this.getBracketRange=function(e){var t,n=this.getLine(e.row),i=!0,o=n.charAt(e.column-1),s=o&&o.match(/([\(\[\{])|([\)\]\}])/);if(s||(o=n.charAt(e.column),e={row:e.row,column:e.column+1},s=o&&o.match(/([\(\[\{])|([\)\]\}])/),i=!1),!s)return null;if(s[1]){if(!(a=this.$findClosingBracket(s[1],e)))return null;t=r.fromPoints(e,a),i||(t.end.column++,t.start.column--),t.cursor=t.end}else{var a;if(!(a=this.$findOpeningBracket(s[2],e)))return null;t=r.fromPoints(a,e),i||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.getMatchingBracketRanges=function(e){var t=this.getLine(e.row),n=t.charAt(e.column-1),i=n&&n.match(/([\(\[\{])|([\)\]\}])/);if(i||(n=t.charAt(e.column),e={row:e.row,column:e.column+1},i=n&&n.match(/([\(\[\{])|([\)\]\}])/)),!i)return null;var o=new r(e.row,e.column-1,e.row,e.column),s=i[1]?this.$findClosingBracket(i[1],e):this.$findOpeningBracket(i[2],e);return s?[o,new r(s.row,s.column,s.row,s.column+1)]:[o]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,n){var r=this.$brackets[e],o=1,s=new i(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var l=t.column-s.getCurrentTokenColumn()-2,c=a.value;;){for(;l>=0;){var u=c.charAt(l);if(u==r){if(0==(o-=1))return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else u==e&&(o+=1);l-=1}do{a=s.stepBackward()}while(a&&!n.test(a.type));if(null==a)break;l=(c=a.value).length-1}return null}},this.$findClosingBracket=function(e,t,n){var r=this.$brackets[e],o=1,s=new i(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var l=t.column-s.getCurrentTokenColumn();;){for(var c=a.value,u=c.length;l<u;){var d=c.charAt(l);if(d==r){if(0==(o-=1))return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else d==e&&(o+=1);l+=1}do{a=s.stepForward()}while(a&&!n.test(a.type));if(null==a)break;l=0}return null}}}})),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],(function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/lang"),o=e("./bidihandler").BidiHandler,s=e("./config"),a=e("./lib/event_emitter").EventEmitter,l=e("./selection").Selection,c=e("./mode/text").Mode,u=e("./range").Range,d=e("./document").Document,h=e("./background_tokenizer").BackgroundTokenizer,f=e("./search_highlight").SearchHighlight,p=function e(t,n){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++e.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof t&&t.getLine||(t=new d(t)),this.setDocument(t),this.selection=new l(this),this.$bidiHandler=new o(this),s.resetOptions(this),this.setMode(n),s._signal("session",this)};p.$uid=0,function(){i.implement(this,a),this.setDocument=function(e){this.doc&&this.doc.off("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){for(var n=0,i=e.length-1;n<=i;){var r=n+i>>1,o=e[r];if(t>o)n=r+1;else{if(!(t<o))return r;i=r-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n,i=this.bgTokenizer.getTokens(e),r=0;if(null==t){var o=i.length-1;r=this.getLine(e).length}else for(o=0;o<i.length&&!((r+=i[o].value.length)>=t);o++);return(n=i[o])?(n.index=o,n.start=r-n.value.length,n):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=r.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?r.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,i){var r=this.$markerId++,o={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!i,id:r};return i?(this.$frontMarkers[r]=o,this._signal("changeFrontMarker")):(this.$backMarkers[r]=o,this._signal("changeBackMarker")),r},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];t&&(delete(t.inFront?this.$frontMarkers:this.$backMarkers)[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new f(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,i){"number"!=typeof t&&(n=t,t=e),n||(n="ace_step");var r=new u(e,0,t,1/0);return r.id=this.addMarker(r,n,"fullLine",i),r},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getWordRange=function(e,t){var n=this.getLine(e),i=!1;if(t>0&&(i=!!n.charAt(t-1).match(this.tokenRe)),i||(i=!!n.charAt(t).match(this.tokenRe)),i)var r=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))r=/\s/;else r=this.nonTokenRe;var o=t;if(o>0){do{o--}while(o>=0&&n.charAt(o).match(r));o++}for(var s=t;s<n.length&&n.charAt(s).match(r);)s++;return new u(e,o,e,s)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),i=this.getLine(n.end.row);i.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes=s.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"===typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,i=n.path}else i=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c),this.$modes[i]&&!n)return this.$onChangeMode(this.$modes[i]),void(t&&t());this.$modeId=i,s.loadModule(["mode",i],function(e){if(this.$modeId!==i)return t&&t();this.$modes[i]&&!n?this.$onChangeMode(this.$modes[i]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[i]=e,e.$id=i),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){var n=this.$mode;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var i=e.getTokenizer();if(void 0!==i.on){var r=this.onReloadTokenizer.bind(this);i.on("update",r)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(i);else{this.bgTokenizer=new h(i);var o=this;this.bgTokenizer.on("update",(function(e){o._signal("tokenizerUpdate",e)}))}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:n,mode:e}))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){s.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach((function(t){t&&t.screenWidth>e&&(e=t.screenWidth)})),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,i=0,r=0,o=this.$foldData[r],s=o?o.start.row:1/0,a=t.length,l=0;l<a;l++){if(l>s){if((l=o.end.row+1)>=a)break;s=(o=this.$foldData[r++])?o.start.row:1/0}null==n[l]&&(n[l]=this.$getStringScreenWidth(t[l])[0]),n[l]>i&&(i=n[l])}this.screenWidth=i}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=e.length-1;-1!=n;n--){var i=e[n];"insert"==i.action||"remove"==i.action?this.doc.revertDelta(i):i.folds&&this.addFolds(i.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=0;n<e.length;n++){var i=e[n];"insert"!=i.action&&"remove"!=i.action||this.doc.$safeApplyDelta(i)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function n(e){return t?"insert"!==e.action:"insert"===e.action}for(var i,r,o=0;o<e.length;o++){var s=e[o];s.start&&(i?n(s)?(r=s.start,-1==i.compare(r.row,r.column)&&i.setStart(r),r=s.end,1==i.compare(r.row,r.column)&&i.setEnd(r)):(r=s.start,-1==i.compare(r.row,r.column)&&(i=u.fromPoints(s.start,s.start))):i=n(s)?u.fromPoints(s.start,s.end):u.fromPoints(s.start,s.start))}return i},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var i=this.getTextRange(e),r=this.getFoldsInRange(e),o=u.fromPoints(t,t);if(!n){this.remove(e);var s=e.start.row-e.end.row;(c=s?-e.end.column:e.start.column-e.end.column)&&(o.start.row==e.end.row&&o.start.column>e.end.column&&(o.start.column+=c),o.end.row==e.end.row&&o.end.column>e.end.column&&(o.end.column+=c)),s&&o.start.row>=e.end.row&&(o.start.row+=s,o.end.row+=s)}if(o.end=this.insert(o.start,i),r.length){var a=e.start,l=o.start,c=(s=l.row-a.row,l.column-a.column);this.addFolds(r.map((function(e){return(e=e.clone()).start.row==a.row&&(e.start.column+=c),e.end.row==a.row&&(e.end.column+=c),e.start.row+=s,e.end.row+=s,e})))}return o},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var i=e;i<=t;i++)this.doc.insertInLine({row:i,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new u(0,0,0,0),i=this.getTabSize(),r=t.start.row;r<=t.end.row;++r){var o=this.getLine(r);n.start.row=r,n.end.row=r;for(var s=0;s<i&&" "==o.charAt(s);++s);s<i&&"\t"==o.charAt(s)?(n.start.column=s,n.end.column=s+1):(n.start.column=0,n.end.column=s),this.remove(n)}},this.$moveLines=function(e,t,n){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),n<0){if((r=this.getRowFoldStart(e+n))<0)return 0;var i=r-e}else if(n>0){var r;if((r=this.getRowFoldEnd(t+n))>this.doc.getLength()-1)return 0;i=r-t}else{e=this.$clipRowToDocument(e);i=(t=this.$clipRowToDocument(t))-e+1}var o=new u(e,0,t,Number.MAX_VALUE),s=this.getFoldsInRange(o).map((function(e){return(e=e.clone()).start.row+=i,e.end.row+=i,e})),a=0==n?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+i,a),s.length&&this.addFolds(s),i},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var i=this.$constrainWrapLimit(e,n.min,n.max);return i!=this.$wrapLimit&&i>1&&(this.$wrapLimit=i,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,i=e.start,r=e.end,o=i.row,s=r.row,a=s-o,l=null;if(this.$updating=!0,0!=a)if("remove"===n){this[t?"$wrapData":"$rowLengthCache"].splice(o,a);var c=this.$foldData;l=this.getFoldsInRange(e),this.removeFolds(l);var u=0;if(g=this.getFoldLine(r.row)){g.addRemoveChars(r.row,r.column,i.column-r.column),g.shiftRow(-a);var d=this.getFoldLine(o);d&&d!==g&&(d.merge(g),g=d),u=c.indexOf(g)+1}for(;u<c.length;u++){(g=c[u]).start.row>=r.row&&g.shiftRow(-a)}s=o}else{var h=Array(a);h.unshift(o,0);var f=t?this.$wrapData:this.$rowLengthCache;f.splice.apply(f,h);c=this.$foldData,u=0;if(g=this.getFoldLine(o)){var p=g.range.compareInside(i.row,i.column);0==p?(g=g.split(i.row,i.column))&&(g.shiftRow(a),g.addRemoveChars(s,0,r.column-i.column)):-1==p&&(g.addRemoveChars(o,0,r.column-i.column),g.shiftRow(a)),u=c.indexOf(g)+1}for(;u<c.length;u++){var g;(g=c[u]).start.row>=o&&g.shiftRow(a)}}else a=Math.abs(e.start.column-e.end.column),"remove"===n&&(l=this.getFoldsInRange(e),this.removeFolds(l),a=-a),(g=this.getFoldLine(o))&&g.addRemoveChars(o,i.column,a);return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(o,s):this.$updateRowLengthCache(o,s),l},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(n,i){var r,o,s=this.doc.getAllLines(),a=this.getTabSize(),l=this.$wrapData,c=this.$wrapLimit,u=n;for(i=Math.min(i,s.length-1);u<=i;)(o=this.getFoldLine(u,o))?(r=[],o.walk(function(n,i,o,a){var l;if(null!=n){(l=this.$getDisplayTokens(n,r.length))[0]=e;for(var c=1;c<l.length;c++)l[c]=t}else l=this.$getDisplayTokens(s[i].substring(a,o),r.length);r=r.concat(l)}.bind(this),o.end.row,s[o.end.row].length+1),l[o.start.row]=this.$computeWrapSplits(r,c,a),u=o.end.row+1):(r=this.$getDisplayTokens(s[u]),l[u]=this.$computeWrapSplits(r,c,a),u++)};var e=3,t=4;function n(e){return!(e<4352)&&(e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510)}this.$computeWrapSplits=function(n,i,r){if(0==n.length)return[];var o=[],s=n.length,a=0,l=0,c=this.$wrapAsCode,u=this.$indentedSoftWrap,d=i<=Math.max(2*r,8)||!1===u?0:Math.floor(i/2);function h(e){for(var t=e-a,i=a;i<e;i++){var s=n[i];12!==s&&2!==s||(t-=1)}o.length||(f=function(){var e=0;if(0===d)return e;if(u)for(var t=0;t<n.length;t++){var i=n[t];if(10==i)e+=1;else{if(11!=i){if(12==i)continue;break}e+=r}}return c&&!1!==u&&(e+=r),Math.min(e,d)}(),o.indent=f),l+=t,o.push(l),a=e}for(var f=0;s-a>i-f;){var p=a+i-f;if(n[p-1]>=10&&n[p]>=10)h(p);else if(n[p]!=e&&n[p]!=t){for(var g=Math.max(p-(i-(i>>2)),a-1);p>g&&n[p]<e;)p--;if(c){for(;p>g&&n[p]<e;)p--;for(;p>g&&9==n[p];)p--}else for(;p>g&&n[p]<10;)p--;p>g?h(++p):(2==n[p=a+i]&&p--,h(p-f))}else{for(;p!=a-1&&n[p]!=e;p--);if(p>a){h(p);continue}for(p=a+i;p<n.length&&n[p]==t;p++);if(p==n.length)break;h(p)}}return o},this.$getDisplayTokens=function(e,t){var i,r=[];t=t||0;for(var o=0;o<e.length;o++){var s=e.charCodeAt(o);if(9==s){i=this.getScreenTabSize(r.length+t),r.push(11);for(var a=1;a<i;a++)r.push(12)}else 32==s?r.push(10):s>39&&s<48||s>57&&s<64?r.push(9):s>=4352&&n(s)?r.push(1,2):r.push(1)}return r},this.$getStringScreenWidth=function(e,t,i){if(0==t)return[0,0];var r,o;for(null==t&&(t=1/0),i=i||0,o=0;o<e.length&&(9==(r=e.charCodeAt(o))?i+=this.getScreenTabSize(i):r>=4352&&n(r)?i+=2:i+=1,!(i>t));o++);return[i,o]},this.lineWidgets=null,this.getRowLength=function(e){var t=1;return this.lineWidgets&&(t+=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0),this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+t:t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var i,r,o=0,s=0,a=0,l=0,c=this.$screenRowCache,u=this.$getRowCacheIndex(c,e),d=c.length;if(d&&u>=0){a=c[u],o=this.$docRowCache[u];var h=e>c[d-1]}else h=!d;for(var f=this.getLength()-1,p=this.getNextFoldLine(o),g=p?p.start.row:1/0;a<=e&&!(a+(l=this.getRowLength(o))>e||o>=f);)a+=l,++o>g&&(o=p.end.row+1,g=(p=this.getNextFoldLine(o,p))?p.start.row:1/0),h&&(this.$docRowCache.push(o),this.$screenRowCache.push(a));if(p&&p.start.row<=o)i=this.getFoldDisplayLine(p),o=p.start.row;else{if(a+l<=e||o>f)return{row:f,column:this.getLine(f).length};i=this.getLine(o),p=null}var m=0,v=Math.floor(e-a);if(this.$useWrapMode){var y=this.$wrapData[o];y&&(r=y[v],v>0&&y.length&&(m=y.indent,s=y[v-1]||y[y.length-1],i=i.substring(s)))}return void 0!==n&&this.$bidiHandler.isBidiRow(a+v,o,v)&&(t=this.$bidiHandler.offsetToCol(n)),s+=this.$getStringScreenWidth(i,t-m)[1],this.$useWrapMode&&s>=r&&(s=r-1),p?p.idxToPosition(s):{row:o,column:s}},this.documentToScreenPosition=function(e,t){if("undefined"===typeof t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var i,r=0,o=null;(i=this.getFoldAt(e,t,1))&&(e=i.start.row,t=i.start.column);var s,a=0,l=this.$docRowCache,c=this.$getRowCacheIndex(l,e),u=l.length;if(u&&c>=0){a=l[c],r=this.$screenRowCache[c];var d=e>l[u-1]}else d=!u;for(var h=this.getNextFoldLine(a),f=h?h.start.row:1/0;a<e;){if(a>=f){if((s=h.end.row+1)>e)break;f=(h=this.getNextFoldLine(s,h))?h.start.row:1/0}else s=a+1;r+=this.getRowLength(a),a=s,d&&(this.$docRowCache.push(a),this.$screenRowCache.push(r))}var p="";h&&a>=f?(p=this.getFoldDisplayLine(h,e,t),o=h.start.row):(p=this.getLine(e).substring(0,t),o=e);var g=0;if(this.$useWrapMode){var m=this.$wrapData[o];if(m){for(var v=0;p.length>=m[v];)r++,v++;p=p.substring(m[v-1]||0,p.length),g=v>0?m.indent:0}}return this.lineWidgets&&this.lineWidgets[a]&&this.lineWidgets[a].rowsAbove&&(r+=this.lineWidgets[a].rowsAbove),{row:r,column:g+this.$getStringScreenWidth(p)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,i=0,r=(a=0,(t=this.$foldData[a++])?t.start.row:1/0);i<n;){var o=this.$wrapData[i];e+=o?o.length+1:1,++i>r&&(i=t.end.row+1,r=(t=this.$foldData[a++])?t.start.row:1/0)}else{e=this.getLength();for(var s=this.$foldData,a=0;a<s.length;a++)e-=(t=s[a]).end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){this.$enableVarChar&&(this.$getStringScreenWidth=function(t,n,i){if(0===n)return[0,0];var r,o;for(n||(n=1/0),i=i||0,o=0;o<t.length&&!((i+="\t"===(r=t.charAt(o))?this.getScreenTabSize(i):e.getCharacterWidth(r))>n);o++);return[i,o]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},this.isFullWidth=n}.call(p.prototype),e("./edit_session/folding").Folding.call(p.prototype),e("./edit_session/bracket_match").BracketMatch.call(p.prototype),s.defineOptions(p.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e)if(this.$wrap=e,e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){(e=parseInt(e))>0&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=p})),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(e,t,n){"use strict";var i=e("./lib/lang"),r=e("./lib/oop"),o=e("./range").Range,s=function(){this.$options={}};(function(){this.set=function(e){return r.mixin(this.$options,e),this},this.getOptions=function(){return i.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var i=null;return n.forEach((function(e,n,r,s){return i=new o(e,n,r,s),!(n==s&&t.start&&t.start.start&&0!=t.skipCurrent&&i.isEqual(t.start))||(i=null,!1)})),i},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,r=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),s=[],a=t.re;if(t.$isMultiLine){var l,c=a.length,u=r.length-c;e:for(var d=a.offset||0;d<=u;d++){for(var h=0;h<c;h++)if(-1==r[d+h].search(a[h]))continue e;var f=r[d],p=r[d+c-1],g=f.length-f.match(a[0])[0].length,m=p.match(a[c-1])[0].length;l&&l.end.row===d&&l.end.column>g||(s.push(l=new o(d,g,d+c-1,m)),c>2&&(d=d+c-2))}}else for(var v=0;v<r.length;v++){var y=i.getMatchOffsets(r[v],a);for(h=0;h<y.length;h++){var b=y[h];s.push(new o(v,b.offset,v,b.offset+b.length))}}if(n){var w=n.start.column,_=n.start.column;for(v=0,h=s.length-1;v<h&&s[v].start.column<w&&s[v].start.row==n.start.row;)v++;for(;v<h&&s[h].end.column>_&&s[h].end.row==n.end.row;)h--;for(s=s.slice(v,h+1),v=0,h=s.length;v<h;v++)s[v].start.row+=n.start.row,s[v].end.row+=n.start.row}return s},this.replace=function(e,t){var n=this.$options,i=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(i){var r=i.exec(e);if(!r||r[0].length!=e.length)return null;if(t=e.replace(i,t),n.preserveCase){t=t.split("");for(var o=Math.min(e.length,e.length);o--;){var s=e[o];s&&s.toLowerCase()!=s?t[o]=t[o].toUpperCase():t[o]=t[o].toLowerCase()}t=t.join("")}return t}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=i.escapeRegExp(n)),e.wholeWord&&(n=function(e,t){function n(e){return/\w/.test(e)||t.regExp?"\\b":""}return n(e[0])+e+n(e[e.length-1])}(n,e));var r=e.caseSensitive?"gm":"gmi";if(e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,r);try{var o=new RegExp(n,r)}catch(s){o=!1}return e.re=o},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),i=[],r=0;r<n.length;r++)try{i.push(new RegExp(n[r],t))}catch(o){return!1}return i},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var i=1==t.backwards,r=0!=t.skipCurrent,o=t.range,s=t.start;s||(s=o?o[i?"end":"start"]:e.selection.getRange()),s.start&&(s=s[r!=i?"end":"start"]);var a=o?o.start.row:0,l=o?o.end.row:e.getLength()-1;if(i)var c=function(e){var n=s.row;if(!d(n,s.column,e)){for(n--;n>=a;n--)if(d(n,Number.MAX_VALUE,e))return;if(0!=t.wrap)for(n=l,a=s.row;n>=a;n--)if(d(n,Number.MAX_VALUE,e))return}};else c=function(e){var n=s.row;if(!d(n,s.column,e)){for(n+=1;n<=l;n++)if(d(n,0,e))return;if(0!=t.wrap)for(n=a,l=s.row;n<=l;n++)if(d(n,0,e))return}};if(t.$isMultiLine)var u=n.length,d=function(t,r,o){var s=i?t-u+1:t;if(!(s<0||s+u>e.getLength())){var a=e.getLine(s),l=a.search(n[0]);if(!(!i&&l<r||-1===l)){for(var c=1;c<u;c++)if(-1==(a=e.getLine(s+c)).search(n[c]))return;var d=a.match(n[u-1])[0].length;if(!(i&&d>r))return!!o(s,l,s+u-1,d)||void 0}}};else if(i)d=function(t,i,r){var o,s=e.getLine(t),a=[],l=0;for(n.lastIndex=0;o=n.exec(s);){var c=o[0].length;if(l=o.index,!c){if(l>=s.length)break;n.lastIndex=l+=1}if(o.index+c>i)break;a.push(o.index,c)}for(var u=a.length-1;u>=0;u-=2){var d=a[u-1];if(r(t,d,t,d+(c=a[u])))return!0}};else d=function(t,i,r){var o,s,a=e.getLine(t);for(n.lastIndex=i;s=n.exec(a);){var l=s[0].length;if(r(t,o=s.index,t,o+l))return!0;if(!l&&(n.lastIndex=o+=1,o>=a.length))return!1}};return{forEach:c}}}).call(s.prototype),t.Search=s})),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("../lib/keys"),r=e("../lib/useragent"),o=i.KEY_MODS;function s(e,t){this.platform=t||(r.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function a(e,t){s.call(this,e,t),this.$singleCommand=!1}a.prototype=s.prototype,function(){function e(e){return"object"==typeof e&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&("string"===typeof e?e:e.name);e=this.commands[n],t||delete this.commands[n];var i=this.commandKeyBinding;for(var r in i){var o=i[r];if(o==e)delete i[r];else if(Array.isArray(o)){var s=o.indexOf(e);-1!=s&&(o.splice(s,1),1==o.length&&(i[r]=o[0]))}}},this.bindKey=function(e,t,n){if("object"==typeof e&&e&&(void 0==n&&(n=e.position),e=e[this.platform]),e)return"function"==typeof t?this.addCommand({exec:t,bindKey:e,name:t.name||e}):void e.split("|").forEach((function(e){var i="";if(-1!=e.indexOf(" ")){var r=e.split(/\s+/);e=r.pop(),r.forEach((function(e){var t=this.parseKeys(e),n=o[t.hashId]+t.key;i+=(i?" ":"")+n,this._addCommandToBinding(i,"chainKeys")}),this),i+=" "}var s=this.parseKeys(e),a=o[s.hashId]+s.key;this._addCommandToBinding(i+a,t,n)}),this)},this._addCommandToBinding=function(t,n,i){var r,o=this.commandKeyBinding;if(n)if(!o[t]||this.$singleCommand)o[t]=n;else{Array.isArray(o[t])?-1!=(r=o[t].indexOf(n))&&o[t].splice(r,1):o[t]=[o[t]],"number"!=typeof i&&(i=e(n));var s=o[t];for(r=0;r<s.length;r++){if(e(s[r])>i)break}s.splice(r,0,n)}else delete o[t]},this.addCommands=function(e){e&&Object.keys(e).forEach((function(t){var n=e[t];if(n){if("string"===typeof n)return this.bindKey(n,t);"function"===typeof n&&(n={exec:n}),"object"===typeof n&&(n.name||(n.name=t),this.addCommand(n))}}),this)},this.removeCommands=function(e){Object.keys(e).forEach((function(t){this.removeCommand(e[t])}),this)},this.bindKeys=function(e){Object.keys(e).forEach((function(t){this.bindKey(t,e[t])}),this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(e){return e})),n=t.pop(),r=i[n];if(i.FUNCTION_KEYS[r])n=i.FUNCTION_KEYS[r].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var o=0,s=t.length;s--;){var a=i.KEY_MODS[t[s]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+t[s]+" in "+e),!1;o|=a}return{key:n,hashId:o}},this.findKeyCommand=function(e,t){var n=o[e]+t;return this.commandKeyBinding[n]},this.handleKeyboard=function(e,t,n,i){if(!(i<0)){var r=o[t]+n,s=this.commandKeyBinding[r];return e.$keyChain&&(e.$keyChain+=" "+r,s=this.commandKeyBinding[e.$keyChain]||s),!s||"chainKeys"!=s&&"chainKeys"!=s[s.length-1]?(e.$keyChain&&(t&&4!=t||1!=n.length?(-1==t||i>0)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-r.length-1)),{command:s}):(e.$keyChain=e.$keyChain||r,{command:"null"})}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(s.prototype),t.HashHandler=s,t.MultiHashHandler=a})),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("../keyboard/hash_handler").MultiHashHandler,o=e("../lib/event_emitter").EventEmitter,s=function(e,t){r.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",(function(e){return e.command.exec(e.editor,e.args||{})}))};i.inherits(s,r),function(){i.implement(this,o),this.exec=function(e,t,n){if(Array.isArray(e)){for(var i=e.length;i--;)if(this.exec(e[i],t,n))return!0;return!1}if("string"===typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(0!=this.$checkCommandState&&e.isAvailable&&!e.isAvailable(t))return!1;var r={editor:t,command:e,args:n};return r.returnValue=this._emit("exec",r),this._signal("afterExec",r),!1!==r.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach((function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])}),this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map((function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e}))}}.call(s.prototype),t.CommandManager=s})),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],(function(e,t,n){"use strict";var i=e("../lib/lang"),r=e("../config"),o=e("../range").Range;function s(e,t){return{win:e,mac:t}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:s("Ctrl-,","Command-,"),exec:function(e){r.loadModule("ace/ext/settings_menu",(function(t){t.init(e),e.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:s("Alt-E","F4"),exec:function(e){r.loadModule("./ext/error_marker",(function(t){t.showErrorMarker(e,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:s("Alt-Shift-E","Shift-F4"),exec:function(e){r.loadModule("./ext/error_marker",(function(t){t.showErrorMarker(e,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:s("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:s(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:s("Ctrl-L","Command-L"),exec:function(e,t){"number"!==typeof t||isNaN(t)||e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:s("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:s("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:s("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:s("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:s("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:s("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:s("Ctrl-F","Command-F"),exec:function(e){r.loadModule("ace/ext/searchbox",(function(t){t.Search(e)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:s("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:s("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:s("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:s("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:s("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:s("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:s("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:s("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:s("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:s("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:s("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:s("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:s("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:s("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:s(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:s(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:s("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:s("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:s("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:s("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:s("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:s(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty()?e.selection.getLineRange():e.selection.getRange();e._emit("cut",t),t.isEmpty()||e.session.remove(t),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:s("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:s("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(e){r.loadModule("ace/ext/searchbox",(function(t){t.Search(e,!0)}))}},{name:"undo",description:"Undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:s("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:s("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:s("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:s("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:s("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:s("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:s("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:s("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(i.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:s(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:s("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:s(null,null),exec:function(e){e.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:s("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:s(null,null),exec:function(e){for(var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),r=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),s=e.session.doc.getLine(n.row).length,a=e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/," ").length,l=e.session.doc.getLine(n.row),c=n.row+1;c<=r.row+1;c++){var u=i.stringTrimLeft(i.stringTrimRight(e.session.doc.getLine(c)));0!==u.length&&(u=" "+u),l+=u}r.row+1<e.session.doc.getLength()-1&&(l+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new o(n.row,0,r.row+2,0),l),a>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+a)):(s=e.session.doc.getLine(n.row).length>s?s+1:s,e.selection.moveCursorTo(n.row,s))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:s(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,i=e.selection.rangeList.ranges,r=[];i.length<1&&(i=[e.selection.getRange()]);for(var s=0;s<i.length;s++)s==i.length-1&&(i[s].end.row===t&&i[s].end.column===n||r.push(new o(i[s].end.row,i[s].end.column,t,n))),0===s?0===i[s].start.row&&0===i[s].start.column||r.push(new o(0,0,i[s].start.row,i[s].start.column)):r.push(new o(i[s-1].end.row,i[s-1].end.column,i[s].start.row,i[s].start.column));e.exitMultiSelectMode(),e.clearSelection();for(s=0;s<r.length;s++)e.selection.addRange(r[s],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(e){e.selection.clearSelection(),e.navigateLineEnd(),e.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(e){e.selection.clearSelection();var t=e.getCursorPosition();e.selection.moveTo(t.row-1,Number.MAX_VALUE),e.insert("\n"),0===t.row&&e.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:s("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:s(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}];for(var a=1;a<9;a++)t.commands.push({name:"foldToLevel"+a,description:"Fold To Level "+a,level:a,exec:function(e){e.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})})),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],(function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var i=e("./lib/oop"),r=e("./lib/dom"),o=e("./lib/lang"),s=e("./lib/useragent"),a=e("./keyboard/textinput").TextInput,l=e("./mouse/mouse_handler").MouseHandler,c=e("./mouse/fold_handler").FoldHandler,u=e("./keyboard/keybinding").KeyBinding,d=e("./edit_session").EditSession,h=e("./search").Search,f=e("./range").Range,p=e("./lib/event_emitter").EventEmitter,g=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,v=e("./config"),y=e("./token_iterator").TokenIterator,b=e("./clipboard"),w=function e(t,n,i){this.$toDestroy=[];var r=t.getContainerElement();this.container=r,this.renderer=t,this.id="editor"+ ++e.$uid,this.commands=new g(s.isMac?"mac":"win",m),"object"==typeof document&&(this.textInput=new a(t.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new l(this),new c(this)),this.keyBinding=new u(this),this.$search=(new h).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",(function(e,t){t._$emitInputEvent.schedule(31)})),this.setSession(n||i&&i.session||new d("")),v.resetOptions(this),i&&this.setOptions(i),v._signal("editor",this)};w.$uid=0,function(){i.implement(this,p),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=o.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp&&this.session){if(e&&!1===e.returnValue||!this.session)return this.curOp=null;if(1==e&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var t=this.curOp.command,n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),r=this.renderer.layerConfig;(i.start.row>=r.lastRow||i.end.row<=r.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}var o=this.selection.toJSON();this.curOp.selectionAfter=o,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(o),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=this.$mergeableCommands,i=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var r=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),i=i&&this.mergeNextCommand&&(!/\s/.test(r)||/\s/.test(t.args)),this.mergeNextCommand=!0}else i=i&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(i=!1),i?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e,t){if(e&&"string"===typeof e&&"ace"!=e){this.$keybindingId=e;var n=this;v.loadModule(["keybinding",e],(function(i){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(i&&i.handler),t&&t()}))}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&e.bgTokenizer&&e.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||r.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout((function(){e.$highlightPending=!1;var t=e.session;if(t&&t.bgTokenizer){t.$bracketHighlight&&(t.$bracketHighlight.markerIds.forEach((function(e){t.removeMarker(e)})),t.$bracketHighlight=null);var n=t.getMatchingBracketRanges(e.getCursorPosition());if(!n&&t.$mode.getMatching&&(n=t.$mode.getMatching(e.session)),n){var i="ace_bracket";Array.isArray(n)?1==n.length&&(i="ace_error_bracket"):n=[n],2==n.length&&(0==f.comparePoints(n[0].end,n[1].start)?n=[f.fromPoints(n[0].start,n[1].end)]:0==f.comparePoints(n[0].start,n[1].end)&&(n=[f.fromPoints(n[1].start,n[0].end)])),t.$bracketHighlight={ranges:n,markerIds:n.map((function(e){return t.addMarker(e,i,"text")}))}}}}),50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var e=this;this.$highlightTagPending=!0,setTimeout((function(){e.$highlightTagPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=e.getCursorPosition(),i=new y(e.session,n.row,n.column),r=i.getCurrentToken();if(!r||!/\b(?:tag-open|tag-name)/.test(r.type))return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);if(-1===r.type.indexOf("tag-open")||(r=i.stepForward())){var o=r.value,s=r.value,a=0,l=i.stepBackward();if("<"===l.value)do{l=r,(r=i.stepForward())&&(-1!==r.type.indexOf("tag-name")?o===(s=r.value)&&("<"===l.value?a++:"</"===l.value&&a--):o===s&&"/>"===r.value&&a--)}while(r&&a>=0);else{do{if(r=l,l=i.stepBackward(),r)if(-1!==r.type.indexOf("tag-name"))o===r.value&&("<"===l.value?a++:"</"===l.value&&a--);else if("/>"===r.value){for(var c=0,u=l;u;){if(-1!==u.type.indexOf("tag-name")&&u.value===o){a--;break}if("<"===u.value)break;u=i.stepBackward(),c++}for(var d=0;d<c;d++)i.stepForward()}}while(l&&a<=0);i.stepForward()}if(!r)return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var h=i.getCurrentTokenRow(),p=i.getCurrentTokenColumn(),g=new f(h,p,h,p+r.value.length),m=t.$backMarkers[t.$tagHighlight];t.$tagHighlight&&void 0!=m&&0!==g.compareRange(m.range)&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),t.$tagHighlight||(t.$tagHighlight=t.addMarker(g,"ace_bracket","text"))}}}),50)}},this.focus=function(){var e=this;setTimeout((function(){e.isFocused()||e.textInput.focus()})),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(e=!1),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(e=!1)),t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var n=new f(e.row,e.column,e.row,1/0);n.id=t.addMarker(n,"ace_active-line","screenLine"),t.$highlightLineMarker=n}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),i=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",i)}var r=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(r),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column,i=t.end.column,r=e.getLine(t.start.row),o=r.substring(n,i);if(!(o.length>5e3)&&/[\w\d]/.test(o)){var s=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o}),a=r.substring(n-1,i+1);if(s.test(a))return s}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),n=!1;if(!e&&this.$copyWithEmptySelection){n=!0;for(var i=this.selection.getAllRanges(),r=0;r<i.length;r++){var o=i[r];r&&i[r-1].start.row==o.start.row||(e+=this.session.getLine(o.start.row)+t)}}var s={text:e};return this._signal("copy",s),b.lineMode=!!n&&s.text,s.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec("paste",this,n)},this.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e);var t=e.text,n=t===b.lineMode,i=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?i.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(n)this.selection.rangeList.ranges.forEach((function(e){i.insert({row:e.start.row,column:0},t)}));else{var r=t.split(/\r\n|\r|\n/),o=this.selection.rangeList.ranges,s=2==r.length&&(!r[0]||!r[1]);if(r.length!=o.length||s)return this.commands.exec("insertstring",this,t);for(var a=o.length;a--;){var l=o[a];l.isEmpty()||i.remove(l),i.insert(l.start,r[a])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,i=n.getMode(),r=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var o=i.transformAction(n.getState(r.row),"insertion",this,n,e);o&&(e!==o.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=o.text)}if("\t"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==e.indexOf("\n")){(s=new f.fromPoints(r,r)).end.column+=e.length,this.session.remove(s)}}else{var s=this.getSelectionRange();r=this.session.remove(s),this.clearSelection()}if("\n"==e||"\r\n"==e){var a=n.getLine(r.row);if(r.column>a.search(/\S|$/)){var l=a.substr(r.column).search(/\S|$/);n.doc.removeInLine(r.row,r.column,r.column+l)}}this.clearSelection();var c=r.column,u=n.getState(r.row),d=(a=n.getLine(r.row),i.checkOutdent(u,a,e));if(n.insert(r,e),o&&o.selection&&(2==o.selection.length?this.selection.setSelectionRange(new f(r.row,c+o.selection[0],r.row,c+o.selection[1])):this.selection.setSelectionRange(new f(r.row+o.selection[0],o.selection[1],r.row+o.selection[2],o.selection[3]))),this.$enableAutoIndent){if(n.getDocument().isNewLine(e)){var h=i.getNextLineIndent(u,a.slice(0,r.column),n.getTabString());n.insert({row:r.row+1,column:0},h)}d&&i.autoOutdent(u,n,r.row)}},this.autoIndent=function(){var e,t,n=this.session,i=n.getMode();if(this.selection.isEmpty())e=0,t=n.doc.getLength()-1;else{var r=this.getSelectionRange();e=r.start.row,t=r.end.row}for(var o,s,a,l="",c="",u="",d=n.getTabString(),h=e;h<=t;h++)h>0&&(l=n.getState(h-1),c=n.getLine(h-1),u=i.getNextLineIndent(l,c,d)),o=n.getLine(h),u!==(s=i.$getIndent(o))&&(s.length>0&&(a=new f(h,0,h,s.length),n.remove(a)),u.length>0&&n.insert({row:h,column:0},u)),i.autoOutdent(l,n,h)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(e,t){var n;(t.extendLeft||t.extendRight)&&((n=this.selection.getRange()).start.column-=t.extendLeft,n.end.column+=t.extendRight,n.start.column<0&&(n.start.row--,n.start.column+=this.session.getLine(n.start.row).length+1),this.selection.setRange(n),e||n.isEmpty()||this.remove());(!e&&this.selection.isEmpty()||this.insert(e,!0),t.restoreStart||t.restoreEnd)&&((n=this.selection.getRange()).start.column-=t.restoreStart,n.end.column-=t.restoreEnd,this.selection.setRange(n))},this.onCommandKey=function(e,t,n){return this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,i=n.getState(t.start.row),r=n.getMode().transformAction(i,"deletion",this,n,t);if(0===t.end.column){var o=n.getTextRange(t);if("\n"==o[o.length-1]){var s=n.getLine(t.end.row);/^\s+$/.test(s)&&(t.end.column=s.length)}}r&&(t=r)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var n,i,r=this.session.getLine(e.row);t<r.length?(n=r.charAt(t)+r.charAt(t-1),i=new f(e.row,t-1,e.row,t+1)):(n=r.charAt(t-1)+r.charAt(t-2),i=new f(e.row,t-2,e.row,t)),this.session.replace(i,n),this.session.selection.moveToPosition(i.end)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(!(t.start.row<t.end.row)){if(t.start.column<t.end.column){var n=e.getTextRange(t);if(!/^\s+$/.test(n)){u=this.$getSelectedRows();return void e.indentRows(u.first,u.last,"\t")}}var i=e.getLine(t.start.row),r=t.start,s=e.getTabSize(),a=e.documentToScreenColumn(r.row,r.column);if(this.session.getUseSoftTabs())var l=s-a%s,c=o.stringRepeat(" ",l);else{for(l=a%s;" "==i[t.start.column-1]&&l;)t.start.column--,l--;this.selection.setSelectionRange(t),c="\t"}return this.insert(c)}var u=this.$getSelectedRows();e.indentRows(u.first,u.last,"\t")},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,n=[],i=e.first;i<=e.last;i++)n.push(t.getLine(i));n.sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}));var r=new f(0,0,0,0);for(i=e.first;i<=e.last;i++){var o=t.getLine(i);r.start.row=i,r.end.row=i,r.end.column=o.length,t.replace(r,n[i-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var i=this.session.getLine(e);n.lastIndex<t;){var r=n.exec(i);if(r.index<=t&&r.index+r[0].length>=t)return{value:r[0],start:r.index,end:r.index+r[0].length}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,i=new f(t,n-1,t,n),r=this.session.getTextRange(i);if(!isNaN(parseFloat(r))&&isFinite(r)){var o=this.getNumberAt(t,n);if(o){var s=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,a=o.start+o.value.length-s,l=parseFloat(o.value);l*=Math.pow(10,a),s!==o.end&&n<s?e*=Math.pow(10,o.end-n-1):e*=Math.pow(10,o.end-n),l+=e;var c=(l/=Math.pow(10,a)).toFixed(a),u=new f(t,o.start,t,o.end);this.session.replace(u,c),this.moveCursorTo(t,Math.max(o.start+1,n+c.length-o.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),i=this.selection.getWordRange().start.column,r=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),s=t-i-1;s<0&&(s=0);var a=0,l=0,c=this;n.match(/[A-Za-z0-9_]+/)&&r.forEach((function(t,r){l=a+t.length,s>=a&&s<=l&&(n=t,c.selection.clearSelection(),c.moveCursorTo(e,a+i),c.selection.selectTo(e,l+i)),a=l}));for(var u,d=this.$toggleWordPairs,h=0;h<d.length;h++)for(var f=d[h],p=0;p<=1;p++){var g=+!p,m=n.match(new RegExp("^\\s?_?("+o.escapeRegExp(f[p])+")\\s?$","i"));if(m)n.match(new RegExp("([_]|^|\\s)("+o.escapeRegExp(m[1])+")($|\\s)","g"))&&(u=n.replace(new RegExp(o.escapeRegExp(f[p]),"i"),(function(e){var t=f[g];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+f[g].charAt(0).toUpperCase()+t.substr(1)),t})),this.insert(u),u="")}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),i=e.isBackwards();if(n.isEmpty()){var r=n.start.row;t.duplicateLines(r,r)}else{var o=i?n.start:n.end,s=t.insert(o,t.getTextRange(n),!1);n.start=o,n.end=s,e.setSelectionRange(n,i)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,i,r=this.selection;if(!r.inMultiSelectMode||this.inVirtualSelectionMode){var o=r.toOrientedRange();n=this.$getSelectedRows(o),i=this.session.$moveLines(n.first,n.last,t?0:e),t&&-1==e&&(i=0),o.moveBy(i,0),r.fromOrientedRange(o)}else{var s=r.rangeList.ranges;r.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,l=0,c=s.length,u=0;u<c;u++){var d=u;s[u].moveBy(a,0);for(var h=(n=this.$getSelectedRows(s[u])).first,f=n.last;++u<c;){l&&s[u].moveBy(l,0);var p=this.$getSelectedRows(s[u]);if(t&&p.first!=f)break;if(!t&&p.first>f+1)break;f=p.last}for(u--,a=this.session.$moveLines(h,f,t?0:e),t&&-1==e&&(d=u+1);d<=u;)s[d].moveBy(a,0),d++;t||(a=0),l+=a}r.fromOrientedRange(r.ranges[0]),r.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,i=this.renderer.layerConfig,r=e*Math.floor(i.height/i.lineHeight);!0===t?this.selection.$moveSelection((function(){this.moveCursorBy(r,0)})):!1===t&&(this.selection.moveCursorBy(r,0),this.selection.clearSelection());var o=n.scrollTop;n.scrollBy(0,r*i.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,i){this.renderer.scrollToLine(e,t,n,i)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),i=new y(this.session,n.row,n.column),r=i.getCurrentToken(),o=r||i.stepForward();if(o){var s,a,l=!1,c={},u=n.column-o.start,d={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;u<o.value.length&&!l;u++)if(d[o.value[u]])switch(a=d[o.value[u]]+"."+o.type.replace("rparen","lparen"),isNaN(c[a])&&(c[a]=0),o.value[u]){case"(":case"[":case"{":c[a]++;break;case")":case"]":case"}":c[a]--,-1===c[a]&&(s="bracket",l=!0)}}else-1!==o.type.indexOf("tag-name")&&(isNaN(c[o.value])&&(c[o.value]=0),"<"===r.value?c[o.value]++:"</"===r.value&&c[o.value]--,-1===c[o.value]&&(s="tag",l=!0));l||(r=o,o=i.stepForward(),u=0)}while(o&&!l);if(s){var h,p;if("bracket"===s)(h=this.session.getBracketRange(n))||(p=(h=new f(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1,i.getCurrentTokenRow(),i.getCurrentTokenColumn()+u-1)).start,(t||p.row===n.row&&Math.abs(p.column-n.column)<2)&&(h=this.session.getBracketRange(p)));else if("tag"===s){if(!o||-1===o.type.indexOf("tag-name"))return;var g=o.value;if(0===(h=new f(i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2,i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2)).compare(n.row,n.column)){l=!1;do{o=r,(r=i.stepBackward())&&(-1!==r.type.indexOf("tag-close")&&h.setEnd(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1),o.value===g&&-1!==o.type.indexOf("tag-name")&&("<"===r.value?c[g]++:"</"===r.value&&c[g]--,0===c[g]&&(l=!0)))}while(r&&!l)}o&&o.type.indexOf("tag-name")&&(p=h.start).row==n.row&&Math.abs(p.column-n.column)<2&&(p=h.end)}(p=h&&h.cursor||p)&&(e?h&&t?this.selection.setRange(h):h&&h.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(p.row,p.column):this.selection.moveTo(p.row,p.column))}}},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),i=0;return n?(this.$tryReplace(n,e)&&(i=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),i):i},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),i=0;if(!n.length)return i;var r=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=n.length-1;o>=0;--o)this.$tryReplace(n[o],e)&&i++;return this.selection.setSelectionRange(r),i},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return null!==(t=this.$search.replace(n,t))?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&i.mixin(t,e);var r=this.selection.getRange();null==t.needle&&((e=this.session.getTextRange(r)||this.$search.$options.needle)||(r=this.session.getWordRange(r.start.row,r.start.column),e=this.session.getTextRange(r)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:r});var o=this.$search.find(this.session);return t.preventScroll?o:o?(this.revealRange(o,n),o):(t.backwards?r.start=r.end:r.end=r.start,void this.selection.setRange(r))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach((function(e){e.destroy()})),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(e){if(e){var t,n=this,i=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var r=this.$scrollAnchor;r.style.cssText="position:absolute",this.container.insertBefore(r,this.container.firstChild);var o=this.on("changeSelection",(function(){i=!0})),s=this.renderer.on("beforeRender",(function(){i&&(t=n.renderer.container.getBoundingClientRect())})),a=this.renderer.on("afterRender",(function(){if(i&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,o=e.$cursorLayer.$pixelPos,s=e.layerConfig,a=o.top-s.offset;null!=(i=o.top>=0&&a+t.top<0||!(o.top<s.height&&o.top+t.top+s.lineHeight>window.innerHeight)&&null)&&(r.style.top=a+"px",r.style.left=o.left+"px",r.style.height=s.lineHeight+"px",r.scrollIntoView(i)),i=t=null}}));this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",o),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",s))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,r.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))},this.prompt=function(e,t,n){var i=this;v.loadModule("./ext/prompt",(function(r){r.prompt(i,e,t,n)}))}}.call(w.prototype),v.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?_.attach(this):_.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?_.attach(this):_.detach(this)}},placeholder:{set:function(e){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var e=this.session&&(this.renderer.$composition||this.getValue());if(e&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),r.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(e||this.renderer.placeholderNode)!e&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"");else{this.renderer.on("afterRender",this.$updatePlaceholder),r.addCssClass(this.container,"ace_hasPlaceholder");var t=r.createElement("div");t.className="ace_placeholder",t.textContent=this.$placeholder||"",this.renderer.placeholderNode=t,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var _={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"\xb7":""))+""},getWidth:function(e,t,n){return Math.max(t.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}};t.Editor=w})),ace.define("ace/undomanager",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,n){this.$fromUndo||e!=this.$lastDelta&&(this.$keepRedoStack||(this.$redoStack.length=0),!1!==t&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev),"remove"!=e.action&&"insert"!=e.action||(this.$lastDelta=e),this.lastDeltas.push(e))},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,i=n.length;i--;){var r=n[i][0];if(r.id<=e)break;r.id<t&&(r.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){for(var n=this.selections,i=n.length;i--;){var r=n[i];if(r.rev<e)return t&&(r=n[i+1]),r}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,i=null,r=0,o=n.length;o--;){var s=n[o][0];if(s.id<t&&!i&&(i=o+1),s.id<=e){r=o+1;break}}return n.slice(r,i)},this.getChangedRanges=function(e,t){null==t&&(t=this.$rev+1)},this.getChangedLines=function(e,t){null==t&&(t=this.$rev+1)},this.undo=function(e,t){this.lastDeltas=null;var n=this.$undoStack;if(function(e,t){for(var n=t;n--;){var i=e[n];if(i&&!i[0].ignore){for(;n<t-1;){var r=u(e[n],e[n+1]);e[n]=r[0],e[n+1]=r[1],n++}return!0}}}(n,n.length)){e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var i=n.pop(),r=null;return i&&(r=e.undoChanges(i,t),this.$redoStack.push(i),this.$syncRev()),this.$fromUndo=!1,r}},this.redo=function(e,t){if(this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);!function(e,t){for(var n=0;n<t.length;n++)for(var i=t[n],r=0;r<i.length;r++)g(e,i[r])}(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(e){e[0].id=++this.$maxRev}),this)}var i=this.$redoStack.pop(),r=null;return i&&(r=e.redoChanges(i,t),this.$undoStack.push(i),this.$syncRev()),this.$fromUndo=!1,r},this.$syncRev=function(){var e=this.$undoStack,t=e[e.length-1],n=t&&t[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(e){void 0==e&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?a(e):a(this.$undoStack)+"\n---\n"+a(this.$redoStack)}}).call(i.prototype);var r=e("./range").Range,o=r.comparePoints;r.comparePoints;function s(e){return{row:e.row,column:e.column}}function a(e){if(e=e||this,Array.isArray(e))return e.map(a).join("\n");var t="";return e.action?(t="insert"==e.action?"+":"-",t+="["+e.lines+"]"):e.value&&(t=Array.isArray(e.value)?e.value.map(l).join("\n"):l(e.value)),e.start&&(t+=l(e)),(e.id||e.rev)&&(t+="\t("+(e.id||e.rev)+")"),t}function l(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function c(e,t){var n="insert"==e.action,i="insert"==t.action;if(n&&i)if(o(t.start,e.end)>=0)h(t,e,-1);else{if(!(o(t.start,e.start)<=0))return null;h(e,t,1)}else if(n&&!i)if(o(t.start,e.end)>=0)h(t,e,-1);else{if(!(o(t.end,e.start)<=0))return null;h(e,t,-1)}else if(!n&&i)if(o(t.start,e.start)>=0)h(t,e,1);else{if(!(o(t.start,e.start)<=0))return null;h(e,t,1)}else if(!n&&!i)if(o(t.start,e.start)>=0)h(t,e,1);else{if(!(o(t.end,e.start)<=0))return null;h(e,t,-1)}return[t,e]}function u(e,t){for(var n=e.length;n--;)for(var i=0;i<t.length;i++)if(!c(e[n],t[i])){for(;n<e.length;){for(;i--;)c(t[i],e[n]);i=t.length,n++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}function d(e,t){var n="insert"==e.action,i="insert"==t.action;if(n&&i)o(e.start,t.start)<0?h(t,e,1):h(e,t,1);else if(n&&!i)o(e.start,t.end)>=0?h(e,t,-1):(o(e.start,t.start)<=0||h(e,r.fromPoints(t.start,e.start),-1),h(t,e,1));else if(!n&&i)o(t.start,e.end)>=0?h(t,e,-1):(o(t.start,e.start)<=0||h(t,r.fromPoints(e.start,t.start),-1),h(e,t,1));else if(!n&&!i)if(o(t.start,e.end)>=0)h(t,e,-1);else{var s,a;if(!(o(t.end,e.start)<=0))return o(e.start,t.start)<0&&(s=e,e=p(e,t.start)),o(e.end,t.end)>0&&(a=p(e,t.end)),f(t.end,e.start,e.end,-1),a&&!s&&(e.lines=a.lines,e.start=a.start,e.end=a.end,a=e),[t,s,a].filter(Boolean);h(e,t,-1)}return[t,e]}function h(e,t,n){f(e.start,t.start,t.end,n),f(e.end,t.start,t.end,n)}function f(e,t,n,i){e.row==(1==i?t:n).row&&(e.column+=i*(n.column-t.column)),e.row+=i*(n.row-t.row)}function p(e,t){var n=e.lines,i=e.end;e.end=s(t);var r=e.end.row-e.start.row,o=n.splice(r,n.length),a=r?t.column:t.column-e.start.column;return n.push(o[0].substring(0,a)),o[0]=o[0].substr(a),{start:s(t),end:i,lines:o,action:e.action}}function g(e,t){t=function(e){return{start:s(e.start),end:s(e.end),action:e.action,lines:e.lines.slice()}}(t);for(var n=e.length;n--;){for(var i=e[n],r=0;r<i.length;r++){var o=d(i[r],t);t=o[0],2!=o.length&&(o[2]?(i.splice(r+1,1,o[1],o[2]),r++):o[1]||(i.splice(r,1),r--))}i.length||e.splice(n,1)}return e}t.UndoManager=i})),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../lib/dom"),r=function(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(e){i.translate(this.element,0,-e.firstRowScreen*e.lineHeight%this.canvasHeight-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,n){var i=t.firstRowScreen*t.lineHeight,r=Math.floor(i/this.canvasHeight);return n.documentToScreenRow(e,0)*t.lineHeight-r*this.canvasHeight},this.computeLineHeight=function(e,t,n){return t.lineHeight*n.getRowLineCount(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);for(var t=i.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);for(var t=i.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){e&&(e.element.remove(),this.cellCache.push(e))},this.createCell=function(e,t,n,r){var o=this.cellCache.pop();if(!o){var s=i.createElement("div");r&&r(s),this.element.appendChild(s),o={element:s,text:"",row:e}}return o.row=e,o}}).call(r.prototype),t.Lines=r})),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],(function(e,t,n){"use strict";var i=e("../lib/dom"),r=e("../lib/oop"),o=e("../lib/lang"),s=e("../lib/event_emitter").EventEmitter,a=e("./lines").Lines,l=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new a(this.element),this.$lines.$offsetCoefficient=1};function c(e){var t=document.createTextNode("");e.appendChild(t);var n=i.createElement("span");return e.appendChild(n),e}(function(){r.implement(this,s),this.setSession=function(e){this.session&&this.session.off("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],i=n.row,r=this.$annotations[i];r||(r=this.$annotations[i]={text:[]});var s=n.text;s=s?o.escapeHTML(s):n.html||"",-1===r.text.indexOf(s)&&r.text.push(s);var a=n.type;"error"==a?r.className=" ace_error":"warning"==a&&" ace_error"!=r.className?r.className=" ace_warning":"info"!=a||r.className||(r.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,n=e.end.row-t;if(0===n);else if("remove"==e.action)this.$annotations.splice(t,n+1,null);else{var i=new Array(n+1);i.unshift(t,1),this.$annotations.splice.apply(this.$annotations,i)}}},this.update=function(e){this.config=e;var t=this.session,n=e.firstRow,i=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=i,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var r=t.getNextFoldLine(n),o=r?r.start.row:1/0,s=null,a=-1,l=n;;){if(l>o&&(l=r.end.row+1,o=(r=t.getNextFoldLine(l,r))?r.start.row:1/0),l>i){for(;this.$lines.getLength()>a+1;)this.$lines.pop();break}(s=this.$lines.get(++a))?s.row=l:(s=this.$lines.createCell(l,e,this.session,c),this.$lines.push(s)),this.$renderCell(s,e,r,l),l++}this._signal("afterRender"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,i=t.$firstLineNumber,r=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(r=t.getLength()+i-1);var o=n?n.getWidth(t,r,e):r.toString().length*e.characterWidth,s=this.$padding||this.$computePadding();(o+=s.left+s.right)===this.gutterWidth||isNaN(o)||(this.gutterWidth=o,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",o))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;if(this.$cursorRow=e,!this.$cursorCell||this.$cursorCell.row!=e){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var i=t[n];if(i.row>=this.$cursorRow){if(i.row>this.$cursorRow){var r=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&r&&r.start.row==t[n-1].row))break;i=t[n-1]}i.element.className="ace_gutter-active-line "+i.element.className,this.$cursorCell=i;break}}}}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),i=this.oldLastRow;if(this.oldLastRow=n,!t||i<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var r=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);r>0;r--)this.$lines.shift();if(i>n)for(r=this.session.getFoldedRowCount(n+1,i);r>0;r--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>i&&this.$lines.push(this.$renderLines(e,i+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,n){for(var i=[],r=t,o=this.session.getNextFoldLine(r),s=o?o.start.row:1/0;r>s&&(r=o.end.row+1,s=(o=this.session.getNextFoldLine(r,o))?o.start.row:1/0),!(r>n);){var a=this.$lines.createCell(r,e,this.session,c);this.$renderCell(a,e,o,r),i.push(a),r++}return i},this.$renderCell=function(e,t,n,r){var o=e.element,s=this.session,a=o.childNodes[0],l=o.childNodes[1],c=s.$firstLineNumber,u=s.$breakpoints,d=s.$decorations,h=s.gutterRenderer||this.$renderer,f=this.$showFoldWidgets&&s.foldWidgets,p=n?n.start.row:Number.MAX_VALUE,g="ace_gutter-cell ";if(this.$highlightGutterLine&&(r==this.$cursorRow||n&&r<this.$cursorRow&&r>=p&&this.$cursorRow<=n.end.row)&&(g+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),u[r]&&(g+=u[r]),d[r]&&(g+=d[r]),this.$annotations[r]&&(g+=this.$annotations[r].className),o.className!=g&&(o.className=g),f){var m=f[r];null==m&&(m=f[r]=s.getFoldWidget(r))}if(m){g="ace_fold-widget ace_"+m;"start"==m&&r==p&&r<n.end.row?g+=" ace_closed":g+=" ace_open",l.className!=g&&(l.className=g);var v=t.lineHeight+"px";i.setStyle(l.style,"height",v),i.setStyle(l.style,"display","inline-block")}else l&&i.setStyle(l.style,"display","none");var y=(h?h.getText(s,r):r+c).toString();return y!==a.data&&(a.data=y),i.setStyle(e.element.style,"height",this.$lines.computeLineHeight(r,t,s)+"px"),i.setStyle(e.element.style,"top",this.$lines.computeLineTop(r,t,s)+"px"),e.text=y,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?i.addCssClass(this.element,"ace_folding-enabled"):i.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=i.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(l.prototype),t.Gutter=l})),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../range").Range,r=e("../lib/dom"),o=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=t,n.className=e},this.update=function(e){if(e){var t;for(var n in this.config=e,this.i=0,this.markers){var i=this.markers[n];if(i.range){var r=i.range.clipRows(e.firstRow,e.lastRow);if(!r.isEmpty())if(r=r.toScreenRange(this.session),i.renderer){var o=this.$getTop(r.start.row,e),s=this.$padding+r.start.column*e.characterWidth;i.renderer(t,r,s,o,e)}else"fullLine"==i.type?this.drawFullLineMarker(t,r,i.clazz,e):"screenLine"==i.type?this.drawScreenLineMarker(t,r,i.clazz,e):r.isMultiLine()?"text"==i.type?this.drawTextMarker(t,r,i.clazz,e):this.drawMultiLineMarker(t,r,i.clazz,e):this.drawSingleLineMarker(t,r,i.clazz+" ace_start ace_br15",e)}else i.update(t,this,this.session,e)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,n,r,o){for(var s=this.session,a=t.start.row,l=t.end.row,c=a,u=0,d=0,h=s.getScreenLastRowColumn(c),f=new i(c,t.start.column,c,d);c<=l;c++)f.start.row=f.end.row=c,f.start.column=c==a?t.start.column:s.getRowWrapIndent(c),f.end.column=h,u=d,d=h,h=c+1<l?s.getScreenLastRowColumn(c+1):c==l?0:t.end.column,this.drawSingleLineMarker(e,f,n+(c==a?" ace_start":"")+" ace_br"+((c==a||c==a+1&&t.start.column?1:0)|(u<d?2:0)|(d>h?4:0)|(c==l?8:0)),r,c==l?0:1,o)},this.drawMultiLineMarker=function(e,t,n,i,r){var o=this.$padding,s=i.lineHeight,a=this.$getTop(t.start.row,i),l=o+t.start.column*i.characterWidth;(r=r||"",this.session.$bidiHandler.isBidiRow(t.start.row))?((c=t.clone()).end.row=c.start.row,c.end.column=this.session.getLine(c.start.row).length,this.drawBidiSingleLineMarker(e,c,n+" ace_br1 ace_start",i,null,r)):this.elt(n+" ace_br1 ace_start","height:"+s+"px;right:0;top:"+a+"px;left:"+l+"px;"+(r||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var c;(c=t.clone()).start.row=c.end.row,c.start.column=0,this.drawBidiSingleLineMarker(e,c,n+" ace_br12",i,null,r)}else{a=this.$getTop(t.end.row,i);var u=t.end.column*i.characterWidth;this.elt(n+" ace_br12","height:"+s+"px;width:"+u+"px;top:"+a+"px;left:"+o+"px;"+(r||""))}if(!((s=(t.end.row-t.start.row-1)*i.lineHeight)<=0)){a=this.$getTop(t.start.row+1,i);var d=(t.start.column?1:0)|(t.end.column?0:8);this.elt(n+(d?" ace_br"+d:""),"height:"+s+"px;right:0;top:"+a+"px;left:"+o+"px;"+(r||""))}},this.drawSingleLineMarker=function(e,t,n,i,r,o){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,n,i,r,o);var s=i.lineHeight,a=(t.end.column+(r||0)-t.start.column)*i.characterWidth,l=this.$getTop(t.start.row,i),c=this.$padding+t.start.column*i.characterWidth;this.elt(n,"height:"+s+"px;width:"+a+"px;top:"+l+"px;left:"+c+"px;"+(o||""))},this.drawBidiSingleLineMarker=function(e,t,n,i,r,o){var s=i.lineHeight,a=this.$getTop(t.start.row,i),l=this.$padding;this.session.$bidiHandler.getSelections(t.start.column,t.end.column).forEach((function(e){this.elt(n,"height:"+s+"px;width:"+e.width+(r||0)+"px;top:"+a+"px;left:"+(l+e.left)+"px;"+(o||""))}),this)},this.drawFullLineMarker=function(e,t,n,i,r){var o=this.$getTop(t.start.row,i),s=i.lineHeight;t.start.row!=t.end.row&&(s+=this.$getTop(t.end.row,i)-o),this.elt(n,"height:"+s+"px;top:"+o+"px;left:0;right:0;"+(r||""))},this.drawScreenLineMarker=function(e,t,n,i,r){var o=this.$getTop(t.start.row,i),s=i.lineHeight;this.elt(n,"height:"+s+"px;top:"+o+"px;left:0;right:0;"+(r||""))}}).call(o.prototype),t.Marker=o})),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("../lib/dom"),o=e("../lib/lang"),s=e("./lines").Lines,a=e("../lib/event_emitter").EventEmitter,l=function(e){this.dom=r,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new s(this.element)};(function(){i.implement(this,a),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xb7",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var e=this.session.doc,t="\n"==e.getNewLineCharacter()&&"windows"!=e.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&(this.showInvisibles=e,"string"==typeof e?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;n<e+1;n++){if(this.showTabs)(i=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",i.textContent=o.stringRepeat(this.TAB_CHAR,n),t.push(i);else t.push(this.dom.createTextNode(o.stringRepeat(" ",n),this.element))}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i,r="ace_indent-guide",s=this.showSpaces?" ace_invisible ace_invisible_space":"",a=this.showSpaces?o.stringRepeat(this.SPACE_CHAR,this.tabSize):o.stringRepeat(" ",this.tabSize),l=this.showTabs?" ace_invisible ace_invisible_tab":"",c=this.showTabs?o.stringRepeat(this.TAB_CHAR,this.tabSize):a;(i=this.dom.createElement("span")).className=r+s,i.textContent=a,this.$tabStrings[" "]=i,(i=this.dom.createElement("span")).className=r+l,i.textContent=c,this.$tabStrings["\t"]=i}},this.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var i=Math.max(t,e.firstRow),r=Math.min(n,e.lastRow),o=this.element.childNodes,s=0,a=e.firstRow;a<i;a++){if(l=this.session.getFoldLine(a)){if(l.containsRow(i)){i=l.start.row;break}a=l.end.row}s++}for(var l,c=!1,u=(a=i,(l=this.session.getNextFoldLine(a))?l.start.row:1/0);a>u&&(a=l.end.row+1,u=(l=this.session.getNextFoldLine(a,l))?l.start.row:1/0),!(a>r);){var d=o[s++];if(d){this.dom.removeChildren(d),this.$renderLine(d,a,a==u&&l),c&&(d.style.top=this.$lines.computeLineTop(a,e,this.session)+"px");var h=e.lineHeight*this.session.getRowLength(a)+"px";d.style.height!=h&&(c=!0,d.style.height=h)}a++}if(c)for(;s<this.$lines.cells.length;){var f=this.$lines.cells[s++];f.element.style.top=this.$lines.computeLineTop(f.row,e,this.session)+"px"}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,i=t?t.lastRow:-1;if(!t||i<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var r=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);r>0;r--)this.$lines.shift();if(t.lastRow>e.lastRow)for(r=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);r>0;r--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow))},this.$renderLinesFragment=function(e,t,n){for(var i=[],o=t,s=this.session.getNextFoldLine(o),a=s?s.start.row:1/0;o>a&&(o=s.end.row+1,a=(s=this.session.getNextFoldLine(o,s))?s.start.row:1/0),!(o>n);){var l=this.$lines.createCell(o,e,this.session),c=l.element;this.dom.removeChildren(c),r.setStyle(c.style,"height",this.$lines.computeLineHeight(o,e,this.session)+"px"),r.setStyle(c.style,"top",this.$lines.computeLineTop(o,e,this.session)+"px"),this.$renderLine(c,o,o==a&&s),this.$useLineGroups()?c.className="ace_line_group":c.className="ace_line",i.push(l),o++}return i},this.update=function(e){this.$lines.moveContainer(e),this.config=e;for(var t=e.firstRow,n=e.lastRow,i=this.$lines;i.getLength();)i.pop();i.push(this.$renderLinesFragment(e,t,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,i){for(var r,s=this,a=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,l=this.dom.createFragment(this.element),c=0;r=a.exec(i);){var u=r[1],d=r[2],h=r[3],f=r[4],p=r[5];if(s.showSpaces||!d){var g=c!=r.index?i.slice(c,r.index):"";if(c=r.index+r[0].length,g&&l.appendChild(this.dom.createTextNode(g,this.element)),u){var m=s.session.getScreenTabSize(t+r.index);l.appendChild(s.$tabStrings[m].cloneNode(!0)),t+=m-1}else if(d){if(s.showSpaces)(y=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",y.textContent=o.stringRepeat(s.SPACE_CHAR,d.length),l.appendChild(y);else l.appendChild(this.com.createTextNode(d,this.element))}else if(h){(y=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",y.textContent=o.stringRepeat(s.SPACE_CHAR,h.length),l.appendChild(y)}else if(f){t+=1,(y=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",y.className=s.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",y.textContent=s.showSpaces?s.SPACE_CHAR:f,l.appendChild(y)}else if(p){t+=1,(y=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",y.className="ace_cjk",y.textContent=p,l.appendChild(y)}}}if(l.appendChild(this.dom.createTextNode(c?i.slice(c):i,this.element)),this.$textToken[n.type])e.appendChild(l);else{var v="ace_"+n.type.replace(/\./g," ace_"),y=this.dom.createElement("span");"fold"==n.type&&(y.style.width=n.value.length*this.config.characterWidth+"px"),y.className=v,y.appendChild(l),e.appendChild(y)}return t+i.length},this.renderIndentGuide=function(e,t,n){var i=t.search(this.$indentGuideRe);if(i<=0||i>=n)return t;if(" "==t[0]){for(var r=(i-=i%this.tabSize)/this.tabSize,o=0;o<r;o++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return t.substr(i)}if("\t"==t[0]){for(o=0;o<i;o++)e.appendChild(this.$tabStrings["\t"].cloneNode(!0));return t.substr(i)}return t},this.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},this.$renderWrappedLine=function(e,t,n){var i=0,r=0,s=n[0],a=0,l=this.$createLineElement();e.appendChild(l);for(var c=0;c<t.length;c++){var u=t[c],d=u.value;if(0==c&&this.displayIndentGuides){if(i=d.length,!(d=this.renderIndentGuide(l,d,s)))continue;i-=d.length}if(i+d.length<s)a=this.$renderToken(l,a,u,d),i+=d.length;else{for(;i+d.length>=s;)a=this.$renderToken(l,a,u,d.substring(0,s-i)),d=d.substring(s-i),i=s,l=this.$createLineElement(),e.appendChild(l),l.appendChild(this.dom.createTextNode(o.stringRepeat("\xa0",n.indent),this.element)),a=0,s=n[++r]||Number.MAX_VALUE;0!=d.length&&(i+=d.length,a=this.$renderToken(l,a,u,d))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(l,a,null,"",!0)},this.$renderSimpleLine=function(e,t){var n=0,i=t[0],r=i.value;this.displayIndentGuides&&(r=this.renderIndentGuide(e,r)),r&&(n=this.$renderToken(e,n,i,r));for(var o=1;o<t.length;o++){if(n+(r=(i=t[o]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,n,i,r);n=this.$renderToken(e,n,i,r)}},this.$renderOverflowMessage=function(e,t,n,i,r){n&&this.$renderToken(e,t,n,i.slice(0,this.MAX_LINE_LENGTH-t));var o=this.dom.createElement("span");o.className="ace_inline_button ace_keyword ace_toggle_wrap",o.textContent=r?"<hide>":"<click to see more...>",e.appendChild(o)},this.$renderLine=function(e,t,n){if(n||0==n||(n=this.session.getFoldLine(t)),n)var i=this.$getFoldLineTokens(t,n);else i=this.session.getTokens(t);var r=e;if(i.length){var o=this.session.getRowSplitData(t);if(o&&o.length){this.$renderWrappedLine(e,i,o);r=e.lastChild}else{r=e;this.$useLineGroups()&&(r=this.$createLineElement(),e.appendChild(r)),this.$renderSimpleLine(r,i)}}else this.$useLineGroups()&&(r=this.$createLineElement(),e.appendChild(r));if(this.showEOL&&r){n&&(t=n.end.row);var s=this.dom.createElement("span");s.className="ace_invisible ace_invisible_eol",s.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,r.appendChild(s)}},this.$getFoldLineTokens=function(e,t){var n=this.session,i=[];var r=n.getTokens(e);return t.walk((function(e,t,o,s,a){null!=e?i.push({type:"fold",value:e}):(a&&(r=n.getTokens(t)),r.length&&function(e,t,n){for(var r=0,o=0;o+e[r].value.length<t;)if(o+=e[r].value.length,++r==e.length)return;for(o!=t&&((s=e[r].value.substring(t-o)).length>n-t&&(s=s.substring(0,n-t)),i.push({type:e[r].type,value:s}),o=t+s.length,r+=1);o<n&&r<e.length;){var s;(s=e[r].value).length+o>n?i.push({type:e[r].type,value:s.substring(0,n-o)}):i.push(e[r]),o+=s.length,r+=1}}(r,s,o))}),t.end.row,this.session.getLine(t.end.row).length),i},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(l.prototype),t.Text=l})),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../lib/dom"),r=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),i.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)i.setStyle(t[n].style,"opacity",e?"":"0")},this.$startCssAnimation=function(){for(var e=this.cursors,t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&i.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){this.$isAnimating=!1,i.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,i.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=i.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,i.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,i.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,i.removeCssClass(this.element,"ace_smooth-blinking")),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&i.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),i.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=function(){this.timeoutId=setTimeout((function(){e(!1)}),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval((function(){e(!0),t()}),this.blinkInterval),t()}else this.$stopCssAnimation()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(e,t){return e.top>=0&&e.top<t.maxHeight},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,r=0;void 0!==t&&0!==t.length||(t=[{cursor:null}]);n=0;for(var o=t.length;n<o;n++){var s=this.getPixelPosition(t[n].cursor,!0);if(!((s.top>e.height+e.offset||s.top<0)&&n>1)){var a=this.cursors[r++]||this.addCursor(),l=a.style;this.drawCursor?this.drawCursor(a,s,e,t[n],this.session):this.isCursorInView(s,e)?(i.setStyle(l,"display","block"),i.translate(a,s.left,s.top),i.setStyle(l,"width",Math.round(e.characterWidth)+"px"),i.setStyle(l,"height",e.lineHeight+"px")):i.setStyle(l,"display","none")}}for(;this.cursors.length>r;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=s,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?i.addCssClass(this.element,"ace_overwrite-cursors"):i.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(r.prototype),t.Cursor=r})),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/dom"),o=e("./lib/event"),s=e("./lib/event_emitter").EventEmitter,a=32768,l=function(e){this.element=r.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=r.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xa0",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)};(function(){i.implement(this,s),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(l.prototype);var c=function(e,t){l.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=r.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};i.inherits(c,l),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){this.scrollHeight=e,e>a?(this.coeff=a/e,e=a):1!=this.coeff&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(c.prototype);var u=function(e,t){l.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(u,l),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(u.prototype),t.ScrollBar=c,t.ScrollBarV=c,t.ScrollBarH=u,t.VScrollBar=c,t.HScrollBar=u})),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],(function(e,t,n){"use strict";var i=e("./lib/event"),r=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var n=this;this._flush=function(e){n.pending=!1;var t=n.changes;if(t&&(i.blockIdle(100),n.changes=0,n.onRender(t)),n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(i.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}).call(r.prototype),t.RenderLoop=r})),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],(function(e,t,n){var i=e("../lib/oop"),r=e("../lib/dom"),o=e("../lib/lang"),s=e("../lib/event"),a=e("../lib/useragent"),l=e("../lib/event_emitter").EventEmitter,c=256,u="function"==typeof ResizeObserver,d=200,h=t.FontMetrics=function(e){this.el=r.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=r.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=r.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.textContent=o.stringRepeat("X",c),this.$characterSize={width:0,height:0},u?this.$addObserver():this.checkForSizeChanges()};(function(){i.implement(this,l),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",a.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(e){if(void 0===e&&(e=this.$measureSizes()),e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$addObserver=function(){var e=this;this.$observer=new window.ResizeObserver((function(t){e.checkForSizeChanges()})),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=s.onIdle((function t(){e.checkForSizeChanges(),s.onIdle(t,500)}),500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){var t={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/c};return 0===t.width||0===t.height?null:t},this.$measureCharWidth=function(e){return this.$main.textContent=o.stringRepeat(e,c),this.$main.getBoundingClientRect().width/c},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return t&&t.parentElement?(window.getComputedStyle(t).zoom||1)*e(t.parentElement):1},this.$initTransformMeasureNodes=function(){var e=function(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]};this.els=r.buildDom([e(0,0),e(d,0),e(0,d),e(d,d)],this.el)},this.transformCoordinates=function(e,t){e&&(e=o(1/this.$getZoom(this.el),e));function n(e,t,n){var i=e[1]*t[0]-e[0]*t[1];return[(-t[1]*n[0]+t[0]*n[1])/i,(+e[1]*n[0]-e[0]*n[1])/i]}function i(e,t){return[e[0]-t[0],e[1]-t[1]]}function r(e,t){return[e[0]+t[0],e[1]+t[1]]}function o(e,t){return[e*t[0],e*t[1]]}function s(e){var t=e.getBoundingClientRect();return[t.left,t.top]}this.els||this.$initTransformMeasureNodes();var a=s(this.els[0]),l=s(this.els[1]),c=s(this.els[2]),u=s(this.els[3]),h=n(i(u,l),i(u,c),i(r(l,c),r(u,a))),f=o(1+h[0],i(l,a)),p=o(1+h[1],i(c,a));if(t){var g=t,m=h[0]*g[0]/d+h[1]*g[1]/d+1,v=r(o(g[0],f),o(g[1],p));return r(o(1/m/d,v),a)}var y=i(e,a),b=n(i(f,o(h[0],y)),i(p,o(h[1],y)),y);return o(d,b)}}).call(h.prototype)})),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/dom"),o=e("./config"),s=e("./layer/gutter").Gutter,a=e("./layer/marker").Marker,l=e("./layer/text").Text,c=e("./layer/cursor").Cursor,u=e("./scrollbar").HScrollBar,d=e("./scrollbar").VScrollBar,h=e("./renderloop").RenderLoop,f=e("./layer/font_metrics").FontMetrics,p=e("./lib/event_emitter").EventEmitter,g='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;padding: 0;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}',m=e("./lib/useragent"),v=m.isIE;r.importCssString(g,"ace_editor.css",!1);var y=function(e,t){var n=this;this.container=e||r.createElement("div"),r.addCssClass(this.container,"ace_editor"),r.HI_DPI&&r.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),null==o.get("useStrictCSP")&&o.set("useStrictCSP",!1),this.$gutter=r.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=r.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=r.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new s(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var i=this.$textLayer=new l(this.content);this.canvas=i.element,this.$markerFront=new a(this.content),this.$cursorLayer=new c(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new d(this.container,this),this.scrollBarH=new u(this.container,this),this.scrollBarV.on("scroll",(function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)})),this.scrollBarH.on("scroll",(function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new f(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",(function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!m.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),o.resetOptions(this),o._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,i.implement(this,p),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),r.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,n){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,i){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var r=this.container;i||(i=r.clientHeight||r.scrollHeight),n||(n=r.clientWidth||r.scrollWidth);var o=this.$updateCachedSize(e,t,n,i);if(!this.$size.scrollerHeight||!n&&!i)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(e,t,n,i){i-=this.$extraHeight||0;var o=0,s=this.$size,a={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth};if(i&&(e||s.height!=i)&&(s.height=i,o|=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",o|=this.CHANGE_SCROLL),n&&(e||s.width!=n)){o|=this.CHANGE_SIZE,s.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,r.setStyle(this.scrollBarH.element.style,"left",t+"px"),r.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),s.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()-this.margin.h),r.setStyle(this.$gutter.style,"left",this.margin.left+"px");var l=this.scrollBarV.getWidth()+"px";r.setStyle(this.scrollBarH.element.style,"right",l),r.setStyle(this.scroller.style,"right",l),r.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(o|=this.CHANGE_FULL)}return s.$dirty=!n||!i,o&&this._signal("resize",a),o},this.onGutterResize=function(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=r.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=r.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var e=this.textarea.style,t=this.$composition;if(this.$keepTextAreaAtCursor||t){var n=this.$cursorLayer.$pixelPos;if(n){t&&t.markerRange&&(n=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var i=this.layerConfig,o=n.top,s=n.left;o-=i.offset;var a=t&&t.useTextareaForIME?this.lineHeight:v?0:1;if(o<0||o>i.height-a)r.translate(this.textarea,0,0);else{var l=1,c=this.$size.height-a;if(t)if(t.useTextareaForIME){var u=this.textarea.value;l=this.characterWidth*this.session.$getStringScreenWidth(u)[0]}else o+=this.lineHeight+2;else o+=this.lineHeight;(s-=this.scrollLeft)>this.$size.scrollerWidth-l&&(s=this.$size.scrollerWidth-l),s+=this.gutterWidth+this.margin.left,r.setStyle(e,"height",a+"px"),r.setStyle(e,"width",l+"px"),r.translate(this.textarea,Math.min(s,this.$size.scrollerWidth-l),Math.min(o,c))}}}else r.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow;return this.session.documentToScreenRow(t,0)*e.lineHeight-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,i){var r=this.scrollMargin;r.top=0|e,r.bottom=0|t,r.right=0|i,r.left=0|n,r.v=r.top+r.bottom,r.h=r.left+r.right,r.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-r.top),this.updateFull()},this.setMargin=function(e,t,n,i){var r=this.margin;r.top=0|e,r.bottom=0|t,r.right=0|i,r.left=0|n,r.v=r.top+r.bottom,r.h=r.left+r.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(e||t)){if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",e),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig()|this.$loop.clear(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var i=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;i>0&&(this.scrollTop=i,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),r.translate(this.content,-this.scrollLeft,-n.offset);var o=n.width+2*this.$padding+"px",s=n.minHeight+"px";r.setStyle(this.content.style,"width",o),r.setStyle(this.content.style,"height",s)}if(e&this.CHANGE_H_SCROLL&&(r.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",e);if(e&this.CHANGE_SCROLL)return this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",e);e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(n):e&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender",e)}else this.$changes|=e},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var i=!(n<=2*this.lineHeight)&&e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var r=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,r,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,i=this.session.getScreenLength()*this.lineHeight,r=this.$getLongestLine(),o=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-r-2*this.$padding<0),s=this.$horizScroll!==o;s&&(this.$horizScroll=o,this.scrollBarH.setVisible(o));var a=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var l=t.scrollerHeight+this.lineHeight,c=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=c;var u=this.scrollMargin;this.session.setScrollTop(Math.max(-u.top,Math.min(this.scrollTop,i-t.scrollerHeight+u.bottom))),this.session.setScrollLeft(Math.max(-u.left,Math.min(this.scrollLeft,r+2*this.$padding-t.scrollerWidth+u.right)));var d=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-i+c<0||this.scrollTop>u.top),h=a!==d;h&&(this.$vScroll=d,this.scrollBarV.setVisible(d));var f,p,g=this.scrollTop%this.lineHeight,m=Math.ceil(l/this.lineHeight)-1,v=Math.max(0,Math.round((this.scrollTop-g)/this.lineHeight)),y=v+m,b=this.lineHeight;v=e.screenToDocumentRow(v,0);var w=e.getFoldLine(v);w&&(v=w.start.row),f=e.documentToScreenRow(v,0),p=e.getRowLength(v)*b,y=Math.min(e.screenToDocumentRow(y,0),e.getLength()-1),l=t.scrollerHeight+e.getRowLength(y)*b+p,g=this.scrollTop-f*b;var _=0;return(this.layerConfig.width!=r||s)&&(_=this.CHANGE_H_SCROLL),(s||h)&&(_|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),h&&(r=this.$getLongestLine())),this.layerConfig={width:r,padding:this.$padding,firstRow:v,firstRowScreen:f,lastRow:y,lineHeight:b,characterWidth:this.characterWidth,minHeight:l,maxHeight:i,offset:g,gutterOffset:b?Math.max(0,Math.ceil((g+t.height-t.scrollerHeight)/b)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(r-this.$padding),_},this.$updateLines=function(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1)&&!(t<n.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,e,t),!0)}},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var i=this.$cursorLayer.getPixelPosition(e),r=i.left,o=i.top,s=n&&n.top||0,a=n&&n.bottom||0,l=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;l+s>o?(t&&l+s>o+this.lineHeight&&(o-=t*this.$size.scrollerHeight),0===o&&(o=-this.scrollMargin.top),this.session.setScrollTop(o)):l+this.$size.scrollerHeight-a<o+this.lineHeight&&(t&&l+this.$size.scrollerHeight-a<o-this.lineHeight&&(o+=t*this.$size.scrollerHeight),this.session.setScrollTop(o+this.lineHeight+a-this.$size.scrollerHeight));var c=this.scrollLeft;c>r?(r<this.$padding+2*this.layerConfig.characterWidth&&(r=-this.scrollMargin.left),this.session.setScrollLeft(r)):c+this.$size.scrollerWidth<r+this.characterWidth?this.session.setScrollLeft(Math.round(r+this.characterWidth-this.$size.scrollerWidth)):c<=this.$padding&&r-c<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),i=this.$size.scrollerHeight-this.lineHeight,r=n.top-i*(t||0);return this.session.setScrollTop(r),r},this.STEPS=8,this.$calcSteps=function(e,t){var n,i,r=0,o=this.STEPS,s=[];for(r=0;r<o;++r)s.push((n=r/this.STEPS,i=e,(t-e)*(Math.pow(n-1,3)+1)+i));return s},this.scrollToLine=function(e,t,n,i){var r=this.$cursorLayer.getPixelPosition({row:e,column:0}).top;t&&(r-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(r),!1!==n&&this.animateScrolling(o,i)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var i=this;if(e!=n){if(this.$scrollAnimation){var r=this.$scrollAnimation.steps;if(r.length&&(e=r[0])==n)return}var o=i.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:o},clearInterval(this.$timer),i.session.setScrollTop(o.shift()),i.session.$scrollTop=n,this.$timer=setInterval((function(){if(!i.session)return clearInterval(i.$timer);o.length?(i.session.setScrollTop(o.shift()),i.session.$scrollTop=n):null!=n?(i.session.$scrollTop=-1,i.session.setScrollTop(n),n=null):(i.$timer=clearInterval(i.$timer),i.$scrollAnimation=null,t&&t())}),10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(e)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([e,t]);e=i[1]-this.gutterWidth-this.margin.left,t=i[0]}else n=this.scroller.getBoundingClientRect();var r=e+this.scrollLeft-n.left-this.$padding,o=r/this.characterWidth,s=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),a=this.$blockCursor?Math.floor(o):Math.round(o);return{row:s,column:a,side:o-a>0?1:-1,offsetX:r}},this.screenToTextCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([e,t]);e=i[1]-this.gutterWidth-this.margin.left,t=i[0]}else n=this.scroller.getBoundingClientRect();var r=e+this.scrollLeft-n.left-this.$padding,o=r/this.characterWidth,s=this.$blockCursor?Math.floor(o):Math.round(o),a=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(a,Math.max(s,0),r)},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=this.session.documentToScreenPosition(e,t),r=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,e)?this.session.$bidiHandler.getPosLeft(i.column):Math.round(i.column*this.characterWidth)),o=i.row*this.lineHeight;return{pageX:n.left+r-this.scrollLeft,pageY:n.top+o-this.scrollTop}},this.visualizeFocus=function(){r.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){r.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText),void 0==e.useTextareaForIME&&(e.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(r.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),r.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var e=this.session.selection.cursor;this.removeExtraToken(e.row,e.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},this.addToken=function(e,t,n,i){var r=this.session;r.bgTokenizer.lines[n]=null;var o={type:t,value:e},s=r.getTokens(n);if(null==i)s.push(o);else for(var a=0,l=0;l<s.length;l++){var c=s[l];if(i<=(a+=c.value.length)){var u=c.value.length-(a-i),d=c.value.slice(0,u),h=c.value.slice(u);s.splice(l,1,{type:c.type,value:d},o,{type:c.type,value:h});break}}this.updateLines(n,n)},this.removeExtraToken=function(e,t){this.updateLines(e,e)},this.setTheme=function(e,t){var n=this;if(this.$themeId=e,n._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)s(e);else{var i=e||this.$options.theme.initialValue;o.loadModule(["theme",i],s)}function s(i){if(n.$themeId!=e)return t&&t();if(!i||!i.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");i.$id&&(n.$themeId=i.$id),r.importCssString(i.cssText,i.cssClass,n.container),n.theme&&r.removeCssClass(n.container,n.theme.cssClass);var o="padding"in i?i.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&o!=n.$padding&&n.setPadding(o),n.$theme=i.cssClass,n.theme=i,r.addCssClass(n.container,i.cssClass),r.setCssClass(n.container,"ace_dark",i.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:i}),t&&t()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){r.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){r.removeCssClass(this.container,e)},this.setCursorStyle=function(e){r.setStyle(this.scroller.style,"cursor",e)},this.setMouseCursor=function(e){r.setStyle(this.scroller.style,"cursor",e)},this.attachToShadowRoot=function(){r.importCssString(g,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}).call(y.prototype),o.defineOptions(y.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){r.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!m.isMobile&&!m.isIE}}),t.VirtualRenderer=y})),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],(function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("../lib/net"),o=e("../lib/event_emitter").EventEmitter,s=e("../config");function a(e){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(s.get("loadWorkerFromBlob")){var t=function(e){var t="importScripts('"+r.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(i){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return n.append(t),n.getBlob("application/javascript")}}(e),n=(window.URL||window.webkitURL).createObjectURL(t);return new Worker(n)}return new Worker(e)}var l=function(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){i.implement(this,o),this.$createWorkerFromOldConfig=function(t,n,i,r,o){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),s.get("packaged")||!e.toUrl)r=r||s.moduleUrl(n,"worker");else{var l=this.$normalizePath;r=r||l(e.toUrl("ace/worker/worker.js",null,"_"));var c={};t.forEach((function(t){c[t]=l(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}return this.$worker=a(r),o&&this.send("importScripts",o),this.$worker.postMessage({init:!0,tlns:c,module:n,classname:i}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return r.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var i=this.callbackId++;this.callbacks[i]=n,t.push(i)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(l.prototype);t.UIWorkerClient=function(e,t,n){var i=null,r=!1,a=Object.create(o),c=[],u=new l({messageBuffer:c,terminate:function(){},postMessage:function(e){c.push(e),i&&(r?setTimeout(d):d())}});u.setEmitSync=function(e){r=e};var d=function(){var e=c.shift();e.command?i[e.command].apply(i,e.args):e.event&&a._signal(e.event,e.data)};return a.postMessage=function(e){u.onMessage({data:e})},a.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},a.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},s.loadModule(["worker",t],(function(e){for(i=new e[n](a);c.length;)d()})),u},t.WorkerClient=l,t.createWorker=a})),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],(function(e,t,n){"use strict";var i=e("./range").Range,r=e("./lib/event_emitter").EventEmitter,o=e("./lib/oop"),s=function(e,t,n,i,r,o){var s=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=r,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=i,this.$onCursorChange=function(){setTimeout((function(){s.onCursorChange()}))},this.$pos=n;var a=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){o.implement(this,r),this.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var r=this.pos;r.$insertRight=!0,r.detach(),r.markerId=n.addMarker(new i(r.row,r.column,r.row,r.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(n){var i=t.createAnchor(n.row,n.column);i.$insertRight=!0,i.detach(),e.others.push(i)})),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach((function(n){n.markerId=e.addMarker(new i(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)}))}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var n="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,r=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,o=t.start.column-this.pos.column;if(this.updateAnchors(e),r&&(this.length+=n),r&&!this.session.$fromUndo)if("insert"===e.action)for(var s=this.others.length-1;s>=0;s--){var a={row:(l=this.others[s]).row,column:l.column+o};this.doc.insertMergedLines(a,e.lines)}else if("remove"===e.action)for(s=this.others.length-1;s>=0;s--){var l;a={row:(l=this.others[s]).row,column:l.column+o};this.doc.remove(new i(a.row,a.column,a.row,a.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var e=this,t=this.session,n=function(n,r){t.removeMarker(n.markerId),n.markerId=t.addMarker(new i(n.row,n.column,n.row,n.column+e.length),r,null,!1)};n(this.pos,this.mainClass);for(var r=this.others.length;r--;)n(this.others[r],this.othersClass)}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;n<t;n++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(s.prototype),t.PlaceHolder=s})),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(e,t,n){var i=e("../lib/event"),r=e("../lib/useragent");function o(e,t){return e.row==t.row&&e.column==t.column}t.onMouseDown=function(e){var t=e.domEvent,n=t.altKey,s=t.shiftKey,a=t.ctrlKey,l=e.getAccelKey(),c=e.getButton();if(a&&r.isMac&&(c=t.button),e.editor.inMultiSelectMode&&2==c)e.editor.textInput.onContextMenu(e.domEvent);else if(a||n||l){if(0===c){var u,d=e.editor,h=d.selection,f=d.inMultiSelectMode,p=e.getDocumentPosition(),g=h.getCursor(),m=e.inSelection()||h.isEmpty()&&o(p,g),v=e.x,y=e.y,b=d.session,w=d.renderer.pixelToScreenCoordinates(v,y),_=w;if(d.$mouseHandler.$enableJumpToDef)a&&n||l&&n?u=s?"block":"add":n&&d.$blockSelectEnabled&&(u="block");else if(l&&!n){if(u="add",!f&&s)return}else n&&d.$blockSelectEnabled&&(u="block");if(u&&r.isMac&&t.ctrlKey&&d.$mouseHandler.cancelContextMenu(),"add"==u){if(!f&&m)return;if(!f){var x=h.toOrientedRange();d.addSelectionMarker(x)}var k=h.rangeList.rangeAtPoint(p);d.inVirtualSelectionMode=!0,s&&(k=null,x=h.ranges[0]||x,d.removeSelectionMarker(x)),d.once("mouseup",(function(){var e=h.toOrientedRange();k&&e.isEmpty()&&o(k.cursor,e.cursor)?h.substractPoint(e.cursor):(s?h.substractPoint(x.cursor):x&&(d.removeSelectionMarker(x),h.addRange(x)),h.addRange(e)),d.inVirtualSelectionMode=!1}))}else if("block"==u){var C;e.stop(),d.inVirtualSelectionMode=!0;var S=[],E=function(){var e=d.renderer.pixelToScreenCoordinates(v,y),t=b.screenToDocumentPosition(e.row,e.column,e.offsetX);o(_,e)&&o(t,h.lead)||(_=e,d.selection.moveToPosition(t),d.renderer.scrollCursorIntoView(),d.removeSelectionMarkers(S),S=h.rectangularRangeBlock(_,w),d.$mouseHandler.$clickSelection&&1==S.length&&S[0].isEmpty()&&(S[0]=d.$mouseHandler.$clickSelection.clone()),S.forEach(d.addSelectionMarker,d),d.updateSelectionMarkers())};f&&!l?h.toSingleRange():!f&&l&&(C=h.toOrientedRange(),d.addSelectionMarker(C)),s?w=b.documentToScreenPosition(h.lead):h.moveToPosition(p),_={row:-1,column:-1};var O=E;i.capture(d.container,(function(e){v=e.clientX,y=e.clientY}),(function(e){E(),clearInterval(A),d.removeSelectionMarkers(S),S.length||(S=[h.toOrientedRange()]),C&&(d.removeSelectionMarker(C),h.toSingleRange(C));for(var t=0;t<S.length;t++)h.addRange(S[t]);d.inVirtualSelectionMode=!1,d.$mouseHandler.$clickSelection=null}));var A=setInterval((function(){O()}),20);return e.preventDefault()}}}else 0===c&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],(function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.rangeCount>1?e.multiSelect.joinSelections():e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var i=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new i(t.multiSelectCommands)})),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],(function(e,t,n){var i=e("./range_list").RangeList,r=e("./range").Range,o=e("./selection").Selection,s=e("./mouse/multi_select_handler").onMouseDown,a=e("./lib/event"),l=e("./lib/lang"),c=e("./commands/multi_select_commands");t.commands=c.defaultCommands.concat(c.multiSelectCommands);var u=new(0,e("./search").Search);var d=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(d.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var i=this.rangeList.add(e);return this.$onAddRange(e),i.length&&this.$onRemoveRange(i),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var i=this.ranges.indexOf(e[n]);this.ranges.splice(i,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new i,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var e=this.ranges.length?this.ranges:[this.getRange()],t=[],n=0;n<e.length;n++){var i=e[n],o=i.start.row,s=i.end.row;if(o===s)t.push(i.clone());else{for(t.push(new r(o,i.start.column,o,this.session.getLine(o).length));++o<s;)t.push(this.getLineRange(o,!0));t.push(new r(s,0,s,i.end.column))}0!=n||this.isBackwards()||(t=t.reverse())}this.toSingleRange();for(n=t.length;n--;)this.addRange(t[n])},this.joinSelections=function(){var e=this.rangeList.ranges,t=e[e.length-1],n=r.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=r.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var i=this.session.documentToScreenPosition(this.cursor),o=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(i,o).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var i=[],o=e.column<t.column;if(o)var s=e.column,a=t.column,l=e.offsetX,c=t.offsetX;else s=t.column,a=e.column,l=t.offsetX,c=e.offsetX;var u,d,h,f=e.row<t.row;if(f)var p=e.row,g=t.row;else p=t.row,g=e.row;s<0&&(s=0),p<0&&(p=0),p==g&&(n=!0);for(var m=p;m<=g;m++){var v=r.fromPoints(this.session.screenToDocumentPosition(m,s,l),this.session.screenToDocumentPosition(m,a,c));if(v.isEmpty()){if(u&&(d=v.end,h=u,d.row==h.row&&d.column==h.column))break;u=v.end}v.cursor=o?v.start:v.end,i.push(v)}if(f&&i.reverse(),!n){for(var y=i.length-1;i[y].isEmpty()&&y>0;)y--;if(y>0)for(var b=0;i[b].isEmpty();)b++;for(var w=y;w>=b;w--)i[w].isEmpty()&&i.splice(w,1)}return i}}.call(o.prototype);var h=e("./editor").Editor;function f(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",s),e.commands.addCommands(c.defaultCommands),function(e){if(!e.textInput)return;var t=e.textInput.getElement(),n=!1;function i(t){n&&(e.renderer.setMouseCursor(""),n=!1)}a.addListener(t,"keydown",(function(t){var r=18==t.keyCode&&!(t.ctrlKey||t.shiftKey||t.metaKey);e.$blockSelectEnabled&&r?n||(e.renderer.setMouseCursor("crosshair"),n=!0):n&&i()}),e),a.addListener(t,"keyup",i,e),a.addListener(t,"blur",i,e)}(e))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var i=e[n];if(i.marker){this.session.removeMarker(i.marker);var r=t.indexOf(i);-1!=r&&t.splice(r,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(c.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(c.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?i=n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?i=n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),i=t.exec(n,e.args||{})):i=t.multiSelectAction(n,e.args||{});else{var i=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return i}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var i,r=n&&n.keepOrder,s=1==n||n&&n.$byLines,a=this.session,l=this.selection,c=l.rangeList,u=(r?l:c).ranges;if(!u.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var d=l._eventRegistry;l._eventRegistry={};var h=new o(a);this.inVirtualSelectionMode=!0;for(var f=u.length;f--;){if(s)for(;f>0&&u[f].start.row==u[f-1].end.row;)f--;h.fromOrientedRange(u[f]),h.index=f,this.selection=a.selection=h;var p=e.exec?e.exec(this,t||{}):e(this,t||{});i||void 0===p||(i=p),h.toOrientedRange(u[f])}h.detach(),this.selection=a.selection=l,this.inVirtualSelectionMode=!1,l._eventRegistry=d,l.mergeOverlappingRanges(),l.ranges[0]&&l.fromOrientedRange(l.ranges[0]);var g=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),g&&g.from==g.to&&this.renderer.animateScrolling(g.from),i}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],i=0;i<t.length;i++)n.push(this.session.getTextRange(t[i]));var r=this.session.getDocument().getNewLineCharacter();(e=n.join(r)).length==(n.length-1)*r.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var i=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;i.row!=t.row||this.session.$clipPositionToDocument(i.row,i.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(e,t,n){if((t=t||{}).needle=e||t.needle,void 0==t.needle){var i=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(i)}this.$search.set(t);var r=this.$search.findAll(this.session);if(!r.length)return 0;var o=this.multiSelect;n||o.toSingleRange(r[0]);for(var s=r.length;s--;)o.addRange(r[s],!0);return i&&o.rangeList.rangeAtPoint(i.start)&&o.addRange(i,!0),r.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),i=n.cursor==n.end,o=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(o.column=this.selection.$desiredColumn);var s,a=this.session.screenToDocumentPosition(o.row+e,o.column);if(n.isEmpty())c=a;else var l=this.session.documentToScreenPosition(i?n.end:n.start),c=this.session.screenToDocumentPosition(l.row+e,l.column);i?(s=r.fromPoints(a,c)).cursor=s.start:(s=r.fromPoints(c,a)).cursor=s.end;if(s.desiredColumn=o.column,this.selection.inMultiSelectMode){if(t)var u=n.cursor}else this.selection.addRange(n);this.selection.addRange(s),u&&this.selection.substractPoint(u)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,i=n.ranges,r=i.length;r--;){if((a=i[r]).isEmpty()){var o=t.getWordRange(a.start.row,a.start.column);a.start.row=o.start.row,a.start.column=o.start.column,a.end.row=o.end.row,a.end.column=o.end.column}}n.mergeOverlappingRanges();var s=[];for(r=i.length;r--;){var a=i[r];s.unshift(t.getTextRange(a))}e<0?s.unshift(s.pop()):s.push(s.shift());for(r=i.length;r--;){o=(a=i[r]).clone();t.replace(a,s[r]),a.start.row=o.start.row,a.start.column=o.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(e,t,n){var i=this.session,r=i.multiSelect.toOrientedRange();if(!r.isEmpty()||((r=i.getWordRange(r.start.row,r.start.column)).cursor=-1==e?r.start:r.end,this.multiSelect.addRange(r),!n)){var o=i.getTextRange(r),s=function(e,t,n){return u.$options.wrap=!0,u.$options.needle=t,u.$options.backwards=-1==n,u.find(e)}(i,o,e);s&&(s.cursor=-1==e?s.start:s.end,this.session.unfold(s),this.multiSelect.addRange(s),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(r.cursor)}},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,i=-1,o=n.filter((function(e){if(e.cursor.row==i)return!0;i=e.cursor.row}));if(n.length&&o.length!=n.length-1){o.forEach((function(e){t.substractPoint(e.cursor)}));var s=0,a=1/0,c=n.map((function(t){var n=t.cursor,i=e.getLine(n.row).substr(n.column).search(/\S/g);return-1==i&&(i=0),n.column>s&&(s=n.column),i<a&&(a=i),i}));n.forEach((function(t,n){var i=t.cursor,o=s-i.column,u=c[n]-a;o>u?e.insert(i,l.stringRepeat(" ",o-u)):e.remove(new r(i.row,i.column,i.row,i.column-o+u)),t.start.column=t.end.column=s,t.start.row=t.end.row=i.row,t.cursor=t.end})),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var u=this.selection.getRange(),d=u.start.row,h=u.end.row,f=d==h;if(f){var p,g=this.session.getLength();do{p=this.session.getLine(h)}while(/[=:]/.test(p)&&++h<g);do{p=this.session.getLine(d)}while(/[=:]/.test(p)&&--d>0);d<0&&(d=0),h>=g&&(h=g-1)}var m=this.session.removeFullLines(d,h);m=this.$reAlignText(m,f),this.session.insert({row:d,column:0},m.join("\n")+"\n"),f||(u.start.column=0,u.end.column=m[m.length-1].length),this.selection.setRange(u)}},this.$reAlignText=function(e,t){var n,i,r,o=!0,s=!0;return e.map((function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==n?(n=t[1].length,i=t[2].length,r=t[3].length,t):(n+i+r!=t[1].length+t[2].length+t[3].length&&(s=!1),n!=t[1].length&&(o=!1),n>t[1].length&&(n=t[1].length),i<t[2].length&&(i=t[2].length),r>t[3].length&&(r=t[3].length),t):[e]})).map(t?c:o?s?function(e){return e[2]?a(n+i-e[2].length)+e[2]+a(r)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}:c:function(e){return e[2]?a(n)+e[2]+a(r)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]});function a(e){return l.stringRepeat(" ",e)}function c(e){return e[2]?a(n)+e[2]+a(i-e[2].length+r)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}}}).call(h.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=f,e("./config").defineOptions(h.prototype,"editor",{enableMultiselect:{set:function(e){f(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",s)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",s))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})})),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("../../range").Range,r=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);return this.foldingStartMarker.test(i)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var r=/\S/,o=e.getLine(t),s=o.search(r);if(-1!=s){for(var a=n||o.length,l=e.getLength(),c=t,u=t;++t<l;){var d=e.getLine(t).search(r);if(-1!=d){if(d<=s){var h=e.getTokenAt(t,0);if(!h||"string"!==h.type)break}u=t}}if(u>c){var f=e.getLine(u).length;return new i(c,a,u,f)}}},this.openingBracketBlock=function(e,t,n,r,o){var s={row:n,column:r+1},a=e.$findClosingBracket(t,s,o);if(a){var l=e.foldWidgets[a.row];return null==l&&(l=e.getFoldWidget(a.row)),"start"==l&&a.row>s.row&&(a.row--,a.column=e.getLine(a.row).length),i.fromPoints(s,a)}},this.closingBracketBlock=function(e,t,n,r,o){var s={row:n,column:r},a=e.$findOpeningBracket(t,s);if(a)return a.column++,s.column--,i.fromPoints(a,s)}}).call(r.prototype)})),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.$id="ace/theme/textmate",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("./lib/dom");function r(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach((function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)})),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach((function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))}))}},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(n&&e.action){for(var i=e.data,r=i.start.row,o=i.end.row,s="add"==e.action,a=r+1;a<o;a++)n[a]&&(n[a].hidden=s);n[o]&&(s?n[r]?n[o].hidden=s:n[r]=n[o]:(n[r]==n[o]&&(n[r]=void 0),n[o].hidden=s))}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.start.row,i=e.end.row-n;if(0===i);else if("remove"==e.action){var r=t.splice(n+1,i);!t[n]&&r[r.length-1]&&(t[n]=r.pop()),r.forEach((function(e){e&&this.removeLineWidget(e)}),this),this.$updateRows()}else{var o=new Array(i);t[n]&&null!=t[n].column&&e.start.column>t[n].column&&n++,o.unshift(n,0),t.splice.apply(t,o),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach((function(e,n){if(e)for(t=!1,e.row=n;e.$oldWidget;)e.$oldWidget.row=n,e=e.$oldWidget})),t&&(this.session.lineWidgets=null)}},this.$registerLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];return t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e},this.addLineWidget=function(e){if(this.$registerLineWidget(e),e.session=this.session,!this.editor)return e;var t=this.editor.renderer;e.html&&!e.el&&(e.el=i.createElement("div"),e.el.innerHTML=e.html),e.el&&(i.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0,e.coverGutter||(e.el.style.zIndex=3),null==e.pixelHeight&&(e.pixelHeight=e.el.offsetHeight)),null==e.rowCount&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight);var n=this.session.getFoldAt(e.row,0);if(e.$fold=n,n){var r=this.session.lineWidgets;e.row!=n.end.row||r[n.start.row]?e.hidden=!0:r[n.start.row]=e}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(n){}if(this.session.lineWidgets){var t=this.session.lineWidgets[e.row];if(t==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;t;){if(t.$oldWidget==e){t.$oldWidget=e.$oldWidget;break}t=t.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,n=t&&t[e],i=[];n;)i.push(n),n=n.$oldWidget;return i},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,i=t.layerConfig;if(n&&n.length){for(var r=1/0,o=0;o<n.length;o++){var s=n[o];if(s&&s.el&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,t.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/i.characterWidth));var a=s.h/i.lineHeight;s.coverLine&&(a-=this.session.getRowLineCount(s.row))<0&&(a=0),s.rowCount!=a&&(s.rowCount=a,s.row<r&&(r=s.row))}}r!=1/0&&(this.session._emit("changeFold",{data:{start:{row:r}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var n=t.layerConfig,i=this.session.lineWidgets;if(i){for(var r=Math.min(this.firstRow,n.firstRow),o=Math.max(this.lastRow,n.lastRow,i.length);r>0&&!i[r];)r--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var s=r;s<=o;s++){var a=i[s];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,t.container.appendChild(a.el));var l=t.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;a.coverLine||(l+=n.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=l-n.offset+"px";var c=a.coverGutter?0:t.gutterWidth;a.fixedWidth||(c-=t.scrollLeft),a.el.style.left=c+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=n.width+2*n.padding+"px"),a.fixedWidth?a.el.style.right=t.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}).call(r.prototype),t.LineWidgets=r})),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],(function(e,t,n){"use strict";var i=e("../line_widgets").LineWidgets,r=e("../lib/dom"),o=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new i(n),n.widgetManager.attach(e));var s=e.getCursorPosition(),a=s.row,l=n.widgetManager.getWidgetsAtRow(a).filter((function(e){return"errorMarker"==e.type}))[0];l?l.destroy():a-=t;var c,u=function(e,t,n){var i=e.getAnnotations().sort(o.comparePoints);if(i.length){var r=function(e,t,n){for(var i=0,r=e.length-1;i<=r;){var o=i+r>>1,s=n(t,e[o]);if(s>0)i=o+1;else{if(!(s<0))return o;r=o-1}}return-(i+1)}(i,{row:t,column:-1},o.comparePoints);r<0&&(r=-r-1),r>=i.length?r=n>0?0:i.length-1:0===r&&n<0&&(r=i.length-1);var s=i[r];if(s&&n){if(s.row===t){do{s=i[r+=n]}while(s&&s.row===t);if(!s)return i.slice()}var a=[];t=s.row;do{a[n<0?"unshift":"push"](s),s=i[r+=n]}while(s&&s.row==t);return a.length&&a}}}(n,a,t);if(u){var d=u[0];s.column=(d.pos&&"number"!=typeof d.column?d.pos.sc:d.column)||0,s.row=d.row,c=e.renderer.$gutterLayer.$annotations[s.row]}else{if(l)return;c={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row),e.selection.moveToPosition(s);var h={row:s.row,fixedWidth:!0,coverGutter:!0,el:r.createElement("div"),type:"errorMarker"},f=h.el.appendChild(r.createElement("div")),p=h.el.appendChild(r.createElement("div"));p.className="error_widget_arrow "+c.className;var g=e.renderer.$cursorLayer.getPixelPosition(s).left;p.style.left=g+e.renderer.gutterWidth-5+"px",h.el.className="error_widget_wrapper",f.className="error_widget "+c.className,f.innerHTML=c.text.join("<br>"),f.appendChild(r.createElement("div"));var m=function(e,t,n){if(0===t&&("esc"===n||"return"===n))return h.destroy(),{command:"null"}};h.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(h),e.off("changeSelection",h.destroy),e.off("changeSession",h.destroy),e.off("mouseup",h.destroy),e.off("change",h.destroy))},e.keyBinding.addKeyboardHandler(m),e.on("changeSelection",h.destroy),e.on("changeSession",h.destroy),e.on("mouseup",h.destroy),e.on("change",h.destroy),e.session.widgetManager.addLineWidget(h),h.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},r.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","error_marker.css",!1)})),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],(function(e,t,i){"use strict";e("./lib/fixoldbrowsers");var r=e("./lib/dom"),o=e("./lib/event"),s=e("./range").Range,a=e("./editor").Editor,l=e("./edit_session").EditSession,c=e("./undomanager").UndoManager,u=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,t.define=n.amdD,t.edit=function(e,n){if("string"==typeof e){var i=e;if(!(e=document.getElementById(i)))throw new Error("ace.edit can't find div #"+i)}if(e&&e.env&&e.env.editor instanceof a)return e.env.editor;var s="";if(e&&/input|textarea/i.test(e.tagName)){var l=e;s=l.value,e=r.createElement("pre"),l.parentNode.replaceChild(e,l)}else e&&(s=e.textContent,e.innerHTML="");var c=t.createEditSession(s),d=new a(new u(e),c,n),h={document:c,editor:d,onResize:d.resize.bind(d,null)};return l&&(h.textarea=l),o.addListener(window,"resize",h.onResize),d.on("destroy",(function(){o.removeListener(window,"resize",h.onResize),h.editor.container.env=null})),d.container.env=d.env=h,d},t.createEditSession=function(e,t){var n=new l(e,t);return n.setUndoManager(new c),n},t.Range=s,t.Editor=a,t.EditSession=l,t.UndoManager=c,t.VirtualRenderer=u,t.version=t.config.version})),ace.require(["ace/ace"],(function(t){for(var n in t&&(t.config.init(!0),t.define=ace.define),window.ace||(window.ace=t),t)t.hasOwnProperty(n)&&(window.ace[n]=t[n]);window.ace.default=window.ace,e&&(e.exports=window.ace)}))},27:function(e,t,n){e=n.nmd(e),ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],(function(e,t,n){"use strict";var i=e("./lib/dom"),r=e("./lib/oop"),o=e("./lib/event_emitter").EventEmitter,s=e("./lib/lang"),a=e("./range").Range,l=e("./range_list").RangeList,c=e("./keyboard/hash_handler").HashHandler,u=e("./tokenizer").Tokenizer,d=e("./clipboard"),h={CURRENT_WORD:function(e){return e.session.getTextRange(e.session.getWordRange())},SELECTION:function(e,t,n){var i=e.session.getTextRange();return n?i.replace(/\n\r?([ \t]*\S)/g,"\n"+n+"$1"):i},CURRENT_LINE:function(e){return e.session.getLine(e.getCursorPosition().row)},PREV_LINE:function(e){return e.session.getLine(e.getCursorPosition().row-1)},LINE_INDEX:function(e){return e.getCursorPosition().row},LINE_NUMBER:function(e){return e.getCursorPosition().row+1},SOFT_TABS:function(e){return e.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(e){return e.session.getTabSize()},CLIPBOARD:function(e){return d.getText&&d.getText()},FILENAME:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0]},FILENAME_BASE:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(e){return this.FILEPATH(e).replace(/[^/\\]*$/,"")},FILEPATH:function(e){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.start||""},BLOCK_COMMENT_END:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.end||""},LINE_COMMENT:function(e){return(e.session.$mode||{}).lineCommentStart||""},CURRENT_YEAR:f.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:f.bind(null,{year:"2-digit"}),CURRENT_MONTH:f.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:f.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:f.bind(null,{month:"short"}),CURRENT_DATE:f.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:f.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:f.bind(null,{weekday:"short"}),CURRENT_HOUR:f.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:f.bind(null,{minute:"2-digit"}),CURRENT_SECOND:f.bind(null,{second:"2-digit"})};function f(e){var t=(new Date).toLocaleString("en-us",e);return 1==t.length?"0"+t:t}h.SELECTED_TEXT=h.SELECTION;var p=function(){this.snippetMap={},this.snippetNameMap={}};(function(){r.implement(this,o),this.getTokenizer=function(){return p.$tokenizer||this.createTokenizer()},this.createTokenizer=function(){function e(e){return e=e.substr(1),/^\d+$/.test(e)?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function t(e){return"(?:[^\\\\"+e+"]|\\\\.)"}var n={regex:"/("+t("/")+"+)/",onMatch:function(e,t,n){var i=n[0];return i.fmtString=!0,i.guard=e.slice(1,-1),i.flag="",""},next:"formatString"};return p.$tokenizer=new u({start:[{regex:/\\./,onMatch:function(e,t,n){var i=e[1];return("}"==i&&n.length||-1!="`$\\".indexOf(i))&&(e=i),[e]}},{regex:/}/,onMatch:function(e,t,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:e},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(t,n,i){var r=e(t.substr(1));return i.unshift(r[0]),r},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+t("\\|")+"*\\|",onMatch:function(e,t,n){var i=e.slice(1,-1).replace(/\\[,|\\]|,/g,(function(e){return 2==e.length?e[1]:"\0"})).split("\0").map((function(e){return{value:e}}));return n[0].choices=i,[i[0]]},next:"start"},n,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(e,t,n){return n.length&&n[0].expectElse?(n[0].expectElse=!1,n[0].ifEnd={elseEnd:n[0]},[n[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(e,t,n){var i=e[1];return"}"==i&&n.length||-1!="`$\\".indexOf(i)?e=i:"n"==i?e="\n":"t"==i?e="\t":-1!="ulULE".indexOf(i)&&(e={changeCase:i,local:i>"a"}),[e]}},{regex:"/\\w*}",onMatch:function(e,t,n){var i=n.shift();return i&&(i.flag=e.slice(1,-1)),this.next=i&&i.tabstopId?"start":"",[i||e]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(e,t,n){return[{text:e.slice(1)}]}},{regex:/\${\w+/,onMatch:function(e,t,n){var i={text:e.slice(2)};return n.unshift(i),[i]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(e,t,n){var i=n.shift();return this.next=i&&i.tabstopId?"start":"",[i||e]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(e,t,n){return n[0].formatFunction=e.slice(2,-1),[n.shift()]},next:"formatString"},n,{regex:/:[\?\-+]?/,onMatch:function(e,t,n){"+"==e[1]&&(n[0].ifEnd=n[0]),"?"==e[1]&&(n[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]})},this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map((function(e){return e.value||e}))},this.getVariableValue=function(e,t,n){if(/^\d+$/.test(t))return(this.variables.__||{})[t]||"";if(/^[A-Z]\d+$/.test(t))return(this.variables[t[0]+"__"]||{})[t.substr(1)]||"";if(t=t.replace(/^TM_/,""),!this.variables.hasOwnProperty(t))return"";var i=this.variables[t];return"function"==typeof i&&(i=this.variables[t](e,t,n)),null==i?"":i},this.variables=h,this.tmStrFormat=function(e,t,n){if(!t.fmt)return e;var i=t.flag||"",r=t.guard;r=new RegExp(r,i.replace(/[^gim]/g,""));var o="string"==typeof t.fmt?this.tokenizeTmSnippet(t.fmt,"formatString"):t.fmt,s=this,a=e.replace(r,(function(){var e=s.variables.__;s.variables.__=[].slice.call(arguments);for(var t=s.resolveVariables(o,n),i="E",r=0;r<t.length;r++){var a=t[r];if("object"==typeof a)if(t[r]="",a.changeCase&&a.local){var l=t[r+1];l&&"string"==typeof l&&("u"==a.changeCase?t[r]=l[0].toUpperCase():t[r]=l[0].toLowerCase(),t[r+1]=l.substr(1))}else a.changeCase&&(i=a.changeCase);else"U"==i?t[r]=a.toUpperCase():"L"==i&&(t[r]=a.toLowerCase())}return s.variables.__=e,t.join("")}));return a},this.tmFormatFunction=function(e,t,n){return"upcase"==t.formatFunction?e.toUpperCase():"downcase"==t.formatFunction?e.toLowerCase():e},this.resolveVariables=function(e,t){for(var n=[],i="",r=!0,o=0;o<e.length;o++){var s=e[o];if("string"!=typeof s){if(s){if(r=!1,s.fmtString){var a=e.indexOf(s,o+1);-1==a&&(a=e.length),s.fmt=e.slice(o+1,a),o=a}if(s.text){var l=this.getVariableValue(t,s.text,i)+"";s.fmtString&&(l=this.tmStrFormat(l,s,t)),s.formatFunction&&(l=this.tmFormatFunction(l,s,t)),l&&!s.ifEnd?(n.push(l),c(s)):!l&&s.ifEnd&&c(s.ifEnd)}else s.elseEnd?c(s.elseEnd):(null!=s.tabstopId||null!=s.changeCase)&&n.push(s)}}else n.push(s),"\n"==s?(r=!0,i=""):r&&(i=/^\t*/.exec(s)[0],r=/\S/.test(s))}function c(t){var n=e.indexOf(t,o+1);-1!=n&&(o=n)}return n},this.insertSnippetForSelection=function(e,t){var n=e.getCursorPosition(),i=e.session.getLine(n.row),r=e.session.getTabString(),o=i.match(/^\s*/)[0];n.column<o.length&&(o=o.slice(0,n.column)),t=t.replace(/\r/g,"");var s=this.tokenizeTmSnippet(t);s=(s=this.resolveVariables(s,e)).map((function(e){return"\n"==e?e+o:"string"==typeof e?e.replace(/\t/g,r):e}));var a=[];s.forEach((function(e,t){if("object"==typeof e){var n=e.tabstopId,i=a[n];if(i||((i=a[n]=[]).index=n,i.value="",i.parents={}),-1===i.indexOf(e)){e.choices&&!i.choices&&(i.choices=e.choices),i.push(e);var r=s.indexOf(e,t+1);if(-1!==r){var o=s.slice(t+1,r);o.some((function(e){return"object"===typeof e}))&&!i.value?i.value=o:!o.length||i.value&&"string"===typeof i.value||(i.value=o.join(""))}}}})),a.forEach((function(e){e.length=0}));var l={};function c(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];if("object"==typeof i){if(l[i.tabstopId])continue;i=t[e.lastIndexOf(i,n-1)]||{tabstopId:i.tabstopId}}t[n]=i}return t}for(var u=0;u<s.length;u++){var d=s[u];if("object"==typeof d){var h=d.tabstopId,f=a[h],p=s.indexOf(d,u+1);if(l[h])l[h]===d&&(delete l[h],Object.keys(l).forEach((function(e){f.parents[e]=!0})));else{l[h]=d;var m=f.value;"string"!==typeof m?m=c(m):d.fmt&&(m=this.tmStrFormat(m,d,e)),s.splice.apply(s,[u+1,Math.max(0,p-u)].concat(m,d)),-1===f.indexOf(d)&&f.push(d)}}}var v=0,y=0,b="";s.forEach((function(e){if("string"===typeof e){var t=e.split("\n");t.length>1?(y=t[t.length-1].length,v+=t.length-1):y+=e.length,b+=e}else e&&(e.start?e.end={row:v,column:y}:e.start={row:v,column:y})}));var w=e.getSelectionRange(),_=e.session.replace(w,b),x=new g(e),k=e.inVirtualSelectionMode&&e.selection.index;x.addTabstops(a,w.start,_,k)},this.insertSnippet=function(e,t){var n=this;if(e.inVirtualSelectionMode)return n.insertSnippetForSelection(e,t);e.forEachSelection((function(){n.insertSnippetForSelection(e,t)}),null,{keepOrder:!0}),e.tabstopManager&&e.tabstopManager.tabNext()},this.$getScope=function(e){var t=e.session.$mode.$id||"";if("html"===(t=t.split("/").pop())||"php"===t){"php"!==t||e.session.$mode.inlinePhp||(t="html");var n=e.getCursorPosition(),i=e.session.getState(n.row);"object"===typeof i&&(i=i[0]),i.substring&&("js-"==i.substring(0,3)?t="javascript":"css-"==i.substring(0,4)?t="css":"php-"==i.substring(0,4)&&(t="php"))}return t},this.getActiveScopes=function(e){var t=this.$getScope(e),n=[t],i=this.snippetMap;return i[t]&&i[t].includeScopes&&n.push.apply(n,i[t].includeScopes),n.push("_"),n},this.expandWithTab=function(e,t){var n=this,i=e.forEachSelection((function(){return n.expandSnippetForSelection(e,t)}),null,{keepOrder:!0});return i&&e.tabstopManager&&e.tabstopManager.tabNext(),i},this.expandSnippetForSelection=function(e,t){var n,i=e.getCursorPosition(),r=e.session.getLine(i.row),o=r.substring(0,i.column),s=r.substr(i.column),a=this.snippetMap;return this.getActiveScopes(e).some((function(e){var t=a[e];return t&&(n=this.findMatchingSnippet(t,o,s)),!!n}),this),!!n&&(t&&t.dryRun||(e.session.doc.removeInLine(i.row,i.column-n.replaceBefore.length,i.column+n.replaceAfter.length),this.variables.M__=n.matchBefore,this.variables.T__=n.matchAfter,this.insertSnippetForSelection(e,n.content),this.variables.M__=this.variables.T__=null),!0)},this.findMatchingSnippet=function(e,t,n){for(var i=e.length;i--;){var r=e[i];if((!r.startRe||r.startRe.test(t))&&((!r.endRe||r.endRe.test(n))&&(r.startRe||r.endRe)))return r.matchBefore=r.startRe?r.startRe.exec(t):[""],r.matchAfter=r.endRe?r.endRe.exec(n):[""],r.replaceBefore=r.triggerRe?r.triggerRe.exec(t)[0]:"",r.replaceAfter=r.endTriggerRe?r.endTriggerRe.exec(n)[0]:"",r}},this.snippetMap={},this.snippetNameMap={},this.register=function(e,t){var n=this.snippetMap,i=this.snippetNameMap,r=this;function o(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function a(e,t,n){return e=o(e),t=o(t),n?(e=t+e)&&"$"!=e[e.length-1]&&(e+="$"):(e+=t)&&"^"!=e[0]&&(e="^"+e),new RegExp(e)}function l(e){e.scope||(e.scope=t||"_"),t=e.scope,n[t]||(n[t]=[],i[t]={});var o=i[t];if(e.name){var l=o[e.name];l&&r.unregister(l),o[e.name]=e}n[t].push(e),e.prefix&&(e.tabTrigger=e.prefix),!e.content&&e.body&&(e.content=Array.isArray(e.body)?e.body.join("\n"):e.body),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=s.escapeRegExp(e.tabTrigger)),(e.trigger||e.guard||e.endTrigger||e.endGuard)&&(e.startRe=a(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger),e.endRe=a(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger))}e||(e=[]),Array.isArray(e)?e.forEach(l):Object.keys(e).forEach((function(t){l(e[t])})),this._signal("registerSnippets",{scope:t})},this.unregister=function(e,t){var n=this.snippetMap,i=this.snippetNameMap;function r(e){var r=i[e.scope||t];if(r&&r[e.name]){delete r[e.name];var o=n[e.scope||t],s=o&&o.indexOf(e);s>=0&&o.splice(s,1)}}e.content?r(e):Array.isArray(e)&&e.forEach(r)},this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");for(var t,n=[],i={},r=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;t=r.exec(e);){if(t[1])try{i=JSON.parse(t[1]),n.push(i)}catch(l){}if(t[4])i.content=t[4].replace(/^\t/gm,""),n.push(i),i={};else{var o=t[2],s=t[3];if("regex"==o){var a=/\/((?:[^\/\\]|\\.)*)|$/g;i.guard=a.exec(s)[1],i.trigger=a.exec(s)[1],i.endTrigger=a.exec(s)[1],i.endGuard=a.exec(s)[1]}else"snippet"==o?(i.tabTrigger=s.match(/^\S*/)[0],i.name||(i.name=s)):o&&(i[o]=s)}}return n},this.getSnippetByName=function(e,t){var n,i=this.snippetNameMap;return this.getActiveScopes(t).some((function(t){var r=i[t];return r&&(n=r[e]),!!n}),this),n}}).call(p.prototype);var g=function(e){if(e.tabstopManager)return e.tabstopManager;e.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=s.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e)};(function(){this.attach=function(e){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(e){for(var t="r"==e.action[0],n=this.selectedTabstop||{},i=n.parents||{},r=(this.tabstops||[]).slice(),o=0;o<r.length;o++){var s=r[o],a=s==n||i[s.index];if(s.rangeList.$bias=a?0:1,"remove"==e.action&&s!==n){var l=s.parents&&s.parents[n.index],c=s.rangeList.pointIndex(e.start,l);c=c<0?-c-1:c+1;var u=s.rangeList.pointIndex(e.end,l);u=u<0?-u-1:u-1;for(var d=s.rangeList.ranges.slice(c,u),h=0;h<d.length;h++)this.removeRange(d[h])}s.rangeList.$onChange(e)}var f=this.editor.session;this.$inChange||!t||1!=f.getLength()||f.getValue()||this.detach()},this.updateLinkedFields=function(){var e=this.selectedTabstop;if(e&&e.hasLinkedRanges&&e.firstNonLinked){this.$inChange=!0;for(var n=this.editor.session,i=n.getTextRange(e.firstNonLinked),r=0;r<e.length;r++){var o=e[r];if(o.linked){var s=o.original,a=t.snippetManager.tmStrFormat(i,s,this.editor);n.replace(o,a)}}this.$inChange=!1}},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,n=this.editor.selection.isEmpty(),i=0;i<this.ranges.length;i++)if(!this.ranges[i].linked){var r=this.ranges[i].contains(e.row,e.column),o=n||this.ranges[i].contains(t.row,t.column);if(r&&o)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(e){var t=this.tabstops.length,n=this.index+(e||1);(n=Math.min(Math.max(n,1),t))==t&&(n=0),this.selectTabstop(n),0===n&&this.detach()},this.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,(t=this.tabstops[this.index])&&t.length){this.selectedTabstop=t;var n=t.firstNonLinked||t;if(t.choices&&(n.cursor=n.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(n);else{var i=this.editor.multiSelect;i.toSingleRange(n);for(var r=0;r<t.length;r++)t.hasLinkedRanges&&t[r].linked||i.addRange(t[r].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},this.addTabstops=function(e,t,n){var i=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!e[0]){var r=a.fromPoints(n,n);v(r.start,t),v(r.end,t),e[0]=[r],e[0].index=0}var o=[this.index+1,0],s=this.ranges;e.forEach((function(e,n){for(var r=this.$openTabstops[n]||e,c=0;c<e.length;c++){var u=e[c],d=a.fromPoints(u.start,u.end||u.start);m(d.start,t),m(d.end,t),d.original=u,d.tabstop=r,s.push(d),r!=e?r.unshift(d):r[c]=d,u.fmtString||r.firstNonLinked&&i?(d.linked=!0,r.hasLinkedRanges=!0):r.firstNonLinked||(r.firstNonLinked=d)}r.firstNonLinked||(r.hasLinkedRanges=!1),r===e&&(o.push(r),this.$openTabstops[n]=r),this.addTabstopMarkers(r),r.rangeList=r.rangeList||new l,r.rangeList.$bias=0,r.rangeList.addList(r)}),this),o.length>2&&(this.tabstops.length&&o.push(o.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,o))},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach((function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))}))},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach((function(e){t.removeMarker(e.markerId),e.markerId=null}))},this.removeRange=function(e){var t=e.tabstop.indexOf(e);-1!=t&&e.tabstop.splice(t,1),-1!=(t=this.ranges.indexOf(e))&&this.ranges.splice(t,1),-1!=(t=e.tabstop.rangeList.ranges.indexOf(e))&&e.tabstop.splice(t,1),this.editor.session.removeMarker(e.markerId),e.tabstop.length||(-1!=(t=this.tabstops.indexOf(e.tabstop))&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},this.keyboardHandler=new c,this.keyboardHandler.bindKeys({Tab:function(e){t.snippetManager&&t.snippetManager.expandWithTab(e)||(e.tabstopManager.tabNext(1),e.renderer.scrollCursorIntoView())},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1),e.renderer.scrollCursorIntoView()},Esc:function(e){e.tabstopManager.detach()}})}).call(g.prototype);var m=function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row},v=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row};i.importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}","snippets.css",!1),t.snippetManager=new p;var y=e("./editor").Editor;(function(){this.insertSnippet=function(e,n){return t.snippetManager.insertSnippet(this,e,n)},this.expandSnippet=function(e){return t.snippetManager.expandWithTab(this,e)}}).call(y.prototype)})),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../virtual_renderer").VirtualRenderer,r=e("../editor").Editor,o=e("../range").Range,s=e("../lib/event"),a=e("../lib/lang"),l=e("../lib/dom"),c=function(e){var t=new i(e);t.$maxLines=4;var n=new r(t);return n.setHighlightActiveLine(!1),n.setShowPrintMargin(!1),n.renderer.setShowGutter(!1),n.renderer.setHighlightGutterLine(!1),n.$mouseHandler.$focusTimeout=0,n.$highlightTagPending=!0,n};l.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #3a674e;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);    position: absolute;    z-index: 2;}.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid rgba(109, 150, 13, 0.8);    background: rgba(58, 103, 78, 0.62);}.ace_completion-meta {    opacity: 0.5;    margin: 0.9em;}.ace_completion-message {    color: blue;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #2d69c7;}.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #93ca12;}.ace_editor.ace_autocomplete {    width: 300px;    z-index: 200000;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;    background: #fefefe;    color: #111;}.ace_dark.ace_editor.ace_autocomplete {    border: 1px #484747 solid;    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);    line-height: 1.4;    background: #25282c;    color: #c1c1c1;}","autocompletion.css",!1),t.AcePopup=function(e){var t=l.createElement("div"),n=new c(t);e&&e.appendChild(t),t.style.display="none",n.renderer.content.style.cursor="default",n.renderer.setStyle("ace_autocomplete"),n.setOption("displayIndentGuides",!1),n.setOption("dragDelay",150);var i,r=function(){};n.focus=r,n.$isFocused=!0,n.renderer.$cursorLayer.restartTimer=r,n.renderer.$cursorLayer.element.style.opacity=0,n.renderer.$maxLines=8,n.renderer.$keepTextAreaAtCursor=!1,n.setHighlightActiveLine(!1),n.session.highlight(""),n.session.$searchHighlight.clazz="ace_highlight-marker",n.on("mousedown",(function(e){var t=e.getDocumentPosition();n.selection.moveToPosition(t),d.start.row=d.end.row=t.row,e.stop()}));var u=new o(-1,0,-1,1/0),d=new o(-1,0,-1,1/0);d.id=n.session.addMarker(d,"ace_active-line","fullLine"),n.setSelectOnHover=function(e){e?u.id&&(n.session.removeMarker(u.id),u.id=null):u.id=n.session.addMarker(u,"ace_line-hover","fullLine")},n.setSelectOnHover(!1),n.on("mousemove",(function(e){if(i){if(i.x!=e.x||i.y!=e.y){(i=e).scrollTop=n.renderer.scrollTop;var t=i.getDocumentPosition().row;u.start.row!=t&&(u.id||n.setRow(t),f(t))}}else i=e})),n.renderer.on("beforeRender",(function(){if(i&&-1!=u.start.row){i.$pos=null;var e=i.getDocumentPosition().row;u.id||n.setRow(e),f(e,!0)}})),n.renderer.on("afterRender",(function(){var e=n.getRow(),t=n.renderer.$textLayer,i=t.element.childNodes[e-t.config.firstRow];i!==t.selectedNode&&t.selectedNode&&l.removeCssClass(t.selectedNode,"ace_selected"),t.selectedNode=i,i&&l.addCssClass(i,"ace_selected")}));var h=function(){f(-1)},f=function(e,t){e!==u.start.row&&(u.start.row=u.end.row=e,t||n.session._emit("changeBackMarker"),n._emit("changeHoverMarker"))};n.getHoveredRow=function(){return u.start.row},s.addListener(n.container,"mouseout",h),n.on("hide",h),n.on("changeSelection",h),n.session.doc.getLength=function(){return n.data.length},n.session.doc.getLine=function(e){var t=n.data[e];return"string"==typeof t?t:t&&t.value||""};var p=n.session.bgTokenizer;return p.$tokenizeRow=function(e){var t=n.data[e],i=[];if(!t)return i;"string"==typeof t&&(t={value:t});var r=t.caption||t.value||t.name;function o(e,n){e&&i.push({type:(t.className||"")+(n||""),value:e})}for(var s=r.toLowerCase(),a=(n.filterText||"").toLowerCase(),l=0,c=0,u=0;u<=a.length;u++)if(u!=c&&(t.matchMask&1<<u||u==a.length)){var d=a.slice(c,u);c=u;var h=s.indexOf(d,l);if(-1==h)continue;o(r.slice(l,h),""),l=h+d.length,o(r.slice(h,l),"completion-highlight")}return o(r.slice(l,r.length),""),t.meta&&i.push({type:"completion-meta",value:t.meta}),t.message&&i.push({type:"completion-message",value:t.message}),i},p.$updateOnChange=r,p.start=r,n.session.$computeWidth=function(){return this.screenWidth=0},n.isOpen=!1,n.isTopdown=!1,n.autoSelect=!0,n.filterText="",n.data=[],n.setData=function(e,t){n.filterText=t||"",n.setValue(a.stringRepeat("\n",e.length),-1),n.data=e||[],n.setRow(0)},n.getData=function(e){return n.data[e]},n.getRow=function(){return d.start.row},n.setRow=function(e){e=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,e)),d.start.row!=e&&(n.selection.clearSelection(),d.start.row=d.end.row=e||0,n.session._emit("changeBackMarker"),n.moveCursorTo(e||0,0),n.isOpen&&n._signal("select"))},n.on("changeSelection",(function(){n.isOpen&&n.setRow(n.selection.lead.row),n.renderer.scrollCursorIntoView()})),n.hide=function(){this.container.style.display="none",this._signal("hide"),n.isOpen=!1},n.show=function(e,t,r){var o=this.container,s=window.innerHeight,a=window.innerWidth,l=this.renderer,c=l.$maxLines*t*1.4,u=e.top+this.$borderSize;u>s/2&&!r&&u+t+c>s?(l.$maxPixelHeight=u-2*this.$borderSize,o.style.top="",o.style.bottom=s-u+"px",n.isTopdown=!1):(u+=t,l.$maxPixelHeight=s-u-.2*t,o.style.top=u+"px",o.style.bottom="",n.isTopdown=!0),o.style.display="";var d=e.left;d+o.offsetWidth>a&&(d=a-o.offsetWidth),o.style.left=d+"px",this._signal("show"),i=null,n.isOpen=!0},n.goTo=function(e){var t=this.getRow(),n=this.session.getLength()-1;switch(e){case"up":t=t<=0?n:t-1;break;case"down":t=t>=n?-1:t+1;break;case"start":t=0;break;case"end":t=n}this.setRow(t)},n.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},n.$imageSize=0,n.$borderSize=1,n},t.$singleLineEditor=c})),ace.define("ace/autocomplete/util",["require","exports","module"],(function(e,t,n){"use strict";t.parForEach=function(e,t,n){var i=0,r=e.length;0===r&&n();for(var o=0;o<r;o++)t(e[o],(function(e,t){++i===r&&n(e,t)}))};var i=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;t.retrievePrecedingIdentifier=function(e,t,n){n=n||i;for(var r=[],o=t-1;o>=0&&n.test(e[o]);o--)r.push(e[o]);return r.reverse().join("")},t.retrieveFollowingIdentifier=function(e,t,n){n=n||i;for(var r=[],o=t;o<e.length&&n.test(e[o]);o++)r.push(e[o]);return r},t.getCompletionPrefix=function(e){var t,n=e.getCursorPosition(),i=e.session.getLine(n.row);return e.completers.forEach(function(e){e.identifierRegexps&&e.identifierRegexps.forEach(function(e){!t&&e&&(t=this.retrievePrecedingIdentifier(i,n.column,e))}.bind(this))}.bind(this)),t||this.retrievePrecedingIdentifier(i,n.column)}})),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config"],(function(e,t,n){"use strict";var i=e("./keyboard/hash_handler").HashHandler,r=e("./autocomplete/popup").AcePopup,o=e("./autocomplete/util"),s=e("./lib/lang"),a=e("./lib/dom"),l=e("./snippets").snippetManager,c=e("./config"),u=function(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new i,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=s.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=s.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){return this.popup=new r(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(e,t,n){this.popup||this.$init(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered,this.completions.filterText),e.keyBinding.addKeyboardHandler(this.keyboardHandler);var i=e.renderer;if(this.popup.setRow(this.autoSelect?0:-1),n)n&&!t&&this.detach();else{this.popup.setTheme(e.getTheme()),this.popup.setFontSize(e.getFontSize());var r=i.layerConfig.lineHeight,o=i.$cursorLayer.getPixelPosition(this.base,!0);o.left-=this.popup.getTextLeftOffset();var s=e.container.getBoundingClientRect();o.top+=s.top-i.layerConfig.offset,o.left+=s.left-e.renderer.scrollLeft,o.left+=i.gutterWidth,this.popup.show(o,r)}this.changeTimer.cancel()},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(e){var t=this.editor.selection.lead;(t.row!=this.base.row||t.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(e){var t=document.activeElement,n=this.editor.textInput.getElement(),i=e.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(e.relatedTarget),r=this.popup&&this.popup.container;t==n||t.parentNode==r||i||t==this.tooltipNode||e.relatedTarget==n||this.detach()},this.mousedownListener=function(e){this.detach()},this.mousewheelListener=function(e){this.detach()},this.goTo=function(e){this.popup.goTo(e)},this.insertMatch=function(e,t){if(e||(e=this.popup.getData(this.popup.getRow())),!e)return!1;var n=this.completions;if(this.editor.startOperation({command:{name:"insertMatch"}}),e.completer&&e.completer.insertMatch)e.completer.insertMatch(this.editor,e);else{if(n.filterText)for(var i,r=this.editor.selection.getAllRanges(),o=0;i=r[o];o++)i.start.column-=n.filterText.length,this.editor.session.remove(i);e.snippet?l.insertSnippet(this.editor,e.snippet):this.editor.execCommand("insertstring",e.value||e)}this.completions==n&&this.detach(),this.editor.endOperation()},this.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(e){var t=e.completer.insertMatch();if(t||e.tabstopManager)return t;e.completer.goTo("down")},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}},this.gatherCompletions=function(e,t){var n=e.getSession(),i=e.getCursorPosition(),r=o.getCompletionPrefix(e);this.base=n.doc.createAnchor(i.row,i.column-r.length),this.base.$insertRight=!0;var s=[],a=e.completers.length;return e.completers.forEach((function(l,c){l.getCompletions(e,n,i,r,(function(n,i){!n&&i&&(s=s.concat(i)),t(null,{prefix:o.getCompletionPrefix(e),matches:s,finished:0===--a})}))})),!0},this.showPopup=function(e,t){this.editor&&this.detach(),this.activated=!0,this.editor=e,e.completer!=this&&(e.completer&&e.completer.detach(),e.completer=this),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,t)},this.updateCompletions=function(e,t){if(e&&this.base&&this.completions){var n=this.editor.getCursorPosition(),i=this.editor.session.getTextRange({start:this.base,end:n});if(i==this.completions.filterText)return;return this.completions.setFilter(i),this.completions.filtered.length?1!=this.completions.filtered.length||this.completions.filtered[0].value!=i||this.completions.filtered[0].snippet?void this.openPopup(this.editor,i,e):this.detach():this.detach()}if(t&&t.matches){n=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(n.row,n.column),this.base.$insertRight=!0,this.completions=new d(t.matches),this.openPopup(this.editor,"",e)}var r=this.gatherCompletionsId,o=function(e){if(e.finished)return this.detach()}.bind(this),s=function(t){var n=t.prefix,i=t.matches;this.completions=new d(i),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(n);var r=this.completions.filtered;return r.length&&(1!=r.length||r[0].value!=n||r[0].snippet)?this.autoInsert&&1==r.length&&t.finished?this.insertMatch(r[0]):void this.openPopup(this.editor,n,e):o(t)}.bind(this),a=!0,l=null;if(this.gatherCompletions(this.editor,function(e,t){var n=t.prefix,i=t&&t.matches;if(!i||!i.length)return o(t);0===n.indexOf(t.prefix)&&r==this.gatherCompletionsId&&(a?l=t:s(t))}.bind(this)),a=!1,l){var c=l;l=null,s(c)}},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var e=this.popup,t=e.data,n=t&&(t[e.getHoveredRow()]||t[e.getRow()]),i=null;return n&&this.editor&&this.popup.isOpen?(this.editor.completers.some((function(e){return e.getDocTooltip&&(i=e.getDocTooltip(n)),i})),i||"string"==typeof n||(i=n),"string"==typeof i&&(i={docText:i}),i&&(i.docHTML||i.docText)?void this.showDocTooltip(i):this.hideDocTooltip()):this.hideDocTooltip()},this.showDocTooltip=function(e){this.tooltipNode||(this.tooltipNode=a.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this));var t=this.tooltipNode;e.docHTML?t.innerHTML=e.docHTML:e.docText&&(t.textContent=e.docText),t.parentNode||document.body.appendChild(t);var n=this.popup,i=n.container.getBoundingClientRect();t.style.top=n.container.style.top,t.style.bottom=n.container.style.bottom,t.style.display="block",window.innerWidth-i.right<320?i.left<320?n.isTopdown?(t.style.top=i.bottom+"px",t.style.left=i.left+"px",t.style.right="",t.style.bottom=""):(t.style.top=n.container.offsetTop-t.offsetHeight+"px",t.style.left=i.left+"px",t.style.right="",t.style.bottom=""):(t.style.right=window.innerWidth-i.left+"px",t.style.left=""):(t.style.left=i.right+1+"px",t.style.right="")},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),this.tooltipNode){var e=this.tooltipNode;this.editor.isFocused()||document.activeElement!=e||this.editor.focus(),this.tooltipNode=null,e.parentNode&&e.parentNode.removeChild(e)}},this.onTooltipClick=function(e){for(var t=e.target;t&&t!=this.tooltipNode;){if("A"==t.nodeName&&t.href){t.rel="noreferrer",t.target="_blank";break}t=t.parentNode}},this.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var e=this.popup.container;e&&e.parentNode&&e.parentNode.removeChild(e)}this.editor&&this.editor.completer==this&&this.editor.completer,this.popup=null}}).call(u.prototype),u.for=function(e){return e.completer||(c.get("sharedPopups")?(u.$shared||(u.$sharedInstance=new u),e.completer=u.$sharedInstance):(e.completer=new u,e.once("destroy",(function(e,t){t.completer.destroy()})))),e.completer},u.startCommand={name:"startAutocomplete",exec:function(e,t){var n=u.for(e);n.autoInsert=!1,n.autoSelect=!0,n.showPopup(e,t),n.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var d=function(e,t){this.all=e,this.filtered=e,this.filterText=t||"",this.exactMatch=!1};(function(){this.setFilter=function(e){if(e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0))var t=this.filtered;else t=this.all;this.filterText=e,t=(t=this.filterCompletions(t,this.filterText)).sort((function(e,t){return t.exactMatch-e.exactMatch||t.$score-e.$score||(e.caption||e.value).localeCompare(t.caption||t.value)}));var n=null;t=t.filter((function(e){var t=e.snippet||e.caption||e.value;return t!==n&&(n=t,!0)})),this.filtered=t},this.filterCompletions=function(e,t){var n=[],i=t.toUpperCase(),r=t.toLowerCase();e:for(var o,s=0;o=e[s];s++){var a=o.caption||o.value||o.snippet;if(a){var l,c,u=-1,d=0,h=0;if(this.exactMatch){if(t!==a.substr(0,t.length))continue e}else{var f=a.toLowerCase().indexOf(r);if(f>-1)h=f;else for(var p=0;p<t.length;p++){var g=a.indexOf(r[p],u+1),m=a.indexOf(i[p],u+1);if((l=g>=0&&(m<0||g<m)?g:m)<0)continue e;(c=l-u-1)>0&&(-1===u&&(h+=10),h+=c,d|=1<<p),u=l}}o.matchMask=d,o.exactMatch=h?0:1,o.$score=(o.score||0)-h,n.push(o)}}return n}}).call(d.prototype),t.Autocomplete=u,t.FilteredList=d})),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],(function(e,t,n){var i=e("../range").Range,r=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function o(e,t){var n=function(e,t){return e.getTextRange(i.fromPoints({row:0,column:0},t)).split(r).length-1}(e,t),o=e.getValue().split(r),s=Object.create(null),a=o[n];return o.forEach((function(e,t){if(e&&e!==a){var i=Math.abs(n-t),r=o.length-i;s[e]?s[e]=Math.max(r,s[e]):s[e]=r}})),s}t.getCompletions=function(e,t,n,i,r){var s=o(t,n);r(null,Object.keys(s).map((function(e){return{caption:e,value:e,score:s[e],meta:"local"}})))}})),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],(function(e,t,n){"use strict";var i=e("../snippets").snippetManager,r=e("../autocomplete").Autocomplete,o=e("../config"),s=e("../lib/lang"),a=e("../autocomplete/util"),l=e("../autocomplete/text_completer"),c={getCompletions:function(e,t,n,i,r){if(t.$mode.completer)return t.$mode.completer.getCompletions(e,t,n,i,r);var o=e.session.getState(n.row);r(null,t.$mode.getCompletions(o,t,n,i))}},u={getCompletions:function(e,t,n,r,o){var s=[],a=t.getTokenAt(n.row,n.column);a&&a.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?s.push("html-tag"):s=i.getActiveScopes(e);var l=i.snippetMap,c=[];s.forEach((function(e){for(var t=l[e]||[],n=t.length;n--;){var i=t[n],r=i.name||i.tabTrigger;r&&c.push({caption:r,snippet:i.content,meta:i.tabTrigger&&!i.name?i.tabTrigger+"\u21e5 ":"snippet",type:"snippet"})}}),this),o(null,c)},getDocTooltip:function(e){"snippet"!=e.type||e.docHTML||(e.docHTML=["<b>",s.escapeHTML(e.caption),"</b>","<hr></hr>",s.escapeHTML(e.snippet)].join(""))}},d=[u,l,c];t.setCompleters=function(e){d.length=0,e&&d.push.apply(d,e)},t.addCompleter=function(e){d.push(e)},t.textCompleter=l,t.keyWordCompleter=c,t.snippetCompleter=u;var h={name:"expandSnippet",exec:function(e){return i.expandWithTab(e)},bindKey:"Tab"},f=function(e,t){p(t.session.$mode)},p=function e(t){"string"==typeof t&&(t=o.$modes[t]),t&&(i.files||(i.files={}),g(t.$id,t.snippetFileId),t.modes&&t.modes.forEach(e))},g=function(e,t){t&&e&&!i.files[e]&&(i.files[e]={},o.loadModule(t,(function(t){t&&(i.files[e]=t,!t.snippets&&t.snippetText&&(t.snippets=i.parseSnippetFile(t.snippetText)),i.register(t.snippets||[],t.scope),t.includeScopes&&(i.snippetMap[t.scope].includeScopes=t.includeScopes,t.includeScopes.forEach((function(e){p("ace/mode/"+e)}))))})))},m=function(e){var t=e.editor,n=t.completer&&t.completer.activated;if("backspace"===e.command.name)n&&!a.getCompletionPrefix(t)&&t.completer.detach();else if("insertstring"===e.command.name){if(a.getCompletionPrefix(t)&&!n){var i=r.for(t);i.autoInsert=!1,i.showPopup(t)}}},v=e("../editor").Editor;e("../config").defineOptions(v.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:d),this.commands.addCommand(r.startCommand)):this.commands.removeCommand(r.startCommand)},value:!1},enableLiveAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:d),this.commands.on("afterExec",m)):this.commands.removeListener("afterExec",m)},value:!1},enableSnippets:{set:function(e){e?(this.commands.addCommand(h),this.on("changeMode",f),f(0,this)):(this.commands.removeCommand(h),this.off("changeMode",f))},value:!1}})})),ace.require(["ace/ext/language_tools"],(function(t){e&&(e.exports=t)}))},6866:function(e,t,n){e=n.nmd(e),ace.define("ace/split",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/editor","ace/virtual_renderer","ace/edit_session"],(function(e,t,n){"use strict";var i=e("./lib/oop"),r=(e("./lib/lang"),e("./lib/event_emitter").EventEmitter),o=e("./editor").Editor,s=e("./virtual_renderer").VirtualRenderer,a=e("./edit_session").EditSession,l=function(e,t,n){this.BELOW=1,this.BESIDE=0,this.$container=e,this.$theme=t,this.$splits=0,this.$editorCSS="",this.$editors=[],this.$orientation=this.BESIDE,this.setSplits(n||1),this.$cEditor=this.$editors[0],this.on("focus",function(e){this.$cEditor=e}.bind(this))};(function(){i.implement(this,r),this.$createEditor=function(){var e=document.createElement("div");e.className=this.$editorCSS,e.style.cssText="position: absolute; top:0px; bottom:0px",this.$container.appendChild(e);var t=new o(new s(e,this.$theme));return t.on("focus",function(){this._emit("focus",t)}.bind(this)),this.$editors.push(t),t.setFontSize(this.$fontSize),t},this.setSplits=function(e){var t;if(e<1)throw"The number of splits have to be > 0!";if(e!=this.$splits){if(e>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<e;)t=this.$editors[this.$splits],this.$container.appendChild(t.container),t.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<e;)this.$createEditor(),this.$splits++}else for(;this.$splits>e;)t=this.$editors[this.$splits-1],this.$container.removeChild(t.container),this.$splits--;this.resize()}},this.getSplits=function(){return this.$splits},this.getEditor=function(e){return this.$editors[e]},this.getCurrentEditor=function(){return this.$cEditor},this.focus=function(){this.$cEditor.focus()},this.blur=function(){this.$cEditor.blur()},this.setTheme=function(e){this.$editors.forEach((function(t){t.setTheme(e)}))},this.setKeyboardHandler=function(e){this.$editors.forEach((function(t){t.setKeyboardHandler(e)}))},this.forEach=function(e,t){this.$editors.forEach(e,t)},this.$fontSize="",this.setFontSize=function(e){this.$fontSize=e,this.forEach((function(t){t.setFontSize(e)}))},this.$cloneSession=function(e){var t=new a(e.getDocument(),e.getMode()),n=e.getUndoManager();return t.setUndoManager(n),t.setTabSize(e.getTabSize()),t.setUseSoftTabs(e.getUseSoftTabs()),t.setOverwrite(e.getOverwrite()),t.setBreakpoints(e.getBreakpoints()),t.setUseWrapMode(e.getUseWrapMode()),t.setUseWorker(e.getUseWorker()),t.setWrapLimitRange(e.$wrapLimitRange.min,e.$wrapLimitRange.max),t.$foldData=e.$cloneFoldData(),t},this.setSession=function(e,t){var n;n=null==t?this.$cEditor:this.$editors[t];var i=this.$editors.some((function(t){return t.session===e}));return i&&(e=this.$cloneSession(e)),n.setSession(e),e},this.getOrientation=function(){return this.$orientation},this.setOrientation=function(e){this.$orientation!=e&&(this.$orientation=e,this.resize())},this.resize=function(){var e,t=this.$container.clientWidth,n=this.$container.clientHeight;if(this.$orientation==this.BESIDE)for(var i=t/this.$splits,r=0;r<this.$splits;r++)(e=this.$editors[r]).container.style.width=i+"px",e.container.style.top="0px",e.container.style.left=r*i+"px",e.container.style.height=n+"px",e.resize();else{var o=n/this.$splits;for(r=0;r<this.$splits;r++)(e=this.$editors[r]).container.style.width=t+"px",e.container.style.top=r*o+"px",e.container.style.left="0px",e.container.style.height=o+"px",e.resize()}}}).call(l.prototype),t.Split=l})),ace.define("ace/ext/split",["require","exports","module","ace/split"],(function(e,t,n){"use strict";n.exports=e("../split")})),ace.require(["ace/ext/split"],(function(t){e&&(e.exports=t)}))},262:function(e,t,n){e=n.nmd(e),ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("./text_highlight_rules").TextHighlightRules,o=function e(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},e.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};i.inherits(o,r),o.getTagRule=function(e){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},o.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}},o.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}},t.DocCommentHighlightRules=o})),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],(function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("./doc_comment_highlight_rules").DocCommentHighlightRules,o=e("./text_highlight_rules").TextHighlightRules,s="[a-zA-Z\\$_\xa1-\uffff][a-zA-Z\\d\\$_\xa1-\uffff]*",a=function(e){var t=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),n="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[r.getStartRule("doc-start"),c("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+s+")(\\.)(prototype)(\\.)("+s+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+s+")(\\.)("+s+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+s+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+s+")(\\.)("+s+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+s+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+s+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"from(?=\\s*('|\"))"},{token:"keyword",regex:"(?:case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void)\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:t,regex:s},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+s+")(\\.)("+s+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:s},{regex:"",token:"empty",next:"no_regex"}],start:[r.getStartRule("doc-start"),c("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:s},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:n},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:n},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},e&&e.noES6||(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(e,t,n){if(this.next="{"==e?this.nextState:"","{"==e&&n.length)n.unshift("start",t);else if("}"==e&&n.length&&(n.shift(),this.next=n.shift(),-1!=this.next.indexOf("string")||-1!=this.next.indexOf("jsx")))return"paren.quasi.end";return"{"==e?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:n},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),e&&0==e.jsx||l.call(this)),this.embedRules(r,"doc-",[r.getEndRule("no_regex")]),this.normalizeRules()};function l(){var e=s.replace("\\d","\\d\\-"),t={onMatch:function(e,t,n){var i="/"==e.charAt(1)?2:1;return 1==i?(t!=this.nextState?n.unshift(this.next,this.nextState,0):n.unshift(this.next),n[2]++):2==i&&t==this.nextState&&(n[1]--,(!n[1]||n[1]<0)&&(n.shift(),n.shift())),[{type:"meta.tag.punctuation."+(1==i?"":"end-")+"tag-open.xml",value:e.slice(0,i)},{type:"meta.tag.tag-name.xml",value:e.substr(i)}]},regex:"</?"+e,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(t);var n={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[n,t,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(e,t,n){return t==n[0]&&n.shift(),2==e.length&&(n[0]==this.nextState&&n[1]--,(!n[1]||n[1]<0)&&n.splice(0,2)),this.next=n[0]||"start",[{type:this.token,value:e}]},nextState:"jsx"},n,c("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:e},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},t],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function c(e){return[{token:"comment",regex:/\/\*/,next:[r.getTagRule(),{token:"comment",regex:"\\*\\/",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[r.getTagRule(),{token:"comment",regex:"$|^",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}i.inherits(a,o),t.JavaScriptHighlightRules=a})),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("../range").Range,r=function(){};(function(){this.checkOutdent=function(e,t){return!!/^\s+$/.test(e)&&/^\s*\}/.test(t)},this.autoOutdent=function(e,t){var n=e.getLine(t).match(/^(\s*\})/);if(!n)return 0;var r=n[1].length,o=e.findMatchingBracket({row:t,column:r});if(!o||o.row==t)return 0;var s=this.$getIndent(e.getLine(o.row));e.replace(new i(t,0,t,r-1),s)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(r.prototype),t.MatchingBraceOutdent=r})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,n){"use strict";var i=e("../../lib/oop"),r=e("../../range").Range,o=e("./fold_mode").FoldMode,s=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};i.inherits(s,o),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);if(this.singleLineBlockCommentRe.test(i)&&!this.startRegionRe.test(i)&&!this.tripleStarBlockCommentRe.test(i))return"";var r=this._getFoldWidgetBase(e,t,n);return!r&&this.startRegionRe.test(i)?"start":r},this.getFoldWidgetRange=function(e,t,n,i){var r,o=e.getLine(n);if(this.startRegionRe.test(o))return this.getCommentRegionBlock(e,o,n);if(r=o.match(this.foldingStartMarker)){var s=r.index;if(r[1])return this.openingBracketBlock(e,r[1],n,s);var a=e.getCommentFoldRange(n,s+r[0].length,1);return a&&!a.isMultiLine()&&(i?a=this.getSectionRange(e,n):"all"!=t&&(a=null)),a}if("markbegin"!==t&&(r=o.match(this.foldingStopMarker))){s=r.index+r[0].length;return r[1]?this.closingBracketBlock(e,r[1],n,s):e.getCommentFoldRange(n,s,-1)}},this.getSectionRange=function(e,t){for(var n=e.getLine(t),i=n.search(/\S/),o=t,s=n.length,a=t+=1,l=e.getLength();++t<l;){var c=(n=e.getLine(t)).search(/\S/);if(-1!==c){if(i>c)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=o)break;if(u.isMultiLine())t=u.end.row;else if(i==c)break}a=t}}return new r(o,s,a,e.getLine(a).length)},this.getCommentRegionBlock=function(e,t,n){for(var i=t.search(/\s*$/),o=e.getLength(),s=n,a=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++n<o;){t=e.getLine(n);var c=a.exec(t);if(c&&(c[1]?l--:l++,!l))break}if(n>s)return new r(s,i,n,t.length)}}.call(s.prototype)})),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],(function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("./text").Mode,o=e("./javascript_highlight_rules").JavaScriptHighlightRules,s=e("./matching_brace_outdent").MatchingBraceOutdent,a=e("../worker/worker_client").WorkerClient,l=e("./behaviour/cstyle").CstyleBehaviour,c=e("./folding/cstyle").FoldMode,u=function(){this.HighlightRules=o,this.$outdent=new s,this.$behaviour=new l,this.foldingRules=new c};i.inherits(u,r),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t),r=this.getTokenizer().getLineTokens(t,e),o=r.tokens,s=r.state;if(o.length&&"comment"==o[o.length-1].type)return i;if("start"==e||"no_regex"==e)(a=t.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/))&&(i+=n);else if("doc-start"==e){if("start"==s||"no_regex"==s)return"";var a;(a=t.match(/^\s*(\/?)\*/))&&(a[1]&&(i+=" "),i+="* ")}return i},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new a(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",(function(t){e.setAnnotations(t.data)})),t.on("terminate",(function(){e.clearAnnotations()})),t},this.$id="ace/mode/javascript",this.snippetFileId="ace/snippets/javascript"}.call(u.prototype),t.Mode=u})),ace.define("ace/mode/java_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],(function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("./doc_comment_highlight_rules").DocCommentHighlightRules,o=e("./text_highlight_rules").TextHighlightRules,s=function(){var e=this.createKeywordMapper({"variable.language":"this",keyword:"abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while|var","constant.language":"null|Infinity|NaN|undefined","support.function":"AbstractMethodError|AssertionError|ClassCircularityError|ClassFormatError|Deprecated|EnumConstantNotPresentException|ExceptionInInitializerError|IllegalAccessError|IllegalThreadStateException|InstantiationError|InternalError|NegativeArraySizeException|NoSuchFieldError|Override|Process|ProcessBuilder|SecurityManager|StringIndexOutOfBoundsException|SuppressWarnings|TypeNotPresentException|UnknownError|UnsatisfiedLinkError|UnsupportedClassVersionError|VerifyError|InstantiationException|IndexOutOfBoundsException|ArrayIndexOutOfBoundsException|CloneNotSupportedException|NoSuchFieldException|IllegalArgumentException|NumberFormatException|SecurityException|Void|InheritableThreadLocal|IllegalStateException|InterruptedException|NoSuchMethodException|IllegalAccessException|UnsupportedOperationException|Enum|StrictMath|Package|Compiler|Readable|Runtime|StringBuilder|Math|IncompatibleClassChangeError|NoSuchMethodError|ThreadLocal|RuntimePermission|ArithmeticException|NullPointerException|Long|Integer|Short|Byte|Double|Number|Float|Character|Boolean|StackTraceElement|Appendable|StringBuffer|Iterable|ThreadGroup|Runnable|Thread|IllegalMonitorStateException|StackOverflowError|OutOfMemoryError|VirtualMachineError|ArrayStoreException|ClassCastException|LinkageError|NoClassDefFoundError|ClassNotFoundException|RuntimeException|Exception|ThreadDeath|Error|Throwable|System|ClassLoader|Cloneable|Class|CharSequence|Comparable|String|Object"},"identifier");this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},r.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F][0-9a-fA-F_]*|[bB][01][01_]*)[LlSsDdFfYy]?\b/},{token:"constant.numeric",regex:/[+-]?\d[\d_]*(?:(?:\.[\d_]*)?(?:[eE][+-]?[\d_]+)?)?[LlSsDdFfYy]?\b/},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{regex:"(open(?:\\s+))?module(?=\\s*\\w)",token:"keyword",next:[{regex:"{",token:"paren.lparen",next:[{regex:"}",token:"paren.rparen",next:"start"},{regex:"\\b(requires|transitive|exports|opens|to|uses|provides|with)\\b",token:"keyword"}]},{token:"text",regex:"\\s+"},{token:"identifier",regex:"\\w+"},{token:"punctuation.operator",regex:"."},{token:"text",regex:"\\s+"},{regex:"",next:"start"}]},{token:e,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"!|\\$|%|&|\\||\\^|\\*|\\/|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?|\\:|\\*=|\\/=|%=|\\+=|\\-=|&=|\\|=|\\^=|\\b(?:in|instanceof|new|delete|typeof|void)"},{token:"lparen",regex:"[[({]"},{token:"rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]},this.embedRules(r,"doc-",[r.getEndRule("start")]),this.normalizeRules()};i.inherits(s,o),t.JavaHighlightRules=s})),ace.define("ace/mode/folding/java",["require","exports","module","ace/lib/oop","ace/mode/folding/cstyle","ace/range"],(function(e,t,n){"use strict";var i=e("../../lib/oop"),r=e("./cstyle").FoldMode,o=e("../../range").Range,s=t.FoldMode=function(){};i.inherits(s,r),function(){this.importRegex=/^import /,this.getCStyleFoldWidget=this.getFoldWidget,this.getFoldWidget=function(e,t,n){if("markbegin"===t){var i=e.getLine(n);if(this.importRegex.test(i)&&(0==n||!this.importRegex.test(e.getLine(n-1))))return"start"}return this.getCStyleFoldWidget(e,t,n)},this.getCstyleFoldWidgetRange=this.getFoldWidgetRange,this.getFoldWidgetRange=function(e,t,n,i){var r=(u=e.getLine(n)).match(this.importRegex);if(!r||"markbegin"!==t)return this.getCstyleFoldWidgetRange(e,t,n,i);for(var s=r[0].length,a=e.getLength(),l=n,c=n;++n<a;){var u;if(!(u=e.getLine(n)).match(/^\s*$/)){if(!u.match(this.importRegex))break;c=n}}if(c>l){var d=e.getLine(c).length;return new o(l,s,c,d)}}}.call(s.prototype)})),ace.define("ace/mode/java",["require","exports","module","ace/lib/oop","ace/mode/javascript","ace/mode/java_highlight_rules","ace/mode/folding/java"],(function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("./javascript").Mode,o=e("./java_highlight_rules").JavaHighlightRules,s=e("./folding/java").FoldMode,a=function(){r.call(this),this.HighlightRules=o,this.foldingRules=new s};i.inherits(a,r),function(){this.createWorker=function(e){return null},this.$id="ace/mode/java",this.snippetFileId="ace/snippets/java"}.call(a.prototype),t.Mode=a})),ace.require(["ace/mode/java"],(function(t){e&&(e.exports=t)}))},1941:function(e,t,n){e=n.nmd(e),ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.require(["ace/theme/monokai"],(function(t){e&&(e.exports=t)}))},9998:function(e,t){"use strict";t.Z=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),i=e.name||"",r=(e.type||"").toLowerCase(),o=r.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?i.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):r===t}))}return!0}},1694:function(e,t){var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var s=r.apply(null,n);s&&e.push(s)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var a in n)i.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},525:function(e,t,n){"use strict";var i=n(1235);function r(e){"function"===typeof(e=e||{}).codeMirrorInstance&&"function"===typeof e.codeMirrorInstance.defineMode?(String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),e.codeMirrorInstance.defineMode("spell-checker",(function(t){if(!r.aff_loading){r.aff_loading=!0;var n=new XMLHttpRequest;n.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),n.onload=function(){4===n.readyState&&200===n.status&&(r.aff_data=n.responseText,r.num_loaded++,2==r.num_loaded&&(r.typo=new i("en_US",r.aff_data,r.dic_data,{platform:"any"})))},n.send(null)}if(!r.dic_loading){r.dic_loading=!0;var o=new XMLHttpRequest;o.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),o.onload=function(){4===o.readyState&&200===o.status&&(r.dic_data=o.responseText,r.num_loaded++,2==r.num_loaded&&(r.typo=new i("en_US",r.aff_data,r.dic_data,{platform:"any"})))},o.send(null)}var s='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',a={token:function(e){var t=e.peek(),n="";if(s.includes(t))return e.next(),null;for(;null!=(t=e.peek())&&!s.includes(t);)n+=t,e.next();return r.typo&&!r.typo.check(n)?"spell-error":null}},l=e.codeMirrorInstance.getMode(t,t.backdrop||"text/plain");return e.codeMirrorInstance.overlayMode(l,a,!0)}))):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}r.num_loaded=0,r.aff_loading=!1,r.dic_loading=!1,r.aff_data="",r.dic_data="",r.typo,e.exports=r},7762:function(e,t,n){!function(e){"use strict";function t(t,i){function r(){t.display.wrapper.offsetHeight?(n(t,i),t.display.lastWrapHeight!=t.display.wrapper.clientHeight&&t.refresh()):i.timeout=setTimeout(r,i.delay)}i.timeout=setTimeout(r,i.delay),i.hurry=function(){clearTimeout(i.timeout),i.timeout=setTimeout(r,50)},e.on(window,"mouseup",i.hurry),e.on(window,"keyup",i.hurry)}function n(t,n){clearTimeout(n.timeout),e.off(window,"mouseup",n.hurry),e.off(window,"keyup",n.hurry)}e.defineOption("autoRefresh",!1,(function(e,i){e.state.autoRefresh&&(n(e,e.state.autoRefresh),e.state.autoRefresh=null),i&&0==e.display.wrapper.offsetHeight&&t(e,e.state.autoRefresh={delay:i.delay||250})}))}(n(3668))},4153:function(e,t,n){!function(e){"use strict";function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}function n(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}e.defineOption("fullScreen",!1,(function(i,r,o){o==e.Init&&(o=!1),!o!=!r&&(r?t(i):n(i))}))}(n(3668))},4017:function(e,t,n){!function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function n(e){t(e);var n=e.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.style.direction=e.getOption("direction"),n.className="CodeMirror-placeholder CodeMirror-line-like";var i=e.getOption("placeholder");"string"==typeof i&&(i=document.createTextNode(i)),n.appendChild(i),e.display.lineSpace.insertBefore(n,e.display.lineSpace.firstChild)}function i(e){setTimeout((function(){var i=!1;if(1==e.lineCount()){var r=e.getInputField();i="TEXTAREA"==r.nodeName?!e.getLine(0).length:!/[^\u200b]/.test(r.querySelector(".CodeMirror-line").textContent)}i?n(e):t(e)}),20)}function r(e){s(e)&&n(e)}function o(e){var i=e.getWrapperElement(),r=s(e);i.className=i.className.replace(" CodeMirror-empty","")+(r?" CodeMirror-empty":""),r?n(e):t(e)}function s(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",(function(n,s,a){var l=a&&a!=e.Init;if(s&&!l)n.on("blur",r),n.on("change",o),n.on("swapDoc",o),e.on(n.getInputField(),"compositionupdate",n.state.placeholderCompose=function(){i(n)}),o(n);else if(!s&&l){n.off("blur",r),n.off("change",o),n.off("swapDoc",o),e.off(n.getInputField(),"compositionupdate",n.state.placeholderCompose),t(n);var c=n.getWrapperElement();c.className=c.className.replace(" CodeMirror-empty","")}s&&!n.hasFocus()&&r(n)}))}(n(3668))},1292:function(e,t,n){!function(e){"use strict";var t=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,n=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,i=/[*+-]\s/;function r(e,n){var i=n.line,r=0,o=0,s=t.exec(e.getLine(i)),a=s[1];do{var l=i+(r+=1),c=e.getLine(l),u=t.exec(c);if(u){var d=u[1],h=parseInt(s[3],10)+r-o,f=parseInt(u[3],10),p=f;if(a!==d||isNaN(f)){if(a.length>d.length)return;if(a.length<d.length&&1===r)return;o+=1}else h===f&&(p=f+1),h>f&&(p=h+1),e.replaceRange(c.replace(t,d+p+u[4]+u[5]),{line:l,ch:0},{line:l,ch:c.length})}}while(u)}e.commands.newlineAndIndentContinueMarkdownList=function(o){if(o.getOption("disableInput"))return e.Pass;for(var s=o.listSelections(),a=[],l=0;l<s.length;l++){var c=s[l].head,u=o.getStateAfter(c.line),d=e.innerMode(o.getMode(),u);if("markdown"!==d.mode.name&&"markdown"!==d.mode.helperType)return void o.execCommand("newlineAndIndent");var h=!1!==(u=d.state).list,f=0!==u.quote,p=o.getLine(c.line),g=t.exec(p),m=/^\s*$/.test(p.slice(0,c.ch));if(!s[l].empty()||!h&&!f||!g||m)return void o.execCommand("newlineAndIndent");if(n.test(p)){var v=f&&/>\s*$/.test(p),y=!/>\s*$/.test(p);(v||y)&&o.replaceRange("",{line:c.line,ch:0},{line:c.line,ch:c.ch+1}),a[l]="\n"}else{var b=g[1],w=g[5],_=!(i.test(g[2])||g[2].indexOf(">")>=0),x=_?parseInt(g[3],10)+1+g[4]:g[2].replace("x"," ");a[l]="\n"+b+x+w,_&&r(o,c)}}o.replaceSelections(a)}}(n(3668))},1357:function(e,t,n){!function(e){"use strict";e.overlayMode=function(t,n,i){return{startState:function(){return{base:e.startState(t),overlay:e.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(i){return{base:e.copyState(t,i.base),overlay:e.copyState(n,i.overlay),basePos:i.basePos,baseCur:null,overlayPos:i.overlayPos,overlayCur:null}},token:function(e,r){return(e!=r.streamSeen||Math.min(r.basePos,r.overlayPos)<e.start)&&(r.streamSeen=e,r.basePos=r.overlayPos=e.start),e.start==r.basePos&&(r.baseCur=t.token(e,r.base),r.basePos=e.pos),e.start==r.overlayPos&&(e.pos=e.start,r.overlayCur=n.token(e,r.overlay),r.overlayPos=e.pos),e.pos=Math.min(r.basePos,r.overlayPos),null==r.overlayCur?r.baseCur:null!=r.baseCur&&r.overlay.combineTokens||i&&null==r.overlay.combineTokens?r.baseCur+" "+r.overlayCur:r.overlayCur},indent:t.indent&&function(e,n,i){return t.indent(e.base,n,i)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){var r,o;return t.blankLine&&(r=t.blankLine(e.base)),n.blankLine&&(o=n.blankLine(e.overlay)),null==o?r:i&&null!=r?r+" "+o:o}}}}(n(3668))},6849:function(e,t,n){!function(e){"use strict";var t,n,i=e.Pos;function r(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}function o(e,t){for(var n=r(e),i=n,o=0;o<t.length;o++)-1==i.indexOf(t.charAt(o))&&(i+=t.charAt(o));return n==i?e:new RegExp(e.source,i)}function s(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}function a(e,t,n){t=o(t,"g");for(var r=n.line,s=n.ch,a=e.lastLine();r<=a;r++,s=0){t.lastIndex=s;var l=e.getLine(r),c=t.exec(l);if(c)return{from:i(r,c.index),to:i(r,c.index+c[0].length),match:c}}}function l(e,t,n){if(!s(t))return a(e,t,n);t=o(t,"gm");for(var r,l=1,c=n.line,u=e.lastLine();c<=u;){for(var d=0;d<l&&!(c>u);d++){var h=e.getLine(c++);r=null==r?h:r+"\n"+h}l*=2,t.lastIndex=n.ch;var f=t.exec(r);if(f){var p=r.slice(0,f.index).split("\n"),g=f[0].split("\n"),m=n.line+p.length-1,v=p[p.length-1].length;return{from:i(m,v),to:i(m+g.length-1,1==g.length?v+g[0].length:g[g.length-1].length),match:f}}}}function c(e,t,n){for(var i,r=0;r<=e.length;){t.lastIndex=r;var o=t.exec(e);if(!o)break;var s=o.index+o[0].length;if(s>e.length-n)break;(!i||s>i.index+i[0].length)&&(i=o),r=o.index+1}return i}function u(e,t,n){t=o(t,"g");for(var r=n.line,s=n.ch,a=e.firstLine();r>=a;r--,s=-1){var l=e.getLine(r),u=c(l,t,s<0?0:l.length-s);if(u)return{from:i(r,u.index),to:i(r,u.index+u[0].length),match:u}}}function d(e,t,n){if(!s(t))return u(e,t,n);t=o(t,"gm");for(var r,a=1,l=e.getLine(n.line).length-n.ch,d=n.line,h=e.firstLine();d>=h;){for(var f=0;f<a&&d>=h;f++){var p=e.getLine(d--);r=null==r?p:p+"\n"+r}a*=2;var g=c(r,t,l);if(g){var m=r.slice(0,g.index).split("\n"),v=g[0].split("\n"),y=d+m.length,b=m[m.length-1].length;return{from:i(y,b),to:i(y+v.length-1,1==v.length?b+v[0].length:v[v.length-1].length),match:g}}}}function h(e,t,n,i){if(e.length==t.length)return n;for(var r=0,o=n+Math.max(0,e.length-t.length);;){if(r==o)return r;var s=r+o>>1,a=i(e.slice(0,s)).length;if(a==n)return s;a>n?o=s:r=s+1}}function f(e,r,o,s){if(!r.length)return null;var a=s?t:n,l=a(r).split(/\r|\n\r?/);e:for(var c=o.line,u=o.ch,d=e.lastLine()+1-l.length;c<=d;c++,u=0){var f=e.getLine(c).slice(u),p=a(f);if(1==l.length){var g=p.indexOf(l[0]);if(-1==g)continue e;return o=h(f,p,g,a)+u,{from:i(c,h(f,p,g,a)+u),to:i(c,h(f,p,g+l[0].length,a)+u)}}var m=p.length-l[0].length;if(p.slice(m)==l[0]){for(var v=1;v<l.length-1;v++)if(a(e.getLine(c+v))!=l[v])continue e;var y=e.getLine(c+l.length-1),b=a(y),w=l[l.length-1];if(b.slice(0,w.length)==w)return{from:i(c,h(f,p,m,a)+u),to:i(c+l.length-1,h(y,b,w.length,a))}}}}function p(e,r,o,s){if(!r.length)return null;var a=s?t:n,l=a(r).split(/\r|\n\r?/);e:for(var c=o.line,u=o.ch,d=e.firstLine()-1+l.length;c>=d;c--,u=-1){var f=e.getLine(c);u>-1&&(f=f.slice(0,u));var p=a(f);if(1==l.length){var g=p.lastIndexOf(l[0]);if(-1==g)continue e;return{from:i(c,h(f,p,g,a)),to:i(c,h(f,p,g+l[0].length,a))}}var m=l[l.length-1];if(p.slice(0,m.length)==m){var v=1;for(o=c-l.length+1;v<l.length-1;v++)if(a(e.getLine(o+v))!=l[v])continue e;var y=e.getLine(c+1-l.length),b=a(y);if(b.slice(b.length-l[0].length)==l[0])return{from:i(c+1-l.length,h(y,b,y.length-l[0].length,a)),to:i(c,h(f,p,m.length,a))}}}}function g(e,t,n,r){var s;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=e,n=n?e.clipPos(n):i(0,0),this.pos={from:n,to:n},"object"==typeof r?s=r.caseFold:(s=r,r=null),"string"==typeof t?(null==s&&(s=!1),this.matches=function(n,i){return(n?p:f)(e,t,i,s)}):(t=o(t,"gm"),r&&!1===r.multiline?this.matches=function(n,i){return(n?u:a)(e,t,i)}:this.matches=function(n,i){return(n?d:l)(e,t,i)})}String.prototype.normalize?(t=function(e){return e.normalize("NFD").toLowerCase()},n=function(e){return e.normalize("NFD")}):(t=function(e){return e.toLowerCase()},n=function(e){return e}),g.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){var n=this.doc.clipPos(t?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(n=i(n.line,n.ch),t?(n.ch--,n.ch<0&&(n.line--,n.ch=(this.doc.getLine(n.line)||"").length)):(n.ch++,n.ch>(this.doc.getLine(n.line)||"").length&&(n.ch=0,n.line++)),0!=e.cmpPos(n,this.doc.clipPos(n))))return this.atOccurrence=!1;var r=this.matches(t,n);if(this.afterEmptyMatch=r&&0==e.cmpPos(r.from,r.to),r)return this.pos=r,this.atOccurrence=!0,this.pos.match||!0;var o=i(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:o,to:o},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var r=e.splitLines(t);this.doc.replaceRange(r,this.pos.from,this.pos.to,n),this.pos.to=i(this.pos.from.line+r.length-1,r[r.length-1].length+(1==r.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",(function(e,t,n){return new g(this.doc,e,t,n)})),e.defineDocExtension("getSearchCursor",(function(e,t,n){return new g(this,e,t,n)})),e.defineExtension("selectMatches",(function(t,n){for(var i=[],r=this.getSearchCursor(t,this.getCursor("from"),n);r.findNext()&&!(e.cmpPos(r.to(),this.getCursor("to"))>0);)i.push({anchor:r.from(),head:r.to()});i.length&&this.setSelections(i,0)}))}(n(3668))},4911:function(e,t,n){!function(e){"use strict";function t(e){e.state.markedSelection&&e.operation((function(){c(e)}))}function n(e){e.state.markedSelection&&e.state.markedSelection.length&&e.operation((function(){a(e)}))}e.defineOption("styleSelectedText",!1,(function(i,r,o){var s=o&&o!=e.Init;r&&!s?(i.state.markedSelection=[],i.state.markedSelectionStyle="string"==typeof r?r:"CodeMirror-selectedtext",l(i),i.on("cursorActivity",t),i.on("change",n)):!r&&s&&(i.off("cursorActivity",t),i.off("change",n),a(i),i.state.markedSelection=i.state.markedSelectionStyle=null)}));var i=8,r=e.Pos,o=e.cmpPos;function s(e,t,n,s){if(0!=o(t,n))for(var a=e.state.markedSelection,l=e.state.markedSelectionStyle,c=t.line;;){var u=c==t.line?t:r(c,0),d=c+i,h=d>=n.line,f=h?n:r(d,0),p=e.markText(u,f,{className:l});if(null==s?a.push(p):a.splice(s++,0,p),h)break;c=d}}function a(e){for(var t=e.state.markedSelection,n=0;n<t.length;++n)t[n].clear();t.length=0}function l(e){a(e);for(var t=e.listSelections(),n=0;n<t.length;n++)s(e,t[n].from(),t[n].to())}function c(e){if(!e.somethingSelected())return a(e);if(e.listSelections().length>1)return l(e);var t=e.getCursor("start"),n=e.getCursor("end"),r=e.state.markedSelection;if(!r.length)return s(e,t,n);var c=r[0].find(),u=r[r.length-1].find();if(!c||!u||n.line-t.line<=i||o(t,u.to)>=0||o(n,c.from)<=0)return l(e);for(;o(t,c.from)>0;)r.shift().clear(),c=r[0].find();for(o(t,c.from)<0&&(c.to.line-t.line<i?(r.shift().clear(),s(e,t,c.to,0)):s(e,t,c.from,0));o(n,u.to)<0;)r.pop().clear(),u=r[r.length-1].find();o(n,u.to)>0&&(n.line-u.from.line<i?(r.pop().clear(),s(e,u.from,n)):s(e,u.to,n))}}(n(3668))},3668:function(e){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),i=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),s=i||r||o,a=s&&(i?document.documentMode||6:+(o||r)[1]),l=!o&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\/(\d+)/.exec(e),d=u&&+u[1],h=/Opera\//.test(e),f=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),g=/PhantomJS/.test(e),m=f&&(/Mobile\/\w+/.test(e)||navigator.maxTouchPoints>2),v=/Android/.test(e),y=m||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=m||/Mac/.test(t),w=/\bCrOS\b/.test(e),_=/win/i.test(t),x=h&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(h=!1,l=!0);var k=b&&(c||h&&(null==x||x<12.11)),C=n||s&&a>=9;function S(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var E,O=function(e,t){var n=e.className,i=S(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function A(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function M(e,t){return A(e).appendChild(t)}function R(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function T(e,t,n,i){var r=R(e,t,n,i);return r.setAttribute("role","presentation"),r}function D(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function I(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function L(e,t){var n=e.className;S(t).test(n)||(e.className+=(n?" ":"")+t)}function N(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!S(n[i]).test(t)&&(t+=" "+n[i]);return t}E=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(r){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var F=function(e){e.select()};function $(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function P(e,t,n){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function j(e,t,n,i,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=i||0,s=r||0;;){var a=e.indexOf("\t",o);if(a<0||a>=t)return s+(t-o);s+=a-o,s+=n-s%n,o=a+1}}m?F=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(F=function(e){try{e.select()}catch(t){}});var B=function(){this.id=null,this.f=null,this.time=0,this.handler=$(this.onTimeout,this)};function z(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}B.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},B.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var U=50,V={toString:function(){return"CodeMirror.Pass"}},W={scroll:!1},H={origin:"*mouse"},q={origin:"+move"};function G(e,t,n){for(var i=0,r=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var s=o-i;if(o==e.length||r+s>=t)return i+Math.min(s,t-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=t)return i}}var K=[""];function Y(e){for(;K.length<=e;)K.push(J(K)+" ");return K[e]}function J(e){return e[e.length-1]}function X(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function Q(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)}function Z(){}function ee(e,t){var n;return Object.create?n=Object.create(e):(Z.prototype=e,n=new Z),t&&P(t,n),n}var te=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ne(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||te.test(e))}function ie(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ne(e))||t.test(e):ne(e)}function re(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var oe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function se(e){return e.charCodeAt(0)>=768&&oe.test(e)}function ae(e,t,n){for(;(n<0?t>0:t<e.length)&&se(e.charAt(t));)t+=n;return t}function le(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var r=(t+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+i}}function ce(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var r=!1,o=0;o<e.length;++o){var s=e[o];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),r=!0)}r||i(t,n,"ltr")}var ue=null;function de(e,t,n){var i;ue=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&"before"==n?i=r:ue=r),o.from==t&&(o.from!=o.to&&"before"!=n?i=r:ue=r)}return null!=i?i:ue}var he=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1785?t.charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":8204==n?"b":"L"}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,a=/[1n]/;function l(e,t,n){this.level=e,this.from=t,this.to=n}return function(e,t){var c="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!i.test(e))return!1;for(var u=e.length,d=[],h=0;h<u;++h)d.push(n(e.charCodeAt(h)));for(var f=0,p=c;f<u;++f){var g=d[f];"m"==g?d[f]=p:p=g}for(var m=0,v=c;m<u;++m){var y=d[m];"1"==y&&"r"==v?d[m]="n":o.test(y)&&(v=y,"r"==y&&(d[m]="R"))}for(var b=1,w=d[0];b<u-1;++b){var _=d[b];"+"==_&&"1"==w&&"1"==d[b+1]?d[b]="1":","!=_||w!=d[b+1]||"1"!=w&&"n"!=w||(d[b]=w),w=_}for(var x=0;x<u;++x){var k=d[x];if(","==k)d[x]="N";else if("%"==k){var C=void 0;for(C=x+1;C<u&&"%"==d[C];++C);for(var S=x&&"!"==d[x-1]||C<u&&"1"==d[C]?"1":"N",E=x;E<C;++E)d[E]=S;x=C-1}}for(var O=0,A=c;O<u;++O){var M=d[O];"L"==A&&"1"==M?d[O]="L":o.test(M)&&(A=M)}for(var R=0;R<u;++R)if(r.test(d[R])){var T=void 0;for(T=R+1;T<u&&r.test(d[T]);++T);for(var D="L"==(R?d[R-1]:c),I=D==("L"==(T<u?d[T]:c))?D?"L":"R":c,L=R;L<T;++L)d[L]=I;R=T-1}for(var N,F=[],$=0;$<u;)if(s.test(d[$])){var P=$;for(++$;$<u&&s.test(d[$]);++$);F.push(new l(0,P,$))}else{var j=$,B=F.length,z="rtl"==t?1:0;for(++$;$<u&&"L"!=d[$];++$);for(var U=j;U<$;)if(a.test(d[U])){j<U&&(F.splice(B,0,new l(1,j,U)),B+=z);var V=U;for(++U;U<$&&a.test(d[U]);++U);F.splice(B,0,new l(2,V,U)),B+=z,j=U}else++U;j<$&&F.splice(B,0,new l(1,j,$))}return"ltr"==t&&(1==F[0].level&&(N=e.match(/^\s+/))&&(F[0].from=N[0].length,F.unshift(new l(0,0,N[0].length))),1==J(F).level&&(N=e.match(/\s+$/))&&(J(F).to-=N[0].length,F.push(new l(0,u-N[0].length,u)))),"rtl"==t?F.reverse():F}}();function fe(e,t){var n=e.order;return null==n&&(n=e.order=he(e.text,t)),n}var pe=[],ge=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||pe).concat(n)}};function me(e,t){return e._handlers&&e._handlers[t]||pe}function ve(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var o=z(r,n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function ye(e,t){var n=me(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function be(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ye(e,n||t.type,e,t),Se(t)||t.codemirrorIgnore}function we(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==z(n,t[i])&&n.push(t[i])}function _e(e,t){return me(e,t).length>0}function xe(e){e.prototype.on=function(e,t){ge(this,e,t)},e.prototype.off=function(e,t){ve(this,e,t)}}function ke(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ce(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Se(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Ee(e){ke(e),Ce(e)}function Oe(e){return e.target||e.srcElement}function Ae(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var Me,Re,Te=function(){if(s&&a<9)return!1;var e=R("div");return"draggable"in e||"dragDrop"in e}();function De(e){if(null==Me){var t=R("span","\u200b");M(e,R("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Me=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&a<8))}var n=Me?R("span","\u200b"):R("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Ie(e){if(null!=Re)return Re;var t=M(e,document.createTextNode("A\u062eA")),n=E(t,0,1).getBoundingClientRect(),i=E(t,1,2).getBoundingClientRect();return A(e),!(!n||n.left==n.right)&&(Re=i.right-n.right<3)}var Le=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Ne=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Fe=function(){var e=R("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),$e=null;function Pe(e){if(null!=$e)return $e;var t=M(e,R("span","x")),n=t.getBoundingClientRect(),i=E(t,0,1).getBoundingClientRect();return $e=Math.abs(n.left-i.left)>1}var je={},Be={};function ze(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),je[e]=t}function Ue(e,t){Be[e]=t}function Ve(e){if("string"==typeof e&&Be.hasOwnProperty(e))e=Be[e];else if(e&&"string"==typeof e.name&&Be.hasOwnProperty(e.name)){var t=Be[e.name];"string"==typeof t&&(t={name:t}),(e=ee(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ve("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ve("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function We(e,t){t=Ve(t);var n=je[t.name];if(!n)return We(e,"text/plain");var i=n(e,t);if(He.hasOwnProperty(t.name)){var r=He[t.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)i[s]=t.modeProps[s];return i}var He={};function qe(e,t){P(t,He.hasOwnProperty(e)?He[e]:He[e]={})}function Ge(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Ke(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Ye(e,t,n){return!e.startState||e.startState(t,n)}var Je=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Xe(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(t<o){n=r;break}t-=o}return n.lines[t]}function Qe(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch)),r==t.line&&(o=o.slice(t.ch)),i.push(o),++r})),i}function Ze(e,t,n){var i=[];return e.iter(t,n,(function(e){i.push(e.text)})),i}function et(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function tt(e){if(null==e.parent)return null;for(var t=e.parent,n=z(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function nt(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(t<o){e=r;continue e}t-=o,n+=r.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var a=e.lines[s].height;if(t<a)break;t-=a}return n+s}function it(e,t){return t>=e.first&&t<e.first+e.size}function rt(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ot(e,t,n){if(void 0===n&&(n=null),!(this instanceof ot))return new ot(e,t,n);this.line=e,this.ch=t,this.sticky=n}function st(e,t){return e.line-t.line||e.ch-t.ch}function at(e,t){return e.sticky==t.sticky&&0==st(e,t)}function lt(e){return ot(e.line,e.ch)}function ct(e,t){return st(e,t)<0?t:e}function ut(e,t){return st(e,t)<0?e:t}function dt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ht(e,t){if(t.line<e.first)return ot(e.first,0);var n=e.first+e.size-1;return t.line>n?ot(n,Xe(e,n).text.length):ft(t,Xe(e,t.line).text.length)}function ft(e,t){var n=e.ch;return null==n||n>t?ot(e.line,t):n<0?ot(e.line,0):e}function pt(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=ht(e,t[i]);return n}Je.prototype.eol=function(){return this.pos>=this.string.length},Je.prototype.sol=function(){return this.pos==this.lineStart},Je.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Je.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Je.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Je.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Je.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Je.prototype.skipToEnd=function(){this.pos=this.string.length},Je.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Je.prototype.backUp=function(e){this.pos-=e},Je.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=j(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?j(this.string,this.lineStart,this.tabSize):0)},Je.prototype.indentation=function(){return j(this.string,null,this.tabSize)-(this.lineStart?j(this.string,this.lineStart,this.tabSize):0)},Je.prototype.match=function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},Je.prototype.current=function(){return this.string.slice(this.start,this.pos)},Je.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Je.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Je.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var gt=function(e,t){this.state=e,this.lookAhead=t},mt=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function vt(e,t,n,i){var r=[e.state.modeGen],o={};Et(e,t.text,e.doc.mode,n,(function(e,t){return r.push(e,t)}),o,i);for(var s=n.state,a=function(i){n.baseTokens=r;var a=e.state.overlays[i],l=1,c=0;n.state=!0,Et(e,t.text,a.mode,n,(function(e,t){for(var n=l;c<e;){var i=r[l];i>e&&r.splice(l,1,e,r[l+1],i),l+=2,c=Math.min(e,i)}if(t)if(a.opaque)r.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+t}}),o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)a(l);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function yt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=bt(e,tt(t)),r=t.text.length>e.options.maxHighlightLength&&Ge(e.doc.mode,i.state),o=vt(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function bt(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new mt(i,!0,t);var o=Ot(e,t,n),s=o>i.first&&Xe(i,o-1).stateAfter,a=s?mt.fromSaved(i,s,o):new mt(i,Ye(i.mode),o);return i.iter(o,t,(function(n){wt(e,n.text,a);var i=a.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?a.save():null,a.nextLine()})),n&&(i.modeFrontier=a.line),a}function wt(e,t,n,i){var r=e.doc.mode,o=new Je(t,e.options.tabSize,n);for(o.start=o.pos=i||0,""==t&&_t(r,n.state);!o.eol();)xt(r,o,n.state),o.start=o.pos}function _t(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ke(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function xt(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=Ke(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}mt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},mt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},mt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},mt.fromSaved=function(e,t,n){return t instanceof gt?new mt(e,Ge(e.mode,t.state),n,t.lookAhead):new mt(e,Ge(e.mode,t),n)},mt.prototype.save=function(e){var t=!1!==e?Ge(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new gt(t,this.maxLookAhead):t};var kt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Ct(e,t,n,i){var r,o,s=e.doc,a=s.mode,l=Xe(s,(t=ht(s,t)).line),c=bt(e,t.line,n),u=new Je(l.text,e.options.tabSize,c);for(i&&(o=[]);(i||u.pos<t.ch)&&!u.eol();)u.start=u.pos,r=xt(a,u,c.state),i&&o.push(new kt(u,r,Ge(s.mode,c.state)));return i?o:new kt(u,r,c.state)}function St(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[i])||(t[i]+=" "+n[2])}return e}function Et(e,t,n,i,r,o,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,u=null,d=new Je(t,e.options.tabSize,i),h=e.options.addModeClass&&[null];for(""==t&&St(_t(n,i.state),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(a=!1,s&&wt(e,t,i,d.pos),d.pos=t.length,l=null):l=St(xt(n,d,i.state,h),o),h){var f=h[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!a||u!=l){for(;c<d.start;)r(c=Math.min(d.start,c+5e3),u);u=l}d.start=d.pos}for(;c<d.pos;){var p=Math.min(d.pos,c+5e3);r(p,u),c=p}}function Ot(e,t,n){for(var i,r,o=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var l=Xe(o,a-1),c=l.stateAfter;if(c&&(!n||a+(c instanceof gt?c.lookAhead:0)<=o.modeFrontier))return a;var u=j(l.text,null,e.options.tabSize);(null==r||i>u)&&(r=a-1,i=u)}return r}function At(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var r=Xe(e,i).stateAfter;if(r&&(!(r instanceof gt)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}var Mt=!1,Rt=!1;function Tt(){Mt=!0}function Dt(){Rt=!0}function It(e,t,n){this.marker=e,this.from=t,this.to=n}function Lt(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Nt(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Ft(e,t,n){var i=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));i&&e.markedSpans&&i.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],i&&i.add(e.markedSpans)),t.marker.attachLine(e)}function $t(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new It(s,o.from,a?null:o.to))}}return i}function Pt(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new It(s,a?null:o.from-t,null==o.to?null:o.to-t))}}return i}function jt(e,t){if(t.full)return null;var n=it(e,t.from.line)&&Xe(e,t.from.line).markedSpans,i=it(e,t.to.line)&&Xe(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,s=0==st(t.from,t.to),a=$t(n,r,s),l=Pt(i,o,s),c=1==t.text.length,u=J(t.text).length+(c?r:0);if(a)for(var d=0;d<a.length;++d){var h=a[d];if(null==h.to){var f=Lt(l,h.marker);f?c&&(h.to=null==f.to?null:f.to+u):h.to=r}}if(l)for(var p=0;p<l.length;++p){var g=l[p];null!=g.to&&(g.to+=u),null==g.from?Lt(a,g.marker)||(g.from=u,c&&(a||(a=[])).push(g)):(g.from+=u,c&&(a||(a=[])).push(g))}a&&(a=Bt(a)),l&&l!=a&&(l=Bt(l));var m=[a];if(!c){var v,y=t.text.length-2;if(y>0&&a)for(var b=0;b<a.length;++b)null==a[b].to&&(v||(v=[])).push(new It(a[b].marker,null,null));for(var w=0;w<y;++w)m.push(v);m.push(l)}return m}function Bt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function zt(e,t,n){var i=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=z(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:t,to:n}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(0),l=0;l<r.length;++l){var c=r[l];if(!(st(c.to,a.from)<0||st(c.from,a.to)>0)){var u=[l,1],d=st(c.from,a.from),h=st(c.to,a.to);(d<0||!s.inclusiveLeft&&!d)&&u.push({from:c.from,to:a.from}),(h>0||!s.inclusiveRight&&!h)&&u.push({from:a.to,to:c.to}),r.splice.apply(r,u),l+=u.length-3}}return r}function Ut(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Vt(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Wt(e){return e.inclusiveLeft?-1:0}function Ht(e){return e.inclusiveRight?1:0}function qt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),o=st(i.from,r.from)||Wt(e)-Wt(t);if(o)return-o;var s=st(i.to,r.to)||Ht(e)-Ht(t);return s||t.id-e.id}function Gt(e,t){var n,i=Rt&&e.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(t?r.from:r.to)&&(!n||qt(n,r.marker)<0)&&(n=r.marker);return n}function Kt(e){return Gt(e,!0)}function Yt(e){return Gt(e,!1)}function Jt(e,t){var n,i=Rt&&e.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||qt(n,o.marker)<0)&&(n=o.marker)}return n}function Xt(e,t,n,i,r){var o=Xe(e,t),s=Rt&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=st(c.from,n)||Wt(l.marker)-Wt(r),d=st(c.to,i)||Ht(l.marker)-Ht(r);if(!(u>=0&&d<=0||u<=0&&d>=0)&&(u<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?st(c.to,n)>=0:st(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?st(c.from,i)<=0:st(c.from,i)<0)))return!0}}}function Qt(e){for(var t;t=Kt(e);)e=t.find(-1,!0).line;return e}function Zt(e){for(var t;t=Yt(e);)e=t.find(1,!0).line;return e}function en(e){for(var t,n;t=Yt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function tn(e,t){var n=Xe(e,t),i=Qt(n);return n==i?t:tt(i)}function nn(e,t){if(t>e.lastLine())return t;var n,i=Xe(e,t);if(!rn(e,i))return t;for(;n=Yt(i);)i=n.find(1,!0).line;return tt(i)+1}function rn(e,t){var n=Rt&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&on(e,t,i))return!0}}function on(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return on(e,i.line,Lt(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r=void 0,o=0;o<t.markedSpans.length;++o)if((r=t.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&on(e,t,r))return!0}function sn(e){for(var t=0,n=(e=Qt(e)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;t+=a.height}return t}function an(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=Kt(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=Yt(i);){var o=t.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function ln(e){var t=e.display,n=e.doc;t.maxLine=Xe(n,n.first),t.maxLineLength=an(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=an(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var cn=function(e,t,n){this.text=e,Vt(this,t),this.height=n?n(this):1};function un(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ut(e),Vt(e,n);var r=i?i(e):1;r!=e.height&&et(e,r)}function dn(e){e.parent=null,Ut(e)}cn.prototype.lineNo=function(){return tt(this)},xe(cn);var hn={},fn={};function pn(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?fn:hn;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function gn(e,t){var n=T("span",null,null,l?"padding-right: .1px":null),i={pre:T("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var o=r?t.rest[r-1]:t.line,s=void 0;i.pos=0,i.addToken=vn,Ie(e.display.measure)&&(s=fe(o,e.doc.direction))&&(i.addToken=bn(i.addToken,s)),i.map=[],_n(o,i,yt(e,o,t!=e.display.externalMeasured&&tt(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=N(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=N(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(De(e.display.measure))),0==r?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var a=i.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return ye(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=N(i.pre.className,i.textClass||"")),i}function mn(e){var t=R("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function vn(e,t,n,i,r,o,l){if(t){var c,u=e.splitSpaces?yn(t,e.trailingSpace):t,d=e.cm.state.specialChars,h=!1;if(d.test(t)){c=document.createDocumentFragment();for(var f=0;;){d.lastIndex=f;var p=d.exec(t),g=p?p.index-f:t.length-f;if(g){var m=document.createTextNode(u.slice(f,f+g));s&&a<9?c.appendChild(R("span",[m])):c.appendChild(m),e.map.push(e.pos,e.pos+g,m),e.col+=g,e.pos+=g}if(!p)break;f+=g+1;var v=void 0;if("\t"==p[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(v=c.appendChild(R("span",Y(b),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=b}else"\r"==p[0]||"\n"==p[0]?((v=c.appendChild(R("span","\r"==p[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",p[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),s&&a<9?c.appendChild(R("span",[v])):c.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),s&&a<9&&(h=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||i||r||h||o||l){var w=n||"";i&&(w+=i),r&&(w+=r);var _=R("span",[c],w,o);if(l)for(var x in l)l.hasOwnProperty(x)&&"style"!=x&&"class"!=x&&_.setAttribute(x,l[x]);return e.content.appendChild(_)}e.content.appendChild(c)}}function yn(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",r=0;r<e.length;r++){var o=e.charAt(r);" "!=o||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o="\xa0"),i+=o,n=" "==o}return i}function bn(e,t){return function(n,i,r,o,s,a,l){r=r?r+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+i.length;;){for(var d=void 0,h=0;h<t.length&&!((d=t[h]).to>c&&d.from<=c);h++);if(d.to>=u)return e(n,i,r,o,s,a,l);e(n,i.slice(0,d.to-c),r,o,null,a,l),o=null,i=i.slice(d.to-c),c=d.to}}}function wn(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function _n(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(i)for(var s,a,l,c,u,d,h,f=r.length,p=0,g=1,m="",v=0;;){if(v==p){l=c=u=a="",h=null,d=null,v=1/0;for(var y=[],b=void 0,w=0;w<i.length;++w){var _=i[w],x=_.marker;if("bookmark"==x.type&&_.from==p&&x.widgetNode)y.push(x);else if(_.from<=p&&(null==_.to||_.to>p||x.collapsed&&_.to==p&&_.from==p)){if(null!=_.to&&_.to!=p&&v>_.to&&(v=_.to,c=""),x.className&&(l+=" "+x.className),x.css&&(a=(a?a+";":"")+x.css),x.startStyle&&_.from==p&&(u+=" "+x.startStyle),x.endStyle&&_.to==v&&(b||(b=[])).push(x.endStyle,_.to),x.title&&((h||(h={})).title=x.title),x.attributes)for(var k in x.attributes)(h||(h={}))[k]=x.attributes[k];x.collapsed&&(!d||qt(d.marker,x)<0)&&(d=_)}else _.from>p&&v>_.from&&(v=_.from)}if(b)for(var C=0;C<b.length;C+=2)b[C+1]==v&&(c+=" "+b[C]);if(!d||d.from==p)for(var S=0;S<y.length;++S)wn(t,0,y[S]);if(d&&(d.from||0)==p){if(wn(t,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=f)break;for(var E=Math.min(f,v);;){if(m){var O=p+m.length;if(!d){var A=O>E?m.slice(0,E-p):m;t.addToken(t,A,s?s+l:l,u,p+A.length==v?c:"",a,h)}if(O>=E){m=m.slice(E-p),p=E;break}p=O,u=""}m=r.slice(o,o=n[g++]),s=pn(n[g++],t.cm.options)}}else for(var M=1;M<n.length;M+=2)t.addToken(t,r.slice(o,o=n[M]),pn(n[M+1],t.cm.options))}function xn(e,t,n){this.line=t,this.rest=en(t),this.size=this.rest?tt(J(this.rest))-n+1:1,this.node=this.text=null,this.hidden=rn(e,t)}function kn(e,t,n){for(var i,r=[],o=t;o<n;o=i){var s=new xn(e.doc,Xe(e.doc,o),o);i=o+s.size,r.push(s)}return r}var Cn=null;function Sn(e){Cn?Cn.ops.push(e):e.ownsGroup=Cn={ops:[e],delayedCallbacks:[]}}function En(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}function On(e,t){var n=e.ownsGroup;if(n)try{En(n)}finally{Cn=null,t(n)}}var An=null;function Mn(e,t){var n=me(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);Cn?i=Cn.delayedCallbacks:An?i=An:(i=An=[],setTimeout(Rn,0));for(var o=function(e){i.push((function(){return n[e].apply(null,r)}))},s=0;s<n.length;++s)o(s)}}function Rn(){var e=An;An=null;for(var t=0;t<e.length;++t)e[t]()}function Tn(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];"text"==o?Nn(e,t):"gutter"==o?$n(e,t,n,i):"class"==o?Fn(e,t):"widget"==o&&Pn(e,t,i)}t.changes=null}function Dn(e){return e.node==e.text&&(e.node=R("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function In(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=Dn(t);t.background=i.insertBefore(R("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}}function Ln(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):gn(e,t)}function Nn(e,t){var n=t.text.className,i=Ln(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,Fn(e,t)):n&&(t.text.className=n)}function Fn(e,t){In(e,t),t.line.wrapClass?Dn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function $n(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=Dn(t);t.gutterBackground=R("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),r.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=Dn(t),a=t.gutter=R("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(a.setAttribute("aria-hidden","true"),e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(R("div",rt(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.display.gutterSpecs.length;++l){var c=e.display.gutterSpecs[l].className,u=o.hasOwnProperty(c)&&o[c];u&&a.appendChild(R("div",[u],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}}function Pn(e,t,n){t.alignable&&(t.alignable=null);for(var i=S("CodeMirror-linewidget"),r=t.node.firstChild,o=void 0;r;r=o)o=r.nextSibling,i.test(r.className)&&t.node.removeChild(r);Bn(e,t,n)}function jn(e,t,n,i){var r=Ln(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),Fn(e,t),$n(e,t,n,i),Bn(e,t,i),t.node}function Bn(e,t,n){if(zn(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)zn(e,t.rest[i],t,n,!1)}function zn(e,t,n,i,r){if(t.widgets)for(var o=Dn(n),s=0,a=t.widgets;s<a.length;++s){var l=a[s],c=R("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),Un(l,c,n,i),e.display.input.setUneditable(c),r&&l.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),Mn(l,"redraw")}}function Un(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function Vn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!D(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),M(t.display.measure,R("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Wn(e,t){for(var n=Oe(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Hn(e){return e.lineSpace.offsetTop}function qn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Gn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=M(e.measure,R("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Kn(e){return U-e.display.nativeBarWidth}function Yn(e){return e.display.scroller.clientWidth-Kn(e)-e.display.barWidth}function Jn(e){return e.display.scroller.clientHeight-Kn(e)-e.display.barHeight}function Xn(e,t,n){var i=e.options.lineWrapping,r=i&&Yn(e);if(!t.measure.heights||i&&t.measure.width!=r){var o=t.measure.heights=[];if(i){t.measure.width=r;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Qn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(tt(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}}function Zn(e,t){var n=tt(t=Qt(t)),i=e.display.externalMeasured=new xn(e.doc,t,n);i.lineN=n;var r=i.built=gn(e,i);return i.text=r.pre,M(e.display.lineMeasure,r.pre),i}function ei(e,t,n,i){return ii(e,ni(e,t),n,i)}function ti(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Fi(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function ni(e,t){var n=tt(t),i=ti(e,n);i&&!i.text?i=null:i&&i.changes&&(Tn(e,i,n,Ti(e)),e.curOp.forceUpdate=!0),i||(i=Zn(e,t));var r=Qn(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function ii(e,t,n,i,r){t.before&&(n=-1);var o,s=n+(i||"");return t.cache.hasOwnProperty(s)?o=t.cache[s]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Xn(e,t.view,t.rect),t.hasHeights=!0),(o=li(e,t,n,i)).bogus||(t.cache[s]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var ri,oi={left:0,right:0,top:0,bottom:0};function si(e,t,n){for(var i,r,o,s,a,l,c=0;c<e.length;c+=3)if(a=e[c],l=e[c+1],t<a?(r=0,o=1,s="left"):t<l?o=1+(r=t-a):(c==e.length-3||t==l&&e[c+3]>t)&&(r=(o=l-a)-1,t>=l&&(s="right")),null!=r){if(i=e[c+2],a==l&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==r)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)i=e[2+(c-=3)],s="left";if("right"==n&&r==l-a)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)i=e[(c+=3)+2],s="right";break}return{node:i,start:r,end:o,collapse:s,coverStart:a,coverEnd:l}}function ai(e,t){var n=oi;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var r=e.length-1;r>=0&&(n=e[r]).left==n.right;r--);return n}function li(e,t,n,i){var r,o=si(t.map,n,i),l=o.node,c=o.start,u=o.end,d=o.collapse;if(3==l.nodeType){for(var h=0;h<4;h++){for(;c&&se(t.line.text.charAt(o.coverStart+c));)--c;for(;o.coverStart+u<o.coverEnd&&se(t.line.text.charAt(o.coverStart+u));)++u;if((r=s&&a<9&&0==c&&u==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():ai(E(l,c,u).getClientRects(),i)).left||r.right||0==c)break;u=c,c-=1,d="right"}s&&a<11&&(r=ci(e.display.measure,r))}else{var f;c>0&&(d=i="right"),r=e.options.lineWrapping&&(f=l.getClientRects()).length>1?f["right"==i?f.length-1:0]:l.getBoundingClientRect()}if(s&&a<9&&!c&&(!r||!r.left&&!r.right)){var p=l.parentNode.getClientRects()[0];r=p?{left:p.left,right:p.left+Ri(e.display),top:p.top,bottom:p.bottom}:oi}for(var g=r.top-t.rect.top,m=r.bottom-t.rect.top,v=(g+m)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var w=b?y[b-1]:0,_=y[b],x={left:("right"==d?r.right:r.left)-t.rect.left,right:("left"==d?r.left:r.right)-t.rect.left,top:w,bottom:_};return r.left||r.right||(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=g,x.rbottom=m),x}function ci(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Pe(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}function ui(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function di(e){e.display.externalMeasure=null,A(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ui(e.display.view[t])}function hi(e){di(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function fi(){return u&&v?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function pi(){return u&&v?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function gi(e){var t=Qt(e).widgets,n=0;if(t)for(var i=0;i<t.length;++i)t[i].above&&(n+=Vn(t[i]));return n}function mi(e,t,n,i,r){if(!r){var o=gi(t);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=sn(t);if("local"==i?s+=Hn(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:pi());var l=a.left+("window"==i?0:fi());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function vi(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=fi(),r-=pi();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:r-s.top}}function yi(e,t,n,i,r){return i||(i=Xe(e.doc,t.line)),mi(e,i,ei(e,i,t.ch,r),n)}function bi(e,t,n,i,r,o){function s(t,s){var a=ii(e,r,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,mi(e,i,a,n)}i=i||Xe(e.doc,t.line),r||(r=ni(e,i));var a=fe(i,e.doc.direction),l=t.ch,c=t.sticky;if(l>=i.text.length?(l=i.text.length,c="before"):l<=0&&(l=0,c="after"),!a)return s("before"==c?l-1:l,"before"==c);function u(e,t,n){return s(n?e-1:e,1==a[t].level!=n)}var d=de(a,l,c),h=ue,f=u(l,d,"before"==c);return null!=h&&(f.other=u(l,h,"before"!=c)),f}function wi(e,t){var n=0;t=ht(e.doc,t),e.options.lineWrapping||(n=Ri(e.display)*t.ch);var i=Xe(e.doc,t.line),r=sn(i)+Hn(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function _i(e,t,n,i,r){var o=ot(e,t,n);return o.xRel=r,i&&(o.outside=i),o}function xi(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return _i(i.first,0,null,-1,-1);var r=nt(i,n),o=i.first+i.size-1;if(r>o)return _i(i.first+i.size-1,Xe(i,o).text.length,null,1,1);t<0&&(t=0);for(var s=Xe(i,r);;){var a=Ei(e,s,r,t,n),l=Jt(s,a.ch+(a.xRel>0||a.outside>0?1:0));if(!l)return a;var c=l.find(1);if(c.line==r)return c;s=Xe(i,r=c.line)}}function ki(e,t,n,i){i-=gi(t);var r=t.text.length,o=le((function(t){return ii(e,n,t-1).bottom<=i}),r,0);return{begin:o,end:r=le((function(t){return ii(e,n,t).top>i}),o,r)}}function Ci(e,t,n,i){return n||(n=ni(e,t)),ki(e,t,n,mi(e,t,ii(e,n,i),"line").top)}function Si(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function Ei(e,t,n,i,r){r-=sn(t);var o=ni(e,t),s=gi(t),a=0,l=t.text.length,c=!0,u=fe(t,e.doc.direction);if(u){var d=(e.options.lineWrapping?Ai:Oi)(e,t,n,o,u,i,r);a=(c=1!=d.level)?d.from:d.to-1,l=c?d.to:d.from-1}var h,f,p=null,g=null,m=le((function(t){var n=ii(e,o,t);return n.top+=s,n.bottom+=s,!!Si(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(p=t,g=n),!0)}),a,l),v=!1;if(g){var y=i-g.left<g.right-i,b=y==c;m=p+(b?0:1),f=b?"after":"before",h=y?g.left:g.right}else{c||m!=l&&m!=a||m++,f=0==m?"after":m==t.text.length?"before":ii(e,o,m-(c?1:0)).bottom+s<=r==c?"after":"before";var w=bi(e,ot(n,m,f),"line",t,o);h=w.left,v=r<w.top?-1:r>=w.bottom?1:0}return _i(n,m=ae(t.text,m,1),f,v,i-h)}function Oi(e,t,n,i,r,o,s){var a=le((function(a){var l=r[a],c=1!=l.level;return Si(bi(e,ot(n,c?l.to:l.from,c?"before":"after"),"line",t,i),o,s,!0)}),0,r.length-1),l=r[a];if(a>0){var c=1!=l.level,u=bi(e,ot(n,c?l.from:l.to,c?"after":"before"),"line",t,i);Si(u,o,s,!0)&&u.top>s&&(l=r[a-1])}return l}function Ai(e,t,n,i,r,o,s){var a=ki(e,t,i,s),l=a.begin,c=a.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,d=null,h=0;h<r.length;h++){var f=r[h];if(!(f.from>=c||f.to<=l)){var p=ii(e,i,1!=f.level?Math.min(c,f.to)-1:Math.max(l,f.from)).right,g=p<o?o-p+1e9:p-o;(!u||d>g)&&(u=f,d=g)}}return u||(u=r[r.length-1]),u.from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}function Mi(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==ri){ri=R("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)ri.appendChild(document.createTextNode("x")),ri.appendChild(R("br"));ri.appendChild(document.createTextNode("x"))}M(e.measure,ri);var n=ri.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),A(e.measure),n||1}function Ri(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=R("span","xxxxxxxxxx"),n=R("pre",[t],"CodeMirror-line-like");M(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function Ti(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var a=e.display.gutterSpecs[s].className;n[a]=o.offsetLeft+o.clientLeft+r,i[a]=o.clientWidth}return{fixedPos:Di(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function Di(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Ii(e){var t=Mi(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/Ri(e.display)-3);return function(r){if(rn(e.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return n?o+(Math.ceil(r.text.length/i)||1)*t:o+t}}function Li(e){var t=e.doc,n=Ii(e);t.iter((function(e){var t=n(e);t!=e.height&&et(e,t)}))}function Ni(e,t,n,i){var r=e.display;if(!n&&"true"==Oe(t).getAttribute("cm-not-content"))return null;var o,s,a=r.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(d){return null}var l,c=xi(e,o,s);if(i&&c.xRel>0&&(l=Xe(e.doc,c.line).text).length==c.ch){var u=j(l,l.length,e.options.tabSize)-l.length;c=ot(c.line,Math.max(0,Math.round((o-Gn(e.display).left)/Ri(e.display))-u))}return c}function Fi(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function $i(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)Rt&&tn(e.doc,t)<r.viewTo&&ji(e);else if(n<=r.viewFrom)Rt&&nn(e.doc,n+i)>r.viewFrom?ji(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)ji(e);else if(t<=r.viewFrom){var o=Bi(e,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):ji(e)}else if(n>=r.viewTo){var s=Bi(e,t,t,-1);s?(r.view=r.view.slice(0,s.index),r.viewTo=s.lineN):ji(e)}else{var a=Bi(e,t,t,-1),l=Bi(e,n,n+i,1);a&&l?(r.view=r.view.slice(0,a.index).concat(kn(e,a.lineN,l.lineN)).concat(r.view.slice(l.index)),r.viewTo+=i):ji(e)}var c=r.externalMeasured;c&&(n<c.lineN?c.lineN+=i:t<c.lineN+c.size&&(r.externalMeasured=null))}function Pi(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var o=i.view[Fi(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==z(s,n)&&s.push(n)}}}function ji(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Bi(e,t,n,i){var r,o=Fi(e,t),s=e.display.view;if(!Rt||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var a=e.display.viewFrom,l=0;l<o;l++)a+=s[l].size;if(a!=t){if(i>0){if(o==s.length-1)return null;r=a+s[o].size-t,o++}else r=a-t;t+=r,n+=r}for(;tn(e.doc,n)!=n;){if(o==(i<0?0:s.length-1))return null;n+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function zi(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=kn(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=kn(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(Fi(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(kn(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Fi(e,n)))),i.viewTo=n}function Ui(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function Vi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Wi(e,t){void 0===t&&(t=!0);var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=e.options.$customCursor;s&&(t=!0);for(var a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var l=n.sel.ranges[a];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var c=l.empty();if(s){var u=s(e,l);u&&Hi(e,u,r)}else(c||e.options.showCursorWhenSelecting)&&Hi(e,l.head,r);c||Gi(e,l,o)}}return i}function Hi(e,t,n){var i=bi(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),r=n.appendChild(R("div","\xa0","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var o=yi(e,t,"div",null,null),s=o.right-o.left;r.style.width=(s>0?s:e.defaultCharWidth())+"px"}if(i.other){var a=n.appendChild(R("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=i.other.left+"px",a.style.top=i.other.top+"px",a.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function qi(e,t){return e.top-t.top||e.left-t.left}function Gi(e,t,n){var i=e.display,r=e.doc,o=document.createDocumentFragment(),s=Gn(e.display),a=s.left,l=Math.max(i.sizerWidth,Yn(e)-i.sizer.offsetLeft)-s.right,c="ltr"==r.direction;function u(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),o.appendChild(R("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(i-t)+"px"))}function d(t,n,i){var o,s,d=Xe(r,t),h=d.text.length;function f(n,i){return yi(e,ot(t,n),"div",d,i)}function p(t,n,i){var r=Ci(e,d,null,t),o="ltr"==n==("after"==i)?"left":"right";return f("after"==i?r.begin:r.end-(/\s/.test(d.text.charAt(r.end-1))?2:1),o)[o]}var g=fe(d,r.direction);return ce(g,n||0,null==i?h:i,(function(e,t,r,d){var m="ltr"==r,v=f(e,m?"left":"right"),y=f(t-1,m?"right":"left"),b=null==n&&0==e,w=null==i&&t==h,_=0==d,x=!g||d==g.length-1;if(y.top-v.top<=3){var k=(c?w:b)&&x,C=(c?b:w)&&_?a:(m?v:y).left,S=k?l:(m?y:v).right;u(C,v.top,S-C,v.bottom)}else{var E,O,A,M;m?(E=c&&b&&_?a:v.left,O=c?l:p(e,r,"before"),A=c?a:p(t,r,"after"),M=c&&w&&x?l:y.right):(E=c?p(e,r,"before"):a,O=!c&&b&&_?l:v.right,A=!c&&w&&x?a:y.left,M=c?p(t,r,"after"):l),u(E,v.top,O-E,v.bottom),v.bottom<y.top&&u(a,v.bottom,null,y.top),u(A,y.top,M-A,y.bottom)}(!o||qi(v,o)<0)&&(o=v),qi(y,o)<0&&(o=y),(!s||qi(v,s)<0)&&(s=v),qi(y,s)<0&&(s=y)})),{start:o,end:s}}var h=t.from(),f=t.to();if(h.line==f.line)d(h.line,h.ch,f.ch);else{var p=Xe(r,h.line),g=Xe(r,f.line),m=Qt(p)==Qt(g),v=d(h.line,h.ch,m?p.text.length+1:null).end,y=d(f.line,m?0:null,f.ch).start;m&&(v.top<y.top-2?(u(v.right,v.top,null,v.bottom),u(a,y.top,y.left,y.bottom)):u(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&u(a,v.bottom,null,y.top)}n.appendChild(o)}function Ki(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||Qi(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Yi(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Xi(e))}function Ji(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Qi(e))}),100)}function Xi(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(ye(e,"focus",e,t),e.state.focused=!0,L(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),Ki(e))}function Qi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ye(e,"blur",e,t),e.state.focused=!1,O(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Zi(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=Math.max(0,t.scroller.getBoundingClientRect().top),r=t.lineDiv.getBoundingClientRect().top,o=0,l=0;l<t.view.length;l++){var c=t.view[l],u=e.options.lineWrapping,d=void 0,h=0;if(!c.hidden){if(r+=c.line.height,s&&a<8){var f=c.node.offsetTop+c.node.offsetHeight;d=f-n,n=f}else{var p=c.node.getBoundingClientRect();d=p.bottom-p.top,!u&&c.text.firstChild&&(h=c.text.firstChild.getBoundingClientRect().right-p.left-1)}var g=c.line.height-d;if((g>.005||g<-.005)&&(r<i&&(o-=g),et(c.line,d),er(c.line),c.rest))for(var m=0;m<c.rest.length;m++)er(c.rest[m]);if(h>e.display.sizerWidth){var v=Math.ceil(h/Ri(e.display));v>e.display.maxLineLength&&(e.display.maxLineLength=v,e.display.maxLine=c.line,e.display.maxLineChanged=!0)}}}Math.abs(o)>2&&(t.scroller.scrollTop+=o)}function er(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function tr(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-Hn(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,o=nt(t,i),s=nt(t,r);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<o?(o=a,s=nt(t,sn(Xe(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=s&&(o=nt(t,sn(Xe(t,l))-e.wrapper.clientHeight),s=l)}return{from:o,to:Math.max(s,o+1)}}function nr(e,t){if(!be(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),r=null;if(t.top+i.top<0?r=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!g){var o=R("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Hn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Kn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(r),e.display.lineSpace.removeChild(o)}}}function ir(e,t,n,i){var r;null==i&&(i=0),e.options.lineWrapping||t!=n||(n="before"==t.sticky?ot(t.line,t.ch+1,"before"):t,t=t.ch?ot(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var o=0;o<5;o++){var s=!1,a=bi(e,t),l=n&&n!=t?bi(e,n):a,c=or(e,r={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-i,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+i}),u=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=c.scrollTop&&(hr(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(s=!0)),null!=c.scrollLeft&&(pr(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(s=!0)),!s)break}return r}function rr(e,t){var n=or(e,t);null!=n.scrollTop&&hr(e,n.scrollTop),null!=n.scrollLeft&&pr(e,n.scrollLeft)}function or(e,t){var n=e.display,i=Mi(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Jn(e),s={};t.bottom-t.top>o&&(t.bottom=t.top+o);var a=e.doc.height+qn(n),l=t.top<i,c=t.bottom>a-i;if(t.top<r)s.scrollTop=l?0:t.top;else if(t.bottom>r+o){var u=Math.min(t.top,(c?a:t.bottom)-o);u!=r&&(s.scrollTop=u)}var d=e.options.fixedGutter?0:n.gutters.offsetWidth,h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-d,f=Yn(e)-n.gutters.offsetWidth,p=t.right-t.left>f;return p&&(t.right=t.left+f),t.left<10?s.scrollLeft=0:t.left<h?s.scrollLeft=Math.max(0,t.left+d-(p?0:10)):t.right>f+h-3&&(s.scrollLeft=t.right+(p?0:10)-f),s}function sr(e,t){null!=t&&(ur(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function ar(e){ur(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function lr(e,t,n){null==t&&null==n||ur(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function cr(e,t){ur(e),e.curOp.scrollToPos=t}function ur(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,dr(e,wi(e,t.from),wi(e,t.to),t.margin))}function dr(e,t,n,i){var r=or(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});lr(e,r.scrollLeft,r.scrollTop)}function hr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||Vr(e,{top:t}),fr(e,t,!0),n&&Vr(e),Nr(e,100))}function fr(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function pr(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,Gr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function gr(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+qn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Kn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var mr=function(e,t,n){this.cm=n;var i=this.vert=R("div",[R("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=R("div",[R("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,e(i),e(r),ge(i,"scroll",(function(){i.clientHeight&&t(i.scrollTop,"vertical")})),ge(r,"scroll",(function(){r.clientWidth&&t(r.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};mr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},mr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},mr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},mr.prototype.zeroWidthHack=function(){var e=b&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new B,this.disableVert=new B},mr.prototype.enableZeroWidthBar=function(e,t,n){function i(){var r=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)}e.style.pointerEvents="auto",t.set(1e3,i)},mr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var vr=function(){};function yr(e,t){t||(t=gr(e));var n=e.display.barWidth,i=e.display.barHeight;br(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&Zi(e),br(e,gr(e)),n=e.display.barWidth,i=e.display.barHeight}function br(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}vr.prototype.update=function(){return{bottom:0,right:0}},vr.prototype.setScrollLeft=function(){},vr.prototype.setScrollTop=function(){},vr.prototype.clear=function(){};var wr={native:mr,null:vr};function _r(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&O(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new wr[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ge(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?pr(e,t):hr(e,t)}),e),e.display.scrollbars.addClass&&L(e.display.wrapper,e.display.scrollbars.addClass)}var xr=0;function kr(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++xr,markArrays:null},Sn(e.curOp)}function Cr(e){var t=e.curOp;t&&On(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;Sr(e)}))}function Sr(e){for(var t=e.ops,n=0;n<t.length;n++)Er(t[n]);for(var i=0;i<t.length;i++)Or(t[i]);for(var r=0;r<t.length;r++)Ar(t[r]);for(var o=0;o<t.length;o++)Mr(t[o]);for(var s=0;s<t.length;s++)Rr(t[s])}function Er(e){var t=e.cm,n=t.display;Pr(t),e.updateMaxLine&&ln(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new $r(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Or(e){e.updatedDisplay=e.mustUpdate&&zr(e.cm,e.update)}function Ar(e){var t=e.cm,n=t.display;e.updatedDisplay&&Zi(t),e.barMeasure=gr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=ei(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Kn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Yn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Mr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&pr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==I();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&yr(t,e.barMeasure),e.updatedDisplay&&qr(t,e.barMeasure),e.selectionChanged&&Ki(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Yi(e.cm)}function Rr(e){var t=e.cm,n=t.display,i=t.doc;e.updatedDisplay&&Ur(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&fr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&pr(t,e.scrollLeft,!0,!0),e.scrollToPos&&nr(t,ir(t,ht(i,e.scrollToPos.from),ht(i,e.scrollToPos.to),e.scrollToPos.margin));var r=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(r)for(var s=0;s<r.length;++s)r[s].lines.length||ye(r[s],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&ye(o[a],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ye(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Tr(e,t){if(e.curOp)return t();kr(e);try{return t()}finally{Cr(e)}}function Dr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);kr(e);try{return t.apply(e,arguments)}finally{Cr(e)}}}function Ir(e){return function(){if(this.curOp)return e.apply(this,arguments);kr(this);try{return e.apply(this,arguments)}finally{Cr(this)}}}function Lr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);kr(t);try{return e.apply(this,arguments)}finally{Cr(t)}}}function Nr(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,$(Fr,e))}function Fr(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=bt(e,t.highlightFrontier),r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(i.line>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength?Ge(t.mode,i.state):null,l=vt(e,o,i,!0);a&&(i.state=a),o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var d=!s||s.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),h=0;!d&&h<s.length;++h)d=s[h]!=o.styles[h];d&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=e.options.maxHighlightLength&&wt(e,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return Nr(e,e.options.workDelay),!0})),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),r.length&&Tr(e,(function(){for(var t=0;t<r.length;t++)Pi(e,r[t],"text")}))}}var $r=function(e,t,n){var i=e.display;this.viewport=t,this.visible=tr(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Yn(e),this.force=n,this.dims=Ti(e),this.events=[]};function Pr(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Kn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Kn(e)+"px",t.scrollbarsClipped=!0)}function jr(e){if(e.hasFocus())return null;var t=I();if(!t||!D(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&D(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}function Br(e){if(e&&e.activeElt&&e.activeElt!=I()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&D(document.body,e.anchorNode)&&D(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}function zr(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return ji(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Ui(e))return!1;Kr(e)&&(ji(e),t.dims=Ti(e));var r=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(r,n.viewTo)),Rt&&(o=tn(e.doc,o),s=nn(e.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;zi(e,o,s),n.viewOffset=sn(Xe(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=Ui(e);if(!a&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=jr(e);return l>4&&(n.lineDiv.style.display="none"),Wr(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,Br(c),A(n.cursorDiv),A(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Nr(e,400)),n.updateLineNumbers=null,!0}function Ur(e,t){for(var n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldDisplayWidth!=Yn(e))i&&(t.visible=tr(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+qn(e.display)-Jn(e),n.top)}),t.visible=tr(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!zr(e,t))break;Zi(e);var r=gr(e);Vi(e),yr(e,r),qr(e,r),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Vr(e,t){var n=new $r(e,t);if(zr(e,n)){Zi(e),Ur(e,n);var i=gr(e);Vi(e),yr(e,i),qr(e,i),n.finish()}}function Wr(e,t,n){var i=e.display,r=e.options.lineNumbers,o=i.lineDiv,s=o.firstChild;function a(t){var n=t.nextSibling;return l&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=i.view,u=i.viewFrom,d=0;d<c.length;d++){var h=c[d];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;s!=h.node;)s=a(s);var f=r&&null!=t&&t<=u&&h.lineNumber;h.changes&&(z(h.changes,"gutter")>-1&&(f=!1),Tn(e,h,u,n)),f&&(A(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(rt(e.options,u)))),s=h.node.nextSibling}else{var p=jn(e,h,u,n);o.insertBefore(p,s)}u+=h.size}for(;s;)s=a(s)}function Hr(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",Mn(e,"gutterChanged",e)}function qr(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Kn(e)+"px"}function Gr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=Di(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function Kr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=rt(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(R("div",[R("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",Hr(e.display),!0}return!1}function Yr(e,t){for(var n=[],i=!1,r=0;r<e.length;r++){var o=e[r],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;i=!0}n.push({className:o,style:s})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Jr(e){var t=e.gutters,n=e.gutterSpecs;A(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,s=r.style,a=t.appendChild(R("div",null,"CodeMirror-gutter "+o));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==o&&(e.lineGutter=a,a.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",Hr(e)}function Xr(e){Jr(e.display),$i(e),Gr(e)}function Qr(e,t,i,r){var o=this;this.input=i,o.scrollbarFiller=R("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=R("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=T("div",null,"CodeMirror-code"),o.selectionDiv=R("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=R("div",null,"CodeMirror-cursors"),o.measure=R("div",null,"CodeMirror-measure"),o.lineMeasure=R("div",null,"CodeMirror-measure"),o.lineSpace=T("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var c=T("div",[o.lineSpace],"CodeMirror-lines");o.mover=R("div",[c],null,"position: relative"),o.sizer=R("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=R("div",null,null,"position: absolute; height: "+U+"px; width: 1px;"),o.gutters=R("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=R("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=R("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),o.wrapper.setAttribute("translate","no"),s&&a<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),l||n&&y||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=Yr(r.gutters,r.lineNumbers),Jr(o),i.init(o)}$r.prototype.signal=function(e,t){_e(e,t)&&this.events.push(arguments)},$r.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ye.apply(null,this.events[e])};var Zr=0,eo=null;function to(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function no(e){var t=to(e);return t.x*=eo,t.y*=eo,t}function io(e,t){u&&d>=102&&(null==e.display.chromeScrollHack?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout((function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""}),100));var i=to(t),r=i.x,o=i.y,s=eo;0===t.deltaMode&&(r=t.deltaX,o=t.deltaY,s=1);var a=e.display,c=a.scroller,f=c.scrollWidth>c.clientWidth,p=c.scrollHeight>c.clientHeight;if(r&&f||o&&p){if(o&&b&&l)e:for(var g=t.target,m=a.view;g!=c;g=g.parentNode)for(var v=0;v<m.length;v++)if(m[v].node==g){e.display.currentWheelTarget=g;break e}if(r&&!n&&!h&&null!=s)return o&&p&&hr(e,Math.max(0,c.scrollTop+o*s)),pr(e,Math.max(0,c.scrollLeft+r*s)),(!o||o&&p)&&ke(t),void(a.wheelStartX=null);if(o&&null!=s){var y=o*s,w=e.doc.scrollTop,_=w+a.wrapper.clientHeight;y<0?w=Math.max(0,w+y-50):_=Math.min(e.doc.height,_+y+50),Vr(e,{top:w,bottom:_})}Zr<20&&0!==t.deltaMode&&(null==a.wheelStartX?(a.wheelStartX=c.scrollLeft,a.wheelStartY=c.scrollTop,a.wheelDX=r,a.wheelDY=o,setTimeout((function(){if(null!=a.wheelStartX){var e=c.scrollLeft-a.wheelStartX,t=c.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(eo=(eo*Zr+n)/(Zr+1),++Zr)}}),200)):(a.wheelDX+=r,a.wheelDY+=o))}}s?eo=-.53:n?eo=15:u?eo=-.7:f&&(eo=-1/3);var ro=function(e,t){this.ranges=e,this.primIndex=t};ro.prototype.primary=function(){return this.ranges[this.primIndex]},ro.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!at(n.anchor,i.anchor)||!at(n.head,i.head))return!1}return!0},ro.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new oo(lt(this.ranges[t].anchor),lt(this.ranges[t].head));return new ro(e,this.primIndex)},ro.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},ro.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(st(t,i.from())>=0&&st(e,i.to())<=0)return n}return-1};var oo=function(e,t){this.anchor=e,this.head=t};function so(e,t,n){var i=e&&e.options.selectionsMayTouch,r=t[n];t.sort((function(e,t){return st(e.from(),t.from())})),n=z(t,r);for(var o=1;o<t.length;o++){var s=t[o],a=t[o-1],l=st(a.to(),s.from());if(i&&!s.empty()?l>0:l>=0){var c=ut(a.from(),s.from()),u=ct(a.to(),s.to()),d=a.empty()?s.from()==s.head:a.from()==a.head;o<=n&&--n,t.splice(--o,2,new oo(d?u:c,d?c:u))}}return new ro(t,n)}function ao(e,t){return new ro([new oo(e,t||e)],0)}function lo(e){return e.text?ot(e.from.line+e.text.length-1,J(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function co(e,t){if(st(e,t.from)<0)return e;if(st(e,t.to)<=0)return lo(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=lo(t).ch-t.to.ch),ot(n,i)}function uo(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new oo(co(r.anchor,t),co(r.head,t)))}return so(e.cm,n,e.sel.primIndex)}function ho(e,t,n){return e.line==t.line?ot(n.line,e.ch-t.ch+n.ch):ot(n.line+(e.line-t.line),e.ch)}function fo(e,t,n){for(var i=[],r=ot(e.first,0),o=r,s=0;s<t.length;s++){var a=t[s],l=ho(a.from,r,o),c=ho(lo(a),r,o);if(r=a.to,o=c,"around"==n){var u=e.sel.ranges[s],d=st(u.head,u.anchor)<0;i[s]=new oo(d?c:l,d?l:c)}else i[s]=new oo(l,l)}return new ro(i,e.sel.primIndex)}function po(e){e.doc.mode=We(e.options,e.doc.modeOption),go(e)}function go(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Nr(e,100),e.state.modeGen++,e.curOp&&$i(e)}function mo(e,t){return 0==t.from.ch&&0==t.to.ch&&""==J(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function vo(e,t,n,i){function r(e){return n?n[e]:null}function o(e,n,r){un(e,n,r,i),Mn(e,"change",e,t)}function s(e,t){for(var n=[],o=e;o<t;++o)n.push(new cn(c[o],r(o),i));return n}var a=t.from,l=t.to,c=t.text,u=Xe(e,a.line),d=Xe(e,l.line),h=J(c),f=r(c.length-1),p=l.line-a.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(mo(e,t)){var g=s(0,c.length-1);o(d,d.text,f),p&&e.remove(a.line,p),g.length&&e.insert(a.line,g)}else if(u==d)if(1==c.length)o(u,u.text.slice(0,a.ch)+h+u.text.slice(l.ch),f);else{var m=s(1,c.length-1);m.push(new cn(h+u.text.slice(l.ch),f,i)),o(u,u.text.slice(0,a.ch)+c[0],r(0)),e.insert(a.line+1,m)}else if(1==c.length)o(u,u.text.slice(0,a.ch)+c[0]+d.text.slice(l.ch),r(0)),e.remove(a.line+1,p);else{o(u,u.text.slice(0,a.ch)+c[0],r(0)),o(d,h+d.text.slice(l.ch),f);var v=s(1,c.length-1);p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,v)}Mn(e,"change",e,t)}function yo(e,t,n){function i(e,r,o){if(e.linked)for(var s=0;s<e.linked.length;++s){var a=e.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;n&&!l||(t(a.doc,l),i(a.doc,e,l))}}}i(e,null,!0)}function bo(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Li(e),po(e),wo(e),e.options.direction=t.direction,e.options.lineWrapping||ln(e),e.options.mode=t.modeOption,$i(e)}function wo(e){("rtl"==e.doc.direction?L:O)(e.display.lineDiv,"CodeMirror-rtl")}function _o(e){Tr(e,(function(){wo(e),$i(e)}))}function xo(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function ko(e,t){var n={from:lt(t.from),to:lo(t),text:Qe(e,t.from,t.to)};return Ro(e,n,t.from.line,t.to.line+1),yo(e,(function(e){return Ro(e,n,t.from.line,t.to.line+1)}),!0),n}function Co(e){for(;e.length&&J(e).ranges;)e.pop()}function So(e,t){return t?(Co(e.done),J(e.done)):e.done.length&&!J(e.done).ranges?J(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),J(e.done)):void 0}function Eo(e,t,n,i){var r=e.history;r.undone.length=0;var o,s,a=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&r.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=So(r,r.lastOp==i)))s=J(o.changes),0==st(t.from,t.to)&&0==st(t.from,s.to)?s.to=lo(t):o.changes.push(ko(e,t));else{var l=J(r.done);for(l&&l.ranges||Mo(e.sel,r.done),o={changes:[ko(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=a,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,s||ye(e,"historyAdded")}function Oo(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ao(e,t,n,i){var r=e.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||Oo(e,o,J(r.done),t))?r.done[r.done.length-1]=t:Mo(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&Co(r.undone)}function Mo(e,t){var n=J(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Ro(e,t,n,i){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),(function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=n.markedSpans),++o}))}function To(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Do(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],r=0;r<t.text.length;++r)i.push(To(n[r]));return i}function Io(e,t){var n=Do(e,t),i=jt(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],s=i[r];if(o&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else s&&(n[r]=s)}return n}function Lo(e,t,n){for(var i=[],r=0;r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?ro.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];i.push({changes:a});for(var l=0;l<s.length;++l){var c=s[l],u=void 0;if(a.push({from:c.from,to:c.to,text:c.text}),t)for(var d in c)(u=d.match(/^spans_(\d+)$/))&&z(t,Number(u[1]))>-1&&(J(a)[d]=c[d],delete c[d])}}}return i}function No(e,t,n,i){if(i){var r=e.anchor;if(n){var o=st(t,r)<0;o!=st(n,r)<0?(r=t,t=n):o!=st(t,n)<0&&(t=n)}return new oo(r,t)}return new oo(n||t,t)}function Fo(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),Uo(e,new ro([No(e.sel.primary(),t,n,r)],0),i)}function $o(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=No(e.sel.ranges[o],t[o],null,r);Uo(e,so(e.cm,i,e.sel.primIndex),n)}function Po(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,Uo(e,so(e.cm,r,e.sel.primIndex),i)}function jo(e,t,n,i){Uo(e,ao(t,n),i)}function Bo(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new oo(ht(e,t[n].anchor),ht(e,t[n].head))},origin:n&&n.origin};return ye(e,"beforeSelectionChange",e,i),e.cm&&ye(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?so(e.cm,i.ranges,i.ranges.length-1):t}function zo(e,t,n){var i=e.history.done,r=J(i);r&&r.ranges?(i[i.length-1]=t,Vo(e,t,n)):Uo(e,t,n)}function Uo(e,t,n){Vo(e,t,n),Ao(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Vo(e,t,n){(_e(e,"beforeSelectionChange")||e.cm&&_e(e.cm,"beforeSelectionChange"))&&(t=Bo(e,t,n));var i=n&&n.bias||(st(t.primary().head,e.sel.primary().head)<0?-1:1);Wo(e,qo(e,t,i,!0)),n&&!1===n.scroll||!e.cm||"nocursor"==e.cm.getOption("readOnly")||ar(e.cm)}function Wo(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,we(e.cm)),Mn(e,"cursorActivity",e))}function Ho(e){Wo(e,qo(e,e.sel,null,!1))}function qo(e,t,n,i){for(var r,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=Ko(e,s.anchor,a&&a.anchor,n,i),c=Ko(e,s.head,a&&a.head,n,i);(r||l!=s.anchor||c!=s.head)&&(r||(r=t.ranges.slice(0,o)),r[o]=new oo(l,c))}return r?so(e.cm,r,t.primIndex):t}function Go(e,t,n,i,r){var o=Xe(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker,c="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,u="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==a.from||(c?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(u?a.to>=t.ch:a.to>t.ch))){if(r&&(ye(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var d=l.find(i<0?1:-1),h=void 0;if((i<0?u:c)&&(d=Yo(e,d,-i,d&&d.line==t.line?o:null)),d&&d.line==t.line&&(h=st(d,n))&&(i<0?h<0:h>0))return Go(e,d,t,i,r)}var f=l.find(i<0?-1:1);return(i<0?c:u)&&(f=Yo(e,f,i,f.line==t.line?o:null)),f?Go(e,f,t,i,r):null}}return t}function Ko(e,t,n,i,r){var o=i||1,s=Go(e,t,n,o,r)||!r&&Go(e,t,n,o,!0)||Go(e,t,n,-o,r)||!r&&Go(e,t,n,-o,!0);return s||(e.cantEdit=!0,ot(e.first,0))}function Yo(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?ht(e,ot(t.line-1)):null:n>0&&t.ch==(i||Xe(e,t.line)).text.length?t.line<e.first+e.size-1?ot(t.line+1,0):null:new ot(t.line,t.ch+n)}function Jo(e){e.setSelection(ot(e.firstLine(),0),ot(e.lastLine()),W)}function Xo(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(t,n,r,o){t&&(i.from=ht(e,t)),n&&(i.to=ht(e,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),ye(e,"beforeChange",e,i),e.cm&&ye(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Qo(e,t,n){if(e.cm){if(!e.cm.curOp)return Dr(e.cm,Qo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(_e(e,"beforeChange")||e.cm&&_e(e.cm,"beforeChange"))||(t=Xo(e,t,!0))){var i=Mt&&!n&&zt(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)Zo(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text,origin:t.origin});else Zo(e,t)}}function Zo(e,t){if(1!=t.text.length||""!=t.text[0]||0!=st(t.from,t.to)){var n=uo(e,t);Eo(e,t,n,e.cm?e.cm.curOp.id:NaN),ns(e,t,n,jt(e,t));var i=[];yo(e,(function(e,n){n||-1!=z(i,e.history)||(as(e.history,t),i.push(e.history)),ns(e,t,null,jt(e,t))}))}}function es(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var r,o=e.history,s=e.sel,a="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,c=0;c<a.length&&(r=a[c],n?!r.ranges||r.equals(e.sel):r.ranges);c++);if(c!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=a.pop()).ranges){if(i)return void a.push(r);break}if(Mo(r,l),n&&!r.equals(e.sel))return void Uo(e,r,{clearRedo:!1});s=r}var u=[];Mo(s,l),l.push({changes:u,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var d=_e(e,"beforeChange")||e.cm&&_e(e.cm,"beforeChange"),h=function(n){var i=r.changes[n];if(i.origin=t,d&&!Xo(e,i,!1))return a.length=0,{};u.push(ko(e,i));var o=n?uo(e,i):J(a);ns(e,i,o,Io(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:lo(i)});var s=[];yo(e,(function(e,t){t||-1!=z(s,e.history)||(as(e.history,i),s.push(e.history)),ns(e,i,null,Io(e,i))}))},f=r.changes.length-1;f>=0;--f){var p=h(f);if(p)return p.v}}}}function ts(e,t){if(0!=t&&(e.first+=t,e.sel=new ro(X(e.sel.ranges,(function(e){return new oo(ot(e.anchor.line+t,e.anchor.ch),ot(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){$i(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)Pi(e.cm,i,"gutter")}}function ns(e,t,n,i){if(e.cm&&!e.cm.curOp)return Dr(e.cm,ns)(e,t,n,i);if(t.to.line<e.first)ts(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);ts(e,r),t={from:ot(e.first,0),to:ot(t.to.line+r,t.to.ch),text:[J(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ot(o,Xe(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Qe(e,t.from,t.to),n||(n=uo(e,t)),e.cm?is(e.cm,t,i):vo(e,t,i),Vo(e,n,W),e.cantEdit&&Ko(e,ot(e.firstLine(),0))&&(e.cantEdit=!1)}}function is(e,t,n){var i=e.doc,r=e.display,o=t.from,s=t.to,a=!1,l=o.line;e.options.lineWrapping||(l=tt(Qt(Xe(i,o.line))),i.iter(l,s.line+1,(function(e){if(e==r.maxLine)return a=!0,!0}))),i.sel.contains(t.from,t.to)>-1&&we(e),vo(i,t,n,Ii(e)),e.options.lineWrapping||(i.iter(l,o.line+t.text.length,(function(e){var t=an(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,a=!1)})),a&&(e.curOp.updateMaxLine=!0)),At(i,o.line),Nr(e,400);var c=t.text.length-(s.line-o.line)-1;t.full?$i(e):o.line!=s.line||1!=t.text.length||mo(e.doc,t)?$i(e,o.line,s.line+1,c):Pi(e,o.line,"text");var u=_e(e,"changes"),d=_e(e,"change");if(d||u){var h={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&Mn(e,"change",e,h),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function rs(e,t,n,i,r){var o;i||(i=n),st(i,n)<0&&(n=(o=[i,n])[0],i=o[1]),"string"==typeof t&&(t=e.splitLines(t)),Qo(e,{from:n,to:i,text:t,origin:r})}function os(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function ss(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],s=!0;if(o.ranges){o.copied||((o=e[r]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)os(o.ranges[a].anchor,t,n,i),os(o.ranges[a].head,t,n,i)}else{for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(n<c.from.line)c.from=ot(c.from.line+i,c.from.ch),c.to=ot(c.to.line+i,c.to.ch);else if(t<=c.to.line){s=!1;break}}s||(e.splice(0,r+1),r=0)}}}function as(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;ss(e.done,n,i,r),ss(e.undone,n,i,r)}function ls(e,t,n,i){var r=t,o=t;return"number"==typeof t?o=Xe(e,dt(e,t)):r=tt(t),null==r?null:(i(o,r)&&e.cm&&Pi(e.cm,r,n),o)}function cs(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function us(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}oo.prototype.from=function(){return ut(this.anchor,this.head)},oo.prototype.to=function(){return ct(this.anchor,this.head)},oo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},cs.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height,dn(r),Mn(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},us.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var o=Math.min(t,r-e),s=i.height;if(i.removeInner(e,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof cs))){var a=[];this.collapse(a),this.children=[new cs(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(var s=r.lines.length%25+25,a=s;a<r.lines.length;){var l=new cs(r.lines.slice(a,a+=25));r.height-=l.height,this.children.splice(++i,0,l),l.parent=this}r.lines=r.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new us(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=z(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new us(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){var s=Math.min(t,o-e);if(r.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var ds=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function hs(e,t,n){sn(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&sr(e,n)}function fs(e,t,n,i){var r=new ds(e,n,i),o=e.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),ls(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length,Math.max(0,r.insertAt)),0,r),r.line=t,o&&!rn(e,t)){var i=sn(t)<e.scrollTop;et(t,t.height+Vn(r)),i&&sr(o,r.height),o.curOp.forceUpdate=!0}return!0})),o&&Mn(o,"lineWidgetAdded",o,r,"number"==typeof t?t:tt(t)),r}ds.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=tt(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var o=Vn(this);et(n,Math.max(0,n.height-o)),e&&(Tr(e,(function(){hs(e,n,-o),Pi(e,i,"widget")})),Mn(e,"lineWidgetCleared",e,this,i))}},ds.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=Vn(this)-t;r&&(rn(this.doc,i)||et(i,i.height+r),n&&Tr(n,(function(){n.curOp.forceUpdate=!0,hs(n,i,r),Mn(n,"lineWidgetChanged",n,e,tt(i))})))},xe(ds);var ps=0,gs=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ps};function ms(e,t,n,i,r){if(i&&i.shared)return ys(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return Dr(e.cm,ms)(e,t,n,i,r);var o=new gs(e,r),s=st(t,n);if(i&&P(i,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=T("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Xt(e,t.line,t,n,o)||t.line!=n.line&&Xt(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Dt()}o.addToHistory&&Eo(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,n.line+1,(function(i){c&&o.collapsed&&!c.options.lineWrapping&&Qt(i)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&et(i,0),Ft(i,new It(o,l==t.line?t.ch:null,l==n.line?n.ch:null),e.cm&&e.cm.curOp),++l})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){rn(e,t)&&et(t,0)})),o.clearOnEnter&&ge(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(Tt(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ps,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)$i(c,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var u=t.line;u<=n.line;u++)Pi(c,u,"text");o.atomic&&Ho(c.doc),Mn(c,"markerAdded",c,o)}return o}gs.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&kr(e),_e(this,"clear")){var n=this.find();n&&Mn(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Lt(s.markedSpans,this);e&&!this.collapsed?Pi(e,tt(s),"text"):e&&(null!=a.to&&(r=tt(s)),null!=a.from&&(i=tt(s))),s.markedSpans=Nt(s.markedSpans,a),null==a.from&&this.collapsed&&!rn(this.doc,s)&&e&&et(s,Mi(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=Qt(this.lines[l]),u=an(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&$i(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ho(e.doc)),e&&Mn(e,"markerCleared",e,this,i,r),t&&Cr(e),this.parent&&this.parent.clear()}},gs.prototype.find=function(e,t){var n,i;null==e&&"bookmark"==this.type&&(e=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],s=Lt(o.markedSpans,this);if(null!=s.from&&(n=ot(t?o:tt(o),s.from),-1==e))return n;if(null!=s.to&&(i=ot(t?o:tt(o),s.to),1==e))return i}return n&&{from:n,to:i}},gs.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&Tr(i,(function(){var r=t.line,o=tt(t.line),s=ti(i,o);if(s&&(ui(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!rn(n.doc,r)&&null!=n.height){var a=n.height;n.height=null;var l=Vn(n)-a;l&&et(r,r.height+l)}Mn(i,"markerChanged",i,e)}))},gs.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=z(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},gs.prototype.detachLine=function(e){if(this.lines.splice(z(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},xe(gs);var vs=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function ys(e,t,n,i,r){(i=P(i)).shared=!1;var o=[ms(e,t,n,i,r)],s=o[0],a=i.widgetNode;return yo(e,(function(e){a&&(i.widgetNode=a.cloneNode(!0)),o.push(ms(e,ht(e,t),ht(e,n),i,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=J(o)})),new vs(o,s)}function bs(e){return e.findMarks(ot(e.first,0),e.clipPos(ot(e.lastLine())),(function(e){return e.parent}))}function ws(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),o=e.clipPos(r.from),s=e.clipPos(r.to);if(st(o,s)){var a=ms(e,o,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}function _s(e){for(var t=function(t){var n=e[t],i=[n.primary.doc];yo(n.primary.doc,(function(e){return i.push(e)}));for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==z(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<e.length;n++)t(n)}vs.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Mn(this,"clear")}},vs.prototype.find=function(e,t){return this.primary.find(e,t)},xe(vs);var xs=0,ks=function e(t,n,i,r,o){if(!(this instanceof e))return new e(t,n,i,r,o);null==i&&(i=0),us.call(this,[new cs([new cn("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var s=ot(i,0);this.sel=ao(s),this.history=new xo(null),this.id=++xs,this.modeOption=n,this.lineSep=r,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),vo(this,{from:s,to:s,text:t}),Uo(this,ao(s),W)};ks.prototype=ee(us.prototype,{constructor:ks,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ze(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Lr((function(e){var t=ot(this.first,0),n=this.first+this.size-1;Qo(this,{from:t,to:ot(n,Xe(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&lr(this.cm,0,0),Uo(this,ao(t),W)})),replaceRange:function(e,t,n,i){rs(this,e,t=ht(this,t),n=n?ht(this,n):t,i)},getRange:function(e,t,n){var i=Qe(this,ht(this,e),ht(this,t));return!1===n?i:""===n?i.join(""):i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(it(this,e))return Xe(this,e)},getLineNumber:function(e){return tt(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Xe(this,e)),Qt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ht(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Lr((function(e,t,n){jo(this,ht(this,"number"==typeof e?ot(e,t||0):e),null,n)})),setSelection:Lr((function(e,t,n){jo(this,ht(this,e),ht(this,t||e),n)})),extendSelection:Lr((function(e,t,n){Fo(this,ht(this,e),t&&ht(this,t),n)})),extendSelections:Lr((function(e,t){$o(this,pt(this,e),t)})),extendSelectionsBy:Lr((function(e,t){$o(this,pt(this,X(this.sel.ranges,e)),t)})),setSelections:Lr((function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new oo(ht(this,e[r].anchor),ht(this,e[r].head||e[r].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Uo(this,so(this.cm,i,t),n)}})),addSelection:Lr((function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new oo(ht(this,e),ht(this,t||e))),Uo(this,so(this.cm,i,i.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=Qe(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Qe(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:Lr((function(e,t,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];i[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&fo(this,i,t),l=i.length-1;l>=0;l--)Qo(this,i[l]);a?zo(this,a):this.cm&&ar(this.cm)})),undo:Lr((function(){es(this,"undo")})),redo:Lr((function(){es(this,"redo")})),undoSelection:Lr((function(){es(this,"undo",!0)})),redoSelection:Lr((function(){es(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new xo(this.history),yo(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Lo(this.history.done),undone:Lo(this.history.undone)}},setHistory:function(e){var t=this.history=new xo(this.history);t.done=Lo(e.done.slice(0),null,!0),t.undone=Lo(e.undone.slice(0),null,!0)},setGutterMarker:Lr((function(e,t,n){return ls(this,e,"gutter",(function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&re(i)&&(e.gutterMarkers=null),!0}))})),clearGutter:Lr((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&ls(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,re(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!it(this,e))return null;if(t=e,!(e=Xe(this,e)))return null}else if(null==(t=tt(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Lr((function(e,t,n){return ls(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(S(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0}))})),removeLineClass:Lr((function(e,t,n){return ls(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var o=r.match(S(n));if(!o)return!1;var s=o.index+o[0].length;e[i]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0}))})),addLineWidget:Lr((function(e,t,n){return fs(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return ms(this,ht(this,e),ht(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return ms(this,e=ht(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Xe(this,(e=ht(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=ht(this,e),t=ht(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,(function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&r==e.line&&e.ch>=l.to||null==l.from&&r!=e.line||null!=l.from&&r==t.line&&l.from>=t.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r})),i},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)})),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var o=r.text.length+i;if(o>e)return t=e,!0;e-=o,++n})),ht(this,ot(n,t))},indexFromPos:function(e){var t=(e=ht(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new ks(Ze(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new ks(Ze(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],ws(i,bs(this)),i},unlinkDoc:function(e){if(e instanceof $a&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),_s(bs(this));break}if(e.history==this.history){var n=[e.id];yo(e,(function(e){return n.push(e.id)}),!0),e.history=new xo(null),e.history.done=Lo(this.history.done,n),e.history.undone=Lo(this.history.undone,n)}},iterLinkedDocs:function(e){yo(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Le(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Lr((function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&_o(this.cm))}))}),ks.prototype.eachLine=ks.prototype.iter;var Cs=0;function Ss(e){var t=this;if(As(t),!be(t,e)&&!Wn(t.display,e)){ke(e),s&&(Cs=+new Date);var n=Ni(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),a=0,l=function(){++a==r&&Dr(t,(function(){var e={from:n=ht(t.doc,n),to:n,text:t.doc.splitLines(o.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};Qo(t.doc,e),zo(t.doc,ao(ht(t.doc,n),ht(t.doc,lo(e))))}))()},c=function(e,n){if(t.options.allowDropFileTypes&&-1==z(t.options.allowDropFileTypes,e.type))l();else{var i=new FileReader;i.onerror=function(){return l()},i.onload=function(){var e=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(o[n]=e),l()},i.readAsText(e)}},u=0;u<i.length;u++)c(i[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var d=e.dataTransfer.getData("Text");if(d){var h;if(t.state.draggingText&&!t.state.draggingText.copy&&(h=t.listSelections()),Vo(t.doc,ao(n,n)),h)for(var f=0;f<h.length;++f)rs(t.doc,"",h[f].anchor,h[f].head,"drag");t.replaceSelection(d,"around","paste"),t.display.input.focus()}}catch(p){}}}}function Es(e,t){if(s&&(!e.state.draggingText||+new Date-Cs<100))Ee(t);else if(!be(e,t)&&!Wn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!f)){var n=R("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),h&&n.parentNode.removeChild(n)}}function Os(e,t){var n=Ni(e,t);if(n){var i=document.createDocumentFragment();Hi(e,n,i),e.display.dragCursor||(e.display.dragCursor=R("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),M(e.display.dragCursor,i)}}function As(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ms(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var Rs=!1;function Ts(){Rs||(Ds(),Rs=!0)}function Ds(){var e;ge(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Ms(Is)}),100))})),ge(window,"blur",(function(){return Ms(Qi)}))}function Is(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ls={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ns=0;Ns<10;Ns++)Ls[Ns+48]=Ls[Ns+96]=String(Ns);for(var Fs=65;Fs<=90;Fs++)Ls[Fs]=String.fromCharCode(Fs);for(var $s=1;$s<=12;$s++)Ls[$s+111]=Ls[$s+63235]="F"+$s;var Ps={};function js(e){var t,n,i,r,o=e.split(/-(?!$)/);e=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Bs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=X(n.split(" "),js),o=0;o<r.length;o++){var s=void 0,a=void 0;o==r.length-1?(a=r.join(" "),s=i):(a=r.slice(0,o+1).join(" "),s="...");var l=t[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[n]}for(var c in t)e[c]=t[c];return e}function zs(e,t,n,i){var r=(t=Hs(t)).call?t.call(e,i):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return zs(e,t.fallthrough,n,i);for(var o=0;o<t.fallthrough.length;o++){var s=zs(e,t.fallthrough[o],n,i);if(s)return s}}}function Us(e){var t="string"==typeof e?e:Ls[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Vs(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(k?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(k?t.ctrlKey:t.metaKey)&&"Mod"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function Ws(e,t){if(h&&34==e.keyCode&&e.char)return!1;var n=Ls[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Vs(n,e,t))}function Hs(e){return"string"==typeof e?Ps[e]:e}function qs(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=t(n[r]);i.length&&st(o.from,J(i).to)<=0;){var s=i.pop();if(st(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}Tr(e,(function(){for(var t=i.length-1;t>=0;t--)rs(e.doc,"",i[t].from,i[t].to,"+delete");ar(e)}))}function Gs(e,t,n){var i=ae(e.text,t+n,n);return i<0||i>e.text.length?null:i}function Ks(e,t,n){var i=Gs(e,t.ch,n);return null==i?null:new ot(t.line,i,n<0?"after":"before")}function Ys(e,t,n,i,r){if(e){"rtl"==t.doc.direction&&(r=-r);var o=fe(n,t.doc.direction);if(o){var s,a=r<0?J(o):o[0],l=r<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==t.doc.direction){var c=ni(t,n);s=r<0?n.text.length-1:0;var u=ii(t,c,s).top;s=le((function(e){return ii(t,c,e).top==u}),r<0==(1==a.level)?a.from:a.to-1,s),"before"==l&&(s=Gs(n,s,1))}else s=r<0?a.to:a.from;return new ot(i,s,l)}}return new ot(i,r<0?n.text.length:0,r<0?"before":"after")}function Js(e,t,n,i){var r=fe(t,e.doc.direction);if(!r)return Ks(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=de(r,n.ch,n.sticky),s=r[o];if("ltr"==e.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return Ks(t,n,i);var a,l=function(e,n){return Gs(t,e instanceof ot?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(a=a||ni(e,t),Ci(e,t,a,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var d=1==s.level==i<0,h=l(n,d?1:-1);if(null!=h&&(d?h<=s.to&&h<=u.end:h>=s.from&&h>=u.begin)){var f=d?"before":"after";return new ot(n.line,h,f)}}var p=function(e,t,i){for(var o=function(e,t){return t?new ot(n.line,l(e,1),"before"):new ot(n.line,e,"after")};e>=0&&e<r.length;e+=t){var s=r[e],a=t>0==(1!=s.level),c=a?i.begin:l(i.end,-1);if(s.from<=c&&c<s.to)return o(c,a);if(c=a?s.from:l(s.to,-1),i.begin<=c&&c<i.end)return o(c,a)}},g=p(o+i,i,u);if(g)return g;var m=i>0?u.end:l(u.begin,-1);return null==m||i>0&&m==t.text.length||!(g=p(i>0?0:r.length-1,i,c(m)))?null:g}Ps.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ps.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ps.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ps.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ps.default=b?Ps.macDefault:Ps.pcDefault;var Xs={selectAll:Jo,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),W)},killLine:function(e){return qs(e,(function(t){if(t.empty()){var n=Xe(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:ot(t.head.line+1,0)}:{from:t.head,to:ot(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return qs(e,(function(t){return{from:ot(t.from().line,0),to:ht(e.doc,ot(t.to().line+1,0))}}))},delLineLeft:function(e){return qs(e,(function(e){return{from:ot(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return qs(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return qs(e,(function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ot(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ot(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return Qs(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return ea(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return Zs(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),q)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),q)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?ea(e,t.head):i}),q)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),s=j(e.getLine(o.line),o.ch,i);t.push(Y(i-s%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Tr(e,(function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var r=t[i].head,o=Xe(e.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new ot(r.line,r.ch-1)),r.ch>0)r=new ot(r.line,r.ch+1),e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),ot(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var s=Xe(e.doc,r.line-1).text;s&&(r=new ot(r.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),ot(r.line-1,s.length-1),r,"+transpose"))}n.push(new oo(r,r))}e.setSelections(n)}))},newlineAndIndent:function(e){return Tr(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);ar(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Qs(e,t){var n=Xe(e.doc,t),i=Qt(n);return i!=n&&(t=tt(i)),Ys(!0,e,i,t,1)}function Zs(e,t){var n=Xe(e.doc,t),i=Zt(n);return i!=n&&(t=tt(i)),Ys(!0,e,n,t,-1)}function ea(e,t){var n=Qs(e,t.line),i=Xe(e.doc,n.line),r=fe(i,e.doc.direction);if(!r||0==r[0].level){var o=Math.max(n.ch,i.text.search(/\S/)),s=t.line==n.line&&t.ch<=o&&t.ch;return ot(n.line,s?0:o,n.sticky)}return n}function ta(e,t,n){if("string"==typeof t&&!(t=Xs[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=V}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}function na(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=zs(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&zs(t,e.options.extraKeys,n,e)||zs(t,e.options.keyMap,n,e)}var ia=new B;function ra(e,t,n,i){var r=e.state.keySeq;if(r){if(Us(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ia.set(50,(function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())})),oa(e,r+" "+t,n,i))return!0}return oa(e,t,n,i)}function oa(e,t,n,i){var r=na(e,t,i);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&Mn(e,"keyHandled",e,t,n),"handled"!=r&&"multi"!=r||(ke(n),Ki(e)),!!r}function sa(e,t){var n=Ws(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?ra(e,"Shift-"+n,t,(function(t){return ta(e,t,!0)}))||ra(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ta(e,t)})):ra(e,n,t,(function(t){return ta(e,t)})))}function aa(e,t,n){return ra(e,"'"+n+"'",t,(function(t){return ta(e,t,!0)}))}var la=null;function ca(e){var t=this;if((!e.target||e.target==t.display.input.getField())&&(t.curOp.focus=I(),!be(t,e))){s&&a<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var r=sa(t,e);h&&(la=r?i:null,r||88!=i||Fe||!(b?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),n&&!b&&!r&&46==i&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||ua(t)}}function ua(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(O(t,"CodeMirror-crosshair"),ve(document,"keyup",n),ve(document,"mouseover",n))}L(t,"CodeMirror-crosshair"),ge(document,"keyup",n),ge(document,"mouseover",n)}function da(e){16==e.keyCode&&(this.doc.sel.shift=!1),be(this,e)}function ha(e){var t=this;if((!e.target||e.target==t.display.input.getField())&&!(Wn(t.display,e)||be(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(h&&n==la)return la=null,void ke(e);if(!h||e.which&&!(e.which<10)||!sa(t,e)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(aa(t,e,r)||t.display.input.onKeyPress(e))}}}var fa,pa,ga=400,ma=function(e,t,n){this.time=e,this.pos=t,this.button=n};function va(e,t){var n=+new Date;return pa&&pa.compare(n,e,t)?(fa=pa=null,"triple"):fa&&fa.compare(n,e,t)?(pa=new ma(n,e,t),fa=null,"double"):(fa=new ma(n,e,t),pa=null,"single")}function ya(e){var t=this,n=t.display;if(!(be(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,Wn(n,e))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!Oa(t,e)){var i=Ni(t,e),r=Ae(e),o=i?va(i,r):"single";window.focus(),1==r&&t.state.selectingText&&t.state.selectingText(e),i&&ba(t,r,i,o,e)||(1==r?i?_a(t,i,o,e):Oe(e)==n.scroller&&ke(e):2==r?(i&&Fo(t.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(C?t.display.input.onContextMenu(e):Ji(t)))}}function ba(e,t,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),ra(e,Vs(o=(1==t?"Left":2==t?"Middle":"Right")+o,r),r,(function(t){if("string"==typeof t&&(t=Xs[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,n)!=V}finally{e.state.suppressEdits=!1}return i}))}function wa(e,t,n){var i=e.getOption("configureMouse"),r=i?i(e,t,n):{};if(null==r.unit){var o=w?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=b?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(b?n.altKey:n.ctrlKey)),r}function _a(e,t,n,i){s?setTimeout($(Yi,e),0):e.curOp.focus=I();var r,o=wa(e,n,i),a=e.doc.sel;e.options.dragDrop&&Te&&!e.isReadOnly()&&"single"==n&&(r=a.contains(t))>-1&&(st((r=a.ranges[r]).from(),t)<0||t.xRel>0)&&(st(r.to(),t)>0||t.xRel<0)?xa(e,i,t,o):Ca(e,i,t,o)}function xa(e,t,n,i){var r=e.display,o=!1,c=Dr(e,(function(t){l&&(r.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Ji(e)),ve(r.wrapper.ownerDocument,"mouseup",c),ve(r.wrapper.ownerDocument,"mousemove",u),ve(r.scroller,"dragstart",d),ve(r.scroller,"drop",c),o||(ke(t),i.addNew||Fo(e.doc,n,null,null,i.extend),l&&!f||s&&9==a?setTimeout((function(){r.wrapper.ownerDocument.body.focus({preventScroll:!0}),r.input.focus()}),20):r.input.focus())})),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return o=!0};l&&(r.scroller.draggable=!0),e.state.draggingText=c,c.copy=!i.moveOnDrag,ge(r.wrapper.ownerDocument,"mouseup",c),ge(r.wrapper.ownerDocument,"mousemove",u),ge(r.scroller,"dragstart",d),ge(r.scroller,"drop",c),e.state.delayingBlurEvent=!0,setTimeout((function(){return r.input.focus()}),20),r.scroller.dragDrop&&r.scroller.dragDrop()}function ka(e,t,n){if("char"==n)return new oo(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new oo(ot(t.line,0),ht(e.doc,ot(t.line+1,0)));var i=n(e,t);return new oo(i.from,i.to)}function Ca(e,t,n,i){s&&Ji(e);var r=e.display,o=e.doc;ke(t);var a,l,c=o.sel,u=c.ranges;if(i.addNew&&!i.extend?(l=o.sel.contains(n),a=l>-1?u[l]:new oo(n,n)):(a=o.sel.primary(),l=o.sel.primIndex),"rectangle"==i.unit)i.addNew||(a=new oo(n,n)),n=Ni(e,t,!0,!0),l=-1;else{var d=ka(e,n,i.unit);a=i.extend?No(a,d.anchor,d.head,i.extend):d}i.addNew?-1==l?(l=u.length,Uo(o,so(e,u.concat([a]),l),{scroll:!1,origin:"*mouse"})):u.length>1&&u[l].empty()&&"char"==i.unit&&!i.extend?(Uo(o,so(e,u.slice(0,l).concat(u.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),c=o.sel):Po(o,l,a,H):(l=0,Uo(o,new ro([a],0),H),c=o.sel);var h=n;function f(t){if(0!=st(h,t))if(h=t,"rectangle"==i.unit){for(var r=[],s=e.options.tabSize,u=j(Xe(o,n.line).text,n.ch,s),d=j(Xe(o,t.line).text,t.ch,s),f=Math.min(u,d),p=Math.max(u,d),g=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));g<=m;g++){var v=Xe(o,g).text,y=G(v,f,s);f==p?r.push(new oo(ot(g,y),ot(g,y))):v.length>y&&r.push(new oo(ot(g,y),ot(g,G(v,p,s))))}r.length||r.push(new oo(n,n)),Uo(o,so(e,c.ranges.slice(0,l).concat(r),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,w=a,_=ka(e,t,i.unit),x=w.anchor;st(_.anchor,x)>0?(b=_.head,x=ut(w.from(),_.anchor)):(b=_.anchor,x=ct(w.to(),_.head));var k=c.ranges.slice(0);k[l]=Sa(e,new oo(ht(o,x),b)),Uo(o,so(e,k,l),H)}}var p=r.wrapper.getBoundingClientRect(),g=0;function m(t){var n=++g,s=Ni(e,t,!0,"rectangle"==i.unit);if(s)if(0!=st(s,h)){e.curOp.focus=I(),f(s);var a=tr(r,o);(s.line>=a.to||s.line<a.from)&&setTimeout(Dr(e,(function(){g==n&&m(t)})),150)}else{var l=t.clientY<p.top?-20:t.clientY>p.bottom?20:0;l&&setTimeout(Dr(e,(function(){g==n&&(r.scroller.scrollTop+=l,m(t))})),50)}}function v(t){e.state.selectingText=!1,g=1/0,t&&(ke(t),r.input.focus()),ve(r.wrapper.ownerDocument,"mousemove",y),ve(r.wrapper.ownerDocument,"mouseup",b),o.history.lastSelOrigin=null}var y=Dr(e,(function(e){0!==e.buttons&&Ae(e)?m(e):v(e)})),b=Dr(e,v);e.state.selectingText=b,ge(r.wrapper.ownerDocument,"mousemove",y),ge(r.wrapper.ownerDocument,"mouseup",b)}function Sa(e,t){var n=t.anchor,i=t.head,r=Xe(e.doc,n.line);if(0==st(n,i)&&n.sticky==i.sticky)return t;var o=fe(r);if(!o)return t;var s=de(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return t;var l,c=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==c||c==o.length)return t;if(i.line!=n.line)l=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=de(o,i.ch,i.sticky),d=u-s||(i.ch-n.ch)*(1==a.level?-1:1);l=u==c-1||u==c?d<0:d>0}var h=o[c+(l?-1:0)],f=l==(1==h.level),p=f?h.from:h.to,g=f?"after":"before";return n.ch==p&&n.sticky==g?t:new oo(new ot(n.line,p,g),i)}function Ea(e,t,n,i){var r,o;if(t.touches)r=t.touches[0].clientX,o=t.touches[0].clientY;else try{r=t.clientX,o=t.clientY}catch(u){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&ke(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!_e(e,n))return Se(t);o-=a.top-s.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=r)return ye(e,n,e,nt(e.doc,o),e.display.gutterSpecs[l].className,t),Se(t)}}function Oa(e,t){return Ea(e,t,"gutterClick",!0)}function Aa(e,t){Wn(e.display,t)||Ma(e,t)||be(e,t,"contextmenu")||C||e.display.input.onContextMenu(t)}function Ma(e,t){return!!_e(e,"gutterContextMenu")&&Ea(e,t,"gutterContextMenu",!1)}function Ra(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),hi(e)}ma.prototype.compare=function(e,t,n){return this.time+ga>e&&0==st(t,this.pos)&&n==this.button};var Ta={toString:function(){return"CodeMirror.Init"}},Da={},Ia={};function La(e){var t=e.optionHandlers;function n(n,i,r,o){e.defaults[n]=i,r&&(t[n]=o?function(e,t,n){n!=Ta&&r(e,t,n)}:r)}e.defineOption=n,e.Init=Ta,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,po(e)}),!0),n("indentUnit",2,po,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){go(e),hi(e),$i(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter((function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length,n.push(ot(i,o))}i++}));for(var r=n.length-1;r>=0;r--)rs(e.doc,t,n[r],ot(n[r].line,n[r].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=Ta&&e.refresh()})),n("specialCharPlaceholder",mn,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",y?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!_),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){Ra(e),Xr(e)}),!0),n("keyMap","default",(function(e,t,n){var i=Hs(t),r=n!=Ta&&Hs(n);r&&r.detach&&r.detach(e,i),i.attach&&i.attach(e,r||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Fa,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=Yr(t,e.options.lineNumbers),Xr(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?Di(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return yr(e)}),!0),n("scrollbarStyle","native",(function(e){_r(e),yr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=Yr(e.options.gutters,t),Xr(e)}),!0),n("firstLineNumber",1,Xr,!0),n("lineNumberFormatter",(function(e){return e}),Xr,!0),n("showCursorWhenSelecting",!1,Vi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(Qi(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("screenReaderLabel",null,(function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,Na),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,Vi,!0),n("singleCursorHeightPerLine",!0,Vi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,go,!0),n("addModeClass",!1,go,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,go,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}function Na(e,t,n){if(!t!=!(n&&n!=Ta)){var i=e.display.dragFunctions,r=t?ge:ve;r(e.display.scroller,"dragstart",i.start),r(e.display.scroller,"dragenter",i.enter),r(e.display.scroller,"dragover",i.over),r(e.display.scroller,"dragleave",i.leave),r(e.display.scroller,"drop",i.drop)}}function Fa(e){e.options.lineWrapping?(L(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(O(e.display.wrapper,"CodeMirror-wrap"),ln(e)),Li(e),$i(e),hi(e),setTimeout((function(){return yr(e)}),100)}function $a(e,t){var n=this;if(!(this instanceof $a))return new $a(e,t);this.options=t=t?P(t):{},P(Da,t,!1);var i=t.value;"string"==typeof i?i=new ks(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var r=new $a.inputStyles[t.inputStyle](this),o=this.display=new Qr(e,i,r,t);for(var c in o.wrapper.CodeMirror=this,Ra(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),_r(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new B,keySeq:null,specialChars:null},t.autofocus&&!y&&o.input.focus(),s&&a<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),Pa(this),Ts(),kr(this),this.curOp.forceUpdate=!0,bo(this,i),t.autofocus&&!y||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&Xi(n)}),20):Qi(this),Ia)Ia.hasOwnProperty(c)&&Ia[c](this,t[c],Ta);Kr(this),t.finishInit&&t.finishInit(this);for(var u=0;u<ja.length;++u)ja[u](this);Cr(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function Pa(e){var t=e.display;ge(t.scroller,"mousedown",Dr(e,ya)),ge(t.scroller,"dblclick",s&&a<11?Dr(e,(function(t){if(!be(e,t)){var n=Ni(e,t);if(n&&!Oa(e,t)&&!Wn(e.display,t)){ke(t);var i=e.findWordAt(n);Fo(e.doc,i.anchor,i.head)}}})):function(t){return be(e,t)||ke(t)}),ge(t.scroller,"contextmenu",(function(t){return Aa(e,t)})),ge(t.input.getField(),"contextmenu",(function(n){t.scroller.contains(n.target)||Aa(e,n)}));var n,i={end:0};function r(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(i=t.activeTouch).end=+new Date)}function o(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function l(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}ge(t.scroller,"touchstart",(function(r){if(!be(e,r)&&!o(r)&&!Oa(e,r)){t.input.ensurePolled(),clearTimeout(n);var s=+new Date;t.activeTouch={start:s,moved:!1,prev:s-i.end<=300?i:null},1==r.touches.length&&(t.activeTouch.left=r.touches[0].pageX,t.activeTouch.top=r.touches[0].pageY)}})),ge(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),ge(t.scroller,"touchend",(function(n){var i=t.activeTouch;if(i&&!Wn(t,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var o,s=e.coordsChar(t.activeTouch,"page");o=!i.prev||l(i,i.prev)?new oo(s,s):!i.prev.prev||l(i,i.prev.prev)?e.findWordAt(s):new oo(ot(s.line,0),ht(e.doc,ot(s.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),ke(n)}r()})),ge(t.scroller,"touchcancel",r),ge(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(hr(e,t.scroller.scrollTop),pr(e,t.scroller.scrollLeft,!0),ye(e,"scroll",e))})),ge(t.scroller,"mousewheel",(function(t){return io(e,t)})),ge(t.scroller,"DOMMouseScroll",(function(t){return io(e,t)})),ge(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){be(e,t)||Ee(t)},over:function(t){be(e,t)||(Os(e,t),Ee(t))},start:function(t){return Es(e,t)},drop:Dr(e,Ss),leave:function(t){be(e,t)||As(e)}};var c=t.input.getField();ge(c,"keyup",(function(t){return da.call(e,t)})),ge(c,"keydown",Dr(e,ca)),ge(c,"keypress",Dr(e,ha)),ge(c,"focus",(function(t){return Xi(e,t)})),ge(c,"blur",(function(t){return Qi(e,t)}))}$a.defaults=Da,$a.optionHandlers=Ia;var ja=[];function Ba(e,t,n,i){var r,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=bt(e,t).state:n="prev");var s=e.options.tabSize,a=Xe(o,t),l=j(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&((c=o.mode.indent(r,a.text.slice(u.length),a.text))==V||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?j(Xe(o,t-1).text,null,s):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",h=0;if(e.options.indentWithTabs)for(var f=Math.floor(c/s);f;--f)h+=s,d+="\t";if(h<c&&(d+=Y(c-h)),d!=u)return rs(o,d,ot(t,0),ot(t,u.length),"+input"),a.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==t&&g.head.ch<u.length){var m=ot(t,u.length);Po(o,p,new oo(m,m));break}}}$a.defineInitHook=function(e){return ja.push(e)};var za=null;function Ua(e){za=e}function Va(e,t,n,i,r){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var s=+new Date-200,a="paste"==r||e.state.pasteIncoming>s,l=Le(t),c=null;if(a&&i.ranges.length>1)if(za&&za.text.join("\n")==t){if(i.ranges.length%za.text.length==0){c=[];for(var u=0;u<za.text.length;u++)c.push(o.splitLines(za.text[u]))}}else l.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(c=X(l,(function(e){return[e]})));for(var d=e.curOp.updateInput,h=i.ranges.length-1;h>=0;h--){var f=i.ranges[h],p=f.from(),g=f.to();f.empty()&&(n&&n>0?p=ot(p.line,p.ch-n):e.state.overwrite&&!a?g=ot(g.line,Math.min(Xe(o,g.line).text.length,g.ch+J(l).length)):a&&za&&za.lineWise&&za.text.join("\n")==l.join("\n")&&(p=g=ot(p.line,0)));var m={from:p,to:g,text:c?c[h%c.length]:l,origin:r||(a?"paste":e.state.cutIncoming>s?"cut":"+input")};Qo(e.doc,m),Mn(e,"inputRead",e,m)}t&&!a&&Ha(e,t),ar(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Wa(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||!t.hasFocus()||Tr(t,(function(){return Va(t,n,0,null,"paste")})),!0}function Ha(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=e.getModeAt(r.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=Ba(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Xe(e.doc,r.head.line).text.slice(0,r.head.ch))&&(s=Ba(e,r.head.line,"smart"));s&&Mn(e,"electricInput",e,r.head.line)}}}function qa(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,o={anchor:ot(r,0),head:ot(r+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Ga(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function Ka(){var e=R("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=R("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Ga(e),t}function Ya(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];i[e]==n&&"mode"!=e||(i[e]=n,t.hasOwnProperty(e)&&Dr(this,t[e])(this,n,r),ye(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Hs(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Ir((function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");Q(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,$i(this)})),removeOverlay:Ir((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void $i(this)}})),indentLine:Ir((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),it(this.doc,e)&&Ba(this,e,t,n)})),indentSelection:Ir((function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(Ba(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&ar(this));else{var o=r.from(),s=r.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<n;++l)Ba(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[i].from().ch>0&&Po(this.doc,i,new oo(o,c[i].to()),W)}}})),getTokenAt:function(e,t){return Ct(this,e,t)},getLineTokens:function(e,t){return Ct(this,ot(e),t,!0)},getTokenTypeAt:function(e){e=ht(this.doc,e);var t,n=yt(this,Xe(this.doc,e.line)),i=0,r=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var s=i+r>>1;if((s?n[2*s-1]:0)>=o)r=s;else{if(!(n[2*s+1]<o)){t=n[2*s+2];break}i=s+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!n.hasOwnProperty(t))return i;var r=n[t],o=this.getModeAt(e);if("string"==typeof o[t])r[o[t]]&&i.push(r[o[t]]);else if(o[t])for(var s=0;s<o[t].length;s++){var a=r[o[t][s]];a&&i.push(a)}else o.helperType&&r[o.helperType]?i.push(r[o.helperType]):r[o.name]&&i.push(r[o.name]);for(var l=0;l<r._global.length;l++){var c=r._global[l];c.pred(o,this)&&-1==z(i,c.val)&&i.push(c.val)}return i},getStateAfter:function(e,t){var n=this.doc;return bt(this,(e=dt(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return bi(this,null==e?n.head:"object"==typeof e?ht(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return yi(this,ht(this.doc,e),t||"page")},coordsChar:function(e,t){return xi(this,(e=vi(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=vi(this,{top:e,left:0},t||"page").top,nt(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,r=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,r=!0),i=Xe(this.doc,e)}else i=e;return mi(this,i,{top:0,left:0},t||"page",n||r).top+(r?this.doc.height-sn(i):0)},defaultTextHeight:function(){return Mi(this.display)},defaultCharWidth:function(){return Ri(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o=this.display,s=(e=bi(this,ht(this.doc,e))).bottom,a=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==i)s=e.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?s=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(s=e.bottom),a+t.offsetWidth>c&&(a=c-t.offsetWidth)}t.style.top=s+"px",t.style.left=t.style.right="","right"==r?(a=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),n&&rr(this,{left:a,top:s,right:a+t.offsetWidth,bottom:s+t.offsetHeight})},triggerOnKeyDown:Ir(ca),triggerOnKeyPress:Ir(ha),triggerOnKeyUp:da,triggerOnMouseDown:Ir(ya),execCommand:function(e){if(Xs.hasOwnProperty(e))return Xs[e].call(null,this)},triggerElectric:Ir((function(e){Ha(this,e)})),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var o=ht(this.doc,e),s=0;s<t&&!(o=Ja(this.doc,o,r,n,i)).hitSide;++s);return o},moveH:Ir((function(e,t){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?Ja(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()}),q)})),deleteH:Ir((function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):qs(this,(function(n){var r=Ja(i,n.head,e,t,!1);return e<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(e,t,n,i){var r=1,o=i;t<0&&(r=-1,t=-t);for(var s=ht(this.doc,e),a=0;a<t;++a){var l=bi(this,s,"div");if(null==o?o=l.left:l.left=o,(s=Xa(this,l,r,n)).hitSide)break}return s},moveV:Ir((function(e,t){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(s){if(o)return e<0?s.from():s.to();var a=bi(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),r.push(a.left);var l=Xa(n,a,e,t);return"page"==t&&s==i.sel.primary()&&sr(n,yi(n,l,"div").top-a.top),l}),q),r.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=r[s]})),findWordAt:function(e){var t=Xe(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var r=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=t.length||!n?++i:--n;for(var o=t.charAt(n),s=ie(o,r)?function(e){return ie(e,r)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ie(e)};n>0&&s(t.charAt(n-1));)--n;for(;i<t.length&&s(t.charAt(i));)++i}return new oo(ot(e.line,n),ot(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?L(this.display.cursorDiv,"CodeMirror-overwrite"):O(this.display.cursorDiv,"CodeMirror-overwrite"),ye(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==I()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Ir((function(e,t){lr(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Kn(this)-this.display.barHeight,width:e.scrollWidth-Kn(this)-this.display.barWidth,clientHeight:Jn(this),clientWidth:Yn(this)}},scrollIntoView:Ir((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ot(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?cr(this,e):dr(this,e.from,e.to,e.margin)})),setSize:Ir((function(e,t){var n=this,i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&di(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Pi(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,ye(this,"refresh",this)})),operation:function(e){return Tr(this,e)},startOperation:function(){return kr(this)},endOperation:function(){return Cr(this)},refresh:Ir((function(){var e=this.display.cachedTextHeight;$i(this),this.curOp.forceUpdate=!0,hi(this),lr(this,this.doc.scrollLeft,this.doc.scrollTop),Hr(this.display),(null==e||Math.abs(e-Mi(this.display))>.5||this.options.lineWrapping)&&Li(this),ye(this,"refresh",this)})),swapDoc:Ir((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),bo(this,e),hi(this),this.display.input.reset(),lr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Mn(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},xe(e),e.registerHelper=function(t,i,r){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][i]=r},e.registerGlobalHelper=function(t,i,r,o){e.registerHelper(t,i,o),n[t]._global.push({pred:r,val:o})}}function Ja(e,t,n,i,r){var o=t,s=n,a=Xe(e,t.line),l=r&&"rtl"==e.direction?-n:n;function c(){var n=t.line+l;return!(n<e.first||n>=e.first+e.size)&&(t=new ot(n,t.ch,t.sticky),a=Xe(e,n))}function u(o){var s;if("codepoint"==i){var u=a.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(u))s=null;else{var d=n>0?u>=55296&&u<56320:u>=56320&&u<57343;s=new ot(t.line,Math.max(0,Math.min(a.text.length,t.ch+n*(d?2:1))),-n)}}else s=r?Js(e.cm,a,t,n):Ks(a,t,n);if(null==s){if(o||!c())return!1;t=Ys(r,e.cm,a,t.line,l)}else t=s;return!0}if("char"==i||"codepoint"==i)u();else if("column"==i)u(!0);else if("word"==i||"group"==i)for(var d=null,h="group"==i,f=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(n<0)||u(!p);p=!1){var g=a.text.charAt(t.ch)||"\n",m=ie(g,f)?"w":h&&"\n"==g?"n":!h||/\s/.test(g)?null:"p";if(!h||p||m||(m="s"),d&&d!=m){n<0&&(n=1,u(),t.sticky="after");break}if(m&&(d=m),n>0&&!u(!p))break}var v=Ko(e,t,o,s,!0);return at(o,v)&&(v.hitSide=!0),v}function Xa(e,t,n,i){var r,o,s=e.doc,a=t.left;if("page"==i){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*Mi(e.display),3);r=(n>0?t.bottom:t.top)+n*c}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;(o=xi(e,a,r)).outside;){if(n<0?r<=0:r>=s.height){o.hitSide=!0;break}r+=5*n}return o}var Qa=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new B,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Za(e,t){var n=ti(e,t.line);if(!n||n.hidden)return null;var i=Xe(e.doc,t.line),r=Qn(n,i,t.line),o=fe(i,e.doc.direction),s="left";o&&(s=de(o,t.ch)%2?"right":"left");var a=si(r.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function el(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function tl(e,t){return t&&(e.bad=!0),e}function nl(e,t,n,i,r){var o="",s=!1,a=e.doc.lineSeparator(),l=!1;function c(e){return function(t){return t.id==e}}function u(){s&&(o+=a,l&&(o+=a),s=l=!1)}function d(e){e&&(u(),o+=e)}function h(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void d(n);var o,f=t.getAttribute("cm-marker");if(f){var p=e.findMarks(ot(i,0),ot(r+1,0),c(+f));return void(p.length&&(o=p[0].find(0))&&d(Qe(e.doc,o.from,o.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var g=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;g&&u();for(var m=0;m<t.childNodes.length;m++)h(t.childNodes[m]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),g&&(s=!0)}else 3==t.nodeType&&d(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;h(t),t!=n;)t=t.nextSibling,l=!1;return o}function il(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return tl(e.clipPos(ot(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return rl(o,t,n)}}function rl(e,t,n){var i=e.text.firstChild,r=!1;if(!t||!D(i,t))return tl(ot(tt(e.line),0),!0);if(t==i&&(r=!0,t=i.childNodes[n],n=0,!t)){var o=e.rest?J(e.rest):e.line;return tl(ot(tt(o),o.text.length),r)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=i;)a=a.parentNode;var l=e.measure,c=l.maps;function u(t,n,i){for(var r=-1;r<(c?c.length:0);r++)for(var o=r<0?l.map:c[r],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==n){var u=tt(r<0?e.line:e.rest[r]),d=o[s]+i;return(i<0||a!=t)&&(d=o[s+(i?1:0)]),ot(u,d)}}}var d=u(s,a,n);if(d)return tl(d,r);for(var h=a.nextSibling,f=s?s.nodeValue.length-n:0;h;h=h.nextSibling){if(d=u(h,h.firstChild,0))return tl(ot(d.line,d.ch-f),r);f+=h.textContent.length}for(var p=a.previousSibling,g=n;p;p=p.previousSibling){if(d=u(p,p.firstChild,-1))return tl(ot(d.line,d.ch+g),r);g+=p.textContent.length}}Qa.prototype.init=function(e){var t=this,n=this,i=n.cm,r=n.div=e.lineDiv;function o(e){for(var t=e.target;t;t=t.parentNode){if(t==r)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function s(e){if(o(e)&&!be(i,e)){if(i.somethingSelected())Ua({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=qa(i);Ua({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation((function(){i.setSelections(t.ranges,0,W),i.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var s=za.text.join("\n");if(e.clipboardData.setData("Text",s),e.clipboardData.getData("Text")==s)return void e.preventDefault()}var a=Ka(),l=a.firstChild;i.display.lineSpace.insertBefore(a,i.display.lineSpace.firstChild),l.value=za.text.join("\n");var c=I();F(l),setTimeout((function(){i.display.lineSpace.removeChild(a),c.focus(),c==r&&n.showPrimarySelection()}),50)}}r.contentEditable=!0,Ga(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),ge(r,"paste",(function(e){!o(e)||be(i,e)||Wa(e,i)||a<=11&&setTimeout(Dr(i,(function(){return t.updateFromDOM()})),20)})),ge(r,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),ge(r,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),ge(r,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),ge(r,"touchstart",(function(){return n.forceCompositionEnd()})),ge(r,"input",(function(){t.composing||t.readFromDOMSoon()})),ge(r,"copy",s),ge(r,"cut",s)},Qa.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Qa.prototype.prepareSelection=function(){var e=Wi(this.cm,!1);return e.focus=I()==this.div,e},Qa.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Qa.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Qa.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),o=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var s=il(t,e.anchorNode,e.anchorOffset),a=il(t,e.focusNode,e.focusOffset);if(!s||s.bad||!a||a.bad||0!=st(ut(s,a),r)||0!=st(ct(s,a),o)){var l=t.display.view,c=r.line>=t.display.viewFrom&&Za(t,r)||{node:l[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&Za(t,o);if(!u){var d=l[l.length-1].measure,h=d.maps?d.maps[d.maps.length-1]:d.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(c&&u){var f,p=e.rangeCount&&e.getRangeAt(0);try{f=E(c.node,c.offset,u.offset,u.node)}catch(g){}f&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),f.collapsed||(e.removeAllRanges(),e.addRange(f))):(e.removeAllRanges(),e.addRange(f)),p&&null==e.anchorNode?e.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Qa.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Qa.prototype.showMultipleSelections=function(e){M(this.cm.display.cursorDiv,e.cursors),M(this.cm.display.selectionDiv,e.selection)},Qa.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Qa.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return D(this.div,t)},Qa.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&I()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Qa.prototype.blur=function(){this.div.blur()},Qa.prototype.getField=function(){return this.div},Qa.prototype.supportsTouch=function(){return!0},Qa.prototype.receivedFocus=function(){var e=this,t=this;function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))}this.selectionInEditor()?setTimeout((function(){return e.pollSelection()}),20):Tr(this.cm,(function(){return t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,n)},Qa.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Qa.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(v&&u&&this.cm.display.gutterSpecs.length&&el(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=il(t,e.anchorNode,e.anchorOffset),i=il(t,e.focusNode,e.focusOffset);n&&i&&Tr(t,(function(){Uo(t.doc,ao(n,i),W),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)}))}}},Qa.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>i.firstLine()&&(s=ot(s.line-1,Xe(i.doc,s.line-1).length)),a.ch==Xe(i.doc,a.line).text.length&&a.line<i.lastLine()&&(a=ot(a.line+1,0)),s.line<r.viewFrom||a.line>r.viewTo-1)return!1;s.line==r.viewFrom||0==(e=Fi(i,s.line))?(t=tt(r.view[0].line),n=r.view[0].node):(t=tt(r.view[e].line),n=r.view[e-1].node.nextSibling);var l,c,u=Fi(i,a.line);if(u==r.view.length-1?(l=r.viewTo-1,c=r.lineDiv.lastChild):(l=tt(r.view[u+1].line)-1,c=r.view[u+1].node.previousSibling),!n)return!1;for(var d=i.doc.splitLines(nl(i,n,c,t,l)),h=Qe(i.doc,ot(t,0),ot(l,Xe(i.doc,l).text.length));d.length>1&&h.length>1;)if(J(d)==J(h))d.pop(),h.pop(),l--;else{if(d[0]!=h[0])break;d.shift(),h.shift(),t++}for(var f=0,p=0,g=d[0],m=h[0],v=Math.min(g.length,m.length);f<v&&g.charCodeAt(f)==m.charCodeAt(f);)++f;for(var y=J(d),b=J(h),w=Math.min(y.length-(1==d.length?f:0),b.length-(1==h.length?f:0));p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==d.length&&1==h.length&&t==s.line)for(;f&&f>s.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)f--,p++;d[d.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),d[0]=d[0].slice(f).replace(/\u200b+$/,"");var _=ot(t,f),x=ot(l,h.length?J(h).length-p:0);return d.length>1||d[0]||st(_,x)?(rs(i.doc,d,_,x,"+input"),!0):void 0},Qa.prototype.ensurePolled=function(){this.forceCompositionEnd()},Qa.prototype.reset=function(){this.forceCompositionEnd()},Qa.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Qa.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Qa.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Tr(this.cm,(function(){return $i(e.cm)}))},Qa.prototype.setUneditable=function(e){e.contentEditable="false"},Qa.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Dr(this.cm,Va)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Qa.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Qa.prototype.onContextMenu=function(){},Qa.prototype.resetPosition=function(){},Qa.prototype.needsContentAttribute=!0;var ol=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new B,this.hasSelection=!1,this.composing=null};function sl(e,t){if((t=t?P(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=I();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=a.getValue()}var r;if(e.form&&(ge(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var o=e.form;r=o.submit;try{var s=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=s}}catch(l){}}t.finishInit=function(n){n.save=i,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,i(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(ve(e.form,"submit",i),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=r))}},e.style.display="none";var a=$a((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return a}function al(e){e.off=ve,e.on=ge,e.wheelEventPixels=no,e.Doc=ks,e.splitLines=Le,e.countColumn=j,e.findColumn=G,e.isWordChar=ne,e.Pass=V,e.signal=ye,e.Line=cn,e.changeEnd=lo,e.scrollbarModel=wr,e.Pos=ot,e.cmpPos=st,e.modes=je,e.mimeModes=Be,e.resolveMode=Ve,e.getMode=We,e.modeExtensions=He,e.extendMode=qe,e.copyState=Ge,e.startState=Ye,e.innerMode=Ke,e.commands=Xs,e.keyMap=Ps,e.keyName=Ws,e.isModifierKey=Us,e.lookupKey=zs,e.normalizeKeyMap=Bs,e.StringStream=Je,e.SharedTextMarker=vs,e.TextMarker=gs,e.LineWidget=ds,e.e_preventDefault=ke,e.e_stopPropagation=Ce,e.e_stop=Ee,e.addClass=L,e.contains=D,e.rmClass=O,e.keyNames=Ls}ol.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var r=this.textarea;function o(e){if(!be(i,e)){if(i.somethingSelected())Ua({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=qa(i);Ua({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,W):(n.prevInput="",r.value=t.text.join("\n"),F(r))}"cut"==e.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(r.style.width="0px"),ge(r,"input",(function(){s&&a>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),ge(r,"paste",(function(e){be(i,e)||Wa(e,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),ge(r,"cut",o),ge(r,"copy",o),ge(e.scroller,"paste",(function(t){if(!Wn(e,t)&&!be(i,t)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,r.dispatchEvent(o)}})),ge(e.lineSpace,"selectstart",(function(t){Wn(e,t)||ke(t)})),ge(r,"compositionstart",(function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}})),ge(r,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},ol.prototype.createField=function(e){this.wrapper=Ka(),this.textarea=this.wrapper.firstChild},ol.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},ol.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=Wi(e);if(e.options.moveInputWithCursor){var r=bi(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-o.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-o.left))}return i},ol.prototype.showSelection=function(e){var t=this.cm.display;M(t.cursorDiv,e.cursors),M(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},ol.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&F(this.textarea),s&&a>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},ol.prototype.getField=function(){return this.textarea},ol.prototype.supportsTouch=function(){return!1},ol.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||I()!=this.textarea))try{this.textarea.focus()}catch(e){}},ol.prototype.blur=function(){this.textarea.blur()},ol.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ol.prototype.receivedFocus=function(){this.slowPoll()},ol.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},ol.prototype.fastPoll=function(){var e=!1,t=this;function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}t.pollingFast=!0,t.polling.set(20,n)},ol.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ne(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===r||b&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(i.length,r.length);l<c&&i.charCodeAt(l)==r.charCodeAt(l);)++l;return Tr(t,(function(){Va(t,r.slice(l),i.length-l,null,e.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},ol.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ol.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},ol.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,r=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=Ni(n,e),c=i.scroller.scrollTop;if(o&&!h){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&Dr(n,Uo)(n.doc,ao(o),W);var u,d=r.style.cssText,f=t.wrapper.style.cssText,p=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(u=window.scrollY),i.input.focus(),l&&window.scrollTo(null,u),i.input.reset(),n.somethingSelected()||(r.value=t.prevInput=" "),t.contextMenuPending=m,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),s&&a>=9&&g(),C?(Ee(e),ge(window,"mouseup",(function e(){ve(window,"mouseup",e),setTimeout(m,20)}))):setTimeout(m,50)}function g(){if(null!=r.selectionStart){var e=n.somethingSelected(),o="\u200b"+(e?r.value:"");r.value="\u21da",r.value=o,t.prevInput=e?"":"\u200b",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function m(){if(t.contextMenuPending==m&&(t.contextMenuPending=!1,t.wrapper.style.cssText=f,r.style.cssText=d,s&&a<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=c),null!=r.selectionStart)){(!s||s&&a<9)&&g();var e=0,o=function o(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&"\u200b"==t.prevInput?Dr(n,Jo)(n):e++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(o,200)}}},ol.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},ol.prototype.setUneditable=function(){},ol.prototype.needsContentAttribute=!1,La($a),Ya($a);var ll="iter insert remove copy getEditor constructor".split(" ");for(var cl in ks.prototype)ks.prototype.hasOwnProperty(cl)&&z(ll,cl)<0&&($a.prototype[cl]=function(e){return function(){return e.apply(this.doc,arguments)}}(ks.prototype[cl]));return xe(ks),$a.inputStyles={textarea:ol,contenteditable:Qa},$a.defineMode=function(e){$a.defaults.mode||"null"==e||($a.defaults.mode=e),ze.apply(this,arguments)},$a.defineMIME=Ue,$a.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),$a.defineMIME("text/plain","null"),$a.defineExtension=function(e,t){$a.prototype[e]=t},$a.defineDocExtension=function(e,t){ks.prototype[e]=t},$a.fromTextArea=sl,al($a),$a.version="5.65.5",$a}()},7976:function(e,t,n){!function(e){"use strict";var t=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/i;e.defineMode("gfm",(function(n,i){var r=0;function o(e){return e.code=!1,null}var s={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,n){if(n.combineTokens=null,n.codeBlock)return e.match(/^```+/)?(n.codeBlock=!1,null):(e.skipToEnd(),null);if(e.sol()&&(n.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),n.codeBlock=!0,null;if("`"===e.peek()){e.next();var o=e.pos;e.eatWhile("`");var s=1+e.pos-o;return n.code?s===r&&(n.code=!1):(r=s,n.code=!0),null}if(n.code)return e.next(),null;if(e.eatSpace())return n.ateSpace=!0,null;if((e.sol()||n.ateSpace)&&(n.ateSpace=!1,!1!==i.gitHubSpice)){if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return n.combineTokens=!0,"link";if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return n.combineTokens=!0,"link"}return e.match(t)&&"]("!=e.string.slice(e.start-2,e.start)&&(0==e.start||/\W/.test(e.string.charAt(e.start-1)))?(n.combineTokens=!0,"link"):(e.next(),null)},blankLine:o},a={taskLists:!0,strikethrough:!0,emoji:!0};for(var l in i)a[l]=i[l];return a.name="markdown",e.overlayMode(e.getMode(n,a),s)}),"markdown"),e.defineMIME("text/x-gfm","gfm")}(n(3668),n(3548),n(1357))},3548:function(e,t,n){!function(e){"use strict";e.defineMode("markdown",(function(t,n){var i=e.getMode(t,"text/html"),r="null"==i.name;function o(n){if(e.findModeByName){var i=e.findModeByName(n);i&&(n=i.mime||i.mimes[0])}var r=e.getMode(t,n);return"null"==r.name?null:r}void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.emoji&&(n.emoji=!1),void 0===n.fencedCodeBlockHighlighting&&(n.fencedCodeBlockHighlighting=!0),void 0===n.fencedCodeBlockDefaultMode&&(n.fencedCodeBlockDefaultMode="text/plain"),void 0===n.xml&&(n.xml=!0),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var s={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var a in s)s.hasOwnProperty(a)&&n.tokenTypeOverrides[a]&&(s[a]=n.tokenTypeOverrides[a]);var l=/^([*\-_])(?:\s*\1){2,}\s*$/,c=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,u=/^\[(x| )\](?=\s)/i,d=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,h=/^ {0,3}(?:\={1,}|-{2,})\s*$/,f=/^[^#!\[\]*_\\<>` "'(~:]+/,p=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,g=/^\s*\[[^\]]+?\]:.*$/,m=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,v="    ";function y(e,t,n){return t.f=t.inline=n,n(e,t)}function b(e,t,n){return t.f=t.block=n,n(e,t)}function w(e){return!e||!/\S/.test(e.string)}function _(t){if(t.linkTitle=!1,t.linkHref=!1,t.linkText=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,t.f==k){var n=r;if(!n){var o=e.innerMode(i,t.htmlState);n="xml"==o.mode.name&&null===o.state.tagStart&&!o.state.context&&o.state.tokenize.isInText}n&&(t.f=O,t.block=x,t.htmlState=null)}return t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine={stream:null},null}function x(t,i){var r=t.column()===i.indentation,a=w(i.prevLine.stream),f=i.indentedCode,m=i.prevLine.hr,v=!1!==i.list,b=(i.listStack[i.listStack.length-1]||0)+3;i.indentedCode=!1;var _=i.indentation;if(null===i.indentationDiff&&(i.indentationDiff=i.indentation,v)){for(i.list=null;_<i.listStack[i.listStack.length-1];)i.listStack.pop(),i.listStack.length?i.indentation=i.listStack[i.listStack.length-1]:i.list=!1;!1!==i.list&&(i.indentationDiff=_-i.listStack[i.listStack.length-1])}var x=!a&&!m&&!i.prevLine.header&&(!v||!f)&&!i.prevLine.fencedCodeEnd,k=(!1===i.list||m||a)&&i.indentation<=b&&t.match(l),E=null;if(i.indentationDiff>=4&&(f||i.prevLine.fencedCodeEnd||i.prevLine.header||a))return t.skipToEnd(),i.indentedCode=!0,s.code;if(t.eatSpace())return null;if(r&&i.indentation<=b&&(E=t.match(d))&&E[1].length<=6)return i.quote=0,i.header=E[1].length,i.thisLine.header=!0,n.highlightFormatting&&(i.formatting="header"),i.f=i.inline,S(i);if(i.indentation<=b&&t.eat(">"))return i.quote=r?1:i.quote+1,n.highlightFormatting&&(i.formatting="quote"),t.eatSpace(),S(i);if(!k&&!i.setext&&r&&i.indentation<=b&&(E=t.match(c))){var O=E[1]?"ol":"ul";return i.indentation=_+t.current().length,i.list=!0,i.quote=0,i.listStack.push(i.indentation),i.em=!1,i.strong=!1,i.code=!1,i.strikethrough=!1,n.taskLists&&t.match(u,!1)&&(i.taskList=!0),i.f=i.inline,n.highlightFormatting&&(i.formatting=["list","list-"+O]),S(i)}return r&&i.indentation<=b&&(E=t.match(p,!0))?(i.quote=0,i.fencedEndRE=new RegExp(E[1]+"+ *$"),i.localMode=n.fencedCodeBlockHighlighting&&o(E[2]||n.fencedCodeBlockDefaultMode),i.localMode&&(i.localState=e.startState(i.localMode)),i.f=i.block=C,n.highlightFormatting&&(i.formatting="code-block"),i.code=-1,S(i)):i.setext||!(x&&v||i.quote||!1!==i.list||i.code||k||g.test(t.string))&&(E=t.lookAhead(1))&&(E=E.match(h))?(i.setext?(i.header=i.setext,i.setext=0,t.skipToEnd(),n.highlightFormatting&&(i.formatting="header")):(i.header="="==E[0].charAt(0)?1:2,i.setext=i.header),i.thisLine.header=!0,i.f=i.inline,S(i)):k?(t.skipToEnd(),i.hr=!0,i.thisLine.hr=!0,s.hr):"["===t.peek()?y(t,i,D):y(t,i,i.inline)}function k(t,n){var o=i.token(t,n.htmlState);if(!r){var s=e.innerMode(i,n.htmlState);("xml"==s.mode.name&&null===s.state.tagStart&&!s.state.context&&s.state.tokenize.isInText||n.md_inside&&t.current().indexOf(">")>-1)&&(n.f=O,n.block=x,n.htmlState=null)}return o}function C(e,t){var i,r=t.listStack[t.listStack.length-1]||0,o=t.indentation<r,a=r+3;return t.fencedEndRE&&t.indentation<=a&&(o||e.match(t.fencedEndRE))?(n.highlightFormatting&&(t.formatting="code-block"),o||(i=S(t)),t.localMode=t.localState=null,t.block=x,t.f=O,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,o?b(e,t,t.block):i):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),s.code)}function S(e){var t=[];if(e.formatting){t.push(s.formatting),"string"===typeof e.formatting&&(e.formatting=[e.formatting]);for(var i=0;i<e.formatting.length;i++)t.push(s.formatting+"-"+e.formatting[i]),"header"===e.formatting[i]&&t.push(s.formatting+"-"+e.formatting[i]+"-"+e.header),"quote"===e.formatting[i]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(s.formatting+"-"+e.formatting[i]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(s.linkHref,"url"):(e.strong&&t.push(s.strong),e.em&&t.push(s.em),e.strikethrough&&t.push(s.strikethrough),e.emoji&&t.push(s.emoji),e.linkText&&t.push(s.linkText),e.code&&t.push(s.code),e.image&&t.push(s.image),e.imageAltText&&t.push(s.imageAltText,"link"),e.imageMarker&&t.push(s.imageMarker)),e.header&&t.push(s.header,s.header+"-"+e.header),e.quote&&(t.push(s.quote),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(s.quote+"-"+e.quote):t.push(s.quote+"-"+n.maxBlockquoteDepth)),!1!==e.list){var r=(e.listStack.length-1)%3;r?1===r?t.push(s.list2):t.push(s.list3):t.push(s.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function E(e,t){if(e.match(f,!0))return S(t)}function O(t,r){var o=r.text(t,r);if("undefined"!==typeof o)return o;if(r.list)return r.list=null,S(r);if(r.taskList)return" "===t.match(u,!0)[1]?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting="task"),r.taskList=!1,S(r);if(r.taskOpen=!1,r.taskClosed=!1,r.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting="header"),S(r);var a=t.next();if(r.linkTitle){r.linkTitle=!1;var l=a;"("===a&&(l=")");var c="^\\s*(?:[^"+(l=(l+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+l;if(t.match(new RegExp(c),!0))return s.linkHref}if("`"===a){var d=r.formatting;n.highlightFormatting&&(r.formatting="code"),t.eatWhile("`");var h=t.current().length;if(0!=r.code||r.quote&&1!=h){if(h==r.code){var f=S(r);return r.code=0,f}return r.formatting=d,S(r)}return r.code=h,S(r)}if(r.code)return S(r);if("\\"===a&&(t.next(),n.highlightFormatting)){var p=S(r),g=s.formatting+"-escape";return p?p+" "+g:g}if("!"===a&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return r.imageMarker=!0,r.image=!0,n.highlightFormatting&&(r.formatting="image"),S(r);if("["===a&&r.imageMarker&&t.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return r.imageMarker=!1,r.imageAltText=!0,n.highlightFormatting&&(r.formatting="image"),S(r);if("]"===a&&r.imageAltText){n.highlightFormatting&&(r.formatting="image");var p=S(r);return r.imageAltText=!1,r.image=!1,r.inline=r.f=M,p}if("["===a&&!r.image)return r.linkText&&t.match(/^.*?\]/)||(r.linkText=!0,n.highlightFormatting&&(r.formatting="link")),S(r);if("]"===a&&r.linkText){n.highlightFormatting&&(r.formatting="link");var p=S(r);return r.linkText=!1,r.inline=r.f=t.match(/\(.*?\)| ?\[.*?\]/,!1)?M:O,p}if("<"===a&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return r.f=r.inline=A,n.highlightFormatting&&(r.formatting="link"),(p=S(r))?p+=" ":p="",p+s.linkInline;if("<"===a&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return r.f=r.inline=A,n.highlightFormatting&&(r.formatting="link"),(p=S(r))?p+=" ":p="",p+s.linkEmail;if(n.xml&&"<"===a&&t.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var v=t.string.indexOf(">",t.pos);if(-1!=v){var y=t.string.substring(t.start,v);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(y)&&(r.md_inside=!0)}return t.backUp(1),r.htmlState=e.startState(i),b(t,r,k)}if(n.xml&&"<"===a&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";if("*"===a||"_"===a){for(var w=1,_=1==t.pos?" ":t.string.charAt(t.pos-2);w<3&&t.eat(a);)w++;var x=t.peek()||" ",C=!/\s/.test(x)&&(!m.test(x)||/\s/.test(_)||m.test(_)),E=!/\s/.test(_)&&(!m.test(_)||/\s/.test(x)||m.test(x)),R=null,T=null;if(w%2&&(r.em||!C||"*"!==a&&E&&!m.test(_)?r.em!=a||!E||"*"!==a&&C&&!m.test(x)||(R=!1):R=!0),w>1&&(r.strong||!C||"*"!==a&&E&&!m.test(_)?r.strong!=a||!E||"*"!==a&&C&&!m.test(x)||(T=!1):T=!0),null!=T||null!=R)return n.highlightFormatting&&(r.formatting=null==R?"strong":null==T?"em":"strong em"),!0===R&&(r.em=a),!0===T&&(r.strong=a),f=S(r),!1===R&&(r.em=!1),!1===T&&(r.strong=!1),f}else if(" "===a&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return S(r);t.backUp(1)}if(n.strikethrough)if("~"===a&&t.eatWhile(a)){if(r.strikethrough)return n.highlightFormatting&&(r.formatting="strikethrough"),f=S(r),r.strikethrough=!1,f;if(t.match(/^[^\s]/,!1))return r.strikethrough=!0,n.highlightFormatting&&(r.formatting="strikethrough"),S(r)}else if(" "===a&&t.match("~~",!0)){if(" "===t.peek())return S(r);t.backUp(2)}if(n.emoji&&":"===a&&t.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){r.emoji=!0,n.highlightFormatting&&(r.formatting="emoji");var D=S(r);return r.emoji=!1,D}return" "===a&&(t.match(/^ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),S(r)}function A(e,t){if(">"===e.next()){t.f=t.inline=O,n.highlightFormatting&&(t.formatting="link");var i=S(t);return i?i+=" ":i="",i+s.linkInline}return e.match(/^[^>]+/,!0),s.linkInline}function M(e,t){if(e.eatSpace())return null;var i=e.next();return"("===i||"["===i?(t.f=t.inline=T("("===i?")":"]"),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,S(t)):"error"}var R={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function T(e){return function(t,i){if(t.next()===e){i.f=i.inline=O,n.highlightFormatting&&(i.formatting="link-string");var r=S(i);return i.linkHref=!1,r}return t.match(R[e]),i.linkHref=!0,S(i)}}function D(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=I,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,S(t)):y(e,t,O)}function I(e,t){if(e.match("]:",!0)){t.f=t.inline=L,n.highlightFormatting&&(t.formatting="link");var i=S(t);return t.linkText=!1,i}return e.match(/^([^\]\\]|\\.)+/,!0),s.linkText}function L(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),t.f=t.inline=O,s.linkHref+" url")}var N={startState:function(){return{f:x,prevLine:{stream:null},thisLine:{stream:null},block:x,htmlState:null,indentation:0,inline:O,text:E,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(i,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkText:t.linkText,linkTitle:t.linkTitle,linkHref:t.linkHref,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,emoji:t.emoji,header:t.header,setext:t.setext,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedEndRE:t.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return _(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=k)){var n=e.match(/^\s*/,!0)[0].replace(/\t/g,v).length;if(t.indentation=n,t.indentationDiff=null,n>0)return null}}return t.f(e,t)},innerMode:function(e){return e.block==k?{state:e.htmlState,mode:i}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:N}},indent:function(t,n,r){return t.block==k&&i.indent?i.indent(t.htmlState,n,r):t.localState&&t.localMode.indent?t.localMode.indent(t.localState,n,r):e.Pass},blankLine:_,getType:S,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return N}),"xml"),e.defineMIME("text/markdown","markdown"),e.defineMIME("text/x-markdown","markdown")}(n(3668),n(9029),n(6251))},6251:function(e,t,n){!function(e){"use strict";e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var t=0;t<e.modeInfo.length;t++){var n=e.modeInfo[t];n.mimes&&(n.mime=n.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var i=e.modeInfo[n];if(i.mime==t)return i;if(i.mimes)for(var r=0;r<i.mimes.length;r++)if(i.mimes[r]==t)return i}return/\+xml$/.test(t)?e.findModeByMIME("application/xml"):/\+json$/.test(t)?e.findModeByMIME("application/json"):void 0},e.findModeByExtension=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var i=e.modeInfo[n];if(i.ext)for(var r=0;r<i.ext.length;r++)if(i.ext[r]==t)return i}},e.findModeByFileName=function(t){for(var n=0;n<e.modeInfo.length;n++){var i=e.modeInfo[n];if(i.file&&i.file.test(t))return i}var r=t.lastIndexOf("."),o=r>-1&&t.substring(r+1,t.length);if(o)return e.findModeByExtension(o)},e.findModeByName=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var i=e.modeInfo[n];if(i.name.toLowerCase()==t)return i;if(i.alias)for(var r=0;r<i.alias.length;r++)if(i.alias[r].toLowerCase()==t)return i}}}(n(3668))},9029:function(e,t,n){!function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",(function(i,r){var o,s,a=i.indentUnit,l={},c=r.htmlMode?t:n;for(var u in c)l[u]=c[u];for(var u in r)l[u]=r[u];function d(e,t){function n(n){return t.tokenize=n,n(e,t)}var i=e.next();return"<"==i?e.eat("!")?e.eat("[")?e.match("CDATA[")?n(p("atom","]]>")):null:e.match("--")?n(p("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(g(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=p("meta","?>"),"meta"):(o=e.eat("/")?"closeTag":"openTag",t.tokenize=h,"tag bracket"):"&"==i?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function h(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=d,o=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return o="equals",null;if("<"==n){t.tokenize=d,t.state=w,t.tagName=t.tagStart=null;var i=t.tokenize(e,t);return i?i+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=f(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function f(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=h;break}return"string"};return t.isInAttribute=!0,t}function p(e,t){return function(n,i){for(;!n.eol();){if(n.match(t)){i.tokenize=d;break}n.next()}return e}}function g(e){return function(t,n){for(var i;null!=(i=t.next());){if("<"==i)return n.tokenize=g(e+1),n.tokenize(t,n);if(">"==i){if(1==e){n.tokenize=d;break}return n.tokenize=g(e-1),n.tokenize(t,n)}}return"meta"}}function m(e){return e&&e.toLowerCase()}function v(e,t,n){this.prev=e.context,this.tagName=t||"",this.indent=e.indented,this.startOfLine=n,(l.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function y(e){e.context&&(e.context=e.context.prev)}function b(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!l.contextGrabbers.hasOwnProperty(m(n))||!l.contextGrabbers[m(n)].hasOwnProperty(m(t)))return;y(e)}}function w(e,t,n){return"openTag"==e?(n.tagStart=t.column(),_):"closeTag"==e?x:w}function _(e,t,n){return"word"==e?(n.tagName=t.current(),s="tag",S):l.allowMissingTagName&&"endTag"==e?(s="tag bracket",S(e,t,n)):(s="error",_)}function x(e,t,n){if("word"==e){var i=t.current();return n.context&&n.context.tagName!=i&&l.implicitlyClosed.hasOwnProperty(m(n.context.tagName))&&y(n),n.context&&n.context.tagName==i||!1===l.matchClosing?(s="tag",k):(s="tag error",C)}return l.allowMissingTagName&&"endTag"==e?(s="tag bracket",k(e,t,n)):(s="error",C)}function k(e,t,n){return"endTag"!=e?(s="error",k):(y(n),w)}function C(e,t,n){return s="error",k(e,t,n)}function S(e,t,n){if("word"==e)return s="attribute",E;if("endTag"==e||"selfcloseTag"==e){var i=n.tagName,r=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||l.autoSelfClosers.hasOwnProperty(m(i))?b(n,i):(b(n,i),n.context=new v(n,i,r==n.indented)),w}return s="error",S}function E(e,t,n){return"equals"==e?O:(l.allowMissing||(s="error"),S(e,t,n))}function O(e,t,n){return"string"==e?A:"word"==e&&l.allowUnquoted?(s="string",S):(s="error",S(e,t,n))}function A(e,t,n){return"string"==e?A:S(e,t,n)}return d.isInText=!0,{startState:function(e){var t={tokenize:d,state:w,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;o=null;var n=t.tokenize(e,t);return(n||o)&&"comment"!=n&&(s=null,t.state=t.state(o||n,e,t),s&&(n="error"==s?n+" error":s)),n},indent:function(t,n,i){var r=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+a;if(r&&r.noIndent)return e.Pass;if(t.tokenize!=h&&t.tokenize!=d)return i?i.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==l.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+a*(l.multilineTagIndentFactor||1);if(l.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var o=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(o&&o[1])for(;r;){if(r.tagName==o[2]){r=r.prev;break}if(!l.implicitlyClosed.hasOwnProperty(m(r.tagName)))break;r=r.prev}else if(o)for(;r;){var s=l.contextGrabbers[m(r.tagName)];if(!s||!s.hasOwnProperty(m(o[2])))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+a:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(e){e.state==O&&(e.state=S)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],n=e.context;n;n=n.prev)t.push(n.tagName);return t.reverse()}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}(n(3668))},3484:function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1;t.Diff=function(e,t){return[e,t]},t.prototype.diff_main=function(e,n,i,r){"undefined"==typeof r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=r;if(null==e||null==n)throw new Error("Null input. (diff_main)");if(e==n)return e?[new t.Diff(0,e)]:[];"undefined"==typeof i&&(i=!0);var s=i,a=this.diff_commonPrefix(e,n),l=e.substring(0,a);e=e.substring(a),n=n.substring(a),a=this.diff_commonSuffix(e,n);var c=e.substring(e.length-a);e=e.substring(0,e.length-a),n=n.substring(0,n.length-a);var u=this.diff_compute_(e,n,s,o);return l&&u.unshift(new t.Diff(0,l)),c&&u.push(new t.Diff(0,c)),this.diff_cleanupMerge(u),u},t.prototype.diff_compute_=function(e,i,r,o){var s;if(!e)return[new t.Diff(1,i)];if(!i)return[new t.Diff(n,e)];var a=e.length>i.length?e:i,l=e.length>i.length?i:e,c=a.indexOf(l);if(-1!=c)return s=[new t.Diff(1,a.substring(0,c)),new t.Diff(0,l),new t.Diff(1,a.substring(c+l.length))],e.length>i.length&&(s[0][0]=s[2][0]=n),s;if(1==l.length)return[new t.Diff(n,e),new t.Diff(1,i)];var u=this.diff_halfMatch_(e,i);if(u){var d=u[0],h=u[1],f=u[2],p=u[3],g=u[4],m=this.diff_main(d,f,r,o),v=this.diff_main(h,p,r,o);return m.concat([new t.Diff(0,g)],v)}return r&&e.length>100&&i.length>100?this.diff_lineMode_(e,i,o):this.diff_bisect_(e,i,o)},t.prototype.diff_lineMode_=function(e,i,r){var o=this.diff_linesToChars_(e,i);e=o.chars1,i=o.chars2;var s=o.lineArray,a=this.diff_main(e,i,!1,r);this.diff_charsToLines_(a,s),this.diff_cleanupSemantic(a),a.push(new t.Diff(0,""));for(var l=0,c=0,u=0,d="",h="";l<a.length;){switch(a[l][0]){case 1:u++,h+=a[l][1];break;case n:c++,d+=a[l][1];break;case 0:if(c>=1&&u>=1){a.splice(l-c-u,c+u),l=l-c-u;for(var f=this.diff_main(d,h,!1,r),p=f.length-1;p>=0;p--)a.splice(l,0,f[p]);l+=f.length}u=0,c=0,d="",h=""}l++}return a.pop(),a},t.prototype.diff_bisect_=function(e,i,r){for(var o=e.length,s=i.length,a=Math.ceil((o+s)/2),l=a,c=2*a,u=new Array(c),d=new Array(c),h=0;h<c;h++)u[h]=-1,d[h]=-1;u[l+1]=0,d[l+1]=0;for(var f=o-s,p=f%2!=0,g=0,m=0,v=0,y=0,b=0;b<a&&!((new Date).getTime()>r);b++){for(var w=-b+g;w<=b-m;w+=2){for(var _=l+w,x=(O=w==-b||w!=b&&u[_-1]<u[_+1]?u[_+1]:u[_-1]+1)-w;O<o&&x<s&&e.charAt(O)==i.charAt(x);)O++,x++;if(u[_]=O,O>o)m+=2;else if(x>s)g+=2;else if(p){if((S=l+f-w)>=0&&S<c&&-1!=d[S])if(O>=(C=o-d[S]))return this.diff_bisectSplit_(e,i,O,x,r)}}for(var k=-b+v;k<=b-y;k+=2){for(var C,S=l+k,E=(C=k==-b||k!=b&&d[S-1]<d[S+1]?d[S+1]:d[S-1]+1)-k;C<o&&E<s&&e.charAt(o-C-1)==i.charAt(s-E-1);)C++,E++;if(d[S]=C,C>o)y+=2;else if(E>s)v+=2;else if(!p){if((_=l+f-k)>=0&&_<c&&-1!=u[_]){var O;x=l+(O=u[_])-_;if(O>=(C=o-C))return this.diff_bisectSplit_(e,i,O,x,r)}}}}return[new t.Diff(n,e),new t.Diff(1,i)]},t.prototype.diff_bisectSplit_=function(e,t,n,i,r){var o=e.substring(0,n),s=t.substring(0,i),a=e.substring(n),l=t.substring(i),c=this.diff_main(o,s,!1,r),u=this.diff_main(a,l,!1,r);return c.concat(u)},t.prototype.diff_linesToChars_=function(e,t){var n=[],i={};function r(e){for(var t="",r=0,s=-1,a=n.length;s<e.length-1;){-1==(s=e.indexOf("\n",r))&&(s=e.length-1);var l=e.substring(r,s+1);(i.hasOwnProperty?i.hasOwnProperty(l):void 0!==i[l])?t+=String.fromCharCode(i[l]):(a==o&&(l=e.substring(r),s=e.length),t+=String.fromCharCode(a),i[l]=a,n[a++]=l),r=s+1}return t}n[0]="";var o=4e4,s=r(e);return o=65535,{chars1:s,chars2:r(t),lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],r=[],o=0;o<i.length;o++)r[o]=t[i.charCodeAt(o)];e[n][1]=r.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,o=0;n<r;)e.substring(o,r)==t.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),r=i,o=0;n<r;)e.substring(e.length-r,e.length-o)==t.substring(t.length-r,t.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var r=Math.min(n,i);if(e==t)return r;for(var o=0,s=1;;){var a=e.substring(r-s),l=t.indexOf(a);if(-1==l)return o;s+=l,0!=l&&e.substring(r-s)!=t.substring(0,s)||(o=s,s++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var r=this;function o(e,t,n){for(var i,o,s,a,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var d=r.diff_commonPrefix(e.substring(n),t.substring(c)),h=r.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<h+d&&(u=t.substring(c-h,c)+t.substring(c,c+d),i=e.substring(0,n-h),o=e.substring(n+d),s=t.substring(0,c-h),a=t.substring(c+d))}return 2*u.length>=e.length?[i,o,s,a,u]:null}var s,a,l,c,u,d=o(n,i,Math.ceil(n.length/4)),h=o(n,i,Math.ceil(n.length/2));return d||h?(s=h?d&&d[4].length>h[4].length?d:h:d,e.length>t.length?(a=s[0],l=s[1],c=s[2],u=s[3]):(c=s[0],u=s[1],a=s[2],l=s[3]),[a,l,c,u,s[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var i=!1,r=[],o=0,s=null,a=0,l=0,c=0,u=0,d=0;a<e.length;)0==e[a][0]?(r[o++]=a,l=u,c=d,u=0,d=0,s=e[a][1]):(1==e[a][0]?u+=e[a][1].length:d+=e[a][1].length,s&&s.length<=Math.max(l,c)&&s.length<=Math.max(u,d)&&(e.splice(r[o-1],0,new t.Diff(n,s)),e[r[o-1]+1][0]=1,o--,a=--o>0?r[o-1]:-1,l=0,c=0,u=0,d=0,s=null,i=!0)),a++;for(i&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),a=1;a<e.length;){if(e[a-1][0]==n&&1==e[a][0]){var h=e[a-1][1],f=e[a][1],p=this.diff_commonOverlap_(h,f),g=this.diff_commonOverlap_(f,h);p>=g?(p>=h.length/2||p>=f.length/2)&&(e.splice(a,0,new t.Diff(0,f.substring(0,p))),e[a-1][1]=h.substring(0,h.length-p),e[a+1][1]=f.substring(p),a++):(g>=h.length/2||g>=f.length/2)&&(e.splice(a,0,new t.Diff(0,h.substring(0,g))),e[a-1][0]=1,e[a-1][1]=f.substring(0,f.length-g),e[a+1][0]=n,e[a+1][1]=h.substring(g),a++),a++}a++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var i=e.charAt(e.length-1),r=n.charAt(0),o=i.match(t.nonAlphaNumericRegex_),s=r.match(t.nonAlphaNumericRegex_),a=o&&i.match(t.whitespaceRegex_),l=s&&r.match(t.whitespaceRegex_),c=a&&i.match(t.linebreakRegex_),u=l&&r.match(t.linebreakRegex_),d=c&&e.match(t.blanklineEndRegex_),h=u&&n.match(t.blanklineStartRegex_);return d||h?5:c||u?4:o&&!a&&l?3:a||l?2:o||s?1:0}for(var i=1;i<e.length-1;){if(0==e[i-1][0]&&0==e[i+1][0]){var r=e[i-1][1],o=e[i][1],s=e[i+1][1],a=this.diff_commonSuffix(r,o);if(a){var l=o.substring(o.length-a);r=r.substring(0,r.length-a),o=l+o.substring(0,o.length-a),s=l+s}for(var c=r,u=o,d=s,h=n(r,o)+n(o,s);o.charAt(0)===s.charAt(0);){r+=o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1);var f=n(r,o)+n(o,s);f>=h&&(h=f,c=r,u=o,d=s)}e[i-1][1]!=c&&(c?e[i-1][1]=c:(e.splice(i-1,1),i--),e[i][1]=u,d?e[i+1][1]=d:(e.splice(i+1,1),i--))}i++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var i=!1,r=[],o=0,s=null,a=0,l=!1,c=!1,u=!1,d=!1;a<e.length;)0==e[a][0]?(e[a][1].length<this.Diff_EditCost&&(u||d)?(r[o++]=a,l=u,c=d,s=e[a][1]):(o=0,s=null),u=d=!1):(e[a][0]==n?d=!0:u=!0,s&&(l&&c&&u&&d||s.length<this.Diff_EditCost/2&&l+c+u+d==3)&&(e.splice(r[o-1],0,new t.Diff(n,s)),e[r[o-1]+1][0]=1,o--,s=null,l&&c?(u=d=!0,o=0):(a=--o>0?r[o-1]:-1,u=d=!1),i=!0)),a++;i&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push(new t.Diff(0,""));for(var i,r=0,o=0,s=0,a="",l="";r<e.length;)switch(e[r][0]){case 1:s++,l+=e[r][1],r++;break;case n:o++,a+=e[r][1],r++;break;case 0:o+s>1?(0!==o&&0!==s&&(0!==(i=this.diff_commonPrefix(l,a))&&(r-o-s>0&&0==e[r-o-s-1][0]?e[r-o-s-1][1]+=l.substring(0,i):(e.splice(0,0,new t.Diff(0,l.substring(0,i))),r++),l=l.substring(i),a=a.substring(i)),0!==(i=this.diff_commonSuffix(l,a))&&(e[r][1]=l.substring(l.length-i)+e[r][1],l=l.substring(0,l.length-i),a=a.substring(0,a.length-i))),r-=o+s,e.splice(r,o+s),a.length&&(e.splice(r,0,new t.Diff(n,a)),r++),l.length&&(e.splice(r,0,new t.Diff(1,l)),r++),r++):0!==r&&0==e[r-1][0]?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,s=0,o=0,a="",l=""}""===e[e.length-1][1]&&e.pop();var c=!1;for(r=1;r<e.length-1;)0==e[r-1][0]&&0==e[r+1][0]&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)==e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),c=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),c=!0)),r++;c&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var i,r=0,o=0,s=0,a=0;for(i=0;i<e.length&&(1!==e[i][0]&&(r+=e[i][1].length),e[i][0]!==n&&(o+=e[i][1].length),!(r>t));i++)s=r,a=o;return e.length!=i&&e[i][0]===n?a:a+(t-s)},t.prototype.diff_prettyHtml=function(e){for(var t=[],i=/&/g,r=/</g,o=/>/g,s=/\n/g,a=0;a<e.length;a++){var l=e[a][0],c=e[a][1].replace(i,"&amp;").replace(r,"&lt;").replace(o,"&gt;").replace(s,"&para;<br>");switch(l){case 1:t[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case n:t[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[a]="<span>"+c+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],i=0;i<e.length;i++)e[i][0]!==n&&(t[i]=e[i][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,i=0,r=0,o=0;o<e.length;o++){var s=e[o][0],a=e[o][1];switch(s){case 1:i+=a.length;break;case n:r+=a.length;break;case 0:t+=Math.max(i,r),i=0,r=0}}return t+=Math.max(i,r)},t.prototype.diff_toDelta=function(e){for(var t=[],i=0;i<e.length;i++)switch(e[i][0]){case 1:t[i]="+"+encodeURI(e[i][1]);break;case n:t[i]="-"+e[i][1].length;break;case 0:t[i]="="+e[i][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,i){for(var r=[],o=0,s=0,a=i.split(/\t/g),l=0;l<a.length;l++){var c=a[l].substring(1);switch(a[l].charAt(0)){case"+":try{r[o++]=new t.Diff(1,decodeURI(c))}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var u=parseInt(c,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+c);var d=e.substring(s,s+=u);"="==a[l].charAt(0)?r[o++]=new t.Diff(0,d):r[o++]=new t.Diff(n,d);break;default:if(a[l])throw new Error("Invalid diff operation in diff_fromDelta: "+a[l])}}if(s!=e.length)throw new Error("Delta length ("+s+") does not equal source text length ("+e.length+").");return r},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),r=this;function o(e,i){var o=e/t.length,s=Math.abs(n-i);return r.Match_Distance?o+s/r.Match_Distance:s?1:o}var s=this.Match_Threshold,a=e.indexOf(t,n);-1!=a&&(s=Math.min(o(0,a),s),-1!=(a=e.lastIndexOf(t,n+t.length))&&(s=Math.min(o(0,a),s)));var l,c,u=1<<t.length-1;a=-1;for(var d,h=t.length+e.length,f=0;f<t.length;f++){for(l=0,c=h;l<c;)o(f,n+c)<=s?l=c:h=c,c=Math.floor((h-l)/2+l);h=c;var p=Math.max(1,n-c+1),g=Math.min(n+c,e.length)+t.length,m=Array(g+2);m[g+1]=(1<<f)-1;for(var v=g;v>=p;v--){var y=i[e.charAt(v-1)];if(m[v]=0===f?(m[v+1]<<1|1)&y:(m[v+1]<<1|1)&y|(d[v+1]|d[v])<<1|1|d[v+1],m[v]&u){var b=o(f,v-1);if(b<=s){if(s=b,!((a=v-1)>n))break;p=Math.max(1,2*n-a)}}}if(o(f+1,n)>s)break;d=m}return a},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,n){if(0!=n.length){if(null===e.start2)throw Error("patch not initialized");for(var i=n.substring(e.start2,e.start2+e.length1),r=0;n.indexOf(i)!=n.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,i=n.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var o=n.substring(e.start2-r,e.start2);o&&e.diffs.unshift(new t.Diff(0,o));var s=n.substring(e.start2+e.length1,e.start2+e.length1+r);s&&e.diffs.push(new t.Diff(0,s)),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+s.length,e.length2+=o.length+s.length}},t.prototype.patch_make=function(e,i,r){var o,s;if("string"==typeof e&&"string"==typeof i&&"undefined"==typeof r)o=e,(s=this.diff_main(o,i,!0)).length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(e&&"object"==typeof e&&"undefined"==typeof i&&"undefined"==typeof r)s=e,o=this.diff_text1(s);else if("string"==typeof e&&i&&"object"==typeof i&&"undefined"==typeof r)o=e,s=i;else{if("string"!=typeof e||"string"!=typeof i||!r||"object"!=typeof r)throw new Error("Unknown call format to patch_make.");o=e,s=r}if(0===s.length)return[];for(var a=[],l=new t.patch_obj,c=0,u=0,d=0,h=o,f=o,p=0;p<s.length;p++){var g=s[p][0],m=s[p][1];switch(c||0===g||(l.start1=u,l.start2=d),g){case 1:l.diffs[c++]=s[p],l.length2+=m.length,f=f.substring(0,d)+m+f.substring(d);break;case n:l.length1+=m.length,l.diffs[c++]=s[p],f=f.substring(0,d)+f.substring(d+m.length);break;case 0:m.length<=2*this.Patch_Margin&&c&&s.length!=p+1?(l.diffs[c++]=s[p],l.length1+=m.length,l.length2+=m.length):m.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,h),a.push(l),l=new t.patch_obj,c=0,h=f,u=d)}1!==g&&(u+=m.length),g!==n&&(d+=m.length)}return c&&(this.patch_addContext_(l,h),a.push(l)),a},t.prototype.patch_deepCopy=function(e){for(var n=[],i=0;i<e.length;i++){var r=e[i],o=new t.patch_obj;o.diffs=[];for(var s=0;s<r.diffs.length;s++)o.diffs[s]=new t.Diff(r.diffs[s][0],r.diffs[s][1]);o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,n[i]=o}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var i=this.patch_addPadding(e);t=i+t+i,this.patch_splitMax(e);for(var r=0,o=[],s=0;s<e.length;s++){var a,l,c=e[s].start2+r,u=this.diff_text1(e[s].diffs),d=-1;if(u.length>this.Match_MaxBits?-1!=(a=this.match_main(t,u.substring(0,this.Match_MaxBits),c))&&(-1==(d=this.match_main(t,u.substring(u.length-this.Match_MaxBits),c+u.length-this.Match_MaxBits))||a>=d)&&(a=-1):a=this.match_main(t,u,c),-1==a)o[s]=!1,r-=e[s].length2-e[s].length1;else if(o[s]=!0,r=a-c,u==(l=-1==d?t.substring(a,a+u.length):t.substring(a,d+this.Match_MaxBits)))t=t.substring(0,a)+this.diff_text2(e[s].diffs)+t.substring(a+u.length);else{var h=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(h)/u.length>this.Patch_DeleteThreshold)o[s]=!1;else{this.diff_cleanupSemanticLossless(h);for(var f,p=0,g=0;g<e[s].diffs.length;g++){var m=e[s].diffs[g];0!==m[0]&&(f=this.diff_xIndex(h,p)),1===m[0]?t=t.substring(0,a+f)+m[1]+t.substring(a+f):m[0]===n&&(t=t.substring(0,a+f)+t.substring(a+this.diff_xIndex(h,p+m[1].length))),m[0]!==n&&(p+=m[1].length)}}}}return[t=t.substring(i.length,t.length-i.length),o]},t.prototype.patch_addPadding=function(e){for(var n=this.Patch_Margin,i="",r=1;r<=n;r++)i+=String.fromCharCode(r);for(r=0;r<e.length;r++)e[r].start1+=n,e[r].start2+=n;var o=e[0],s=o.diffs;if(0==s.length||0!=s[0][0])s.unshift(new t.Diff(0,i)),o.start1-=n,o.start2-=n,o.length1+=n,o.length2+=n;else if(n>s[0][1].length){var a=n-s[0][1].length;s[0][1]=i.substring(s[0][1].length)+s[0][1],o.start1-=a,o.start2-=a,o.length1+=a,o.length2+=a}if(0==(s=(o=e[e.length-1]).diffs).length||0!=s[s.length-1][0])s.push(new t.Diff(0,i)),o.length1+=n,o.length2+=n;else if(n>s[s.length-1][1].length){a=n-s[s.length-1][1].length;s[s.length-1][1]+=i.substring(0,a),o.length1+=a,o.length2+=a}return i},t.prototype.patch_splitMax=function(e){for(var i=this.Match_MaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=i)){var o=e[r];e.splice(r--,1);for(var s=o.start1,a=o.start2,l="";0!==o.diffs.length;){var c=new t.patch_obj,u=!0;for(c.start1=s-l.length,c.start2=a-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push(new t.Diff(0,l)));0!==o.diffs.length&&c.length1<i-this.Patch_Margin;){var d=o.diffs[0][0],h=o.diffs[0][1];1===d?(c.length2+=h.length,a+=h.length,c.diffs.push(o.diffs.shift()),u=!1):d===n&&1==c.diffs.length&&0==c.diffs[0][0]&&h.length>2*i?(c.length1+=h.length,s+=h.length,u=!1,c.diffs.push(new t.Diff(d,h)),o.diffs.shift()):(h=h.substring(0,i-c.length1-this.Patch_Margin),c.length1+=h.length,s+=h.length,0===d?(c.length2+=h.length,a+=h.length):u=!1,c.diffs.push(new t.Diff(d,h)),h==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(h.length))}l=(l=this.diff_text2(c.diffs)).substring(l.length-this.Patch_Margin);var f=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==f&&(c.length1+=f.length,c.length2+=f.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=f:c.diffs.push(new t.Diff(0,f))),u||e.splice(++r,0,c)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var i=[];if(!e)return i;for(var r=e.split("\n"),o=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<r.length;){var a=r[o].match(s);if(!a)throw new Error("Invalid patch string: "+r[o]);var l=new t.patch_obj;for(i.push(l),l.start1=parseInt(a[1],10),""===a[2]?(l.start1--,l.length1=1):"0"==a[2]?l.length1=0:(l.start1--,l.length1=parseInt(a[2],10)),l.start2=parseInt(a[3],10),""===a[4]?(l.start2--,l.length2=1):"0"==a[4]?l.length2=0:(l.start2--,l.length2=parseInt(a[4],10)),o++;o<r.length;){var c=r[o].charAt(0);try{var u=decodeURI(r[o].substring(1))}catch(d){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==c)l.diffs.push(new t.Diff(n,u));else if("+"==c)l.diffs.push(new t.Diff(1,u));else if(" "==c)l.diffs.push(new t.Diff(0,u));else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+u)}o++}}return i},(t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case 1:e="+";break;case n:e="-";break;case 0:e=" "}t[i+1]=e+encodeURI(this.diffs[i][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},6171:function(e){e.exports=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function n(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){var i="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=n(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o={exports:{}};function s(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function a(e){o.exports.defaults=e}o.exports={defaults:s(),getDefaults:s,changeDefaults:a};var l=/[&<>"']/,c=/[&<>"']/g,u=/[<>"']|&(?!#?\w+;)/,d=/[<>"']|&(?!#?\w+;)/g,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},f=function(e){return h[e]};function p(e,t){if(t){if(l.test(e))return e.replace(c,f)}else if(u.test(e))return e.replace(d,f);return e}var g=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function m(e){return e.replace(g,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var v=/(^|[^\[])\^/g;function y(e,t){e=e.source||e,t=t||"";var n={replace:function(t,i){return i=(i=i.source||i).replace(v,"$1"),e=e.replace(t,i),n},getRegex:function(){return new RegExp(e,t)}};return n}var b=/[^\w:]/g,w=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function _(e,t,n){if(e){var i;try{i=decodeURIComponent(m(n)).replace(b,"").toLowerCase()}catch(r){return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}t&&!w.test(n)&&(n=E(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(r){return null}return n}var x={},k=/^[^:]+:\/*[^/]*$/,C=/^([^:]+:)[\s\S]*$/,S=/^([^:]+:\/*[^/]*)[\s\S]*$/;function E(e,t){x[" "+e]||(k.test(e)?x[" "+e]=e+"/":x[" "+e]=M(e,"/",!0));var n=-1===(e=x[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(C,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(S,"$1")+t:e+t}function O(e){for(var t,n,i=1;i<arguments.length;i++)for(n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function A(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var i=!1,r=t;--r>=0&&"\\"===n[r];)i=!i;return i?"|":" |"})).split(/ \|/),i=0;if(n[0].trim()||n.shift(),n[n.length-1].trim()||n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function M(e,t,n){var i=e.length;if(0===i)return"";for(var r=0;r<i;){var o=e.charAt(i-r-1);if(o!==t||n){if(o===t||!n)break;r++}else r++}return e.substr(0,i-r)}function R(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,i=0,r=0;r<n;r++)if("\\"===e[r])r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&--i<0)return r;return-1}function T(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function D(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}var I={escape:p,unescape:m,edit:y,cleanUrl:_,resolveUrl:E,noopTest:{exec:function(){}},merge:O,splitCells:A,rtrim:M,findClosingBracket:R,checkSanitizeDeprecation:T,repeatString:D},L=o.exports.defaults,N=I.rtrim,F=I.splitCells,$=I.escape,P=I.findClosingBracket;function j(e,t,n,i){var r=t.href,o=t.title?$(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){i.state.inLink=!0;var a={type:"link",raw:n,href:r,title:o,text:s,tokens:i.inlineTokens(s,[])};return i.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:o,text:$(s)}}function B(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var i=n[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=i.length?e.slice(i.length):e})).join("\n")}var z=function(){function e(e){this.options=e||L}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e){var t=this.rules.block.code.exec(e);if(t){var n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:N(n,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],i=B(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:i}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var n=t[2].trim();if(/#$/.test(n)){var i=N(n,"#");this.options.pedantic?n=i.trim():i&&!/ $/.test(i)||(n=i.trim())}var r={type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:[]};return this.lexer.inline(r.text,r.tokens),r}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(n,[]),text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var n,i,r,o,s,a,l,c,u,d,h=t[1].trim(),f=h.length>1,p={type:"list",raw:"",ordered:f,start:f?+h.slice(0,-1):"",loose:!1,items:[]};h=f?"\\d{1,9}\\"+h.slice(-1):"\\"+h,this.options.pedantic&&(h=f?h:"[*+-]");for(var g=new RegExp("^( {0,3}"+h+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");e&&!this.rules.block.hr.test(e)&&(t=g.exec(e));){u=t[2].split("\n"),this.options.pedantic?(o=2,d=u[0].trimLeft()):(o=t[2].search(/[^ ]/),o=t[1].length+(o>4?1:o),d=u[0].slice(o-t[1].length)),a=!1,n=t[0],!u[0]&&/^ *$/.test(u[1])&&(n=t[1]+u.slice(0,2).join("\n")+"\n",p.loose=!0,u=[]);var m=new RegExp("^ {0,"+Math.min(3,o-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(s=1;s<u.length;s++){if(c=u[s],this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),m.test(c)){n=t[1]+u.slice(0,s).join("\n")+"\n";break}if(a){if(!(c.search(/[^ ]/)>=o)&&c.trim()){n=t[1]+u.slice(0,s).join("\n")+"\n";break}d+="\n"+c.slice(o)}else c.trim()||(a=!0),c.search(/[^ ]/)>=o?d+="\n"+c.slice(o):d+="\n"+c}p.loose||(l?p.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(d))&&(r="[ ] "!==i[0],d=d.replace(/^\[[ xX]\] +/,"")),p.items.push({type:"list_item",raw:n,task:!!i,checked:r,loose:!1,text:d}),p.raw+=n,e=e.slice(n.length)}p.items[p.items.length-1].raw=n.trimRight(),p.items[p.items.length-1].text=d.trimRight(),p.raw=p.raw.trimRight();var v=p.items.length;for(s=0;s<v;s++)this.lexer.state.top=!1,p.items[s].tokens=this.lexer.blockTokens(p.items[s].text,[]),p.items[s].tokens.some((function(e){return"space"===e.type}))&&(p.loose=!0,p.items[s].loose=!0);return p}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t){var n={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(n.type="paragraph",n.text=this.options.sanitizer?this.options.sanitizer(t[0]):$(t[0]),n.tokens=[],this.lexer.inline(n.text,n.tokens)),n}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:F(t[1]).map((function(e){return{text:e}})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var i,r,o,s,a=n.align.length;for(i=0;i<a;i++)/^ *-+: *$/.test(n.align[i])?n.align[i]="right":/^ *:-+: *$/.test(n.align[i])?n.align[i]="center":/^ *:-+ *$/.test(n.align[i])?n.align[i]="left":n.align[i]=null;for(a=n.rows.length,i=0;i<a;i++)n.rows[i]=F(n.rows[i],n.header.length).map((function(e){return{text:e}}));for(a=n.header.length,r=0;r<a;r++)n.header[r].tokens=[],this.lexer.inlineTokens(n.header[r].text,n.header[r].tokens);for(a=n.rows.length,r=0;r<a;r++)for(s=n.rows[r],o=0;o<s.length;o++)s[o].tokens=[],this.lexer.inlineTokens(s[o].text,s[o].tokens);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t){var n={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t){var n={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}},t.text=function(e){var t=this.rules.block.text.exec(e);if(t){var n={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:$(t[1])}},t.tag=function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):$(t[0]):t[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var i=N(n.slice(0,-1),"\\");if((n.length-i.length)%2===0)return}else{var r=P(t[2],"()");if(r>-1){var o=(0===t[0].indexOf("!")?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,o).trim(),t[3]=""}}var s=t[2],a="";if(this.options.pedantic){var l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);l&&(s=l[1],a=l[3])}else a=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(n)?s.slice(1):s.slice(1,-1)),j(t,{href:s?s.replace(this.rules.inline._escapes,"$1"):s,title:a?a.replace(this.rules.inline._escapes,"$1"):a},t[0],this.lexer)}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var i=(n[2]||n[1]).replace(/\s+/g," ");if(!(i=t[i.toLowerCase()])||!i.href){var r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return j(n,i,n[0],this.lexer)}},t.emStrong=function(e,t,n){void 0===n&&(n="");var i=this.rules.inline.emStrong.lDelim.exec(e);if(i&&(!i[3]||!n.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var r=i[1]||i[2]||"";if(!r||r&&(""===n||this.rules.inline.punctuation.exec(n))){var o,s,a=i[0].length-1,l=a,c=0,u="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+a);null!=(i=u.exec(t));)if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6])if(s=o.length,i[3]||i[4])l+=s;else if(!((i[5]||i[6])&&a%3)||(a+s)%3){if(!((l-=s)>0)){if(s=Math.min(s,s+l+c),Math.min(a,s)%2){var d=e.slice(1,a+i.index+s);return{type:"em",raw:e.slice(0,a+i.index+s+1),text:d,tokens:this.lexer.inlineTokens(d,[])}}var h=e.slice(2,a+i.index+s-1);return{type:"strong",raw:e.slice(0,a+i.index+s+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}}else c+=s}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),i=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return i&&r&&(n=n.substring(1,n.length-1)),n=$(n,!0),{type:"codespan",raw:t[0],text:n}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}},t.autolink=function(e,t){var n,i,r=this.rules.inline.autolink.exec(e);if(r)return i="@"===r[2]?"mailto:"+(n=$(this.options.mangle?t(r[1]):r[1])):n=$(r[1]),{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var i,r;if("@"===n[2])r="mailto:"+(i=$(this.options.mangle?t(n[0]):n[0]));else{var o;do{o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(o!==n[0]);i=$(n[0]),r="www."===n[1]?"http://"+i:i}return{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}},t.inlineText=function(e,t){var n,i=this.rules.inline.text.exec(e);if(i)return n=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):$(i[0]):i[0]:$(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:n}},e}(),U=I.noopTest,V=I.edit,W=I.merge,H={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:U,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};H.def=V(H.def).replace("label",H._label).replace("title",H._title).getRegex(),H.bullet=/(?:[*+-]|\d{1,9}[.)])/,H.listItemStart=V(/^( *)(bull) */).replace("bull",H.bullet).getRegex(),H.list=V(H.list).replace(/bull/g,H.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+H.def.source+")").getRegex(),H._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",H._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,H.html=V(H.html,"i").replace("comment",H._comment).replace("tag",H._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),H.paragraph=V(H._paragraph).replace("hr",H.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",H._tag).getRegex(),H.blockquote=V(H.blockquote).replace("paragraph",H.paragraph).getRegex(),H.normal=W({},H),H.gfm=W({},H.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),H.gfm.table=V(H.gfm.table).replace("hr",H.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",H._tag).getRegex(),H.pedantic=W({},H.normal,{html:V("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",H._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:U,paragraph:V(H.normal._paragraph).replace("hr",H.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",H.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var q={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:U,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:U,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};q.punctuation=V(q.punctuation).replace(/punctuation/g,q._punctuation).getRegex(),q.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,q.escapedEmSt=/\\\*|\\_/g,q._comment=V(H._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),q.emStrong.lDelim=V(q.emStrong.lDelim).replace(/punct/g,q._punctuation).getRegex(),q.emStrong.rDelimAst=V(q.emStrong.rDelimAst,"g").replace(/punct/g,q._punctuation).getRegex(),q.emStrong.rDelimUnd=V(q.emStrong.rDelimUnd,"g").replace(/punct/g,q._punctuation).getRegex(),q._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,q._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,q._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,q.autolink=V(q.autolink).replace("scheme",q._scheme).replace("email",q._email).getRegex(),q._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,q.tag=V(q.tag).replace("comment",q._comment).replace("attribute",q._attribute).getRegex(),q._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,q._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,q._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,q.link=V(q.link).replace("label",q._label).replace("href",q._href).replace("title",q._title).getRegex(),q.reflink=V(q.reflink).replace("label",q._label).getRegex(),q.reflinkSearch=V(q.reflinkSearch,"g").replace("reflink",q.reflink).replace("nolink",q.nolink).getRegex(),q.normal=W({},q),q.pedantic=W({},q.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:V(/^!?\[(label)\]\((.*?)\)/).replace("label",q._label).getRegex(),reflink:V(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",q._label).getRegex()}),q.gfm=W({},q.normal,{escape:V(q.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),q.gfm.url=V(q.gfm.url,"i").replace("email",q.gfm._extended_email).getRegex(),q.breaks=W({},q.gfm,{br:V(q.br).replace("{2,}","*").getRegex(),text:V(q.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var G={block:H,inline:q},K=z,Y=o.exports.defaults,J=G.block,X=G.inline,Q=I.repeatString;function Z(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function ee(e){var t,n,i="",r=e.length;for(t=0;t<r;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),i+="&#"+n+";";return i}var te=function(){function e(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Y,this.options.tokenizer=this.options.tokenizer||new K,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var t={block:J.normal,inline:X.normal};this.options.pedantic?(t.block=J.pedantic,t.inline=X.pedantic):this.options.gfm&&(t.block=J.gfm,this.options.breaks?t.inline=X.breaks:t.inline=X.gfm),this.tokenizer.rules=t}e.lex=function(t,n){return new e(n).lex(t)},e.lexInline=function(t,n){return new e(n).inlineTokens(t)};var n=e.prototype;return n.lex=function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens},n.blockTokens=function(e,t){var n,i,r,o,s=this;for(void 0===t&&(t=[]),this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(i){return!!(n=i.call({lexer:s},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)}))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),n.type&&t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),!(i=t[t.length-1])||"paragraph"!==i.type&&"text"!==i.type?t.push(n):(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),!(i=t[t.length-1])||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(i.raw+="\n"+n.raw,i.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else if(r=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var t=1/0,n=e.slice(1),i=void 0;s.options.extensions.startBlock.forEach((function(e){"number"===typeof(i=e.call({lexer:this},n))&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}(),this.state.top&&(n=this.tokenizer.paragraph(r)))i=t[t.length-1],o&&"paragraph"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n),o=r.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);else if(e){var a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}return this.state.top=!0,t},n.inline=function(e,t){this.inlineQueue.push({src:e,tokens:t})},n.inlineTokens=function(e,t){var n,i,r,o=this;void 0===t&&(t=[]);var s,a,l,c=e;if(this.tokens.links){var u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(c));)u.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,s.index)+"["+Q("a",s[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(s=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,s.index)+"["+Q("a",s[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(s=this.tokenizer.rules.inline.escapedEmSt.exec(c));)c=c.slice(0,s.index)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(a||(l=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(i){return!!(n=i.call({lexer:o},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)}))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,c,l))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e,ee))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e,ee))){if(r=e,this.options.extensions&&this.options.extensions.startInline&&function(){var t=1/0,n=e.slice(1),i=void 0;o.options.extensions.startInline.forEach((function(e){"number"===typeof(i=e.call({lexer:this},n))&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}(),n=this.tokenizer.inlineText(r,Z))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(l=n.raw.slice(-1)),a=!0,(i=t[t.length-1])&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);else if(e){var d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}else e=e.substring(n.raw.length),t.push(n);return t},t(e,null,[{key:"rules",get:function(){return{block:J,inline:X}}}]),e}(),ne=o.exports.defaults,ie=I.cleanUrl,re=I.escape,oe=function(){function e(e){this.options=e||ne}var t=e.prototype;return t.code=function(e,t,n){var i=(t||"").match(/\S*/)[0];if(this.options.highlight){var r=this.options.highlight(e,i);null!=r&&r!==e&&(n=!0,e=r)}return e=e.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+re(i,!0)+'">'+(n?e:re(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:re(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,n,i){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+i.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,n){var i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+i+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,n){if(null===(e=ie(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<a href="'+re(e)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>"},t.image=function(e,t,n){if(null===(e=ie(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},t.text=function(e){return e},e}(),se=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),ae=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do{n=e+"-"+ ++i}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=i,this.seen[n]=0),n},t.slug=function(e,t){void 0===t&&(t={});var n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)},e}(),le=oe,ce=se,ue=ae,de=o.exports.defaults,he=I.unescape,fe=function(){function e(e){this.options=e||de,this.options.renderer=this.options.renderer||new le,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ce,this.slugger=new ue}e.parse=function(t,n){return new e(n).parse(t)},e.parseInline=function(t,n){return new e(n).parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var n,i,r,o,s,a,l,c,u,d,h,f,p,g,m,v,y,b,w,_="",x=e.length;for(n=0;n<x;n++)if(d=e[n],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type])||!1===(w=this.options.extensions.renderers[d.type].call({parser:this},d))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type))switch(d.type){case"space":continue;case"hr":_+=this.renderer.hr();continue;case"heading":_+=this.renderer.heading(this.parseInline(d.tokens),d.depth,he(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":_+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(c="",l="",o=d.header.length,i=0;i<o;i++)l+=this.renderer.tablecell(this.parseInline(d.header[i].tokens),{header:!0,align:d.align[i]});for(c+=this.renderer.tablerow(l),u="",o=d.rows.length,i=0;i<o;i++){for(l="",s=(a=d.rows[i]).length,r=0;r<s;r++)l+=this.renderer.tablecell(this.parseInline(a[r].tokens),{header:!1,align:d.align[r]});u+=this.renderer.tablerow(l)}_+=this.renderer.table(c,u);continue;case"blockquote":u=this.parse(d.tokens),_+=this.renderer.blockquote(u);continue;case"list":for(h=d.ordered,f=d.start,p=d.loose,o=d.items.length,u="",i=0;i<o;i++)v=(m=d.items[i]).checked,y=m.task,g="",m.task&&(b=this.renderer.checkbox(v),p?m.tokens.length>0&&"paragraph"===m.tokens[0].type?(m.tokens[0].text=b+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=b+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:b}):g+=b),g+=this.parse(m.tokens,p),u+=this.renderer.listitem(g,y,v);_+=this.renderer.list(u,h,f);continue;case"html":_+=this.renderer.html(d.text);continue;case"paragraph":_+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(u=d.tokens?this.parseInline(d.tokens):d.text;n+1<x&&"text"===e[n+1].type;)u+="\n"+((d=e[++n]).tokens?this.parseInline(d.tokens):d.text);_+=t?this.renderer.paragraph(u):u;continue;default:var k='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(k);throw new Error(k)}else _+=w||"";return _},t.parseInline=function(e,t){t=t||this.renderer;var n,i,r,o="",s=e.length;for(n=0;n<s;n++)if(i=e[n],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type])||!1===(r=this.options.extensions.renderers[i.type].call({parser:this},i))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type))switch(i.type){case"escape":case"text":o+=t.text(i.text);break;case"html":o+=t.html(i.text);break;case"link":o+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break;case"image":o+=t.image(i.href,i.title,i.text);break;case"strong":o+=t.strong(this.parseInline(i.tokens,t));break;case"em":o+=t.em(this.parseInline(i.tokens,t));break;case"codespan":o+=t.codespan(i.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(i.tokens,t));break;default:var a='Token with "'+i.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}else o+=r||"";return o},e}(),pe=te,ge=fe,me=z,ve=oe,ye=se,be=ae,we=I.merge,_e=I.checkSanitizeDeprecation,xe=I.escape,ke=o.exports.getDefaults,Ce=o.exports.changeDefaults,Se=o.exports.defaults;function Ee(e,t,n){if("undefined"===typeof e||null===e)throw new Error("marked(): input parameter is undefined or null");if("string"!==typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"===typeof t&&(n=t,t=null),t=we({},Ee.defaults,t||{}),_e(t),n){var i,r=t.highlight;try{i=pe.lex(e,t)}catch(l){return n(l)}var o=function(e){var o;if(!e)try{t.walkTokens&&Ee.walkTokens(i,t.walkTokens),o=ge.parse(i,t)}catch(l){e=l}return t.highlight=r,e?n(e):n(null,o)};if(!r||r.length<3)return o();if(delete t.highlight,!i.length)return o();var s=0;return Ee.walkTokens(i,(function(e){"code"===e.type&&(s++,setTimeout((function(){r(e.text,e.lang,(function(t,n){if(t)return o(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),0===--s&&o()}))}),0))})),void(0===s&&o())}try{var a=pe.lex(e,t);return t.walkTokens&&Ee.walkTokens(a,t.walkTokens),ge.parse(a,t)}catch(l){if(l.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+xe(l.message+"",!0)+"</pre>";throw l}}return Ee.options=Ee.setOptions=function(e){return we(Ee.defaults,e),Ce(Ee.defaults),Ee},Ee.getDefaults=ke,Ee.defaults=Se,Ee.use=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r=we.apply(void 0,[{}].concat(t)),o=Ee.defaults.extensions||{renderers:{},childTokens:{}};t.forEach((function(e){if(e.extensions&&(i=!0,e.extensions.forEach((function(e){if(!e.name)throw new Error("extension name required");if(e.renderer){var t=o.renderers?o.renderers[e.name]:null;o.renderers[e.name]=t?function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=e.renderer.apply(this,i);return!1===o&&(o=t.apply(this,i)),o}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");o[e.level]?o[e.level].unshift(e.tokenizer):o[e.level]=[e.tokenizer],e.start&&("block"===e.level?o.startBlock?o.startBlock.push(e.start):o.startBlock=[e.start]:"inline"===e.level&&(o.startInline?o.startInline.push(e.start):o.startInline=[e.start]))}e.childTokens&&(o.childTokens[e.name]=e.childTokens)}))),e.renderer&&function(){var t=Ee.defaults.renderer||new ve,n=function(n){var i=t[n];t[n]=function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var a=e.renderer[n].apply(t,o);return!1===a&&(a=i.apply(t,o)),a}};for(var i in e.renderer)n(i);r.renderer=t}(),e.tokenizer&&function(){var t=Ee.defaults.tokenizer||new me,n=function(n){var i=t[n];t[n]=function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var a=e.tokenizer[n].apply(t,o);return!1===a&&(a=i.apply(t,o)),a}};for(var i in e.tokenizer)n(i);r.tokenizer=t}(),e.walkTokens){var t=Ee.defaults.walkTokens;r.walkTokens=function(n){e.walkTokens.call(this,n),t&&t.call(this,n)}}i&&(r.extensions=o),Ee.setOptions(r)}))},Ee.walkTokens=function(e,t){for(var n,i=function(){var e=n.value;switch(t.call(Ee,e),e.type){case"table":for(var i,o=r(e.header);!(i=o()).done;){var s=i.value;Ee.walkTokens(s.tokens,t)}for(var a,l=r(e.rows);!(a=l()).done;)for(var c,u=r(a.value);!(c=u()).done;){var d=c.value;Ee.walkTokens(d.tokens,t)}break;case"list":Ee.walkTokens(e.items,t);break;default:Ee.defaults.extensions&&Ee.defaults.extensions.childTokens&&Ee.defaults.extensions.childTokens[e.type]?Ee.defaults.extensions.childTokens[e.type].forEach((function(n){Ee.walkTokens(e[n],t)})):e.tokens&&Ee.walkTokens(e.tokens,t)}},o=r(e);!(n=o()).done;)i()},Ee.parseInline=function(e,t){if("undefined"===typeof e||null===e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!==typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=we({},Ee.defaults,t||{}),_e(t);try{var n=pe.lexInline(e,t);return t.walkTokens&&Ee.walkTokens(n,t.walkTokens),ge.parseInline(n,t)}catch(i){if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+xe(i.message+"",!0)+"</pre>";throw i}},Ee.Parser=ge,Ee.parser=ge.parse,Ee.Renderer=ve,Ee.TextRenderer=ye,Ee.Lexer=pe,Ee.lexer=pe.lex,Ee.Tokenizer=me,Ee.Slugger=be,Ee.parse=Ee,Ee}()},713:function(e,t,n){var i=n(3668);i.commands.tabAndIndentMarkdownList=function(e){var t=e.listSelections()[0].head;if(!1!==e.getStateAfter(t.line).list)e.execCommand("indentMore");else if(e.options.indentWithTabs)e.execCommand("insertTab");else{var n=Array(e.options.tabSize+1).join(" ");e.replaceSelection(n)}},i.commands.shiftTabAndUnindentMarkdownList=function(e){var t=e.listSelections()[0].head;if(!1!==e.getStateAfter(t.line).list)e.execCommand("indentLess");else if(e.options.indentWithTabs)e.execCommand("insertTab");else{var n=Array(e.options.tabSize+1).join(" ");e.replaceSelection(n)}}},3671:function(e,t,n){"use strict";var i=n(3668);n(1292),n(713),n(4153),n(3548),n(1357),n(4017),n(7762),n(4911),n(6849),n(7976),n(9029);var r=n(525),o=n(6171),s=/Mac/.test(navigator.platform),a=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),l={toggleBold:x,toggleItalic:k,drawLink:N,toggleHeadingSmaller:O,toggleHeadingBigger:A,drawImage:F,toggleBlockquote:E,toggleOrderedList:I,toggleUnorderedList:D,toggleCodeBlock:S,togglePreview:W,toggleStrikethrough:C,toggleHeading1:M,toggleHeading2:R,toggleHeading3:T,cleanBlock:L,drawTable:j,drawHorizontalRule:B,undo:z,redo:U,toggleSideBySide:V,toggleFullScreen:_},c={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},u=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t};function d(e){return e=s?e.replace("Ctrl","Cmd"):e.replace("Cmd","Ctrl")}var h={};function f(e){return h[e]||(h[e]=new RegExp("\\s*"+e+"(\\s*)","g"))}function p(e,t){if(e&&t){var n=f(t);e.className.match(n)||(e.className+=" "+t)}}function g(e,t){if(e&&t){var n=f(t);e.className.match(n)&&(e.className=e.className.replace(n,"$1"))}}function m(e,t,n,i){var r=v(e,!1,t,n,"button",i);r.className+=" easymde-dropdown",r.onclick=function(){r.focus()};var o=document.createElement("div");o.className="easymde-dropdown-content";for(var s=0;s<e.children.length;s++){var a,l=e.children[s];(a=v("string"===typeof l&&l in Z?Z[l]:l,!0,t,n,"button",i)).addEventListener("click",(function(e){e.stopPropagation()}),!1),o.appendChild(a)}return r.appendChild(o),r}function v(e,t,n,i,r,o){e=e||{};var a=document.createElement(r);if(e.attributes)for(var c in e.attributes)Object.prototype.hasOwnProperty.call(e.attributes,c)&&a.setAttribute(c,e.attributes[c]);a.className=e.name,a.setAttribute("type",r),n=void 0==n||n,e.name&&e.name in i&&(l[e.name]=e.action),e.title&&n&&(a.title=function(e,t,n){var i,r=e;t&&n[i=function(e){for(var t in l)if(l[t]===e)return t;return null}(t)]&&(r+=" ("+d(n[i])+")");return r}(e.title,e.action,i),s&&(a.title=a.title.replace("Ctrl","\u2318"),a.title=a.title.replace("Alt","\u2325"))),e.noDisable&&a.classList.add("no-disable"),e.noMobile&&a.classList.add("no-mobile");var u=[];"undefined"!==typeof e.className&&(u=e.className.split(" "));for(var h=[],f=0;f<u.length;f++){var p=u[f];p.match(/^fa([srlb]|(-[\w-]*)|$)/)?h.push(p):a.classList.add(p)}a.tabIndex=-1;for(var g=document.createElement("i"),m=0;m<h.length;m++){var v=h[m];g.classList.add(v)}return a.appendChild(g),"undefined"!==typeof e.icon&&(a.innerHTML=e.icon),e.action&&t&&("function"===typeof e.action?a.onclick=function(t){t.preventDefault(),e.action(o)}:"string"===typeof e.action&&(a.onclick=function(t){t.preventDefault(),window.open(e.action,"_blank")})),a}function y(){var e=document.createElement("i");return e.className="separator",e.innerHTML="|",e}function b(e,t){t=t||e.getCursor("start");var n=e.getTokenAt(t);if(!n.type)return{};for(var i,r,o=n.type.split(" "),s={},a=0;a<o.length;a++)"strong"===(i=o[a])?s.bold=!0:"variable-2"===i?(r=e.getLine(t.line),/^\s*\d+\.\s/.test(r)?s["ordered-list"]=!0:s["unordered-list"]=!0):"atom"===i?s.quote=!0:"em"===i?s.italic=!0:"quote"===i?s.quote=!0:"strikethrough"===i?s.strikethrough=!0:"comment"===i?s.code=!0:"link"===i?s.link=!0:"tag"===i?s.image=!0:i.match(/^header(-[1-6])?$/)&&(s[i.replace("header","heading")]=!0);return s}var w="";function _(e){var t=e.codemirror;t.setOption("fullScreen",!t.getOption("fullScreen")),t.getOption("fullScreen")?(w=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=w;var n=t.getWrapperElement(),i=n.nextSibling;if(/editor-preview-active-side/.test(i.className))if(!1===e.options.sideBySideFullscreen){var r=n.parentNode;t.getOption("fullScreen")?g(r,"sided--no-fullscreen"):p(r,"sided--no-fullscreen")}else V(e);if(e.options.onToggleFullScreen&&e.options.onToggleFullScreen(t.getOption("fullScreen")||!1),"undefined"!==typeof e.options.maxHeight&&(t.getOption("fullScreen")?(t.getScrollerElement().style.removeProperty("height"),i.style.removeProperty("height")):(t.getScrollerElement().style.height=e.options.maxHeight,e.setPreviewMaxHeight())),/fullscreen/.test(e.toolbar_div.className)?e.toolbar_div.className=e.toolbar_div.className.replace(/\s*fullscreen\b/,""):e.toolbar_div.className+=" fullscreen",e.toolbarElements&&e.toolbarElements.fullscreen){var o=e.toolbarElements.fullscreen;/active/.test(o.className)?o.className=o.className.replace(/\s*active\s*/g,""):o.className+=" active"}}function x(e){K(e,"bold",e.options.blockStyles.bold)}function k(e){K(e,"italic",e.options.blockStyles.italic)}function C(e){K(e,"strikethrough","~~")}function S(e){var t=e.options.blockStyles.code;function n(e){if("object"!==typeof e)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof e+": "+e;return e.styles&&e.styles[2]&&-1!==e.styles[2].indexOf("formatting-code-block")}function i(e){return e.state.base.base||e.state.base}function r(e,t,r,o,s){r=r||e.getLineHandle(t),o=o||e.getTokenAt({line:t,ch:1}),s=s||!!r.text&&e.getTokenAt({line:t,ch:r.text.length-1});var a=o.type?o.type.split(" "):[];return s&&i(s).indentedCode?"indented":-1!==a.indexOf("comment")&&(i(o).fencedChars||i(s).fencedChars||n(r)?"fenced":"single")}var o,s,a,l=e.codemirror,c=l.getCursor("start"),u=l.getCursor("end"),d=l.getTokenAt({line:c.line,ch:c.ch||1}),h=l.getLineHandle(c.line),f=r(l,c.line,h,d);if("single"===f){var p=h.text.slice(0,c.ch).replace("`",""),g=h.text.slice(c.ch).replace("`","");l.replaceRange(p+g,{line:c.line,ch:0},{line:c.line,ch:99999999999999}),c.ch--,c!==u&&u.ch--,l.setSelection(c,u),l.focus()}else if("fenced"===f)if(c.line!==u.line||c.ch!==u.ch){for(o=c.line;o>=0&&!n(h=l.getLineHandle(o));o--);var m,v,y,b,w=i(l.getTokenAt({line:o,ch:1})).fencedChars;n(l.getLineHandle(c.line))?(m="",v=c.line):n(l.getLineHandle(c.line-1))?(m="",v=c.line-1):(m=w+"\n",v=c.line),n(l.getLineHandle(u.line))?(y="",b=u.line,0===u.ch&&(b+=1)):0!==u.ch&&n(l.getLineHandle(u.line+1))?(y="",b=u.line+1):(y=w+"\n",b=u.line+1),0===u.ch&&(b-=1),l.operation((function(){l.replaceRange(y,{line:b,ch:0},{line:b+(y?0:1),ch:0}),l.replaceRange(m,{line:v,ch:0},{line:v+(m?0:1),ch:0})})),l.setSelection({line:v+(m?1:0),ch:0},{line:b+(m?1:-1),ch:0}),l.focus()}else{var _=c.line;if(n(l.getLineHandle(c.line))&&("fenced"===r(l,c.line+1)?(o=c.line,_=c.line+1):(s=c.line,_=c.line-1)),void 0===o)for(o=_;o>=0&&!n(h=l.getLineHandle(o));o--);if(void 0===s)for(a=l.lineCount(),s=_;s<a&&!n(h=l.getLineHandle(s));s++);l.operation((function(){l.replaceRange("",{line:o,ch:0},{line:o+1,ch:0}),l.replaceRange("",{line:s-1,ch:0},{line:s,ch:0})})),l.focus()}else if("indented"===f){if(c.line!==u.line||c.ch!==u.ch)o=c.line,s=u.line,0===u.ch&&s--;else{for(o=c.line;o>=0;o--)if(!(h=l.getLineHandle(o)).text.match(/^\s*$/)&&"indented"!==r(l,o,h)){o+=1;break}for(a=l.lineCount(),s=c.line;s<a;s++)if(!(h=l.getLineHandle(s)).text.match(/^\s*$/)&&"indented"!==r(l,s,h)){s-=1;break}}var x=l.getLineHandle(s+1),k=x&&l.getTokenAt({line:s+1,ch:x.text.length-1});k&&i(k).indentedCode&&l.replaceRange("\n",{line:s+1,ch:0});for(var C=o;C<=s;C++)l.indentLine(C,"subtract");l.focus()}else{var S=c.line===u.line&&c.ch===u.ch&&0===c.ch,E=c.line!==u.line;S||E?function(e,t,n,i){var r=t.line+1,o=n.line+1,s=t.line!==n.line,a=i+"\n",l="\n"+i;s&&o++,s&&0===n.ch&&(l=i+"\n",o--),H(e,!1,[a,l]),e.setSelection({line:r,ch:0},{line:o,ch:0})}(l,c,u,t):H(l,!1,["`","`"])}}function E(e){G(e.codemirror,"quote")}function O(e){q(e.codemirror,"smaller")}function A(e){q(e.codemirror,"bigger")}function M(e){q(e.codemirror,void 0,1)}function R(e){q(e.codemirror,void 0,2)}function T(e){q(e.codemirror,void 0,3)}function D(e){var t=e.codemirror,n="*";["-","+","*"].includes(e.options.unorderedListStyle)&&(n=e.options.unorderedListStyle),G(t,"unordered-list",n)}function I(e){G(e.codemirror,"ordered-list")}function L(e){!function(e){if(/editor-preview-active/.test(e.getWrapperElement().lastChild.className))return;for(var t,n=e.getCursor("start"),i=e.getCursor("end"),r=n.line;r<=i.line;r++)t=(t=e.getLine(r)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),e.replaceRange(t,{line:r,ch:0},{line:r,ch:99999999999999})}(e.codemirror)}function N(e){var t=e.codemirror,n=b(t),i=e.options,r="https://";if(i.promptURLs&&!(r=prompt(i.promptTexts.link,"https://")))return!1;H(t,n.link,i.insertTexts.link,r)}function F(e){var t=e.codemirror,n=b(t),i=e.options,r="https://";if(i.promptURLs&&!(r=prompt(i.promptTexts.image,"https://")))return!1;H(t,n.image,i.insertTexts.image,r)}function $(e){e.openBrowseFileWindow()}function P(e,t){var n=e.codemirror,i=b(n),r=e.options,o=t.substr(t.lastIndexOf("/")+1),s=o.substring(o.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg"].includes(s))H(n,i.image,r.insertTexts.uploadedImage,t);else{var a=r.insertTexts.link;a[0]="["+o,H(n,i.link,a,t)}e.updateStatusBar("upload-image",e.options.imageTexts.sbOnUploaded.replace("#image_name#",o)),setTimeout((function(){e.updateStatusBar("upload-image",e.options.imageTexts.sbInit)}),1e3)}function j(e){var t=e.codemirror,n=b(t),i=e.options;H(t,n.table,i.insertTexts.table)}function B(e){var t=e.codemirror,n=b(t),i=e.options;H(t,n.image,i.insertTexts.horizontalRule)}function z(e){var t=e.codemirror;t.undo(),t.focus()}function U(e){var t=e.codemirror;t.redo(),t.focus()}function V(e){var t=e.codemirror,n=t.getWrapperElement(),i=n.nextSibling,r=e.toolbarElements&&e.toolbarElements["side-by-side"],o=!1,s=n.parentNode;/editor-preview-active-side/.test(i.className)?(!1===e.options.sideBySideFullscreen&&g(s,"sided--no-fullscreen"),i.className=i.className.replace(/\s*editor-preview-active-side\s*/g,""),r&&(r.className=r.className.replace(/\s*active\s*/g,"")),n.className=n.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout((function(){t.getOption("fullScreen")||(!1===e.options.sideBySideFullscreen?p(s,"sided--no-fullscreen"):_(e)),i.className+=" editor-preview-active-side"}),1),r&&(r.className+=" active"),n.className+=" CodeMirror-sided",o=!0);var a=n.lastChild;if(/editor-preview-active/.test(a.className)){a.className=a.className.replace(/\s*editor-preview-active\s*/g,"");var l=e.toolbarElements.preview,c=e.toolbar_div;l.className=l.className.replace(/\s*active\s*/g,""),c.className=c.className.replace(/\s*disabled-for-preview*/g,"")}if(t.sideBySideRenderingFunction||(t.sideBySideRenderingFunction=function(){var t=e.options.previewRender(e.value(),i);null!=t&&(i.innerHTML=t)}),o){var u=e.options.previewRender(e.value(),i);null!=u&&(i.innerHTML=u),t.on("update",t.sideBySideRenderingFunction)}else t.off("update",t.sideBySideRenderingFunction);t.refresh()}function W(e){var t=e.codemirror,n=t.getWrapperElement(),i=e.toolbar_div,r=!!e.options.toolbar&&e.toolbarElements.preview,o=n.lastChild,s=t.getWrapperElement().nextSibling;if(/editor-preview-active-side/.test(s.className)&&V(e),!o||!/editor-preview-full/.test(o.className)){if((o=document.createElement("div")).className="editor-preview-full",e.options.previewClass)if(Array.isArray(e.options.previewClass))for(var a=0;a<e.options.previewClass.length;a++)o.className+=" "+e.options.previewClass[a];else"string"===typeof e.options.previewClass&&(o.className+=" "+e.options.previewClass);n.appendChild(o)}/editor-preview-active/.test(o.className)?(o.className=o.className.replace(/\s*editor-preview-active\s*/g,""),r&&(r.className=r.className.replace(/\s*active\s*/g,""),i.className=i.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout((function(){o.className+=" editor-preview-active"}),1),r&&(r.className+=" active",i.className+=" disabled-for-preview")),o.innerHTML=e.options.previewRender(e.value(),o)}function H(e,t,n,i){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){var r,o=n[0],s=n[1],a={},l={};Object.assign(a,e.getCursor("start")),Object.assign(l,e.getCursor("end")),i&&(o=o.replace("#url#",i),s=s.replace("#url#",i)),t?(o=(r=e.getLine(a.line)).slice(0,a.ch),s=r.slice(a.ch),e.replaceRange(o+s,{line:a.line,ch:0})):(r=e.getSelection(),e.replaceSelection(o+r+s),a.ch+=o.length,a!==l&&(l.ch+=o.length)),e.setSelection(a,l),e.focus()}}function q(e,t,n){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var i=e.getCursor("start"),r=e.getCursor("end"),o=i.line;o<=r.line;o++)!function(i){var r=e.getLine(i),o=r.search(/[^#]/);r=void 0!==t?o<=0?"bigger"==t?"###### "+r:"# "+r:6==o&&"smaller"==t?r.substr(7):1==o&&"bigger"==t?r.substr(2):"bigger"==t?r.substr(1):"#"+r:1==n?o<=0?"# "+r:o==n?r.substr(o+1):"# "+r.substr(o+1):2==n?o<=0?"## "+r:o==n?r.substr(o+1):"## "+r.substr(o+1):o<=0?"### "+r:o==n?r.substr(o+1):"### "+r.substr(o+1),e.replaceRange(r,{line:i,ch:0},{line:i,ch:99999999999999})}(o);e.focus()}}function G(e,t,n){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var i=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,r=/^\s*/,o=b(e),s=e.getCursor("start"),a=e.getCursor("end"),l={quote:/^(\s*)>\s+/,"unordered-list":i,"ordered-list":i},c=function(e,t,o){var s=i.exec(t),a=function(e,t){return{quote:">","unordered-list":n,"ordered-list":"%%i."}[e].replace("%%i",t)}(e,u);return null!==s?(function(e,t){var i=new RegExp({quote:">","unordered-list":"\\"+n,"ordered-list":"\\d+."}[e]);return t&&i.test(t)}(e,s[2])&&(a=""),t=s[1]+a+s[3]+t.replace(r,"").replace(l[e],"$1")):0==o&&(t=a+" "+t),t},u=1,d=s.line;d<=a.line;d++)!function(n){var i=e.getLine(n);o[t]?i=i.replace(l[t],"$1"):("unordered-list"==t&&(i=c("ordered-list",i,!0)),i=c(t,i,!1),u+=1),e.replaceRange(i,{line:n,ch:0},{line:n,ch:99999999999999})}(d);e.focus()}}function K(e,t,n,i){if(!/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)){i="undefined"===typeof i?n:i;var r,o=e.codemirror,s=b(o),a=n,l=i,c=o.getCursor("start"),u=o.getCursor("end");s[t]?(a=(r=o.getLine(c.line)).slice(0,c.ch),l=r.slice(c.ch),"bold"==t?(a=a.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),l=l.replace(/(\*\*|__)/,"")):"italic"==t?(a=a.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),l=l.replace(/(\*|_)/,"")):"strikethrough"==t&&(a=a.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),l=l.replace(/(\*\*|~~)/,"")),o.replaceRange(a+l,{line:c.line,ch:0},{line:c.line,ch:99999999999999}),"bold"==t||"strikethrough"==t?(c.ch-=2,c!==u&&(u.ch-=2)):"italic"==t&&(c.ch-=1,c!==u&&(u.ch-=1))):(r=o.getSelection(),"bold"==t?r=(r=r.split("**").join("")).split("__").join(""):"italic"==t?r=(r=r.split("*").join("")).split("_").join(""):"strikethrough"==t&&(r=r.split("~~").join("")),o.replaceSelection(a+r+l),c.ch+=n.length,u.ch=c.ch+r.length),o.setSelection(c,u),o.focus()}}function Y(e,t){if(Math.abs(e)<1024)return""+e+t[0];var n=0;do{e/=1024,++n}while(Math.abs(e)>=1024&&n<t.length);return""+e.toFixed(1)+t[n]}function J(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]instanceof Array?e[n]=t[n].concat(e[n]instanceof Array?e[n]:[]):null!==t[n]&&"object"===typeof t[n]&&t[n].constructor===Object?e[n]=J(e[n]||{},t[n]):e[n]=t[n]);return e}function X(e){for(var t=1;t<arguments.length;t++)e=J(e,arguments[t]);return e}function Q(e){var t=e.match(/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),n=0;if(null===t)return n;for(var i=0;i<t.length;i++)t[i].charCodeAt(0)>=19968?n+=t[i].length:n+=1;return n}var Z={bold:{name:"bold",action:x,className:"fa fa-bold",title:"Bold",default:!0},italic:{name:"italic",action:k,className:"fa fa-italic",title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:C,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:O,className:"fa fa-header fa-heading",title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:O,className:"fa fa-header fa-heading header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:A,className:"fa fa-header fa-heading header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:M,className:"fa fa-header fa-heading header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:R,className:"fa fa-header fa-heading header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:T,className:"fa fa-header fa-heading header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:S,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:E,className:"fa fa-quote-left",title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:D,className:"fa fa-list-ul",title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:I,className:"fa fa-list-ol",title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:L,className:"fa fa-eraser",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:N,className:"fa fa-link",title:"Create Link",default:!0},image:{name:"image",action:F,className:"fa fa-image",title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:$,className:"fa fa-image",title:"Import an image"},table:{name:"table",action:j,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:B,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:W,className:"fa fa-eye",noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:V,className:"fa fa-columns",noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:_,className:"fa fa-arrows-alt",noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:"fa fa-question-circle",noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:z,className:"fa fa-undo",noDisable:!0,title:"Undo"},redo:{name:"redo",action:U,className:"fa fa-repeat fa-redo",noDisable:!0,title:"Redo"}},ee={link:["[","](#url#)"],image:["![](","#url#)"],uploadedImage:["![](#url#)",""],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},te={link:"URL for the link:",image:"URL of the image:"},ne={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},ie={bold:"**",code:"```",italic:"*"},re={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},oe={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:"Image #image_name# is too big (#image_size#).\nMaximum file size is #image_max_size#.",importError:"Something went wrong when uploading the image #image_name#."};function se(e){(e=e||{}).parent=this;var t=!0;if(!1===e.autoDownloadFontAwesome&&(t=!1),!0!==e.autoDownloadFontAwesome)for(var n=document.styleSheets,i=0;i<n.length;i++)n[i].href&&n[i].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(t=!1);if(t){var r=document.createElement("link");r.rel="stylesheet",r.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(r)}if(e.element)this.element=e.element;else if(null===e.element)return void console.log("EasyMDE: Error. No element was found.");if(void 0===e.toolbar)for(var o in e.toolbar=[],Z)Object.prototype.hasOwnProperty.call(Z,o)&&(-1!=o.indexOf("separator-")&&e.toolbar.push("|"),(!0===Z[o].default||e.showIcons&&e.showIcons.constructor===Array&&-1!=e.showIcons.indexOf(o))&&e.toolbar.push(o));if(Object.prototype.hasOwnProperty.call(e,"previewClass")||(e.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(e,"status")||(e.status=["autosave","lines","words","cursor"],e.uploadImage&&e.status.unshift("upload-image")),e.previewRender||(e.previewRender=function(e){return this.parent.markdown(e)}),e.parsingConfig=X({highlightFormatting:!0},e.parsingConfig||{}),e.insertTexts=X({},ee,e.insertTexts||{}),e.promptTexts=X({},te,e.promptTexts||{}),e.blockStyles=X({},ie,e.blockStyles||{}),void 0!=e.autosave&&(e.autosave.timeFormat=X({},ne,e.autosave.timeFormat||{})),e.shortcuts=X({},c,e.shortcuts||{}),e.maxHeight=e.maxHeight||void 0,e.direction=e.direction||"ltr","undefined"!==typeof e.maxHeight?e.minHeight=e.maxHeight:e.minHeight=e.minHeight||"300px",e.errorCallback=e.errorCallback||function(e){alert(e)},e.uploadImage=e.uploadImage||!1,e.imageMaxSize=e.imageMaxSize||2097152,e.imageAccept=e.imageAccept||"image/png, image/jpeg",e.imageTexts=X({},re,e.imageTexts||{}),e.errorMessages=X({},oe,e.errorMessages||{}),void 0!=e.autosave&&void 0!=e.autosave.unique_id&&""!=e.autosave.unique_id&&(e.autosave.uniqueId=e.autosave.unique_id),e.overlayMode&&void 0===e.overlayMode.combine&&(e.overlayMode.combine=!0),this.options=e,this.render(),!e.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(e.initialValue),e.uploadImage){var s=this;this.codemirror.on("dragenter",(function(e,t){s.updateStatusBar("upload-image",s.options.imageTexts.sbOnDragEnter),t.stopPropagation(),t.preventDefault()})),this.codemirror.on("dragend",(function(e,t){s.updateStatusBar("upload-image",s.options.imageTexts.sbInit),t.stopPropagation(),t.preventDefault()})),this.codemirror.on("dragleave",(function(e,t){s.updateStatusBar("upload-image",s.options.imageTexts.sbInit),t.stopPropagation(),t.preventDefault()})),this.codemirror.on("dragover",(function(e,t){s.updateStatusBar("upload-image",s.options.imageTexts.sbOnDragEnter),t.stopPropagation(),t.preventDefault()})),this.codemirror.on("drop",(function(t,n){n.stopPropagation(),n.preventDefault(),e.imageUploadFunction?s.uploadImagesUsingCustomFunction(e.imageUploadFunction,n.dataTransfer.files):s.uploadImages(n.dataTransfer.files)})),this.codemirror.on("paste",(function(t,n){e.imageUploadFunction?s.uploadImagesUsingCustomFunction(e.imageUploadFunction,n.clipboardData.files):s.uploadImages(n.clipboardData.files)}))}}function ae(){if("object"!==typeof localStorage)return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(e){return!1}return!0}se.prototype.uploadImages=function(e,t,n){if(0!==e.length){for(var i=[],r=0;r<e.length;r++)i.push(e[r].name),this.uploadImage(e[r],t,n);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",i.join(", ")))}},se.prototype.uploadImagesUsingCustomFunction=function(e,t){if(0!==t.length){for(var n=[],i=0;i<t.length;i++)n.push(t[i].name),this.uploadImageUsingCustomFunction(e,t[i]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",n.join(", ")))}},se.prototype.updateStatusBar=function(e,t){if(this.gui.statusbar){var n=this.gui.statusbar.getElementsByClassName(e);1===n.length?this.gui.statusbar.getElementsByClassName(e)[0].textContent=t:0===n.length?console.log("EasyMDE: status bar item "+e+" was not found."):console.log("EasyMDE: Several status bar items named "+e+" was found.")}},se.prototype.markdown=function(e){if(o){var t;if(t=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?t.breaks=!1:t.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting){var n=this.options.renderingConfig.hljs||window.hljs;n&&(t.highlight=function(e,t){return t&&n.getLanguage(t)?n.highlight(t,e).value:n.highlightAuto(e).value})}o.setOptions(t);var i=o(e);return this.options.renderingConfig&&"function"===typeof this.options.renderingConfig.sanitizerFunction&&(i=this.options.renderingConfig.sanitizerFunction.call(this,i)),i=function(e){for(var t=(new DOMParser).parseFromString(e,"text/html"),n=t.getElementsByTagName("li"),i=0;i<n.length;i++)for(var r=n[i],o=0;o<r.children.length;o++){var s=r.children[o];s instanceof HTMLInputElement&&"checkbox"===s.type&&(r.style.marginLeft="-1.5em",r.style.listStyleType="none")}return t.documentElement.innerHTML}(i=function(e){for(var t;null!==(t=a.exec(e));){var n=t[0];if(-1===n.indexOf("target=")){var i=n.replace(/>$/,' target="_blank">');e=e.replace(n,i)}}return e}(i))}},se.prototype.render=function(e){if(e||(e=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==e){this.element=e;var t,n,o=this.options,s=this,a={};for(var c in o.shortcuts)null!==o.shortcuts[c]&&null!==l[c]&&function(e){a[d(o.shortcuts[e])]=function(){var t=l[e];"function"===typeof t?t(s):"string"===typeof t&&window.open(t,"_blank")}}(c);if(a.Enter="newlineAndIndentContinueMarkdownList",a.Tab="tabAndIndentMarkdownList",a["Shift-Tab"]="shiftTabAndUnindentMarkdownList",a.Esc=function(e){e.getOption("fullScreen")&&_(s)},this.documentOnKeyDown=function(e){27==(e=e||window.event).keyCode&&s.codemirror.getOption("fullScreen")&&_(s)},document.addEventListener("keydown",this.documentOnKeyDown,!1),o.overlayMode?(i.defineMode("overlay-mode",(function(e){return i.overlayMode(i.getMode(e,!1!==o.spellChecker?"spell-checker":"gfm"),o.overlayMode.mode,o.overlayMode.combine)})),t="overlay-mode",(n=o.parsingConfig).gitHubSpice=!1):((t=o.parsingConfig).name="gfm",t.gitHubSpice=!1),!1!==o.spellChecker&&(t="spell-checker",(n=o.parsingConfig).name="gfm",n.gitHubSpice=!1,"function"===typeof o.spellChecker?o.spellChecker({codeMirrorInstance:i}):r({codeMirrorInstance:i})),this.codemirror=i.fromTextArea(e,{mode:t,backdrop:n,theme:void 0!=o.theme?o.theme:"easymde",tabSize:void 0!=o.tabSize?o.tabSize:2,indentUnit:void 0!=o.tabSize?o.tabSize:2,indentWithTabs:!1!==o.indentWithTabs,lineNumbers:!0===o.lineNumbers,autofocus:!0===o.autofocus,extraKeys:a,direction:o.direction,lineWrapping:!1!==o.lineWrapping,allowDropFileTypes:["text/plain"],placeholder:o.placeholder||e.getAttribute("placeholder")||"",styleSelectedText:void 0!=o.styleSelectedText?o.styleSelectedText:!u(),scrollbarStyle:void 0!=o.scrollbarStyle?o.scrollbarStyle:"native",configureMouse:function(e,t,n){return{addNew:!1}},inputStyle:void 0!=o.inputStyle?o.inputStyle:u()?"contenteditable":"textarea",spellcheck:void 0==o.nativeSpellcheck||o.nativeSpellcheck,autoRefresh:void 0!=o.autoRefresh&&o.autoRefresh}),this.codemirror.getScrollerElement().style.minHeight=o.minHeight,"undefined"!==typeof o.maxHeight&&(this.codemirror.getScrollerElement().style.height=o.maxHeight),!0===o.forceSync){var h=this.codemirror;h.on("change",(function(){h.save()}))}this.gui={};var f=document.createElement("div");f.classList.add("EasyMDEContainer");var p=this.codemirror.getWrapperElement();p.parentNode.insertBefore(f,p),f.appendChild(p),!1!==o.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==o.status&&(this.gui.statusbar=this.createStatusbar()),void 0!=o.autosave&&!0===o.autosave.enabled&&(this.autosave(),this.codemirror.on("change",(function(){clearTimeout(s._autosave_timeout),s._autosave_timeout=setTimeout((function(){s.autosave()}),s.options.autosave.submit_delay||s.options.autosave.delay||1e3)})));var g=this;this.codemirror.on("update",(function(){o.previewImagesInEditor&&f.querySelectorAll(".cm-image-marker").forEach((function(e){var t=e.parentElement;if(t.innerText.match(/^!\[.*?\]\(.*\)/g)&&!t.hasAttribute("data-img-src")){var n=t.innerText.match("\\((.*)\\)");if(window.EMDEimagesCache||(window.EMDEimagesCache={}),n&&n.length>=2){var i=n[1];if(window.EMDEimagesCache[i])v(t,window.EMDEimagesCache[i]);else{var r=document.createElement("img");r.onload=function(){window.EMDEimagesCache[i]={naturalWidth:r.naturalWidth,naturalHeight:r.naturalHeight,url:i},v(t,window.EMDEimagesCache[i])},r.src=i}}}}))})),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var m=this.codemirror;setTimeout(function(){m.refresh()}.bind(m),0)}function v(e,t){var n,i;e.setAttribute("data-img-src",t.url),e.setAttribute("style","--bg-image:url("+t.url+");--width:"+t.naturalWidth+"px;--height:"+(n=t.naturalWidth,i=t.naturalHeight,n<window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","")?i+"px":i/n*100+"%")),g.codemirror.setSize()}},se.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)},se.prototype.autosave=function(){if(ae()){var e=this;if(void 0==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");!0!==this.options.autosave.binded&&(null!=e.element.form&&void 0!=e.element.form&&e.element.form.addEventListener("submit",(function(){clearTimeout(e.autosaveTimeoutId),e.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+e.options.autosave.uniqueId)})),this.options.autosave.binded=!0),!0!==this.options.autosave.loaded&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var t=e.value();""!==t?localStorage.setItem("smde_"+this.options.autosave.uniqueId,t):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var n=document.getElementById("autosaved");if(null!=n&&void 0!=n&&""!=n){var i=new Date,r=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(i),o=void 0==this.options.autosave.text?"Autosaved: ":this.options.autosave.text;n.innerHTML=o+r}}else console.log("EasyMDE: localStorage not available, cannot autosave")},se.prototype.clearAutosavedValue=function(){if(ae()){if(void 0==this.options.autosave||void 0==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},se.prototype.openBrowseFileWindow=function(e,t){var n=this,i=this.gui.toolbar.getElementsByClassName("imageInput")[0];i.click(),i.addEventListener("change",(function r(o){n.options.imageUploadFunction?n.uploadImagesUsingCustomFunction(n.options.imageUploadFunction,o.target.files):n.uploadImages(o.target.files,e,t),i.removeEventListener("change",r)}))},se.prototype.uploadImage=function(e,t,n){var i=this;function r(e){i.updateStatusBar("upload-image",e),setTimeout((function(){i.updateStatusBar("upload-image",i.options.imageTexts.sbInit)}),1e4),n&&"function"===typeof n&&n(e),i.options.errorCallback(e)}function o(t){var n=i.options.imageTexts.sizeUnits.split(",");return t.replace("#image_name#",e.name).replace("#image_size#",Y(e.size,n)).replace("#image_max_size#",Y(i.options.imageMaxSize,n))}if(t=t||function(e){P(i,e)},e.size>this.options.imageMaxSize)r(o(this.options.errorMessages.fileTooLarge));else{var s=new FormData;s.append("image",e),i.options.imageCSRFToken&&s.append("csrfmiddlewaretoken",i.options.imageCSRFToken);var a=new XMLHttpRequest;a.upload.onprogress=function(t){if(t.lengthComputable){var n=""+Math.round(100*t.loaded/t.total);i.updateStatusBar("upload-image",i.options.imageTexts.sbProgress.replace("#file_name#",e.name).replace("#progress#",n))}},a.open("POST",this.options.imageUploadEndpoint),a.onload=function(){try{var e=JSON.parse(this.responseText)}catch(n){return console.error("EasyMDE: The server did not return a valid json."),void r(o(i.options.errorMessages.importError))}200===this.status&&e&&!e.error&&e.data&&e.data.filePath?t((i.options.imagePathAbsolute?"":window.location.origin+"/")+e.data.filePath):e.error&&e.error in i.options.errorMessages?r(o(i.options.errorMessages[e.error])):e.error?r(o(e.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),r(o(i.options.errorMessages.importError)))},a.onerror=function(e){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+e.target.status+" ("+e.target.statusText+")"),r(i.options.errorMessages.importError)},a.send(s)}},se.prototype.uploadImageUsingCustomFunction=function(e,t){var n=this;e.apply(this,[t,function(e){P(n,e)},function(e){var i=function(e){var i=n.options.imageTexts.sizeUnits.split(",");return e.replace("#image_name#",t.name).replace("#image_size#",Y(t.size,i)).replace("#image_max_size#",Y(n.options.imageMaxSize,i))}(e);n.updateStatusBar("upload-image",i),setTimeout((function(){n.updateStatusBar("upload-image",n.options.imageTexts.sbInit)}),1e4),n.options.errorCallback(i)}])},se.prototype.setPreviewMaxHeight=function(){var e=this.codemirror.getWrapperElement(),t=e.nextSibling,n=parseInt(window.getComputedStyle(e).paddingTop),i=parseInt(window.getComputedStyle(e).borderTopWidth),r=(parseInt(this.options.maxHeight)+2*n+2*i).toString()+"px";t.style.height=r},se.prototype.createSideBySide=function(){var e=this.codemirror,t=e.getWrapperElement(),n=t.nextSibling;if(!n||!/editor-preview-side/.test(n.className)){if((n=document.createElement("div")).className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var i=0;i<this.options.previewClass.length;i++)n.className+=" "+this.options.previewClass[i];else"string"===typeof this.options.previewClass&&(n.className+=" "+this.options.previewClass);t.parentNode.insertBefore(n,t.nextSibling)}if("undefined"!==typeof this.options.maxHeight&&this.setPreviewMaxHeight(),!1===this.options.syncSideBySidePreviewScroll)return n;var r=!1,o=!1;return e.on("scroll",(function(e){if(r)r=!1;else{o=!0;var t=e.getScrollInfo().height-e.getScrollInfo().clientHeight,i=parseFloat(e.getScrollInfo().top)/t,s=(n.scrollHeight-n.clientHeight)*i;n.scrollTop=s}})),n.onscroll=function(){if(o)o=!1;else{r=!0;var t=n.scrollHeight-n.clientHeight,i=parseFloat(n.scrollTop)/t,s=(e.getScrollInfo().height-e.getScrollInfo().clientHeight)*i;e.scrollTo(0,s)}},n},se.prototype.createToolbar=function(e){if((e=e||this.options.toolbar)&&0!==e.length){var t;for(t=0;t<e.length;t++)void 0!=Z[e[t]]&&(e[t]=Z[e[t]]);var n=document.createElement("div");n.className="editor-toolbar";var i=this,r={};for(i.toolbar=e,t=0;t<e.length;t++)if(("guide"!=e[t].name||!1!==i.options.toolbarGuideIcon)&&(!i.options.hideIcons||-1==i.options.hideIcons.indexOf(e[t].name))&&("fullscreen"!=e[t].name&&"side-by-side"!=e[t].name||!u())){if("|"===e[t]){for(var o=!1,s=t+1;s<e.length;s++)"|"===e[s]||i.options.hideIcons&&-1!=i.options.hideIcons.indexOf(e[s].name)||(o=!0);if(!o)continue}!function(e){var t;if(t="|"===e?y():e.children?m(e,i.options.toolbarTips,i.options.shortcuts,i):v(e,!0,i.options.toolbarTips,i.options.shortcuts,"button",i),r[e.name||e]=t,n.appendChild(t),"upload-image"===e.name){var o=document.createElement("input");o.className="imageInput",o.type="file",o.multiple=!0,o.name="image",o.accept=i.options.imageAccept,o.style.display="none",o.style.opacity=0,n.appendChild(o)}}(e[t])}i.toolbar_div=n,i.toolbarElements=r;var a=this.codemirror;a.on("cursorActivity",(function(){var e=b(a);for(var t in r)!function(t){var n=r[t];e[t]?n.className+=" active":"fullscreen"!=t&&"side-by-side"!=t&&(n.className=n.className.replace(/\s*active\s*/g,""))}(t)}));var l=a.getWrapperElement();return l.parentNode.insertBefore(n,l),n}},se.prototype.createStatusbar=function(e){e=e||this.options.status;var t=this.options,n=this.codemirror;if(e&&0!==e.length){var i,r,o,s,a=[];for(i=0;i<e.length;i++)if(r=void 0,o=void 0,s=void 0,"object"===typeof e[i])a.push({className:e[i].className,defaultValue:e[i].defaultValue,onUpdate:e[i].onUpdate,onActivity:e[i].onActivity});else{var l=e[i];"words"===l?(s=function(e){e.innerHTML=Q(n.getValue())},r=function(e){e.innerHTML=Q(n.getValue())}):"lines"===l?(s=function(e){e.innerHTML=n.lineCount()},r=function(e){e.innerHTML=n.lineCount()}):"cursor"===l?(s=function(e){e.innerHTML="0:0"},o=function(e){var t=n.getCursor(),i=t.line+1,r=t.ch+1;e.innerHTML=i+":"+r}):"autosave"===l?s=function(e){void 0!=t.autosave&&!0===t.autosave.enabled&&e.setAttribute("id","autosaved")}:"upload-image"===l&&(s=function(e){e.innerHTML=t.imageTexts.sbInit}),a.push({className:l,defaultValue:s,onUpdate:r,onActivity:o})}var c=document.createElement("div");for(c.className="editor-statusbar",i=0;i<a.length;i++){var u=a[i],d=document.createElement("span");d.className=u.className,"function"===typeof u.defaultValue&&u.defaultValue(d),"function"===typeof u.onUpdate&&this.codemirror.on("update",function(e,t){return function(){t.onUpdate(e)}}(d,u)),"function"===typeof u.onActivity&&this.codemirror.on("cursorActivity",function(e,t){return function(){t.onActivity(e)}}(d,u)),c.appendChild(d)}var h=this.codemirror.getWrapperElement();return h.parentNode.insertBefore(c,h.nextSibling),c}},se.prototype.value=function(e){var t=this.codemirror;if(void 0===e)return t.getValue();if(t.getDoc().setValue(e),this.isPreviewActive()){var n=t.getWrapperElement().lastChild;n.innerHTML=this.options.previewRender(e,n)}return this},se.toggleBold=x,se.toggleItalic=k,se.toggleStrikethrough=C,se.toggleBlockquote=E,se.toggleHeadingSmaller=O,se.toggleHeadingBigger=A,se.toggleHeading1=M,se.toggleHeading2=R,se.toggleHeading3=T,se.toggleCodeBlock=S,se.toggleUnorderedList=D,se.toggleOrderedList=I,se.cleanBlock=L,se.drawLink=N,se.drawImage=F,se.drawUploadedImage=$,se.drawTable=j,se.drawHorizontalRule=B,se.undo=z,se.redo=U,se.togglePreview=W,se.toggleSideBySide=V,se.toggleFullScreen=_,se.prototype.toggleBold=function(){x(this)},se.prototype.toggleItalic=function(){k(this)},se.prototype.toggleStrikethrough=function(){C(this)},se.prototype.toggleBlockquote=function(){E(this)},se.prototype.toggleHeadingSmaller=function(){O(this)},se.prototype.toggleHeadingBigger=function(){A(this)},se.prototype.toggleHeading1=function(){M(this)},se.prototype.toggleHeading2=function(){R(this)},se.prototype.toggleHeading3=function(){T(this)},se.prototype.toggleCodeBlock=function(){S(this)},se.prototype.toggleUnorderedList=function(){D(this)},se.prototype.toggleOrderedList=function(){I(this)},se.prototype.cleanBlock=function(){L(this)},se.prototype.drawLink=function(){N(this)},se.prototype.drawImage=function(){F(this)},se.prototype.drawUploadedImage=function(){$(this)},se.prototype.drawTable=function(){j(this)},se.prototype.drawHorizontalRule=function(){B(this)},se.prototype.undo=function(){z(this)},se.prototype.redo=function(){U(this)},se.prototype.togglePreview=function(){W(this)},se.prototype.toggleSideBySide=function(){V(this)},se.prototype.toggleFullScreen=function(){_(this)},se.prototype.isPreviewActive=function(){var e=this.codemirror.getWrapperElement().lastChild;return/editor-preview-active/.test(e.className)},se.prototype.isSideBySideActive=function(){var e=this.codemirror.getWrapperElement().nextSibling;return/editor-preview-active-side/.test(e.className)},se.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},se.prototype.getState=function(){return b(this.codemirror)},se.prototype.toTextArea=function(){var e=this.codemirror,t=e.getWrapperElement(),n=t.parentNode;n&&(this.gui.toolbar&&n.removeChild(this.gui.toolbar),this.gui.statusbar&&n.removeChild(this.gui.statusbar),this.gui.sideBySide&&n.removeChild(this.gui.sideBySide)),n.parentNode.insertBefore(t,n),n.remove(),e.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},e.exports=se},8929:function(e,t,n){var i="__lodash_hash_undefined__",r="[object Function]",o="[object GeneratorFunction]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/,l=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,d=/^\[object .+?Constructor\]$/,h="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,f="object"==typeof self&&self&&self.Object===Object&&self,p=h||f||Function("return this")();var g=Array.prototype,m=Function.prototype,v=Object.prototype,y=p["__core-js_shared__"],b=function(){var e=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),w=m.toString,_=v.hasOwnProperty,x=v.toString,k=RegExp("^"+w.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=p.Symbol,S=g.splice,E=$(p,"Map"),O=$(Object,"create"),A=C?C.prototype:void 0,M=A?A.toString:void 0;function R(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function D(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function I(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!==n&&i!==i)return r;return-1}function L(e,t){var n;t=function(e,t){if(z(e))return!1;var n=typeof e;if("number"==n||"symbol"==n||"boolean"==n||null==e||V(e))return!0;return a.test(e)||!s.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:z(n=t)?n:P(n);for(var i=0,r=t.length;null!=e&&i<r;)e=e[j(t[i++])];return i&&i==r?e:void 0}function N(e){if(!U(e)||(t=e,b&&b in t))return!1;var t,n=function(e){var t=U(e)?x.call(e):"";return t==r||t==o}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?k:d;return n.test(function(e){if(null!=e){try{return w.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function F(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function $(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return N(n)?n:void 0}R.prototype.clear=function(){this.__data__=O?O(null):{}},R.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},R.prototype.get=function(e){var t=this.__data__;if(O){var n=t[e];return n===i?void 0:n}return _.call(t,e)?t[e]:void 0},R.prototype.has=function(e){var t=this.__data__;return O?void 0!==t[e]:_.call(t,e)},R.prototype.set=function(e,t){return this.__data__[e]=O&&void 0===t?i:t,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(e){var t=this.__data__,n=I(t,e);return!(n<0)&&(n==t.length-1?t.pop():S.call(t,n,1),!0)},T.prototype.get=function(e){var t=this.__data__,n=I(t,e);return n<0?void 0:t[n][1]},T.prototype.has=function(e){return I(this.__data__,e)>-1},T.prototype.set=function(e,t){var n=this.__data__,i=I(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},D.prototype.clear=function(){this.__data__={hash:new R,map:new(E||T),string:new R}},D.prototype.delete=function(e){return F(this,e).delete(e)},D.prototype.get=function(e){return F(this,e).get(e)},D.prototype.has=function(e){return F(this,e).has(e)},D.prototype.set=function(e,t){return F(this,e).set(e,t),this};var P=B((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(V(e))return M?M.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return l.test(e)&&n.push(""),e.replace(c,(function(e,t,i,r){n.push(i?r.replace(u,"$1"):t||e)})),n}));function j(e){if("string"==typeof e||V(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function B(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new(B.Cache||D),n}B.Cache=D;var z=Array.isArray;function U(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function V(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==x.call(e)}e.exports=function(e,t,n){var i=null==e?void 0:L(e,t);return void 0===i?n:i}},2467:function(e,t,n){e=n.nmd(e);var i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",d="[object Map]",h="[object Number]",f="[object Object]",p="[object Promise]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object Symbol]",b="[object WeakMap]",w="[object ArrayBuffer]",_="[object DataView]",x=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C[o]=C[s]=C[w]=C[a]=C[_]=C[l]=C[c]=C[u]=C[d]=C[h]=C[f]=C[g]=C[m]=C[v]=C[b]=!1;var S="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,E="object"==typeof self&&self&&self.Object===Object&&self,O=S||E||Function("return this")(),A=t&&!t.nodeType&&t,M=A&&e&&!e.nodeType&&e,R=M&&M.exports===A,T=R&&S.process,D=function(){try{return T&&T.binding&&T.binding("util")}catch(e){}}(),I=D&&D.isTypedArray;function L(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function N(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function F(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var $,P,j=Array.prototype,B=Function.prototype,z=Object.prototype,U=O["__core-js_shared__"],V=B.toString,W=z.hasOwnProperty,H=function(){var e=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),q=z.toString,G=RegExp("^"+V.call(W).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=R?O.Buffer:void 0,Y=O.Symbol,J=O.Uint8Array,X=z.propertyIsEnumerable,Q=j.splice,Z=Y?Y.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=K?K.isBuffer:void 0,ne=($=Object.keys,P=Object,function(e){return $(P(e))}),ie=Te(O,"DataView"),re=Te(O,"Map"),oe=Te(O,"Promise"),se=Te(O,"Set"),ae=Te(O,"WeakMap"),le=Te(Object,"create"),ce=Ne(ie),ue=Ne(re),de=Ne(oe),he=Ne(se),fe=Ne(ae),pe=Y?Y.prototype:void 0,ge=pe?pe.valueOf:void 0;function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ve(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function be(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ye;++t<n;)this.add(e[t])}function we(e){var t=this.__data__=new ve(e);this.size=t.size}function _e(e,t){var n=Pe(e),i=!n&&$e(e),r=!n&&!i&&je(e),o=!n&&!i&&!r&&We(e),s=n||i||r||o,a=s?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],l=a.length;for(var c in e)!t&&!W.call(e,c)||s&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Le(c,l))||a.push(c);return a}function xe(e,t){for(var n=e.length;n--;)if(Fe(e[n][0],t))return n;return-1}function ke(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Z&&Z in Object(e)?function(e){var t=W.call(e,Z),n=e[Z];try{e[Z]=void 0;var i=!0}catch(o){}var r=q.call(e);i&&(t?e[Z]=n:delete e[Z]);return r}(e):function(e){return q.call(e)}(e)}function Ce(e){return Ve(e)&&ke(e)==o}function Se(e,t,n,i,r){return e===t||(null==e||null==t||!Ve(e)&&!Ve(t)?e!==e&&t!==t:function(e,t,n,i,r,u){var p=Pe(e),b=Pe(t),x=p?s:Ie(e),k=b?s:Ie(t),C=(x=x==o?f:x)==f,S=(k=k==o?f:k)==f,E=x==k;if(E&&je(e)){if(!je(t))return!1;p=!0,C=!1}if(E&&!C)return u||(u=new we),p||We(e)?Ae(e,t,n,i,r,u):function(e,t,n,i,r,o,s){switch(n){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!o(new J(e),new J(t)));case a:case l:case h:return Fe(+e,+t);case c:return e.name==t.name&&e.message==t.message;case g:case v:return e==t+"";case d:var u=N;case m:var f=1&i;if(u||(u=F),e.size!=t.size&&!f)return!1;var p=s.get(e);if(p)return p==t;i|=2,s.set(e,t);var b=Ae(u(e),u(t),i,r,o,s);return s.delete(e),b;case y:if(ge)return ge.call(e)==ge.call(t)}return!1}(e,t,x,n,i,r,u);if(!(1&n)){var O=C&&W.call(e,"__wrapped__"),A=S&&W.call(t,"__wrapped__");if(O||A){var M=O?e.value():e,R=A?t.value():t;return u||(u=new we),r(M,R,n,i,u)}}if(!E)return!1;return u||(u=new we),function(e,t,n,i,r,o){var s=1&n,a=Me(e),l=a.length,c=Me(t).length;if(l!=c&&!s)return!1;var u=l;for(;u--;){var d=a[u];if(!(s?d in t:W.call(t,d)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var f=!0;o.set(e,t),o.set(t,e);var p=s;for(;++u<l;){var g=e[d=a[u]],m=t[d];if(i)var v=s?i(m,g,d,t,e,o):i(g,m,d,e,t,o);if(!(void 0===v?g===m||r(g,m,n,i,o):v)){f=!1;break}p||(p="constructor"==d)}if(f&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,i,r,u)}(e,t,n,i,Se,r))}function Ee(e){return!(!Ue(e)||function(e){return!!H&&H in e}(e))&&(Be(e)?G:x).test(Ne(e))}function Oe(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||z;return e===n}(e))return ne(e);var t=[];for(var n in Object(e))W.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ae(e,t,n,i,r,o){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,d=!0,h=2&n?new be:void 0;for(o.set(e,t),o.set(t,e);++u<a;){var f=e[u],p=t[u];if(i)var g=s?i(p,f,u,t,e,o):i(f,p,u,e,t,o);if(void 0!==g){if(g)continue;d=!1;break}if(h){if(!L(t,(function(e,t){if(s=t,!h.has(s)&&(f===e||r(f,e,n,i,o)))return h.push(t);var s}))){d=!1;break}}else if(f!==p&&!r(f,p,n,i,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function Me(e){return function(e,t,n){var i=t(e);return Pe(e)?i:function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}(i,n(e))}(e,He,De)}function Re(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Te(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ee(n)?n:void 0}me.prototype.clear=function(){this.__data__=le?le(null):{},this.size=0},me.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},me.prototype.get=function(e){var t=this.__data__;if(le){var n=t[e];return n===i?void 0:n}return W.call(t,e)?t[e]:void 0},me.prototype.has=function(e){var t=this.__data__;return le?void 0!==t[e]:W.call(t,e)},me.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=le&&void 0===t?i:t,this},ve.prototype.clear=function(){this.__data__=[],this.size=0},ve.prototype.delete=function(e){var t=this.__data__,n=xe(t,e);return!(n<0)&&(n==t.length-1?t.pop():Q.call(t,n,1),--this.size,!0)},ve.prototype.get=function(e){var t=this.__data__,n=xe(t,e);return n<0?void 0:t[n][1]},ve.prototype.has=function(e){return xe(this.__data__,e)>-1},ve.prototype.set=function(e,t){var n=this.__data__,i=xe(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},ye.prototype.clear=function(){this.size=0,this.__data__={hash:new me,map:new(re||ve),string:new me}},ye.prototype.delete=function(e){var t=Re(this,e).delete(e);return this.size-=t?1:0,t},ye.prototype.get=function(e){return Re(this,e).get(e)},ye.prototype.has=function(e){return Re(this,e).has(e)},ye.prototype.set=function(e,t){var n=Re(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},be.prototype.add=be.prototype.push=function(e){return this.__data__.set(e,i),this},be.prototype.has=function(e){return this.__data__.has(e)},we.prototype.clear=function(){this.__data__=new ve,this.size=0},we.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},we.prototype.get=function(e){return this.__data__.get(e)},we.prototype.has=function(e){return this.__data__.has(e)},we.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ve){var i=n.__data__;if(!re||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new ye(i)}return n.set(e,t),this.size=n.size,this};var De=ee?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[r++]=s)}return o}(ee(e),(function(t){return X.call(e,t)})))}:function(){return[]},Ie=ke;function Le(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||k.test(e))&&e>-1&&e%1==0&&e<t}function Ne(e){if(null!=e){try{return V.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fe(e,t){return e===t||e!==e&&t!==t}(ie&&Ie(new ie(new ArrayBuffer(1)))!=_||re&&Ie(new re)!=d||oe&&Ie(oe.resolve())!=p||se&&Ie(new se)!=m||ae&&Ie(new ae)!=b)&&(Ie=function(e){var t=ke(e),n=t==f?e.constructor:void 0,i=n?Ne(n):"";if(i)switch(i){case ce:return _;case ue:return d;case de:return p;case he:return m;case fe:return b}return t});var $e=Ce(function(){return arguments}())?Ce:function(e){return Ve(e)&&W.call(e,"callee")&&!X.call(e,"callee")},Pe=Array.isArray;var je=te||function(){return!1};function Be(e){if(!Ue(e))return!1;var t=ke(e);return t==u||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ze(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function Ue(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ve(e){return null!=e&&"object"==typeof e}var We=I?function(e){return function(t){return e(t)}}(I):function(e){return Ve(e)&&ze(e.length)&&!!C[ke(e)]};function He(e){return null!=(t=e)&&ze(t.length)&&!Be(t)?_e(e):Oe(e);var t}e.exports=function(e,t){return Se(e,t)}},888:function(e,t,n){"use strict";var i=n(9047);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9899:function(e,t,n){"use strict";e.exports=n(4582)},7276:function(e,t,n){"use strict";var i=t,r=n(222),o=n(2440);function s(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(d%s){",i);for(var o=t.resolvedType.values,s=Object.keys(o),a=0;a<s.length;++a)t.repeated&&o[s[a]]===t.typeDefault&&e("default:"),e("case%j:",s[a])("case %i:",o[s[a]])("m%s=%j",i,o[s[a]])("break");e("}")}else e('if(typeof d%s!=="object")',i)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,n,i);else{var l=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",i,i);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",i,i);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",i,i);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,l)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,l?"true":"");break;case"bytes":e('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length)",i)("m%s=d%s",i,i);break;case"string":e("m%s=String(d%s)",i,i);break;case"bool":e("m%s=Boolean(d%s)",i,i)}}return e}function a(e,t,n,i){if(t.resolvedType)t.resolvedType instanceof r?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",i,n,i,i):e("d%s=types[%i].toObject(m%s,o)",i,n,i);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,o?"true":"",i);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:e("d%s=m%s",i,i)}}return e}i.fromObject=function(e){var t=e.fieldsArray,n=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var i=0;i<t.length;++i){var a=t[i].resolve(),l=o.safeProp(a.name);a.map?(n("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),s(n,a,i,l+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),s(n,a,i,l+"[i]")("}")("}")):(a.resolvedType instanceof r||n("if(d%s!=null){",l),s(n,a,i,l),a.resolvedType instanceof r||n("}"))}return n("return m")},i.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var n=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],s=[],l=[],c=0;c<t.length;++c)t[c].partOf||(t[c].resolve().repeated?i:t[c].map?s:l).push(t[c]);if(i.length){for(n("if(o.arrays||o.defaults){"),c=0;c<i.length;++c)n("d%s=[]",o.safeProp(i[c].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),c=0;c<s.length;++c)n("d%s={}",o.safeProp(s[c].name));n("}")}if(l.length){for(n("if(o.defaults){"),c=0;c<l.length;++c){var u=l[c],d=o.safeProp(u.name);if(u.resolvedType instanceof r)n("d%s=o.enums===String?%j:%j",d,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var h="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",d,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else n("d%s=%j",d,u.typeDefault)}n("}")}var f=!1;for(c=0;c<t.length;++c){u=t[c];var p=e._fieldsArray.indexOf(u);d=o.safeProp(u.name);u.map?(f||(f=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),a(n,u,p,d+"[ks2[j]]")("}")):u.repeated?(n("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),a(n,u,p,d+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",d,u.name),a(n,u,p,d),u.partOf&&n("if(o.oneofs)")("d%s=%j",o.safeProp(u.partOf.name),u.name)),n("}")}return n("return d")}},2715:function(e,t,n){"use strict";e.exports=function(e){var t=o.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var a=e._fieldsArray[n].resolve(),l=a.resolvedType instanceof i?"int32":a.type,c="m"+o.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),void 0!==r.defaults[a.keyType]?t("k=%j",r.defaults[a.keyType]):t("k=null"),void 0!==r.defaults[l]?t("value=%j",r.defaults[l]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===r.basic[l]?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",l),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==r.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',c):t("%s[k]=value",c)):a.repeated?(t("if(!(%s&&%s.length))",c,c)("%s=[]",c),void 0!==r.packed[l]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,l)("}else"),void 0===r.basic[l]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,n):t("%s.push(r.%s())",c,l)):void 0===r.basic[l]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,n):t("%s=r.%s()",c,l),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var u=e._fieldsArray[n];u.required&&t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",s(u))}return t("return m")};var i=n(222),r=n(8517),o=n(2440);function s(e){return"missing required '"+e.name+"'"}},6886:function(e,t,n){"use strict";e.exports=function(e){for(var t,n=o.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(o.compareFieldsById),l=0;l<a.length;++l){var c=a[l].resolve(),u=e._fieldsArray.indexOf(c),d=c.resolvedType instanceof i?"int32":c.type,h=r.basic[d];t="m"+o.safeProp(c.name),c.map?(n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|r.mapKey[c.keyType],c.keyType),void 0===h?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,t):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,d,t),n("}")("}")):c.repeated?(n("if(%s!=null&&%s.length){",t,t),c.packed&&void 0!==r.packed[d]?n("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",d,t)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",t),void 0===h?s(n,c,u,t+"[i]"):n("w.uint32(%i).%s(%s[i])",(c.id<<3|h)>>>0,d,t)),n("}")):(c.optional&&n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,c.name),void 0===h?s(n,c,u,t):n("w.uint32(%i).%s(%s)",(c.id<<3|h)>>>0,d,t))}return n("return w")};var i=n(222),r=n(8517),o=n(2440);function s(e,t,n,i){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,i,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,i,(t.id<<3|2)>>>0)}},222:function(e,t,n){"use strict";e.exports=s;var i=n(5154);((s.prototype=Object.create(i.prototype)).constructor=s).className="Enum";var r=n(3452),o=n(2440);function s(e,t,n,r,o){if(i.call(this,e,n),t&&"object"!==typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=o||{},this.reserved=void 0,t)for(var s=Object.keys(t),a=0;a<s.length;++a)"number"===typeof t[s[a]]&&(this.valuesById[this.values[s[a]]=t[s[a]]]=s[a])}s.fromJSON=function(e,t){var n=new s(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},s.prototype.add=function(e,t,n){if(!o.isString(e))throw TypeError("name must be a string");if(!o.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},s.prototype.remove=function(e){if(!o.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},s.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)}},6734:function(e,t,n){"use strict";e.exports=c;var i=n(5154);((c.prototype=Object.create(i.prototype)).constructor=c).className="Field";var r,o=n(222),s=n(8517),a=n(2440),l=/^required|optional|repeated$/;function c(e,t,n,r,o,c,u){if(a.isObject(r)?(u=o,c=r,r=o=void 0):a.isObject(o)&&(u=c,c=o,o=void 0),i.call(this,e,c),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(n))throw TypeError("type must be a string");if(void 0!==r&&!l.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!a.isString(o))throw TypeError("extend must be a string");"proto3_optional"===r&&(r="optional"),this.rule=r&&"optional"!==r?r:void 0,this.type=n,this.id=t,this.extend=o||void 0,this.required="required"===r,this.optional=!this.required,this.repeated="repeated"===r,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==s.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=u}c.fromJSON=function(e,t){return new c(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),c.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),i.prototype.setOption.call(this,e,t,n)},c.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},c.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=s.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof r?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"===typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"===typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof r&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this)},c.d=function(e,t,n,i){return"function"===typeof t?t=a.decorateType(t).name:t&&"object"===typeof t&&(t=a.decorateEnum(t).name),function(r,o){a.decorateType(r.constructor).add(new c(o,e,t,n,{default:i}))}},c._configure=function(e){r=e}},4582:function(e,t,n){"use strict";var i=e.exports=n(4722);i.build="light",i.load=function(e,t,n){return"function"===typeof t?(n=t,t=new i.Root):t||(t=new i.Root),t.load(e,n)},i.loadSync=function(e,t){return t||(t=new i.Root),t.loadSync(e)},i.encoder=n(6886),i.decoder=n(2715),i.verifier=n(709),i.converter=n(7276),i.ReflectionObject=n(5154),i.Namespace=n(3452),i.Root=n(8622),i.Enum=n(222),i.Type=n(8716),i.Field=n(6734),i.OneOf=n(9794),i.MapField=n(4479),i.Service=n(4173),i.Method=n(4865),i.Message=n(4486),i.wrappers=n(9025),i.types=n(8517),i.util=n(2440),i.ReflectionObject._configure(i.Root),i.Namespace._configure(i.Type,i.Service,i.Enum),i.Root._configure(i.Type),i.Field._configure(i.Type)},4722:function(e,t,n){"use strict";var i=t;function r(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}i.build="minimal",i.Writer=n(7063),i.BufferWriter=n(2815),i.Reader=n(6216),i.BufferReader=n(3557),i.util=n(3097),i.rpc=n(9994),i.roots=n(7907),i.configure=r,r()},4479:function(e,t,n){"use strict";e.exports=s;var i=n(6734);((s.prototype=Object.create(i.prototype)).constructor=s).className="MapField";var r=n(8517),o=n(2440);function s(e,t,n,r,s,a){if(i.call(this,e,t,r,void 0,void 0,s,a),!o.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===r.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return i.prototype.resolve.call(this)},s.d=function(e,t,n){return"function"===typeof n?n=o.decorateType(n).name:n&&"object"===typeof n&&(n=o.decorateEnum(n).name),function(i,r){o.decorateType(i.constructor).add(new s(r,e,t,n))}}},4486:function(e,t,n){"use strict";e.exports=r;var i=n(3097);function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}r.create=function(e){return this.$type.create(e)},r.encode=function(e,t){return this.$type.encode(e,t)},r.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},r.decode=function(e){return this.$type.decode(e)},r.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},r.verify=function(e){return this.$type.verify(e)},r.fromObject=function(e){return this.$type.fromObject(e)},r.toObject=function(e,t){return this.$type.toObject(e,t)},r.prototype.toJSON=function(){return this.$type.toObject(this,i.toJSONOptions)}},4865:function(e,t,n){"use strict";e.exports=o;var i=n(5154);((o.prototype=Object.create(i.prototype)).constructor=o).className="Method";var r=n(2440);function o(e,t,n,o,s,a,l,c,u){if(r.isObject(s)?(l=s,s=a=void 0):r.isObject(a)&&(l=a,a=void 0),void 0!==t&&!r.isString(t))throw TypeError("type must be a string");if(!r.isString(n))throw TypeError("requestType must be a string");if(!r.isString(o))throw TypeError("responseType must be a string");i.call(this,e,l),this.type=t||"rpc",this.requestType=n,this.requestStream=!!s||void 0,this.responseType=o,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c,this.parsedOptions=u}o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return r.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),i.prototype.resolve.call(this))}},3452:function(e,t,n){"use strict";e.exports=d;var i=n(5154);((d.prototype=Object.create(i.prototype)).constructor=d).className="Namespace";var r,o,s,a=n(6734),l=n(9794),c=n(2440);function u(e,t){if(e&&e.length){for(var n={},i=0;i<e.length;++i)n[e[i].name]=e[i].toJSON(t);return n}}function d(e,t){i.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=u,d.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!==typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},d.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),d.prototype.toJSON=function(e){return c.toObject(["options",this.options,"nested",u(this.nestedArray,e)])},d.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),i=0;i<n.length;++i)t=e[n[i]],this.add((void 0!==t.fields?r.fromJSON:void 0!==t.values?s.fromJSON:void 0!==t.methods?o.fromJSON:void 0!==t.id?a.fromJSON:d.fromJSON)(n[i],t));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof r||e instanceof s||e instanceof o||e instanceof d||e instanceof l))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof d&&e instanceof d)||t instanceof r||t instanceof o)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,i=0;i<n.length;++i)e.add(n[i]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},d.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},d.prototype.define=function(e,t){if(c.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var i=e.shift();if(n.nested&&n.nested[i]){if(!((n=n.nested[i])instanceof d))throw Error("path conflicts with non-namespace objects")}else n.add(n=new d(i))}return t&&n.addJSON(t),n},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,n){if("boolean"===typeof t?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),c.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var i=this.get(e[0]);if(i){if(1===e.length){if(!t||t.indexOf(i.constructor)>-1)return i}else if(i instanceof d&&(i=i.lookup(e.slice(1),t,!0)))return i}else for(var r=0;r<this.nestedArray.length;++r)if(this._nestedArray[r]instanceof d&&(i=this._nestedArray[r].lookup(e,t,!0)))return i;return null===this.parent||n?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[r]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[r,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,n){r=e,o=t,s=n}},5154:function(e,t,n){"use strict";e.exports=o,o.className="ReflectionObject";var i,r=n(2440);function o(e,t){if(!r.isString(e))throw TypeError("name must be a string");if(t&&!r.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof i&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof i&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof i&&(this.resolved=!0),this},o.prototype.getOption=function(e){if(this.options)return this.options[e]},o.prototype.setOption=function(e,t,n){return n&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},o.prototype.setParsedOption=function(e,t,n){this.parsedOptions||(this.parsedOptions=[]);var i=this.parsedOptions;if(n){var o=i.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(o){var s=o[e];r.setProperty(s,n,t)}else(o={})[e]=r.setProperty({},n,t),i.push(o)}else{var a={};a[e]=t,i.push(a)}return this},o.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),i=0;i<n.length;++i)this.setOption(n[i],e[n[i]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){i=e}},9794:function(e,t,n){"use strict";e.exports=s;var i=n(5154);((s.prototype=Object.create(i.prototype)).constructor=s).className="OneOf";var r=n(6734),o=n(2440);function s(e,t,n,r){if(Array.isArray(t)||(n=t,t=void 0),i.call(this,e,n),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=r}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(e){if(!(e instanceof r))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},s.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){i.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n))}a(this)},s.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);i.prototype.onRemove.call(this,e)},s.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){o.decorateType(t.constructor).add(new s(n,e)),Object.defineProperty(t,n,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}}},6216:function(e,t,n){"use strict";e.exports=l;var i,r=n(3097),o=r.LongBits,s=r.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},u=function(){return r.Buffer?function(e){return(l.create=function(e){return r.Buffer.isBuffer(e)?new i(e):c(e)})(e)}:c};function d(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}l.create=u(),l.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,l.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return e}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},l.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},l.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){i=e,l.create=u(),i._configure();var t=r.Long?"toLong":"toNumber";r.merge(l.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},3557:function(e,t,n){"use strict";e.exports=o;var i=n(6216);(o.prototype=Object.create(i.prototype)).constructor=o;var r=n(3097);function o(e){i.call(this,e)}o._configure=function(){r.Buffer&&(o.prototype._slice=r.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},8622:function(e,t,n){"use strict";e.exports=d;var i=n(3452);((d.prototype=Object.create(i.prototype)).constructor=d).className="Root";var r,o,s,a=n(6734),l=n(222),c=n(9794),u=n(2440);function d(e){i.call(this,"",e),this.deferred=[],this.files=[]}function h(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=u.path.resolve,d.prototype.fetch=u.fetch,d.prototype.load=function e(t,n,i){"function"===typeof n&&(i=n,n=void 0);var r=this;if(!i)return u.asPromise(e,r,t,n);var a=i===h;function l(e,t){if(i){var n=i;if(i=null,a)throw e;n(e,t)}}function c(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var n=e.substring(t);if(n in s)return n}return null}function d(e,t){try{if(u.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),u.isString(t)){o.filename=e;var i,s=o(t,r,n),d=0;if(s.imports)for(;d<s.imports.length;++d)(i=c(s.imports[d])||r.resolvePath(e,s.imports[d]))&&f(i);if(s.weakImports)for(d=0;d<s.weakImports.length;++d)(i=c(s.weakImports[d])||r.resolvePath(e,s.weakImports[d]))&&f(i,!0)}else r.setOptions(t.options).addJSON(t.nested)}catch(h){l(h)}a||p||l(null,r)}function f(e,t){if(!(r.files.indexOf(e)>-1))if(r.files.push(e),e in s)a?d(e,s[e]):(++p,setTimeout((function(){--p,d(e,s[e])})));else if(a){var n;try{n=u.fs.readFileSync(e).toString("utf8")}catch(o){return void(t||l(o))}d(e,n)}else++p,r.fetch(e,(function(n,o){--p,i&&(n?t?p||l(null,r):l(n):d(e,o))}))}var p=0;u.isString(t)&&(t=[t]);for(var g,m=0;m<t.length;++m)(g=r.resolvePath("",t[m]))&&f(g);if(a)return r;p||l(null,r)},d.prototype.loadSync=function(e,t){if(!u.isNode)throw Error("not supported");return this.load(e,t,h)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return i.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(e,t){var n=t.parent.lookup(t.extend);if(n){var i=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return i.declaringField=t,t.extensionField=i,n.add(i),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||p(0,e)||this.deferred.push(e);else if(e instanceof l)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof c)){if(e instanceof r)for(var t=0;t<this.deferred.length;)p(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);f.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof l)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof i){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);f.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,n){r=e,o=t,s=n}},7907:function(e){"use strict";e.exports={}},9994:function(e,t,n){"use strict";t.Service=n(4281)},4281:function(e,t,n){"use strict";e.exports=r;var i=n(3097);function r(e,t,n){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(r.prototype=Object.create(i.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,n,r,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return i.asPromise(e,a,t,n,r,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof r))try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(l){return a.emit("error",l,t),void setTimeout((function(){s(l)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},4173:function(e,t,n){"use strict";e.exports=a;var i=n(3452);((a.prototype=Object.create(i.prototype)).constructor=a).className="Service";var r=n(4865),o=n(2440),s=n(9994);function a(e,t){i.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var n=new a(e,t.options);if(t.methods)for(var i=Object.keys(t.methods),o=0;o<i.length;++o)n.add(r.fromJSON(i[o],t.methods[i[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},a.prototype.toJSON=function(e){var t=i.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||void 0,"methods",i.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||i.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return i.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof r?(this.methods[e.name]=e,e.parent=this,l(this)):i.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof r){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return i.prototype.remove.call(this,e)},a.prototype.create=function(e,t,n){for(var i,r=new s.Service(e,t,n),a=0;a<this.methodsArray.length;++a){var l=o.lcFirst((i=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");r[l]=o.codegen(["r","c"],o.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:i,q:i.resolvedRequestType.ctor,s:i.resolvedResponseType.ctor})}return r}},8716:function(e,t,n){"use strict";e.exports=y;var i=n(3452);((y.prototype=Object.create(i.prototype)).constructor=y).className="Type";var r=n(222),o=n(9794),s=n(6734),a=n(4479),l=n(4173),c=n(4486),u=n(6216),d=n(7063),h=n(2440),f=n(6886),p=n(2715),g=n(709),m=n(7276),v=n(9025);function y(e,t){i.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],i=n.id;if(this._fieldsById[i])throw Error("duplicate id "+i+" in "+this);this._fieldsById[i]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=y.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof c||((e.prototype=new c).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,c,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var i={};for(n=0;n<this.oneofsArray.length;++n)i[this._oneofsArray[n].resolve().name]={get:h.oneOfGetter(this._oneofsArray[n].oneof),set:h.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,i)}}}),y.generateConstructor=function(e){for(var t,n=h.codegen(["p"],e.name),i=0;i<e.fieldsArray.length;++i)(t=e._fieldsArray[i]).map?n("this%s={}",h.safeProp(t.name)):t.repeated&&n("this%s=[]",h.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(e,t){var n=new y(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var c=Object.keys(t.fields),u=0;u<c.length;++u)n.add(("undefined"!==typeof t.fields[c[u]].keyType?a.fromJSON:s.fromJSON)(c[u],t.fields[c[u]]));if(t.oneofs)for(c=Object.keys(t.oneofs),u=0;u<c.length;++u)n.add(o.fromJSON(c[u],t.oneofs[c[u]]));if(t.nested)for(c=Object.keys(t.nested),u=0;u<c.length;++u){var d=t.nested[c[u]];n.add((void 0!==d.id?s.fromJSON:void 0!==d.fields?y.fromJSON:void 0!==d.values?r.fromJSON:void 0!==d.methods?l.fromJSON:i.fromJSON)(c[u],d))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},y.prototype.toJSON=function(e){var t=i.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return h.toObject(["options",t&&t.options||void 0,"oneofs",i.arrayToJSON(this.oneofsArray,e),"fields",i.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},y.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return i.prototype.resolveAll.call(this)},y.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},y.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof s&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof o?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):i.prototype.add.call(this,e)},y.prototype.remove=function(e){if(e instanceof s&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof o){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return i.prototype.remove.call(this,e)},y.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},y.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)},y.prototype.create=function(e){return new this.ctor(e)},y.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=f(this)({Writer:d,types:t,util:h}),this.decode=p(this)({Reader:u,types:t,util:h}),this.verify=g(this)({types:t,util:h}),this.fromObject=m.fromObject(this)({types:t,util:h}),this.toObject=m.toObject(this)({types:t,util:h});var i=v[e];if(i){var r=Object.create(this);r.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(r),r.toObject=this.toObject,this.toObject=i.toObject.bind(r)}return this},y.prototype.encode=function(e,t){return this.setup().encode(e,t)},y.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},y.prototype.decode=function(e,t){return this.setup().decode(e,t)},y.prototype.decodeDelimited=function(e){return e instanceof u||(e=u.create(e)),this.decode(e,e.uint32())},y.prototype.verify=function(e){return this.setup().verify(e)},y.prototype.fromObject=function(e){return this.setup().fromObject(e)},y.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},y.d=function(e){return function(t){h.decorateType(t,e)}}},8517:function(e,t,n){"use strict";var i=t,r=n(2440),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function s(e,t){var n=0,i={};for(t|=0;n<e.length;)i[o[n+t]]=e[n++];return i}i.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),i.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",r.emptyArray,null]),i.long=s([0,0,0,1,1],7),i.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),i.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0])},2440:function(e,t,n){"use strict";var i,r,o=e.exports=n(3097),s=n(7907);o.codegen=n(3297),o.fetch=n(7635),o.path=n(7468),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),i=0;i<t.length;)n[i]=e[t[i++]];return n}return[]},o.toObject=function(e){for(var t={},n=0;n<e.length;){var i=e[n++],r=e[n++];void 0!==r&&(t[i]=r)}return t};var a=/\\/g,l=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(a,"\\\\").replace(l,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var c=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(c,(function(e,t){return t.toUpperCase()}))},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(o.decorateRoot.remove(e.$type),e.$type.name=t,o.decorateRoot.add(e.$type)),e.$type;i||(i=n(8716));var r=new i(t||e.name);return o.decorateRoot.add(r),r.ctor=e,Object.defineProperty(e,"$type",{value:r,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:r,enumerable:!1}),r};var u=0;o.decorateEnum=function(e){if(e.$type)return e.$type;r||(r=n(222));var t=new r("Enum"+u++,e);return o.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},o.setProperty=function(e,t,n){if("object"!==typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,n,i){var r=n.shift();if("__proto__"===r)return t;if(n.length>0)t[r]=e(t[r]||{},n,i);else{var o=t[r];o&&(i=[].concat(o).concat(i)),t[r]=i}return t}(e,t=t.split("."),n)},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(n(8622)))}})},9351:function(e,t,n){"use strict";e.exports=r;var i=n(3097);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=r.zero=new r(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new r(n,i)},r.from=function(e){if("number"===typeof e)return r.fromNumber(e);if(i.isString(e)){if(!i.Long)return r.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):o},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;r.fromHash=function(e){return e===s?o:new r((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},3097:function(e,t,n){"use strict";var i=t;function r(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;++r)void 0!==e[i[r]]&&n||(e[i[r]]=t[i[r]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}i.asPromise=n(7206),i.base64=n(1),i.EventEmitter=n(7111),i.float=n(802),i.inquire=n(7172),i.utf8=n(3861),i.pool=n(8236),i.LongBits=n(9351),i.isNode=Boolean("undefined"!==typeof n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),i.global=i.isNode&&n.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},i.isString=function(e){return"string"===typeof e||e instanceof String},i.isObject=function(e){return e&&"object"===typeof e},i.isset=i.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(e){return"number"===typeof e?i.Buffer?i._Buffer_allocUnsafe(e):new i.Array(e):i.Buffer?i._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},i.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(e){return e?i.LongBits.from(e).toHash():i.LongBits.zeroHash},i.longFromHash=function(e,t){var n=i.LongBits.fromHash(e);return i.Long?i.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},i.merge=r,i.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},i.newError=o,i.ProtocolError=o("ProtocolError"),i.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},i.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var e=i.Buffer;e?(i._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},i._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):i._Buffer_from=i._Buffer_allocUnsafe=null}},709:function(e,t,n){"use strict";e.exports=function(e){var t=r.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n=e.oneofsArray,i={};n.length&&t("var p={}");for(var l=0;l<e.fieldsArray.length;++l){var c=e._fieldsArray[l].resolve(),u="m"+r.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",u,c.name),c.map)t("if(!util.isObject(%s))",u)("return%j",o(c,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),a(t,c,"k[i]"),s(t,c,l,u+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",u)("return%j",o(c,"array"))("for(var i=0;i<%s.length;++i){",u),s(t,c,l,u+"[i]")("}");else{if(c.partOf){var d=r.safeProp(c.partOf.name);1===i[c.partOf.name]&&t("if(p%s===1)",d)("return%j",c.partOf.name+": multiple values"),i[c.partOf.name]=1,t("p%s=1",d)}s(t,c,l,u)}c.optional&&t("}")}return t("return null")};var i=n(222),r=n(2440);function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(%s){",r)("default:")("return%j",o(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,r)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",r)("return%j",o(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",o(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',r)("return%j",o(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',r)("return%j",o(t,"boolean"));break;case"string":e("if(!util.isString(%s))",r)("return%j",o(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",o(t,"buffer"))}return e}function a(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",o(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",o(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",o(t,"boolean key"))}return e}},9025:function(e,t,n){"use strict";var i=t,r=n(4486);i[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),n=this.lookup(t);if(n){var i="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===i.indexOf("/")&&(i="/"+i),this.create({type_url:i,value:n.encode(n.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var n="",i="";if(t&&t.json&&e.type_url&&e.value){i=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(i);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof r){var s=e.$type.toObject(e,t);return""===n&&(n="type.googleapis.com/"),i=n+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),s["@type"]=i,s}return this.toObject(e,t)}}},7063:function(e,t,n){"use strict";e.exports=d;var i,r=n(3097),o=r.LongBits,s=r.base64,a=r.utf8;function l(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function c(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var h=function(){return r.Buffer?function(){return(d.create=function(){return new i})()}:function(){return new d}};function f(e,t,n){t[n]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function m(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}d.create=h(),d.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(d.alloc=r.pool(d.alloc,r.Array.prototype.subarray)),d.prototype._push=function(e,t,n){return this.tail=this.tail.next=new l(e,t,n),this.len+=t,this},p.prototype=Object.create(l.prototype),p.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(f,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var v=r.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(r.isString(e)){var n=d.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},d._configure=function(e){i=e,d.create=h(),i._configure()}},2815:function(e,t,n){"use strict";e.exports=o;var i=n(7063);(o.prototype=Object.create(i.prototype)).constructor=o;var r=n(3097);function o(){i.call(this)}function s(e,t,n){e.length<40?r.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=r._Buffer_allocUnsafe,o.writeBytesBuffer=r.Buffer&&r.Buffer.prototype instanceof Uint8Array&&"set"===r.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}},o.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=r.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},6877:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(5675),s=n(2007),a=n(2791),l=n(2467),c=n(4789),u=(0,c.getAceInstance)(),d=function(e){function t(t){var n=e.call(this,t)||this;return c.editorEvents.forEach((function(e){n[e]=n[e].bind(n)})),n.debounce=c.debounce,n}return i(t,e),t.prototype.isInShadow=function(e){for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.className,i=t.onBeforeLoad,r=t.onValidate,o=t.mode,s=t.focus,a=t.theme,l=t.fontSize,d=t.value,h=t.defaultValue,f=t.showGutter,p=t.wrapEnabled,g=t.showPrintMargin,m=t.scrollMargin,v=void 0===m?[0,0,0,0]:m,y=t.keyboardHandler,b=t.onLoad,w=t.commands,_=t.annotations,x=t.markers,k=t.placeholder;this.editor=u.edit(this.refEditor),i&&i(u);for(var C=Object.keys(this.props.editorProps),S=0;S<C.length;S++)this.editor[C[S]]=this.props.editorProps[C[S]];this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),this.editor.renderer.setScrollMargin(v[0],v[1],v[2],v[3]),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.getSession().setMode("string"===typeof o?"ace/mode/"+o:o),a&&""!==a&&this.editor.setTheme("ace/theme/"+a),this.editor.setFontSize("number"===typeof l?l+"px":l),this.editor.getSession().setValue(h||(d||"")),this.props.navigateToFileEnd&&this.editor.navigateFileEnd(),this.editor.renderer.setShowGutter(f),this.editor.getSession().setUseWrapMode(p),this.editor.setShowPrintMargin(g),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("copy",this.onCopy),this.editor.on("paste",this.onPaste),this.editor.on("change",this.onChange),this.editor.on("input",this.onInput),k&&this.updatePlaceholder(),this.editor.getSession().selection.on("changeSelection",this.onSelectionChange),this.editor.getSession().selection.on("changeCursor",this.onCursorChange),r&&this.editor.getSession().on("changeAnnotation",(function(){var t=e.editor.getSession().getAnnotations();e.props.onValidate(t)})),this.editor.session.on("changeScrollTop",this.onScroll),this.editor.getSession().setAnnotations(_||[]),x&&x.length>0&&this.handleMarkers(x);var E=this.editor.$options;c.editorOptions.forEach((function(t){E.hasOwnProperty(t)?e.editor.setOption(t,e.props[t]):e.props[t]&&console.warn("ReactAce: editor option "+t+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")})),this.handleOptions(this.props),Array.isArray(w)&&w.forEach((function(t){"string"===typeof t.exec?e.editor.commands.bindKey(t.bindKey,t.exec):e.editor.commands.addCommand(t)})),y&&this.editor.setKeyboardHandler("ace/keyboard/"+y),n&&(this.refEditor.className+=" "+n),b&&b(this.editor),this.editor.resize(),s&&this.editor.focus()},t.prototype.componentDidUpdate=function(e){for(var t=e,n=this.props,i=0;i<c.editorOptions.length;i++){var r=c.editorOptions[i];n[r]!==t[r]&&this.editor.setOption(r,n[r])}if(n.className!==t.className){var o=this.refEditor.className.trim().split(" ");t.className.trim().split(" ").forEach((function(e){var t=o.indexOf(e);o.splice(t,1)})),this.refEditor.className=" "+n.className+" "+o.join(" ")}if(this.editor&&null!=n.value&&this.editor.getValue()!==n.value){this.silent=!0;var s=this.editor.session.selection.toJSON();this.editor.setValue(n.value,n.cursorStart),this.editor.session.selection.fromJSON(s),this.silent=!1}n.placeholder!==t.placeholder&&this.updatePlaceholder(),n.mode!==t.mode&&this.editor.getSession().setMode("string"===typeof n.mode?"ace/mode/"+n.mode:n.mode),n.theme!==t.theme&&this.editor.setTheme("ace/theme/"+n.theme),n.keyboardHandler!==t.keyboardHandler&&(n.keyboardHandler?this.editor.setKeyboardHandler("ace/keyboard/"+n.keyboardHandler):this.editor.setKeyboardHandler(null)),n.fontSize!==t.fontSize&&this.editor.setFontSize("number"===typeof n.fontSize?n.fontSize+"px":n.fontSize),n.wrapEnabled!==t.wrapEnabled&&this.editor.getSession().setUseWrapMode(n.wrapEnabled),n.showPrintMargin!==t.showPrintMargin&&this.editor.setShowPrintMargin(n.showPrintMargin),n.showGutter!==t.showGutter&&this.editor.renderer.setShowGutter(n.showGutter),l(n.setOptions,t.setOptions)||this.handleOptions(n),l(n.annotations,t.annotations)||this.editor.getSession().setAnnotations(n.annotations||[]),!l(n.markers,t.markers)&&Array.isArray(n.markers)&&this.handleMarkers(n.markers),l(n.scrollMargin,t.scrollMargin)||this.handleScrollMargins(n.scrollMargin),e.height===this.props.height&&e.width===this.props.width||this.editor.resize(),this.props.focus&&!e.focus&&this.editor.focus()},t.prototype.handleScrollMargins=function(e){void 0===e&&(e=[0,0,0,0]),this.editor.renderer.setScrollMargin(e[0],e[1],e[2],e[3])},t.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},t.prototype.onChange=function(e){if(this.props.onChange&&!this.silent){var t=this.editor.getValue();this.props.onChange(t,e)}},t.prototype.onSelectionChange=function(e){if(this.props.onSelectionChange){var t=this.editor.getSelection();this.props.onSelectionChange(t,e)}},t.prototype.onCursorChange=function(e){if(this.props.onCursorChange){var t=this.editor.getSelection();this.props.onCursorChange(t,e)}},t.prototype.onInput=function(e){this.props.onInput&&this.props.onInput(e),this.props.placeholder&&this.updatePlaceholder()},t.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e,this.editor)},t.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e,this.editor)},t.prototype.onCopy=function(e){var t=e.text;this.props.onCopy&&this.props.onCopy(t)},t.prototype.onPaste=function(e){var t=e.text;this.props.onPaste&&this.props.onPaste(t)},t.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},t.prototype.handleOptions=function(e){for(var t=Object.keys(e.setOptions),n=0;n<t.length;n++)this.editor.setOption(t[n],e.setOptions[t[n]])},t.prototype.handleMarkers=function(e){var t=this,n=this.editor.getSession().getMarkers(!0);for(var i in n)n.hasOwnProperty(i)&&this.editor.getSession().removeMarker(n[i].id);for(var i in n=this.editor.getSession().getMarkers(!1))n.hasOwnProperty(i)&&"ace_active-line"!==n[i].clazz&&"ace_selected-word"!==n[i].clazz&&this.editor.getSession().removeMarker(n[i].id);e.forEach((function(e){var n=e.startRow,i=e.startCol,r=e.endRow,s=e.endCol,a=e.className,l=e.type,c=e.inFront,u=void 0!==c&&c,d=new o.Range(n,i,r,s);t.editor.getSession().addMarker(d,a,l,u)}))},t.prototype.updatePlaceholder=function(){var e=this.editor,t=this.props.placeholder,n=!e.session.getValue().length,i=e.renderer.placeholderNode;!n&&i?(e.renderer.scroller.removeChild(e.renderer.placeholderNode),e.renderer.placeholderNode=null):n&&!i?((i=e.renderer.placeholderNode=document.createElement("div")).textContent=t||"",i.className="ace_comment ace_placeholder",i.style.padding="0 9px",i.style.position="absolute",i.style.zIndex="3",e.renderer.scroller.appendChild(i)):n&&i&&(i.textContent=t)},t.prototype.updateRef=function(e){this.refEditor=e},t.prototype.render=function(){var e=this.props,t=e.name,n=e.width,i=e.height,o=e.style,s=r({width:n,height:i},o);return a.createElement("div",{ref:this.updateRef,id:t,style:s})},t.propTypes={mode:s.oneOfType([s.string,s.object]),focus:s.bool,theme:s.string,name:s.string,className:s.string,height:s.string,width:s.string,fontSize:s.oneOfType([s.number,s.string]),showGutter:s.bool,onChange:s.func,onCopy:s.func,onPaste:s.func,onFocus:s.func,onInput:s.func,onBlur:s.func,onScroll:s.func,value:s.string,defaultValue:s.string,onLoad:s.func,onSelectionChange:s.func,onCursorChange:s.func,onBeforeLoad:s.func,onValidate:s.func,minLines:s.number,maxLines:s.number,readOnly:s.bool,highlightActiveLine:s.bool,tabSize:s.number,showPrintMargin:s.bool,cursorStart:s.number,debounceChangePeriod:s.number,editorProps:s.object,setOptions:s.object,style:s.object,scrollMargin:s.array,annotations:s.array,markers:s.array,keyboardHandler:s.string,wrapEnabled:s.bool,enableSnippets:s.bool,enableBasicAutocompletion:s.oneOfType([s.bool,s.array]),enableLiveAutocompletion:s.oneOfType([s.bool,s.array]),navigateToFileEnd:s.bool,commands:s.array,placeholder:s.string},t.defaultProps={name:"ace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",fontSize:12,enableSnippets:!1,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,placeholder:null,navigateToFileEnd:!0},t}(a.Component);t.default=d},5613:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(2007),o=n(2791),s=n(812),a=n(3484),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={value:n.props.value},n.onChange=n.onChange.bind(n),n.diff=n.diff.bind(n),n}return i(t,e),t.prototype.componentDidUpdate=function(){var e=this.props.value;e!==this.state.value&&this.setState({value:e})},t.prototype.onChange=function(e){this.setState({value:e}),this.props.onChange&&this.props.onChange(e)},t.prototype.diff=function(){var e=new a,t=this.state.value[0],n=this.state.value[1];if(0===t.length&&0===n.length)return[];var i=e.diff_main(t,n);e.diff_cleanupSemantic(i);var r=this.generateDiffedLines(i);return this.setCodeMarkers(r)},t.prototype.generateDiffedLines=function(e){var t=0,n=-1,i=1,r={left:[],right:[]},o={left:1,right:1};return e.forEach((function(e){var s=e[0],a=e[1],l=a.split("\n").length-1;if(0!==a.length){var c=a[0],u=a[a.length-1],d=0;switch(s){case t:o.left+=l,o.right+=l;break;case n:"\n"===c&&(o.left++,l--),0===(d=l)&&r.right.push({startLine:o.right,endLine:o.right}),"\n"===u&&(d-=1),r.left.push({startLine:o.left,endLine:o.left+d}),o.left+=l;break;case i:"\n"===c&&(o.right++,l--),0===(d=l)&&r.left.push({startLine:o.left,endLine:o.left}),"\n"===u&&(d-=1),r.right.push({startLine:o.right,endLine:o.right+d}),o.right+=l;break;default:throw new Error("Diff type was not defined.")}}})),r},t.prototype.setCodeMarkers=function(e){void 0===e&&(e={left:[],right:[]});for(var t=[],n={left:[],right:[]},i=0;i<e.left.length;i++){var r={startRow:e.left[i].startLine-1,endRow:e.left[i].endLine,type:"text",className:"codeMarker"};n.left.push(r)}for(i=0;i<e.right.length;i++){r={startRow:e.right[i].startLine-1,endRow:e.right[i].endLine,type:"text",className:"codeMarker"};n.right.push(r)}return t[0]=n.left,t[1]=n.right,t},t.prototype.render=function(){var e=this.diff();return o.createElement(s.default,{name:this.props.name,className:this.props.className,focus:this.props.focus,orientation:this.props.orientation,splits:this.props.splits,mode:this.props.mode,theme:this.props.theme,height:this.props.height,width:this.props.width,fontSize:this.props.fontSize,showGutter:this.props.showGutter,onChange:this.onChange,onPaste:this.props.onPaste,onLoad:this.props.onLoad,onScroll:this.props.onScroll,minLines:this.props.minLines,maxLines:this.props.maxLines,readOnly:this.props.readOnly,highlightActiveLine:this.props.highlightActiveLine,showPrintMargin:this.props.showPrintMargin,tabSize:this.props.tabSize,cursorStart:this.props.cursorStart,editorProps:this.props.editorProps,style:this.props.style,scrollMargin:this.props.scrollMargin,setOptions:this.props.setOptions,wrapEnabled:this.props.wrapEnabled,enableBasicAutocompletion:this.props.enableBasicAutocompletion,enableLiveAutocompletion:this.props.enableLiveAutocompletion,value:this.state.value,markers:e})},t.propTypes={cursorStart:r.number,editorProps:r.object,enableBasicAutocompletion:r.bool,enableLiveAutocompletion:r.bool,focus:r.bool,fontSize:r.number,height:r.string,highlightActiveLine:r.bool,maxLines:r.number,minLines:r.number,mode:r.string,name:r.string,className:r.string,onLoad:r.func,onPaste:r.func,onScroll:r.func,onChange:r.func,orientation:r.string,readOnly:r.bool,scrollMargin:r.array,setOptions:r.object,showGutter:r.bool,showPrintMargin:r.bool,splits:r.number,style:r.object,tabSize:r.number,theme:r.string,value:r.array,width:r.string,wrapEnabled:r.bool},t.defaultProps={cursorStart:1,editorProps:{},enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,focus:!1,fontSize:12,height:"500px",highlightActiveLine:!0,maxLines:null,minLines:null,mode:"",name:"ace-editor",onLoad:null,onScroll:null,onPaste:null,onChange:null,orientation:"beside",readOnly:!1,scrollMargin:[0,0,0,0],setOptions:{},showGutter:!0,showPrintMargin:!0,splits:2,style:{},tabSize:4,theme:"github",value:["",""],width:"500px",wrapEnabled:!0},t}(o.Component);t.default=l},4789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAceInstance=t.debounce=t.editorEvents=t.editorOptions=void 0;t.editorOptions=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"];t.editorEvents=["onChange","onFocus","onInput","onBlur","onCopy","onPaste","onSelectionChange","onCursorChange","onScroll","handleOptions","updateRef"];t.getAceInstance=function(){var e;return"undefined"===typeof window?(n.g.window={},e=n(5675),delete n.g.window):window.ace?(e=window.ace).acequire=window.ace.require||window.ace.acequire:e=n(5675),e};t.debounce=function(e,t){var n=null;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(i,r)}),t)}}},8399:function(e,t,n){"use strict";var i=n(6877);n(5613).default,n(812).default,t.ZP=i.default},812:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4789),s=(0,o.getAceInstance)(),a=n(5675),l=n(6866),c=n(2007),u=n(2791),d=n(2467),h=n(8929),f=function(e){function t(t){var n=e.call(this,t)||this;return o.editorEvents.forEach((function(e){n[e]=n[e].bind(n)})),n.debounce=o.debounce,n}return i(t,e),t.prototype.isInShadow=function(e){for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.className,i=t.onBeforeLoad,r=t.mode,a=t.focus,c=t.theme,u=t.fontSize,d=t.value,f=t.defaultValue,p=t.cursorStart,g=t.showGutter,m=t.wrapEnabled,v=t.showPrintMargin,y=t.scrollMargin,b=void 0===y?[0,0,0,0]:y,w=t.keyboardHandler,_=t.onLoad,x=t.commands,k=t.annotations,C=t.markers,S=t.splits;this.editor=s.edit(this.refEditor),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.setTheme("ace/theme/"+c),i&&i(s);var E=Object.keys(this.props.editorProps),O=new l.Split(this.editor.container,"ace/theme/"+c,S);this.editor.env.split=O,this.splitEditor=O.getEditor(0),this.split=O,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);var A=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),O.forEach((function(t,n){for(var i=0;i<E.length;i++)t[E[i]]=e.props.editorProps[E[i]];var a=h(f,n),l=h(d,n,"");t.session.setUndoManager(new s.UndoManager),t.setTheme("ace/theme/"+c),t.renderer.setScrollMargin(b[0],b[1],b[2],b[3]),t.getSession().setMode("ace/mode/"+r),t.setFontSize(u),t.renderer.setShowGutter(g),t.getSession().setUseWrapMode(m),t.setShowPrintMargin(v),t.on("focus",e.onFocus),t.on("blur",e.onBlur),t.on("input",e.onInput),t.on("copy",e.onCopy),t.on("paste",e.onPaste),t.on("change",e.onChange),t.getSession().selection.on("changeSelection",e.onSelectionChange),t.getSession().selection.on("changeCursor",e.onCursorChange),t.session.on("changeScrollTop",e.onScroll),t.setValue(void 0===a?l:a,p);var y=h(k,n,[]),_=h(C,n,[]);t.getSession().setAnnotations(y),_&&_.length>0&&e.handleMarkers(_,t);for(i=0;i<o.editorOptions.length;i++){var S=o.editorOptions[i];A.hasOwnProperty(S)?t.setOption(S,e.props[S]):e.props[S]&&console.warn("ReaceAce: editor option "+S+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")}e.handleOptions(e.props,t),Array.isArray(x)&&x.forEach((function(e){"string"===typeof e.exec?t.commands.bindKey(e.bindKey,e.exec):t.commands.addCommand(e)})),w&&t.setKeyboardHandler("ace/keyboard/"+w)})),n&&(this.refEditor.className+=" "+n),a&&this.splitEditor.focus();var M=this.editor.env.split;M.setOrientation("below"===this.props.orientation?M.BELOW:M.BESIDE),M.resize(!0),_&&_(M)},t.prototype.componentDidUpdate=function(e){var t=this,n=e,i=this.props,r=this.editor.env.split;if(i.splits!==n.splits&&r.setSplits(i.splits),i.orientation!==n.orientation&&r.setOrientation("below"===i.orientation?r.BELOW:r.BESIDE),r.forEach((function(e,r){i.mode!==n.mode&&e.getSession().setMode("ace/mode/"+i.mode),i.keyboardHandler!==n.keyboardHandler&&(i.keyboardHandler?e.setKeyboardHandler("ace/keyboard/"+i.keyboardHandler):e.setKeyboardHandler(null)),i.fontSize!==n.fontSize&&e.setFontSize(i.fontSize),i.wrapEnabled!==n.wrapEnabled&&e.getSession().setUseWrapMode(i.wrapEnabled),i.showPrintMargin!==n.showPrintMargin&&e.setShowPrintMargin(i.showPrintMargin),i.showGutter!==n.showGutter&&e.renderer.setShowGutter(i.showGutter);for(var s=0;s<o.editorOptions.length;s++){var a=o.editorOptions[s];i[a]!==n[a]&&e.setOption(a,i[a])}d(i.setOptions,n.setOptions)||t.handleOptions(i,e);var l=h(i.value,r,"");if(e.getValue()!==l){t.silent=!0;var c=e.session.selection.toJSON();e.setValue(l,i.cursorStart),e.session.selection.fromJSON(c),t.silent=!1}var u=h(i.annotations,r,[]),f=h(n.annotations,r,[]);d(u,f)||e.getSession().setAnnotations(u);var p=h(i.markers,r,[]),g=h(n.markers,r,[]);!d(p,g)&&Array.isArray(p)&&t.handleMarkers(p,e)})),i.className!==n.className){var s=this.refEditor.className.trim().split(" ");n.className.trim().split(" ").forEach((function(e){var t=s.indexOf(e);s.splice(t,1)})),this.refEditor.className=" "+i.className+" "+s.join(" ")}i.theme!==n.theme&&r.setTheme("ace/theme/"+i.theme),i.focus&&!n.focus&&this.splitEditor.focus(),i.height===this.props.height&&i.width===this.props.width||this.editor.resize()},t.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},t.prototype.onChange=function(e){if(this.props.onChange&&!this.silent){var t=[];this.editor.env.split.forEach((function(e){t.push(e.getValue())})),this.props.onChange(t,e)}},t.prototype.onSelectionChange=function(e){if(this.props.onSelectionChange){var t=[];this.editor.env.split.forEach((function(e){t.push(e.getSelection())})),this.props.onSelectionChange(t,e)}},t.prototype.onCursorChange=function(e){if(this.props.onCursorChange){var t=[];this.editor.env.split.forEach((function(e){t.push(e.getSelection())})),this.props.onCursorChange(t,e)}},t.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e)},t.prototype.onInput=function(e){this.props.onInput&&this.props.onInput(e)},t.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e)},t.prototype.onCopy=function(e){this.props.onCopy&&this.props.onCopy(e)},t.prototype.onPaste=function(e){this.props.onPaste&&this.props.onPaste(e)},t.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},t.prototype.handleOptions=function(e,t){for(var n=Object.keys(e.setOptions),i=0;i<n.length;i++)t.setOption(n[i],e.setOptions[n[i]])},t.prototype.handleMarkers=function(e,t){var n=t.getSession().getMarkers(!0);for(var i in n)n.hasOwnProperty(i)&&t.getSession().removeMarker(n[i].id);for(var i in n=t.getSession().getMarkers(!1))n.hasOwnProperty(i)&&t.getSession().removeMarker(n[i].id);e.forEach((function(e){var n=e.startRow,i=e.startCol,r=e.endRow,o=e.endCol,s=e.className,l=e.type,c=e.inFront,u=void 0!==c&&c,d=new a.Range(n,i,r,o);t.getSession().addMarker(d,s,l,u)}))},t.prototype.updateRef=function(e){this.refEditor=e},t.prototype.render=function(){var e=this.props,t=e.name,n=e.width,i=e.height,o=e.style,s=r({width:n,height:i},o);return u.createElement("div",{ref:this.updateRef,id:t,style:s})},t.propTypes={className:c.string,debounceChangePeriod:c.number,defaultValue:c.arrayOf(c.string),focus:c.bool,fontSize:c.oneOfType([c.number,c.string]),height:c.string,mode:c.string,name:c.string,onBlur:c.func,onChange:c.func,onCopy:c.func,onFocus:c.func,onInput:c.func,onLoad:c.func,onPaste:c.func,onScroll:c.func,orientation:c.string,showGutter:c.bool,splits:c.number,theme:c.string,value:c.arrayOf(c.string),width:c.string,onSelectionChange:c.func,onCursorChange:c.func,onBeforeLoad:c.func,minLines:c.number,maxLines:c.number,readOnly:c.bool,highlightActiveLine:c.bool,tabSize:c.number,showPrintMargin:c.bool,cursorStart:c.number,editorProps:c.object,setOptions:c.object,style:c.object,scrollMargin:c.array,annotations:c.array,markers:c.array,keyboardHandler:c.string,wrapEnabled:c.bool,enableBasicAutocompletion:c.oneOfType([c.bool,c.array]),enableLiveAutocompletion:c.oneOfType([c.bool,c.array]),commands:c.array},t.defaultProps={name:"ace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1},t}(u.Component);t.default=f},4463:function(e,t,n){"use strict";var i=n(2791),r=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,i,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),O=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var F,$=Object.assign;function P(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var j=!1;function B(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?P(e):""}function z(e){switch(e.tag){case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case S:return"Profiler";case C:return"StrictMode";case M:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=H(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return $({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){X(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return $({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Ce=null;function Se(e){if(e=mr(e)){if("function"!==typeof xe)throw Error(o(280));var t=e.stateNode;t&&(t=yr(t),xe(e.stateNode,e.type,t))}}function Ee(e){ke?Ce?Ce.push(e):Ce=[e]:ke=e}function Oe(){if(ke){var e=ke,t=Ce;if(Ce=ke=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ae(e,t){return e(t)}function Me(){}var Re=!1;function Te(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ae(e,t,n)}finally{Re=!1,(null!==ke||null!==Ce)&&(Me(),Oe())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var i=yr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ie=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){Ie=!1}function Ne(e,t,n,i,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Fe=!1,$e=null,Pe=!1,je=null,Be={onError:function(e){Fe=!0,$e=e}};function ze(e,t,n,i,r,o,s,a,l){Fe=!1,$e=null,Ne.apply(Be,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return We(r),e;if(s===i)return We(r),t;s=s.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=r.unstable_scheduleCallback,Ke=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Je=r.unstable_requestPaint,Xe=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?i=dt(a):0!==(o&=s)&&(i=dt(o))}else 0!==(s=n&~r)?i=dt(s):0!==o&&(i=dt(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-st(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-st(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,kt,Ct,St=!1,Et=[],Ot=null,At=null,Mt=null,Rt=new Map,Tt=new Map,Dt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Nt(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=mr(t))&&_t(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ft(e){var t=gr(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ct(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function $t(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=mr(n))&&_t(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);we=i,n.target.dispatchEvent(i),we=null,t.shift()}return!0}function Pt(e,t,n){$t(e)&&n.delete(t)}function jt(){St=!1,null!==Ot&&$t(Ot)&&(Ot=null),null!==At&&$t(At)&&(At=null),null!==Mt&&$t(Mt)&&(Mt=null),Rt.forEach(Pt),Tt.forEach(Pt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Et.length){Bt(Et[0],e);for(var n=1;n<Et.length;n++){var i=Et[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Ot&&Bt(Ot,e),null!==At&&Bt(At,e),null!==Mt&&Bt(Mt,e),Rt.forEach(t),Tt.forEach(t),n=0;n<Dt.length;n++)(i=Dt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var Ut=w.ReactCurrentBatchConfig;function Vt(e,t,n,i){var r=yt,o=Ut.transition;Ut.transition=null;try{yt=1,Ht(e,t,n,i)}finally{yt=r,Ut.transition=o}}function Wt(e,t,n,i){var r=yt,o=Ut.transition;Ut.transition=null;try{yt=4,Ht(e,t,n,i)}finally{yt=r,Ut.transition=o}}function Ht(e,t,n,i){var r=Gt(e,t,n,i);if(null===r)Ui(e,t,i,qt,n),Lt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Ot=Nt(Ot,e,t,n,i,r),!0;case"dragenter":return At=Nt(At,e,t,n,i,r),!0;case"mouseover":return Mt=Nt(Mt,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Rt.set(o,Nt(Rt.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Tt.set(o,Nt(Tt.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Lt(e,i),4&t&&-1<It.indexOf(e)){for(;null!==r;){var o=mr(r);if(null!==o&&wt(o),null===(o=Gt(e,t,n,i))&&Ui(e,t,i,qt,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Ui(e,t,i,null,n)}var qt=null;function Gt(e,t,n,i){if(qt=null,null!==(e=gr(e=_e(i))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Xt=null;function Qt(){if(Xt)return Xt;var e,t,n=Jt,i=n.length,r="value"in Yt?Yt.value:Yt.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);return Xt=r.slice(e,1<t?1-t:void 0)}function Zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,i,r,o){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?en:tn,this.isPropagationStopped=tn,this}return $(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var rn,on,sn,an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=nn(an),cn=$({},an,{view:0,detail:0}),un=nn(cn),dn=$({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(rn=e.screenX-sn.screenX,on=e.screenY-sn.screenY):on=rn=0,sn=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),hn=nn(dn),fn=nn($({},dn,{dataTransfer:0})),pn=nn($({},cn,{relatedTarget:0})),gn=nn($({},an,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=$({},an,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=nn(mn),yn=nn($({},an,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function kn(){return xn}var Cn=$({},cn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?Zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=nn(Cn),En=nn($({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=nn($({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),An=nn($({},an,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=$({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=nn(Mn),Tn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,In=null;u&&"documentMode"in document&&(In=document.documentMode);var Ln=u&&"TextEvent"in window&&!In,Nn=u&&(!Dn||In&&8<In&&11>=In),Fn=String.fromCharCode(32),$n=!1;function Pn(e,t){switch(e){case"keyup":return-1!==Tn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Vn(e,t,n,i){Ee(i),0<(t=Wi(t,"onChange")).length&&(n=new ln("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function qn(e){Fi(e,0)}function Gn(e){if(G(vr(e)))return e}function Kn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Jn;if(u){var Xn="oninput"in document;if(!Xn){var Qn=document.createElement("div");Qn.setAttribute("oninput","return;"),Xn="function"===typeof Qn.oninput}Jn=Xn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function Zn(){Wn&&(Wn.detachEvent("onpropertychange",ei),Hn=Wn=null)}function ei(e){if("value"===e.propertyName&&Gn(Hn)){var t=[];Vn(t,Hn,e,_e(e)),Te(qn,t)}}function ti(e,t,n){"focusin"===e?(Zn(),Hn=n,(Wn=t).attachEvent("onpropertychange",ei)):"focusout"===e&&Zn()}function ni(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Hn)}function ii(e,t){if("click"===e)return Gn(t)}function ri(e,t){if("input"===e||"change"===e)return Gn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function si(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!oi(e[r],t[r]))return!1}return!0}function ai(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function li(e,t){var n,i=ai(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ai(i)}}function ci(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ci(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ui(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hi(e){var t=ui(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ci(n.ownerDocument.documentElement,n)){if(null!==i&&di(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=li(n,o);var s=li(n,i);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fi=u&&"documentMode"in document&&11>=document.documentMode,pi=null,gi=null,mi=null,vi=!1;function yi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vi||null==pi||pi!==K(i)||("selectionStart"in(i=pi)&&di(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},mi&&si(mi,i)||(mi=i,0<(i=Wi(gi,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=pi)))}function bi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},_i={},xi={};function ki(e){if(_i[e])return _i[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in xi)return _i[e]=n[t];return e}u&&(xi=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ci=ki("animationend"),Si=ki("animationiteration"),Ei=ki("animationstart"),Oi=ki("transitionend"),Ai=new Map,Mi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(e,t){Ai.set(e,t),l(t,[e])}for(var Ti=0;Ti<Mi.length;Ti++){var Di=Mi[Ti];Ri(Di.toLowerCase(),"on"+(Di[0].toUpperCase()+Di.slice(1)))}Ri(Ci,"onAnimationEnd"),Ri(Si,"onAnimationIteration"),Ri(Ei,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(Oi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ii));function Ni(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,s,a,l,c){if(ze.apply(this,arguments),Fe){if(!Fe)throw Error(o(198));var u=$e;Fe=!1,$e=null,Pe||(Pe=!0,je=u)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;Ni(r,a,c),o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;Ni(r,a,c),o=l}}}if(Pe)throw e=je,Pe=!1,je=null,e}function $i(e,t){var n=t[hr];void 0===n&&(n=t[hr]=new Set);var i=e+"__bubble";n.has(i)||(zi(t,e,2,!1),n.add(i))}function Pi(e,t,n){var i=0;t&&(i|=4),zi(n,e,i,t)}var ji="_reactListening"+Math.random().toString(36).slice(2);function Bi(e){if(!e[ji]){e[ji]=!0,s.forEach((function(t){"selectionchange"!==t&&(Li.has(t)||Pi(t,!1,e),Pi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ji]||(t[ji]=!0,Pi("selectionchange",!1,t))}}function zi(e,t,n,i){switch(Kt(t)){case 1:var r=Vt;break;case 4:r=Wt;break;default:r=Ht}n=r.bind(null,t,n,e),r=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Ui(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=gr(a)))return;if(5===(l=s.tag)||6===l){i=o=s;continue e}a=a.parentNode}}i=i.return}Te((function(){var i=o,r=_e(n),s=[];e:{var a=Ai.get(e);if(void 0!==a){var l=ln,c=e;switch(e){case"keypress":if(0===Zt(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=pn;break;case"focusout":c="blur",l=pn;break;case"beforeblur":case"afterblur":l=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case Ci:case Si:case Ei:l=gn;break;case Oi:l=An;break;case"scroll":l=un;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=De(p,h))&&u.push(Vi(p,g,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,r),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gr(c)&&!c[dr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?gr(c):null)&&(c!==(d=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=hn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=En,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:vr(l),f=null==c?a:vr(c),(a=new u(g,p+"leave",l,n,r)).target=d,a.relatedTarget=f,g=null,gr(r)===i&&((u=new u(h,p+"enter",c,n,r)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Hi(f))p++;for(f=0,g=h;g;g=Hi(g))f++;for(;0<p-f;)u=Hi(u),p--;for(;0<f-p;)h=Hi(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Hi(u),h=Hi(h)}u=null}else u=null;null!==l&&qi(s,a,l,u,!1),null!==c&&null!==d&&qi(s,d,c,u,!0)}if("select"===(l=(a=i?vr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Kn;else if(Un(a))if(Yn)m=ri;else{m=ni;var v=ti}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=ii);switch(m&&(m=m(e,i))?Vn(s,m,n,r):(v&&v(e,a,i),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=i?vr(i):window,e){case"focusin":(Un(v)||"true"===v.contentEditable)&&(pi=v,gi=i,mi=null);break;case"focusout":mi=gi=pi=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,yi(s,n,r);break;case"selectionchange":if(fi)break;case"keydown":case"keyup":yi(s,n,r)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Pn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=Qt()):(Jt="value"in(Yt=r)?Yt.value:Yt.textContent,Bn=!0)),0<(v=Wi(i,b)).length&&(b=new yn(b,e,null,n,r),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=jn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:($n=!0,Fn);case"textInput":return(e=t.data)===Fn&&$n?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Pn(e,t)?(e=Qt(),Xt=Jt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Wi(i,"onBeforeInput")).length&&(r=new yn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=y))}Fi(s,t)}))}function Vi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=De(e,n))&&i.unshift(Vi(e,o,r)),null!=(o=De(e,t))&&i.push(Vi(e,o,r))),e=e.return}return i}function Hi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qi(e,t,n,i,r){for(var o=t._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=De(n,o))&&s.unshift(Vi(n,l,a)):r||null!=(l=De(n,o))&&s.push(Vi(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Gi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Yi(e){return("string"===typeof e?e:""+e).replace(Gi,"\n").replace(Ki,"")}function Ji(e,t,n){if(t=Yi(t),Yi(e)!==t&&n)throw Error(o(425))}function Xi(){}var Qi=null;function Zi(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var er="function"===typeof setTimeout?setTimeout:void 0,tr="function"===typeof clearTimeout?clearTimeout:void 0,nr="function"===typeof Promise?Promise:void 0,ir="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nr?function(e){return nr.resolve(null).then(e).catch(rr)}:er;function rr(e){setTimeout((function(){throw e}))}function or(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void zt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);zt(t)}function sr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ar(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var lr=Math.random().toString(36).slice(2),cr="__reactFiber$"+lr,ur="__reactProps$"+lr,dr="__reactContainer$"+lr,hr="__reactEvents$"+lr,fr="__reactListeners$"+lr,pr="__reactHandles$"+lr;function gr(e){var t=e[cr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dr]||n[cr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ar(e);null!==e;){if(n=e[cr])return n;e=ar(e)}return t}n=(e=n).parentNode}return null}function mr(e){return!(e=e[cr]||e[dr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function yr(e){return e[ur]||null}var br=[],wr=-1;function _r(e){return{current:e}}function xr(e){0>wr||(e.current=br[wr],br[wr]=null,wr--)}function kr(e,t){wr++,br[wr]=e.current,e.current=t}var Cr={},Sr=_r(Cr),Er=_r(!1),Or=Cr;function Ar(e,t){var n=e.type.contextTypes;if(!n)return Cr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Mr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rr(){xr(Er),xr(Sr)}function Tr(e,t,n){if(Sr.current!==Cr)throw Error(o(168));kr(Sr,t),kr(Er,n)}function Dr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,V(e)||"Unknown",r));return $({},n,i)}function Ir(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cr,Or=Sr.current,kr(Sr,e),kr(Er,Er.current),!0}function Lr(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=Dr(e,t,Or),i.__reactInternalMemoizedMergedChildContext=e,xr(Er),xr(Sr),kr(Sr,e)):xr(Er),kr(Er,n)}var Nr=null,Fr=!1,$r=!1;function Pr(e){null===Nr?Nr=[e]:Nr.push(e)}function jr(){if(!$r&&null!==Nr){$r=!0;var e=0,t=yt;try{var n=Nr;for(yt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Nr=null,Fr=!1}catch(r){throw null!==Nr&&(Nr=Nr.slice(e+1)),Ge(Ze,jr),r}finally{yt=t,$r=!1}}return null}var Br=w.ReactCurrentBatchConfig;function zr(e,t){if(e&&e.defaultProps){for(var n in t=$({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ur=_r(null),Vr=null,Wr=null,Hr=null;function qr(){Hr=Wr=Vr=null}function Gr(e){var t=Ur.current;xr(Ur),e._currentValue=t}function Kr(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Yr(e,t){Vr=e,Hr=Wr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(va=!0),e.firstContext=null)}function Jr(e){var t=e._currentValue;if(Hr!==e)if(e={context:e,memoizedValue:t,next:null},null===Wr){if(null===Vr)throw Error(o(308));Wr=e,Vr.dependencies={lanes:0,firstContext:e}}else Wr=Wr.next=e;return t}var Xr=null,Qr=!1;function Zr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function to(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function no(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==yl&&0!==(1&e.mode)&&0===(2&vl)?(null===(e=n.interleaved)?(t.next=t,null===Xr?Xr=[n]:Xr.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function io(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}function ro(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function oo(e,t,n,i){var r=e.updateQueue;Qr=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=r.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=$({},d,h);break e;case 2:Qr=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(h=a).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Sl|=s,e.lanes=s,e.memoizedState=d}}function so(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var ao=(new i.Component).refs;function lo(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:$({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var co={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ul(),r=Vl(e),o=to(i,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),no(e,o),null!==(t=Wl(e,r,i))&&io(t,e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ul(),r=Vl(e),o=to(i,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),no(e,o),null!==(t=Wl(e,r,i))&&io(t,e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ul(),i=Vl(e),r=to(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),no(e,r),null!==(t=Wl(e,i,n))&&io(t,e,i)}};function uo(e,t,n,i,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!si(n,i)||!si(r,o))}function ho(e,t,n){var i=!1,r=Cr,o=t.contextType;return"object"===typeof o&&null!==o?o=Jr(o):(r=Mr(t)?Or:Sr.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ar(e,r):Cr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=co,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function fo(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&co.enqueueReplaceState(t,t.state,null)}function po(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=ao,Zr(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Jr(o):(o=Mr(t)?Or:Sr.current,r.context=Ar(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(lo(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&co.enqueueReplaceState(r,r.state,null),oo(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}var go=[],mo=0,vo=null,yo=0,bo=[],wo=0,_o=null,xo=1,ko="";function Co(e,t){go[mo++]=yo,go[mo++]=vo,vo=e,yo=t}function So(e,t,n){bo[wo++]=xo,bo[wo++]=ko,bo[wo++]=_o,_o=e;var i=xo;e=ko;var r=32-st(i)-1;i&=~(1<<r),n+=1;var o=32-st(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,xo=1<<32-st(t)+r|n<<r|i,ko=o+e}else xo=1<<o|n<<r|i,ko=e}function Eo(e){null!==e.return&&(Co(e,1),So(e,1,0))}function Oo(e){for(;e===vo;)vo=go[--mo],go[mo]=null,yo=go[--mo],go[mo]=null;for(;e===_o;)_o=bo[--wo],bo[wo]=null,ko=bo[--wo],bo[wo]=null,xo=bo[--wo],bo[wo]=null}var Ao=null,Mo=null,Ro=!1,To=null;function Do(e,t){var n=wc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Io(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ao=e,Mo=sr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ao=e,Mo=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==_o?{id:xo,overflow:ko}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=wc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ao=e,Mo=null,!0);default:return!1}}function Lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function No(e){if(Ro){var t=Mo;if(t){var n=t;if(!Io(e,t)){if(Lo(e))throw Error(o(418));t=sr(n.nextSibling);var i=Ao;t&&Io(e,t)?Do(i,n):(e.flags=-4097&e.flags|2,Ro=!1,Ao=e)}}else{if(Lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,Ro=!1,Ao=e}}}function Fo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ao=e}function $o(e){if(e!==Ao)return!1;if(!Ro)return Fo(e),Ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Zi(e.type,e.memoizedProps)),t&&(t=Mo)){if(Lo(e)){for(e=Mo;e;)e=sr(e.nextSibling);throw Error(o(418))}for(;t;)Do(e,t),t=sr(t.nextSibling)}if(Fo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Mo=sr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Mo=null}}else Mo=Ao?sr(e.stateNode.nextSibling):null;return!0}function Po(){Mo=Ao=null,Ro=!1}function jo(e){null===To?To=[e]:To.push(e)}function Bo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;t===ao&&(t=r.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function zo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Uo(e){return(0,e._init)(e._payload)}function Vo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=xc(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Ec(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var o=n.type;return o===k?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===D&&Uo(o)===t.type)?((i=r(t,n.props)).ref=Bo(e,t,n),i.return=e,i):((i=kc(n.type,n.key,n.props,null,e.mode,i)).ref=Bo(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Oc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,o){return null===t||7!==t.tag?((t=Cc(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ec(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=kc(t.type,t.key,t.props,null,e.mode,n)).ref=Bo(e,null,t),n.return=e,n;case x:return(t=Oc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||N(t))return(t=Cc(t,e.mode,n,null)).return=e,t;zo(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===r?c(e,t,n,i):null;case x:return n.key===r?u(e,t,n,i):null;case D:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||N(n))return null!==r?null:d(e,t,n,i,null);zo(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case _:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case x:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case D:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||N(i))return d(t,e=e.get(n)||null,i,r,null);zo(t,i)}return null}function g(r,o,a,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=f(r,d,a[g],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(r,d),o=s(v,o,g),null===u?c=v:u.sibling=v,u=v,d=m}if(g===a.length)return n(r,d),Ro&&Co(r,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(r,a[g],l))&&(o=s(d,o,g),null===u?c=d:u.sibling=d,u=d);return Ro&&Co(r,g),c}for(d=i(r,d);g<a.length;g++)null!==(m=p(d,r,g,a[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(r,e)})),Ro&&Co(r,g),c}function m(r,a,l,c){var u=N(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(r,g,y.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(r,g),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b,g=v}if(y.done)return n(r,g),Ro&&Co(r,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=h(r,y.value,c))&&(a=s(y,a,m),null===d?u=y:d.sibling=y,d=y);return Ro&&Co(r,m),u}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=p(g,r,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=s(y,a,m),null===d?u=y:d.sibling=y,d=y);return e&&g.forEach((function(e){return t(r,e)})),Ro&&Co(r,m),u}return function e(i,o,s,l){if("object"===typeof s&&null!==s&&s.type===k&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===k){if(7===u.tag){n(i,u.sibling),(o=r(u,s.props.children)).return=i,i=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Uo(c)===u.type){n(i,u.sibling),(o=r(u,s.props)).ref=Bo(i,u,s),o.return=i,i=o;break e}n(i,u);break}t(i,u),u=u.sibling}s.type===k?((o=Cc(s.props.children,i.mode,l,s.key)).return=i,i=o):((l=kc(s.type,s.key,s.props,null,i.mode,l)).ref=Bo(i,o,s),l.return=i,i=l)}return a(i);case x:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(i,o.sibling),(o=r(o,s.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=Oc(s,i.mode,l)).return=i,i=o}return a(i);case D:return e(i,o,(u=s._init)(s._payload),l)}if(te(s))return g(i,o,s,l);if(N(s))return m(i,o,s,l);zo(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,s)).return=i,i=o):(n(i,o),(o=Ec(s,i.mode,l)).return=i,i=o),a(i)):n(i,o)}}var Wo=Vo(!0),Ho=Vo(!1),qo={},Go=_r(qo),Ko=_r(qo),Yo=_r(qo);function Jo(e){if(e===qo)throw Error(o(174));return e}function Xo(e,t){switch(kr(Yo,t),kr(Ko,e),kr(Go,qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xr(Go),kr(Go,t)}function Qo(){xr(Go),xr(Ko),xr(Yo)}function Zo(e){Jo(Yo.current);var t=Jo(Go.current),n=le(t,e.type);t!==n&&(kr(Ko,e),kr(Go,n))}function es(e){Ko.current===e&&(xr(Go),xr(Ko))}var ts=_r(0);function ns(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var is=[];function rs(){for(var e=0;e<is.length;e++)is[e]._workInProgressVersionPrimary=null;is.length=0}var os=w.ReactCurrentDispatcher,ss=w.ReactCurrentBatchConfig,as=0,ls=null,cs=null,us=null,ds=!1,hs=!1,fs=0,ps=0;function gs(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function vs(e,t,n,i,r,s){if(as=s,ls=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=null===e||null===e.memoizedState?Zs:ea,e=n(i,r),hs){s=0;do{if(hs=!1,fs=0,25<=s)throw Error(o(301));s+=1,us=cs=null,t.updateQueue=null,os.current=ta,e=n(i,r)}while(hs)}if(os.current=Qs,t=null!==cs&&null!==cs.next,as=0,us=cs=ls=null,ds=!1,t)throw Error(o(300));return e}function ys(){var e=0!==fs;return fs=0,e}function bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===us?ls.memoizedState=us=e:us=us.next=e,us}function ws(){if(null===cs){var e=ls.alternate;e=null!==e?e.memoizedState:null}else e=cs.next;var t=null===us?ls.memoizedState:us.next;if(null!==t)us=t,cs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(cs=e).memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},null===us?ls.memoizedState=us=e:us=us.next=e}return us}function _s(e,t){return"function"===typeof t?t(e):t}function xs(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=cs,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((as&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=i):c=c.next=h,ls.lanes|=d,Sl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=i:c.next=l,oi(i,t.memoizedState)||(va=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,ls.lanes|=s,Sl|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ks(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);oi(s,t.memoizedState)||(va=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Cs(){}function Ss(e,t){var n=ls,i=ws(),r=t(),s=!oi(i.memoizedState,r);if(s&&(i.memoizedState=r,va=!0),i=i.queue,Fs(As.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||null!==us&&1&us.memoizedState.tag){if(n.flags|=2048,Ts(9,Os.bind(null,n,i,r,t),void 0,null),null===yl)throw Error(o(349));0!==(30&as)||Es(n,t,r)}return r}function Es(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ls.updateQueue)?(t={lastEffect:null,stores:null},ls.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Os(e,t,n,i){t.value=n,t.getSnapshot=i,Ms(t)&&Wl(e,1,-1)}function As(e,t,n){return n((function(){Ms(t)&&Wl(e,1,-1)}))}function Ms(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Rs(e){var t=bs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:e},t.queue=e,e=e.dispatch=Gs.bind(null,ls,e),[t.memoizedState,e]}function Ts(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=ls.updateQueue)?(t={lastEffect:null,stores:null},ls.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ds(){return ws().memoizedState}function Is(e,t,n,i){var r=bs();ls.flags|=e,r.memoizedState=Ts(1|t,n,void 0,void 0===i?null:i)}function Ls(e,t,n,i){var r=ws();i=void 0===i?null:i;var o=void 0;if(null!==cs){var s=cs.memoizedState;if(o=s.destroy,null!==i&&ms(i,s.deps))return void(r.memoizedState=Ts(t,n,o,i))}ls.flags|=e,r.memoizedState=Ts(1|t,n,o,i)}function Ns(e,t){return Is(8390656,8,e,t)}function Fs(e,t){return Ls(2048,8,e,t)}function $s(e,t){return Ls(4,2,e,t)}function Ps(e,t){return Ls(4,4,e,t)}function js(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ls(4,4,js.bind(null,t,e),n)}function zs(){}function Us(e,t){var n=ws();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ms(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Vs(e,t){var n=ws();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ms(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ws(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var i=ss.transition;ss.transition={};try{e(!1),t()}finally{yt=n,ss.transition=i}}function Hs(){return ws().memoizedState}function qs(e,t,n){var i=Vl(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ks(e)?Ys(t,n):(Js(e,t,n),null!==(e=Wl(e,i,n=Ul()))&&Xs(e,t,i))}function Gs(e,t,n){var i=Vl(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ks(e))Ys(t,r);else{Js(e,t,r);var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,oi(a,s))return}catch(l){}null!==(e=Wl(e,i,n=Ul()))&&Xs(e,t,i)}}function Ks(e){var t=e.alternate;return e===ls||null!==t&&t===ls}function Ys(e,t){hs=ds=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Js(e,t,n){null!==yl&&0!==(1&e.mode)&&0===(2&vl)?(null===(e=t.interleaved)?(n.next=n,null===Xr?Xr=[t]:Xr.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function Xs(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Qs={readContext:Jr,useCallback:gs,useContext:gs,useEffect:gs,useImperativeHandle:gs,useInsertionEffect:gs,useLayoutEffect:gs,useMemo:gs,useReducer:gs,useRef:gs,useState:gs,useDebugValue:gs,useDeferredValue:gs,useTransition:gs,useMutableSource:gs,useSyncExternalStore:gs,useId:gs,unstable_isNewReconciler:!1},Zs={readContext:Jr,useCallback:function(e,t){return bs().memoizedState=[e,void 0===t?null:t],e},useContext:Jr,useEffect:Ns,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Is(4194308,4,js.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Is(4194308,4,e,t)},useInsertionEffect:function(e,t){return Is(4,2,e,t)},useMemo:function(e,t){var n=bs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=bs();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=qs.bind(null,ls,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},bs().memoizedState=e},useState:Rs,useDebugValue:zs,useDeferredValue:function(e){var t=Rs(e),n=t[0],i=t[1];return Ns((function(){var t=ss.transition;ss.transition={};try{i(e)}finally{ss.transition=t}}),[e]),n},useTransition:function(){var e=Rs(!1),t=e[0];return e=Ws.bind(null,e[1]),bs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ls,r=bs();if(Ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===yl)throw Error(o(349));0!==(30&as)||Es(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Ns(As.bind(null,i,s,e),[e]),i.flags|=2048,Ts(9,Os.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=bs(),t=yl.identifierPrefix;if(Ro){var n=ko;t=":"+t+"R"+(n=(xo&~(1<<32-st(xo)-1)).toString(32)+n),0<(n=fs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Jr,useCallback:Us,useContext:Jr,useEffect:Fs,useImperativeHandle:Bs,useInsertionEffect:$s,useLayoutEffect:Ps,useMemo:Vs,useReducer:xs,useRef:Ds,useState:function(){return xs(_s)},useDebugValue:zs,useDeferredValue:function(e){var t=xs(_s),n=t[0],i=t[1];return Fs((function(){var t=ss.transition;ss.transition={};try{i(e)}finally{ss.transition=t}}),[e]),n},useTransition:function(){return[xs(_s)[0],ws().memoizedState]},useMutableSource:Cs,useSyncExternalStore:Ss,useId:Hs,unstable_isNewReconciler:!1},ta={readContext:Jr,useCallback:Us,useContext:Jr,useEffect:Fs,useImperativeHandle:Bs,useInsertionEffect:$s,useLayoutEffect:Ps,useMemo:Vs,useReducer:ks,useRef:Ds,useState:function(){return ks(_s)},useDebugValue:zs,useDeferredValue:function(e){var t=ks(_s),n=t[0],i=t[1];return Fs((function(){var t=ss.transition;ss.transition={};try{i(e)}finally{ss.transition=t}}),[e]),n},useTransition:function(){return[ks(_s)[0],ws().memoizedState]},useMutableSource:Cs,useSyncExternalStore:Ss,useId:Hs,unstable_isNewReconciler:!1};function na(e,t){try{var n="",i=t;do{n+=z(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r}}function ia(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ra,oa,sa,aa="function"===typeof WeakMap?WeakMap:Map;function la(e,t,n){(n=to(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Dl||(Dl=!0,Il=i),ia(0,t)},n}function ca(e,t,n){(n=to(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ia(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ia(0,t),"function"!==typeof i&&(null===Ll?Ll=new Set([this]):Ll.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ua(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new aa;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=pc.bind(null,e,t,n),t.then(e,e))}function da(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ha(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=to(-1,1)).tag=2,no(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}function fa(e,t){if(!Ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function pa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function ga(e,t,n){var i=t.pendingProps;switch(Oo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pa(t),null;case 1:case 17:return Mr(t.type)&&Rr(),pa(t),null;case 3:return i=t.stateNode,Qo(),xr(Er),xr(Sr),rs(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||($o(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==To&&(Yl(To),To=null))),pa(t),null;case 5:es(t);var r=Jo(Yo.current);if(n=t.type,null!==e&&null!=t.stateNode)oa(e,t,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return pa(t),null}if(e=Jo(Go.current),$o(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[cr]=t,i[ur]=s,e=0!==(1&t.mode),n){case"dialog":$i("cancel",i),$i("close",i);break;case"iframe":case"object":case"embed":$i("load",i);break;case"video":case"audio":for(r=0;r<Ii.length;r++)$i(Ii[r],i);break;case"source":$i("error",i);break;case"img":case"image":case"link":$i("error",i),$i("load",i);break;case"details":$i("toggle",i);break;case"input":J(i,s),$i("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},$i("invalid",i);break;case"textarea":re(i,s),$i("invalid",i)}for(var l in ye(n,s),r=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?i.textContent!==c&&(Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(Ji(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&$i("scroll",i)}switch(n){case"input":q(i),Z(i,s,!0);break;case"textarea":q(i),se(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=Xi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[cr]=t,e[ur]=i,ra(e,t),t.stateNode=e;e:{switch(l=be(n,i),n){case"dialog":$i("cancel",e),$i("close",e),r=i;break;case"iframe":case"object":case"embed":$i("load",e),r=i;break;case"video":case"audio":for(r=0;r<Ii.length;r++)$i(Ii[r],e);r=i;break;case"source":$i("error",e),r=i;break;case"img":case"image":case"link":$i("error",e),$i("load",e),r=i;break;case"details":$i("toggle",e),r=i;break;case"input":J(e,i),r=Y(e,i),$i("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=$({},i,{value:void 0}),$i("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),$i("invalid",e)}for(s in ye(n,r),c=r)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&$i("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":q(e),Z(e,i,!1);break;case"textarea":q(e),se(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?ne(e,!!i.multiple,s,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Xi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return pa(t),null;case 6:if(e&&null!=t.stateNode)sa(0,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(n=Jo(Yo.current),Jo(Go.current),$o(t)){if(i=t.stateNode,n=t.memoizedProps,i[cr]=t,(s=i.nodeValue!==n)&&null!==(e=Ao))switch(l=0!==(1&e.mode),e.tag){case 3:Ji(i.nodeValue,n,l);break;case 5:!0!==e.memoizedProps[void 0]&&Ji(i.nodeValue,n,l)}s&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[cr]=t,t.stateNode=i}return pa(t),null;case 13:if(xr(ts),i=t.memoizedState,Ro&&null!==Mo&&0!==(1&t.mode)&&0===(128&t.flags)){for(i=Mo;i;)i=sr(i.nextSibling);return Po(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=$o(t),null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[cr]=t}else Po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return pa(t),null}return null!==To&&(Yl(To),To=null),0!==(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?$o(t):n=null!==e.memoizedState,i&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ts.current)?0===kl&&(kl=3):rc())),null!==t.updateQueue&&(t.flags|=4),pa(t),null);case 4:return Qo(),null===e&&Bi(t.stateNode.containerInfo),pa(t),null;case 10:return Gr(t.type._context),pa(t),null;case 19:if(xr(ts),null===(s=t.memoizedState))return pa(t),null;if(i=0!==(128&t.flags),null===(l=s.rendering))if(i)fa(s,!1);else{if(0!==kl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ns(e))){for(t.flags|=128,fa(s,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return kr(ts,1&ts.current|2),t.child}e=e.sibling}null!==s.tail&&Xe()>Tl&&(t.flags|=128,i=!0,fa(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ns(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),fa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!Ro)return pa(t),null}else 2*Xe()-s.renderingStartTime>Tl&&1073741824!==n&&(t.flags|=128,i=!0,fa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=ts.current,kr(ts,i?1&n|2:1&n),t):(pa(t),null);case 22:case 23:return ec(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&_l)&&(pa(t),6&t.subtreeFlags&&(t.flags|=8192)):pa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},oa=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Jo(Go.current);var o,s=null;switch(n){case"input":r=Y(e,r),i=Y(e,i),s=[];break;case"select":r=$({},r,{value:void 0}),i=$({},i,{value:void 0}),s=[];break;case"textarea":r=ie(e,r),i=ie(e,i),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Xi)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&$i("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},sa=function(e,t,n,i){n!==i&&(t.flags|=4)};var ma=w.ReactCurrentOwner,va=!1;function ya(e,t,n,i){t.child=null===e?Ho(t,null,n,i):Wo(t,e.child,n,i)}function ba(e,t,n,i,r){n=n.render;var o=t.ref;return Yr(t,r),i=vs(e,t,n,i,o,r),n=ys(),null===e||va?(Ro&&n&&Eo(t),t.flags|=1,ya(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ja(e,t,r))}function wa(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||_c(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=kc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,_a(e,t,o,i,r))}if(o=e.child,0===(e.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:si)(s,i)&&e.ref===t.ref)return ja(e,t,r)}return t.flags|=1,(e=xc(o,i)).ref=t.ref,e.return=t,t.child=e}function _a(e,t,n,i,r){if(null!==e&&si(e.memoizedProps,i)&&e.ref===t.ref){if(va=!1,0===(e.lanes&r))return t.lanes=e.lanes,ja(e,t,r);0!==(131072&e.flags)&&(va=!0)}return Ca(e,t,n,i,r)}function xa(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},kr(xl,_l),_l|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,kr(xl,_l),_l|=e,null;t.memoizedState={baseLanes:0,cachePool:null},i=null!==o?o.baseLanes:n,kr(xl,_l),_l|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,kr(xl,_l),_l|=i;return ya(e,t,r,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,i,r){var o=Mr(n)?Or:Sr.current;return o=Ar(t,o),Yr(t,r),n=vs(e,t,n,i,o,r),i=ys(),null===e||va?(Ro&&i&&Eo(t),t.flags|=1,ya(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ja(e,t,r))}function Sa(e,t,n,i,r){if(Mr(n)){var o=!0;Ir(t)}else o=!1;if(Yr(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ho(t,n,i),po(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Jr(c):c=Ar(t,c=Mr(n)?Or:Sr.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==c)&&fo(t,s,i,c),Qr=!1;var h=t.memoizedState;s.state=h,oo(t,i,s,r),l=t.memoizedState,a!==i||h!==l||Er.current||Qr?("function"===typeof u&&(lo(t,n,u,i),l=t.memoizedState),(a=Qr||uo(t,n,a,i,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,eo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:zr(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Jr(l):l=Ar(t,l=Mr(n)?Or:Sr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&fo(t,s,i,l),Qr=!1,h=t.memoizedState,s.state=h,oo(t,i,s,r);var p=t.memoizedState;a!==d||h!==p||Er.current||Qr?("function"===typeof f&&(lo(t,n,f,i),p=t.memoizedState),(c=Qr||uo(t,n,c,i,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),s.props=i,s.state=p,s.context=l,i=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Ea(e,t,n,i,o,r)}function Ea(e,t,n,i,r,o){ka(e,t);var s=0!==(128&t.flags);if(!i&&!s)return r&&Lr(t,n,!1),ja(e,t,o);i=t.stateNode,ma.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=Wo(t,e.child,null,o),t.child=Wo(t,null,a,o)):ya(e,t,a,o),t.memoizedState=i.state,r&&Lr(t,n,!0),t.child}function Oa(e){var t=e.stateNode;t.pendingContext?Tr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Tr(0,t.context,!1),Xo(e,t.containerInfo)}function Aa(e,t,n,i,r){return Po(),jo(r),t.flags|=256,ya(e,t,n,i),t.child}var Ma={dehydrated:null,treeContext:null,retryLane:0};function Ra(e){return{baseLanes:e,cachePool:null}}function Ta(e,t,n){var i,r=t.pendingProps,s=ts.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),kr(ts,1&s),null===e)return No(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=s):a=Sc(s,r,0,null),e=Cc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ra(n),t.memoizedState=Ma,e):Da(t,s));if(null!==(s=e.memoizedState)){if(null!==(i=s.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,Na(e,t,n,Error(o(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Sc({mode:"visible",children:r.children},s,0,null),(a=Cc(a,s,n,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Wo(t,e.child,null,n),t.child.memoizedState=Ra(n),t.memoizedState=Ma,a);if(0===(1&t.mode))t=Na(e,t,n,null);else if("$!"===i.data)t=Na(e,t,n,Error(o(419)));else if(r=0!==(n&e.childLanes),va||r){if(null!==(r=yl)){switch(n&-n){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(r=0!==(a&(r.suspendedLanes|n))?0:a)&&r!==s.retryLane&&(s.retryLane=r,Wl(e,r,-1))}rc(),t=Na(e,t,n,Error(o(421)))}else"$?"===i.data?(t.flags|=128,t.child=e.child,t=mc.bind(null,e),i._reactRetry=t,t=null):(n=s.treeContext,Mo=sr(i.nextSibling),Ao=t,Ro=!0,To=null,null!==n&&(bo[wo++]=xo,bo[wo++]=ko,bo[wo++]=_o,xo=n.id,ko=n.overflow,_o=t),(t=Da(t,t.pendingProps.children)).flags|=4096);return t}return a?(r=La(e,t,r.children,r.fallback,n),a=t.child,s=e.child.memoizedState,a.memoizedState=null===s?Ra(n):{baseLanes:s.baseLanes|n,cachePool:null},a.childLanes=e.childLanes&~n,t.memoizedState=Ma,r):(n=Ia(e,t,r.children,n),t.memoizedState=null,n)}return a?(r=La(e,t,r.children,r.fallback,n),a=t.child,s=e.child.memoizedState,a.memoizedState=null===s?Ra(n):{baseLanes:s.baseLanes|n,cachePool:null},a.childLanes=e.childLanes&~n,t.memoizedState=Ma,r):(n=Ia(e,t,r.children,n),t.memoizedState=null,n)}function Da(e,t){return(t=Sc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ia(e,t,n,i){var r=e.child;return e=r.sibling,n=xc(r,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function La(e,t,n,i,r){var o=t.mode,s=(e=e.child).sibling,a={mode:"hidden",children:n};return 0===(1&o)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=a,t.deletions=null):(n=xc(e,a)).subtreeFlags=14680064&e.subtreeFlags,null!==s?i=xc(s,i):(i=Cc(i,o,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function Na(e,t,n,i){return null!==i&&jo(i),Wo(t,e.child,null,n),(e=Da(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fa(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Kr(e.return,t,n)}function $a(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Pa(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(ya(e,t,i.children,n),0!==(2&(i=ts.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fa(e,n,t);else if(19===e.tag)Fa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(kr(ts,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ns(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),$a(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ns(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}$a(t,!0,n,null,o);break;case"together":$a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ja(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Sl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=xc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=xc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ba(e,t){switch(Oo(t),t.tag){case 1:return Mr(t.type)&&Rr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),xr(Er),xr(Sr),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return es(t),null;case 13:if(xr(ts),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));Po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xr(ts),null;case 4:return Qo(),null;case 10:return Gr(t.type._context),null;case 22:case 23:return ec(),null;default:return null}}var za=!1,Ua=!1,Va="function"===typeof WeakSet?WeakSet:Set,Wa=null;function Ha(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){fc(e,t,i)}else n.current=null}function qa(e,t,n){try{n()}catch(i){fc(e,t,i)}}var Ga=!1;function Ka(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&qa(t,n,o)}r=r.next}while(r!==i)}}function Ya(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Ja(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function Xa(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var r=i,o=r.destroy;r=r.tag,void 0!==o&&(0!==(2&r)||0!==(4&r))&&qa(t,n,o),i=i.next}while(i!==e)}break;case 1:if(Ha(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){fc(t,n,s)}break;case 5:Ha(t,n);break;case 4:rl(e,t,n)}}function Qa(e){var t=e.alternate;null!==t&&(e.alternate=null,Qa(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[cr],delete t[ur],delete t[hr],delete t[fr],delete t[pr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Za(e){return 5===e.tag||3===e.tag||4===e.tag}function el(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Za(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function tl(e){e:{for(var t=e.return;null!==t;){if(Za(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(he(t,""),n.flags&=-33),il(e,n=el(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,nl(e,n=el(e),t);break;default:throw Error(o(161))}}function nl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xi));else if(4!==i&&null!==(e=e.child))for(nl(e,t,n),e=e.sibling;null!==e;)nl(e,t,n),e=e.sibling}function il(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(il(e,t,n),e=e.sibling;null!==e;)il(e,t,n),e=e.sibling}function rl(e,t,n){for(var i,r,s=t,a=!1;;){if(!a){a=s.return;e:for(;;){if(null===a)throw Error(o(160));switch(i=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:i=i.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===s.tag||6===s.tag){e:for(var l=e,c=s,u=n,d=c;;)if(Xa(l,d,u),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===c)break e;for(;null===d.sibling;){if(null===d.return||d.return===c)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r?(l=i,c=s.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):i.removeChild(s.stateNode)}else if(18===s.tag)r?(l=i,c=s.stateNode,8===l.nodeType?or(l.parentNode,c):1===l.nodeType&&or(l,c),zt(l)):or(i,s.stateNode);else if(4===s.tag){if(null!==s.child){i=s.stateNode.containerInfo,r=!0,s.child.return=s,s=s.child;continue}}else if(Xa(e,s,n),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(a=!1)}s.sibling.return=s.return,s=s.sibling}}function ol(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return Ka(3,t,t.return),Ya(3,t),void Ka(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps,r=null!==e?e.memoizedProps:i;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for("input"===e&&"radio"===i.type&&null!=i.name&&X(n,i),be(e,r),t=be(e,i),r=0;r<s.length;r+=2){var a=s[r],l=s[r+1];"style"===a?me(n,l):"dangerouslySetInnerHTML"===a?de(n,l):"children"===a?he(n,l):b(n,a,l,t)}switch(e){case"input":Q(n,i);break;case"textarea":oe(n,i);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(s=i.value)?ne(n,!!i.multiple,s,!1):e!==!!i.multiple&&(null!=i.defaultValue?ne(n,!!i.multiple,i.defaultValue,!0):ne(n,!!i.multiple,i.multiple?[]:"",!1))}n[ur]=i}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&zt(t.stateNode.containerInfo));case 13:case 19:return void sl(t)}throw Error(o(163))}function sl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Va),t.forEach((function(t){var i=vc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function al(e,t,n){Wa=e,ll(e,t,n)}function ll(e,t,n){for(var i=0!==(1&e.mode);null!==Wa;){var r=Wa,o=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||za;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Ua;a=za;var c=Ua;if(za=s,(Ua=l)&&!c)for(Wa=r;null!==Wa;)l=(s=Wa).child,22===s.tag&&null!==s.memoizedState?dl(r):null!==l?(l.return=s,Wa=l):dl(r);for(;null!==o;)Wa=o,ll(o,t,n),o=o.sibling;Wa=r,za=a,Ua=c}cl(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,Wa=o):cl(e)}}function cl(e){for(;null!==Wa;){var t=Wa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ua||Ya(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Ua)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:zr(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&so(t,s,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}so(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(o(163))}Ua||512&t.flags&&Ja(t)}catch(f){fc(t,t.return,f)}}if(t===e){Wa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Wa=n;break}Wa=t.return}}function ul(e){for(;null!==Wa;){var t=Wa;if(t===e){Wa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Wa=n;break}Wa=t.return}}function dl(e){for(;null!==Wa;){var t=Wa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ya(4,t)}catch(l){fc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){fc(t,r,l)}}var o=t.return;try{Ja(t)}catch(l){fc(t,o,l)}break;case 5:var s=t.return;try{Ja(t)}catch(l){fc(t,s,l)}}}catch(l){fc(t,t.return,l)}if(t===e){Wa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Wa=a;break}Wa=t.return}}var hl,fl=Math.ceil,pl=w.ReactCurrentDispatcher,gl=w.ReactCurrentOwner,ml=w.ReactCurrentBatchConfig,vl=0,yl=null,bl=null,wl=0,_l=0,xl=_r(0),kl=0,Cl=null,Sl=0,El=0,Ol=0,Al=null,Ml=null,Rl=0,Tl=1/0,Dl=!1,Il=null,Ll=null,Nl=!1,Fl=null,$l=0,Pl=0,jl=null,Bl=-1,zl=0;function Ul(){return 0!==(6&vl)?Xe():-1!==Bl?Bl:Bl=Xe()}function Vl(e){return 0===(1&e.mode)?1:0!==(2&vl)&&0!==wl?wl&-wl:null!==Br.transition?(0===zl&&(e=ct,0===(4194240&(ct<<=1))&&(ct=64),zl=e),zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function Wl(e,t,n){if(50<Pl)throw Pl=0,jl=null,Error(o(185));var i=Hl(e,t);return null===i?null:(mt(i,t,n),0!==(2&vl)&&i===yl||(i===yl&&(0===(2&vl)&&(El|=t),4===kl&&Jl(i,wl)),ql(i,n),1===t&&0===vl&&0===(1&e.mode)&&(Tl=Xe()+500,Fr&&jr())),i)}function Hl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ql(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var i=ht(e,e===yl?wl:0);if(0===i)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Fr=!0,Pr(e)}(Xl.bind(null,e)):Pr(Xl.bind(null,e)),ir((function(){0===vl&&jr()})),n=null;else{switch(bt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=yc(n,Gl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Gl(e,t){if(Bl=-1,zl=0,0!==(6&vl))throw Error(o(327));var n=e.callbackNode;if(dc()&&e.callbackNode!==n)return null;var i=ht(e,e===yl?wl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=oc(e,i);else{t=i;var r=vl;vl|=2;var s=ic();for(yl===e&&wl===t||(Tl=Xe()+500,tc(e,t));;)try{ac();break}catch(l){nc(e,l)}qr(),pl.current=s,vl=r,null!==bl?t=0:(yl=null,wl=0,t=kl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=Kl(e,r))),1===t)throw n=Cl,tc(e,0),Jl(e,i),ql(e,Xe()),n;if(6===t)Jl(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!oi(o(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=oc(e,i))&&(0!==(s=pt(e))&&(i=s,t=Kl(e,s))),1===t))throw n=Cl,tc(e,0),Jl(e,i),ql(e,Xe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:uc(e,Ml);break;case 3:if(Jl(e,i),(130023424&i)===i&&10<(t=Rl+500-Xe())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){Ul(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=er(uc.bind(null,e,Ml),t);break}uc(e,Ml);break;case 4:if(Jl(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-st(i);s=1<<a,(a=t[a])>r&&(r=a),i&=~s}if(i=r,10<(i=(120>(i=Xe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*fl(i/1960))-i)){e.timeoutHandle=er(uc.bind(null,e,Ml),i);break}uc(e,Ml);break;default:throw Error(o(329))}}}return ql(e,Xe()),e.callbackNode===n?Gl.bind(null,e):null}function Kl(e,t){var n=Al;return e.current.memoizedState.isDehydrated&&(tc(e,t).flags|=256),2!==(e=oc(e,t))&&(t=Ml,Ml=n,null!==t&&Yl(t)),e}function Yl(e){null===Ml?Ml=e:Ml.push.apply(Ml,e)}function Jl(e,t){for(t&=~Ol,t&=~El,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),i=1<<n;e[n]=-1,t&=~i}}function Xl(e){if(0!==(6&vl))throw Error(o(327));dc();var t=ht(e,0);if(0===(1&t))return ql(e,Xe()),null;var n=oc(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=Kl(e,i))}if(1===n)throw n=Cl,tc(e,0),Jl(e,t),ql(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,uc(e,Ml),ql(e,Xe()),null}function Ql(e,t){var n=vl;vl|=1;try{return e(t)}finally{0===(vl=n)&&(Tl=Xe()+500,Fr&&jr())}}function Zl(e){null!==Fl&&0===Fl.tag&&0===(6&vl)&&dc();var t=vl;vl|=1;var n=ml.transition,i=yt;try{if(ml.transition=null,yt=1,e)return e()}finally{yt=i,ml.transition=n,0===(6&(vl=t))&&jr()}}function ec(){_l=xl.current,xr(xl)}function tc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,tr(n)),null!==bl)for(n=bl.return;null!==n;){var i=n;switch(Oo(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Rr();break;case 3:Qo(),xr(Er),xr(Sr),rs();break;case 5:es(i);break;case 4:Qo();break;case 13:case 19:xr(ts);break;case 10:Gr(i.type._context);break;case 22:case 23:ec()}n=n.return}if(yl=e,bl=e=xc(e.current,null),wl=_l=t,kl=0,Cl=null,Ol=El=Sl=0,Ml=Al=null,null!==Xr){for(t=0;t<Xr.length;t++)if(null!==(i=(n=Xr[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,i.next=s}n.pending=i}Xr=null}return e}function nc(e,t){for(;;){var n=bl;try{if(qr(),os.current=Qs,ds){for(var i=ls.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ds=!1}if(as=0,us=cs=ls=null,hs=!1,fs=0,gl.current=null,null===n||null===n.return){kl=1,Cl=t,bl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=wl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=da(a);if(null!==p){p.flags&=-257,ha(p,a,l,0,t),1&p.mode&&ua(s,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ua(s,u,t),rc();break e}c=Error(o(426))}else if(Ro&&1&l.mode){var v=da(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ha(v,a,l,0,t),jo(c);break e}}s=c,4!==kl&&(kl=2),null===Al?Al=[s]:Al.push(s),c=na(c,l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,ro(l,la(0,c,t));break e;case 1:s=c;var y=l.type,b=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ll||!Ll.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t,ro(l,ca(l,s,t));break e}}l=l.return}while(null!==l)}cc(n)}catch(w){t=w,bl===n&&null!==n&&(bl=n=n.return);continue}break}}function ic(){var e=pl.current;return pl.current=Qs,null===e?Qs:e}function rc(){0!==kl&&3!==kl&&2!==kl||(kl=4),null===yl||0===(268435455&Sl)&&0===(268435455&El)||Jl(yl,wl)}function oc(e,t){var n=vl;vl|=2;var i=ic();for(yl===e&&wl===t||tc(e,t);;)try{sc();break}catch(r){nc(e,r)}if(qr(),vl=n,pl.current=i,null!==bl)throw Error(o(261));return yl=null,wl=0,kl}function sc(){for(;null!==bl;)lc(bl)}function ac(){for(;null!==bl&&!Ye();)lc(bl)}function lc(e){var t=hl(e.alternate,e,_l);e.memoizedProps=e.pendingProps,null===t?cc(e):bl=t,gl.current=null}function cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ga(n,t,_l)))return void(bl=n)}else{if(null!==(n=Ba(n,t)))return n.flags&=32767,void(bl=n);if(null===e)return kl=6,void(bl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(bl=t);bl=t=e}while(null!==t);0===kl&&(kl=5)}function uc(e,t){var n=yt,i=ml.transition;try{ml.transition=null,yt=1,function(e,t,n){do{dc()}while(null!==Fl);if(0!==(6&vl))throw Error(o(327));var i=e.finishedWork,r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-st(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,s),e===yl&&(bl=yl=null,wl=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Nl||(Nl=!0,yc(tt,(function(){return dc(),null}))),s=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||s){s=ml.transition,ml.transition=null;var a=yt;yt=1;var l=vl;vl|=4,gl.current=null,function(e,t){if(di(e=ui())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=a+r),h!==s||0!==i&&3!==h.nodeType||(c=a+i),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=a),f===s&&++d===i&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qi={focusedElem:e,selectionRange:n},Wa=t;null!==Wa;)if(e=(t=Wa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Wa=e;else for(;null!==Wa;){t=Wa;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:zr(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;if(1===w.nodeType)w.textContent="";else if(9===w.nodeType){var _=w.body;null!=_&&(_.textContent="")}break;default:throw Error(o(163))}}catch(x){fc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Wa=e;break}Wa=t.return}g=Ga,Ga=!1}(e,i),function(e,t){for(Wa=t;null!==Wa;){var n=(t=Wa).deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{rl(e,r,t);var o=r.alternate;null!==o&&(o.return=null),r.return=null}catch(C){fc(r,t,C)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,Wa=n;else for(;null!==Wa;){t=Wa;try{var s=t.flags;if(32&s&&he(t.stateNode,""),512&s){var a=t.alternate;if(null!==a){var l=a.ref;null!==l&&("function"===typeof l?l(null):l.current=null)}}if(8192&s)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(Rl=Xe())}break;case 22:var u=null!==t.memoizedState,d=t.alternate,h=null!==d&&null!==d.memoizedState;e:{r=u;for(var f=null,p=i=n=t;;){if(5===p.tag){if(null===f){f=p;var g=p.stateNode;if(r){var m=g.style;"function"===typeof m.setProperty?m.setProperty("display","none","important"):m.display="none"}else{var v=p.stateNode,y=p.memoizedProps.style,b=void 0!==y&&null!==y&&y.hasOwnProperty("display")?y.display:null;v.style.display=ge("display",b)}}}else if(6===p.tag)null===f&&(p.stateNode.nodeValue=r?"":p.memoizedProps);else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===i)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===i)break;for(;null===p.sibling;){if(null===p.return||p.return===i)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}if(u&&!h&&0!==(1&n.mode)){Wa=n;for(var w=n.child;null!==w;){for(n=Wa=w;null!==Wa;){var _=(i=Wa).child;switch(i.tag){case 0:case 11:case 14:case 15:Ka(4,i,i.return);break;case 1:Ha(i,i.return);var x=i.stateNode;if("function"===typeof x.componentWillUnmount){var k=i.return;try{x.props=i.memoizedProps,x.state=i.memoizedState,x.componentWillUnmount()}catch(C){fc(i,k,C)}}break;case 5:Ha(i,i.return);break;case 22:if(null!==i.memoizedState){ul(n);continue}}null!==_?(_.return=i,Wa=_):ul(n)}w=w.sibling}}}switch(4102&s){case 2:tl(t),t.flags&=-3;break;case 6:tl(t),t.flags&=-3,ol(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,ol(t.alternate,t);break;case 4:ol(t.alternate,t)}}catch(C){fc(t,t.return,C)}if(null!==(n=t.sibling)){n.return=t.return,Wa=n;break}Wa=t.return}}}(e,i),hi(Qi),Qi=null,e.current=i,al(i,e,r),Je(),vl=l,yt=a,ml.transition=s}else e.current=i;if(Nl&&(Nl=!1,Fl=e,$l=r),0===(s=e.pendingLanes)&&(Ll=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),ql(e,Xe()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(Dl)throw Dl=!1,e=Il,Il=null,e;0!==(1&$l)&&0!==e.tag&&dc(),0!==(1&(s=e.pendingLanes))?e===jl?Pl++:(Pl=0,jl=e):Pl=0,jr()}(e,t,n)}finally{ml.transition=i,yt=n}return null}function dc(){if(null!==Fl){var e=bt($l),t=ml.transition,n=yt;try{if(ml.transition=null,yt=16>e?16:e,null===Fl)var i=!1;else{if(e=Fl,Fl=null,$l=0,0!==(6&vl))throw Error(o(331));var r=vl;for(vl|=4,Wa=e.current;null!==Wa;){var s=Wa,a=s.child;if(0!==(16&Wa.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Wa=u;null!==Wa;){var d=Wa;switch(d.tag){case 0:case 11:case 15:Ka(8,d,s)}var h=d.child;if(null!==h)h.return=d,Wa=h;else for(;null!==Wa;){var f=(d=Wa).sibling,p=d.return;if(Qa(d),d===u){Wa=null;break}if(null!==f){f.return=p,Wa=f;break}Wa=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Wa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Wa=a;else e:for(;null!==Wa;){if(0!==(2048&(s=Wa).flags))switch(s.tag){case 0:case 11:case 15:Ka(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Wa=y;break e}Wa=s.return}}var b=e.current;for(Wa=b;null!==Wa;){var w=(a=Wa).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Wa=w;else e:for(a=b;null!==Wa;){if(0!==(2048&(l=Wa).flags))try{switch(l.tag){case 0:case 11:case 15:Ya(9,l)}}catch(x){fc(l,l.return,x)}if(l===a){Wa=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Wa=_;break e}Wa=l.return}}if(vl=r,jr(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(x){}i=!0}return i}finally{yt=n,ml.transition=t}}return!1}function hc(e,t,n){no(e,t=la(0,t=na(n,t),1)),t=Ul(),null!==(e=Hl(e,1))&&(mt(e,1,t),ql(e,t))}function fc(e,t,n){if(3===e.tag)hc(e,e,n);else for(;null!==t;){if(3===t.tag){hc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Ll||!Ll.has(i))){no(t,e=ca(t,e=na(n,e),1)),e=Ul(),null!==(t=Hl(t,1))&&(mt(t,1,e),ql(t,e));break}}t=t.return}}function pc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=Ul(),e.pingedLanes|=e.suspendedLanes&n,yl===e&&(wl&n)===n&&(4===kl||3===kl&&(130023424&wl)===wl&&500>Xe()-Rl?tc(e,0):Ol|=n),ql(e,t)}function gc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Ul();null!==(e=Hl(e,t))&&(mt(e,t,n),ql(e,n))}function mc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),gc(e,n)}function vc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),gc(e,n)}function yc(e,t){return Ge(e,t)}function bc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wc(e,t,n,i){return new bc(e,t,n,i)}function _c(e){return!(!(e=e.prototype)||!e.isReactComponent)}function xc(e,t){var n=e.alternate;return null===n?((n=wc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function kc(e,t,n,i,r,s){var a=2;if(i=e,"function"===typeof e)_c(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Cc(n.children,r,s,t);case C:a=8,r|=8;break;case S:return(e=wc(12,n,t,2|r)).elementType=S,e.lanes=s,e;case M:return(e=wc(13,n,t,r)).elementType=M,e.lanes=s,e;case R:return(e=wc(19,n,t,r)).elementType=R,e.lanes=s,e;case I:return Sc(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case O:a=9;break e;case A:a=11;break e;case T:a=14;break e;case D:a=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=wc(a,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function Cc(e,t,n,i){return(e=wc(7,e,i,t)).lanes=n,e}function Sc(e,t,n,i){return(e=wc(22,e,i,t)).elementType=I,e.lanes=n,e.stateNode={},e}function Ec(e,t,n){return(e=wc(6,e,null,t)).lanes=n,e}function Oc(e,t,n){return(t=wc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ac(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Mc(e,t,n,i,r,o,s,a,l){return e=new Ac(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=wc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},Zr(o),e}function Rc(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Tc(e){if(!e)return Cr;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Mr(n))return Dr(e,n,t)}return t}function Dc(e,t,n,i,r,o,s,a,l){return(e=Mc(n,i,!0,e,0,o,0,a,l)).context=Tc(null),n=e.current,(o=to(i=Ul(),r=Vl(n))).callback=void 0!==t&&null!==t?t:null,no(n,o),e.current.lanes=r,mt(e,r,i),ql(e,i),e}function Ic(e,t,n,i){var r=t.current,o=Ul(),s=Vl(r);return n=Tc(n),null===t.context?t.context=n:t.pendingContext=n,(t=to(o,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),no(r,t),null!==(e=Wl(r,s,o))&&io(e,r,s),s}function Lc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Fc(e,t){Nc(e,t),(e=e.alternate)&&Nc(e,t)}hl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Er.current)va=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return va=!1,function(e,t,n){switch(t.tag){case 3:Oa(t),Po();break;case 5:Zo(t);break;case 1:Mr(t.type)&&Ir(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;kr(Ur,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(kr(ts,1&ts.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ta(e,t,n):(kr(ts,1&ts.current),null!==(e=ja(e,t,n))?e.sibling:null);kr(ts,1&ts.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Pa(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),kr(ts,ts.current),i)break;return null;case 22:case 23:return t.lanes=0,xa(e,t,n)}return ja(e,t,n)}(e,t,n);va=0!==(131072&e.flags)}else va=!1,Ro&&0!==(1048576&t.flags)&&So(t,yo,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var r=Ar(t,Sr.current);Yr(t,n),r=vs(null,t,i,e,r,n);var s=ys();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mr(i)?(s=!0,Ir(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Zr(t),r.updater=co,t.stateNode=r,r._reactInternals=t,po(t,i,e,n),t=Ea(null,t,i,!0,s,n)):(t.tag=0,Ro&&s&&Eo(t),ya(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return _c(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===T)return 14}return 2}(i),e=zr(i,e),r){case 0:t=Ca(null,t,i,e,n);break e;case 1:t=Sa(null,t,i,e,n);break e;case 11:t=ba(null,t,i,e,n);break e;case 14:t=wa(null,t,i,zr(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ca(e,t,i,r=t.elementType===i?r:zr(i,r),n);case 1:return i=t.type,r=t.pendingProps,Sa(e,t,i,r=t.elementType===i?r:zr(i,r),n);case 3:e:{if(Oa(t),null===e)throw Error(o(387));i=t.pendingProps,r=(s=t.memoizedState).element,eo(e,t),oo(t,i,null,n);var a=t.memoizedState;if(i=a.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:a.cache,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Aa(e,t,i,n,r=Error(o(423)));break e}if(i!==r){t=Aa(e,t,i,n,r=Error(o(424)));break e}for(Mo=sr(t.stateNode.containerInfo.firstChild),Ao=t,Ro=!0,To=null,n=Ho(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Po(),i===r){t=ja(e,t,n);break e}ya(e,t,i,n)}t=t.child}return t;case 5:return Zo(t),null===e&&No(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,a=r.children,Zi(i,r)?a=null:null!==s&&Zi(i,s)&&(t.flags|=32),ka(e,t),ya(e,t,a,n),t.child;case 6:return null===e&&No(t),null;case 13:return Ta(e,t,n);case 4:return Xo(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Wo(t,null,i,n):ya(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,ba(e,t,i,r=t.elementType===i?r:zr(i,r),n);case 7:return ya(e,t,t.pendingProps,n),t.child;case 8:case 12:return ya(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value,kr(Ur,i._currentValue),i._currentValue=a,null!==s)if(oi(s.value,a)){if(s.children===r.children&&!Er.current){t=ja(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=to(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Kr(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Kr(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}ya(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Yr(t,n),i=i(r=Jr(r)),t.flags|=1,ya(e,t,i,n),t.child;case 14:return r=zr(i=t.type,t.pendingProps),wa(e,t,i,r=zr(i.type,r),n);case 15:return _a(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:zr(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Mr(i)?(e=!0,Ir(t)):e=!1,Yr(t,n),ho(t,i,r),po(t,i,r,n),Ea(null,t,i,!0,e,n);case 19:return Pa(e,t,n);case 22:return xa(e,t,n)}throw Error(o(156,t.tag))};var $c="function"===typeof reportError?reportError:function(e){console.error(e)};function Pc(e){this._internalRoot=e}function jc(e){this._internalRoot=e}function Bc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Uc(){}function Vc(e,t,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof r){var a=r;r=function(){var e=Lc(s);a.call(e)}}Ic(t,s,e,r)}else s=function(e,t,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var e=Lc(s);o.call(e)}}var s=Dc(t,i,e,0,null,!1,0,"",Uc);return e._reactRootContainer=s,e[dr]=s.current,Bi(8===e.nodeType?e.parentNode:e),Zl(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Lc(l);a.call(e)}}var l=Mc(e,0,!1,null,0,!1,0,"",Uc);return e._reactRootContainer=l,e[dr]=l.current,Bi(8===e.nodeType?e.parentNode:e),Zl((function(){Ic(t,l,n,i)})),l}(n,t,e,r,i);return Lc(s)}jc.prototype.render=Pc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Ic(e,t,null,null)},jc.prototype.unmount=Pc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zl((function(){Ic(null,e,null,null)})),t[dr]=null}},jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ql(t,Xe()),0===(6&vl)&&(Tl=Xe()+500,jr()))}break;case 13:var i=Ul();Zl((function(){return Wl(e,1,i)})),Fc(e,1)}},_t=function(e){13===e.tag&&(Wl(e,134217728,Ul()),Fc(e,134217728))},xt=function(e){if(13===e.tag){var t=Ul(),n=Vl(e);Wl(e,n,t),Fc(e,n)}},kt=function(){return yt},Ct=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},xe=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=yr(i);if(!r)throw Error(o(90));G(i),Q(i,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=Ql,Me=Zl;var Wc={usingClientEntryPoint:!1,Events:[mr,vr,yr,Ee,Oe,Ql]},Hc={findFiberByHostInstance:gr,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},qc={bundleType:Hc.bundleType,version:Hc.version,rendererPackageName:Hc.rendererPackageName,rendererConfig:Hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:Hc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{rt=Gc.inject(qc),ot=Gc}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Bc(t))throw Error(o(200));return Rc(e,t,null,n)},t.createRoot=function(e,t){if(!Bc(e))throw Error(o(299));var n=!1,i="",r=$c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Mc(e,1,!1,null,0,n,0,i,r),e[dr]=t.current,Bi(8===e.nodeType?e.parentNode:e),new Pc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return Zl(e)},t.hydrate=function(e,t,n){if(!zc(t))throw Error(o(200));return Vc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Bc(e))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,s="",a=$c;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Dc(t,null,e,1,null!=n?n:null,r,0,s,a),e[dr]=t.current,Bi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new jc(t)},t.render=function(e,t,n){if(!zc(t))throw Error(o(200));return Vc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!zc(e))throw Error(o(40));return!!e._reactRootContainer&&(Zl((function(){Vc(null,null,e,!1,(function(){e._reactRootContainer=null,e[dr]=null}))})),!0)},t.unstable_batchedUpdates=Ql,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!zc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Vc(e,t,n,!1,i)},t.version="18.0.0-fc46dba67-20220329"},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},9790:function(e,t,n){"use strict";var i=n(5318);t.ZP=void 0;var r=i(n(6479)),o=i(n(3038)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n(2791)),a=i(n(3671));function l(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var c=0,u=s.default.forwardRef((function(e,t){var n=e.events,i=e.value,l=e.options,u=(e.children,e.extraKeys),d=e.getLineAndCursor,h=e.getMdeInstance,f=e.getCodemirrorInstance,p=e.onChange,g=e.id,m=(0,r.default)(e,["events","value","options","children","extraKeys","getLineAndCursor","getMdeInstance","getCodemirrorInstance","onChange","id"]),v=(0,s.useMemo)((function(){return null!==g&&void 0!==g?g:"simplemde-editor-".concat(++c)}),[g]),y=(0,s.useRef)(null),b=(0,s.useRef)(!0),w=(0,s.useRef)(i);w.current=i;var _=(0,s.useState)(null),x=(0,o.default)(_,2),k=x[0],C=x[1],S=function(e){var t=e.options,n=e.id,i=e.currentValueRef,r=e.textRef,l=(0,s.useState)(null),c=(0,o.default)(l,2),u=c[0],d=c[1],h=(0,s.useCallback)((function(e,n,i){var r=null===t||void 0===t?void 0:t.imageUploadFunction;r&&r(e,(function(e){n(e)}),i)}),[null===t||void 0===t?void 0:t.imageUploadFunction]);(0,s.useRef)(u).current=u,(0,s.useEffect)((function(){var e;if(r){var n={element:r,initialValue:i.current},o=(null===t||void 0===t?void 0:t.imageUploadFunction)?h:void 0;e=new a.default(Object.assign({},n,t,{imageUploadFunction:o})),d(e)}return function(){var t,n;null===(t=e)||void 0===t||t.toTextArea(),null===(n=e)||void 0===n||n.cleanup()}}),[r,i,n,h,t]);var f=(0,s.useMemo)((function(){return null===u||void 0===u?void 0:u.codemirror}),[null===u||void 0===u?void 0:u.codemirror]);return{editor:u,codemirror:f}}({options:l,id:v,currentValueRef:w,textRef:k}),E=S.editor,O=S.codemirror;(0,s.useEffect)((function(){b.current&&(null===E||void 0===E||E.value(null!==i&&void 0!==i?i:"")),b.current=!0}),[E,i]);var A=(0,s.useCallback)((function(){var e;(null===E||void 0===E?void 0:E.value())!==w.current&&(b.current=!1,null===p||void 0===p||p(null!==(e=null===E||void 0===E?void 0:E.value())&&void 0!==e?e:""))}),[E,p]);(0,s.useEffect)((function(){(null===l||void 0===l?void 0:l.autofocus)&&(null===O||void 0===O||O.focus(),null===O||void 0===O||O.setCursor(null===O||void 0===O?void 0:O.lineCount(),0))}),[O,null===l||void 0===l?void 0:l.autofocus]);var M=(0,s.useCallback)((function(){O&&(null===d||void 0===d||d(O.getDoc().getCursor()))}),[O,d]);(0,s.useEffect)((function(){M()}),[M]),(0,s.useEffect)((function(){E&&(null===h||void 0===h||h(E))}),[E,h]),(0,s.useEffect)((function(){O&&(null===f||void 0===f||f(O))}),[O,f,h]),(0,s.useEffect)((function(){u&&O&&O.setOption("extraKeys",Object.assign({},u,O.getOption("extraKeys")))}),[O,u]),(0,s.useEffect)((function(){var e,t=null===(e=y.current)||void 0===e?void 0:e.getElementsByClassName("editor-toolbarNode")[0],n=function(){return O&&A()};return null===t||void 0===t||t.addEventListener("click",n),function(){null===t||void 0===t||t.removeEventListener("click",n)}}),[O,A]),(0,s.useEffect)((function(){return null===O||void 0===O||O.on("change",A),null===O||void 0===O||O.on("cursorActivity",M),function(){null===O||void 0===O||O.off("change",A),null===O||void 0===O||O.off("cursorActivity",M)}}),[O,M,A]);var R=(0,s.useRef)(n);return(0,s.useEffect)((function(){return n!==R.current&&R.current&&Object.entries(R.current).forEach((function(e){var t=(0,o.default)(e,2),n=t[0],i=t[1];i&&(null===O||void 0===O||O.off(n,i))})),n&&Object.entries(n).forEach((function(e){var t=(0,o.default)(e,2),n=t[0],i=t[1];i&&(null===O||void 0===O||O.on(n,i))})),R.current=n,function(){n&&Object.entries(n).forEach((function(e){var t=(0,o.default)(e,2),n=t[0],i=t[1];i&&(null===O||void 0===O||O.off(n,i))}))}}),[O,n]),s.default.createElement("div",Object.assign({id:"".concat(v,"-wrapper")},m,{ref:function(e){"function"===typeof t?t(e):t&&(t.current=e),y.current=e}}),s.default.createElement("textarea",{id:v,ref:C,style:{display:"none"}}))}));u.displayName="SimpleMdeReact";var d=u;t.ZP=d},6374:function(e,t,n){"use strict";var i=n(2791),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,o={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,i)&&!l.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,i){var r,o={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,r)&&!C.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:k.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var O=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function M(e,t,r,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return s=s(l=e),e=""===o?"."+A(l,0):o,_(s)?(r="",null!=e&&(r=e.replace(O,"$&/")+"/"),M(s,t,r,"",(function(e){return e}))):null!=s&&(E(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(O,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var u=o+A(a=e[c],c);l+=M(a,t,r,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=M(a=a.value,t,r,u=o+A(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var i=[],r=0;return M(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function T(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},I={transition:null},L={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:I,ReactCurrentOwner:k};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!C.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<r&&0>o(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>o(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function _(e){if(m=!1,w(e),!g)if(null!==i(c))g=!0,I(x);else{var t=i(u);null!==t&&L(_,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,y(E),E=-1),p=!0;var o=f;try{for(w(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!M());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===i(c)&&r(c),w(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&L(_,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,S=null,E=-1,O=5,A=-1;function M(){return!(t.unstable_now()-A<O)}function R(){if(null!==S){var e=t.unstable_now();A=e;var n=!0;try{n=S(!0,e)}finally{n?k():(C=!1,S=null)}}else C=!1}if("function"===typeof b)k=function(){b(R)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,D=T.port2;T.port1.onmessage=R,k=function(){D.postMessage(null)}}else k=function(){v(R,0)};function I(e){S=e,C||(C=!0,k())}function L(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,I(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===i(c)&&e===i(u)&&(m?(y(E),E=-1):m=!0,L(_,o-s))):(e.sortIndex=a,n(c,e),g||p||(g=!0,I(x))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},1235:function(e,t,n){var i;!function(){"use strict";(i=function(e,t,n,i){i=i||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=i.flags||{},this.memoized={},this.loaded=!1;var r,o,s,a,l,c=this;function u(e,t){var n=c._readFile(e,null,i.asyncLoad);i.asyncLoad?n.then((function(e){t(e)})):t(n)}function d(e){t=e,n&&f()}function h(e){n=e,t&&f()}function f(){for(c.rules=c._parseAFF(t),c.compoundRuleCodes={},o=0,a=c.compoundRules.length;o<a;o++){var e=c.compoundRules[o];for(s=0,l=e.length;s<l;s++)c.compoundRuleCodes[e[s]]=[]}for(o in"ONLYINCOMPOUND"in c.flags&&(c.compoundRuleCodes[c.flags.ONLYINCOMPOUND]=[]),c.dictionaryTable=c._parseDIC(n),c.compoundRuleCodes)0===c.compoundRuleCodes[o].length&&delete c.compoundRuleCodes[o];for(o=0,a=c.compoundRules.length;o<a;o++){var r=c.compoundRules[o],u="";for(s=0,l=r.length;s<l;s++){var d=r[s];d in c.compoundRuleCodes?u+="("+c.compoundRuleCodes[d].join("|")+")":u+=d}c.compoundRules[o]=new RegExp(u,"i")}c.loaded=!0,i.asyncLoad&&i.loadedCallback&&i.loadedCallback(c)}return e&&(c.dictionary=e,t&&n?f():"undefined"!==typeof window&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(r=i.dictionaryPath?i.dictionaryPath:"typo/dictionaries",t||u(chrome.extension.getURL(r+"/"+e+"/"+e+".aff"),d),n||u(chrome.extension.getURL(r+"/"+e+"/"+e+".dic"),h)):(r=i.dictionaryPath?i.dictionaryPath:"//dictionaries",t||u(r+"/"+e+"/"+e+".aff",d),n||u(r+"/"+e+"/"+e+".dic",h))),this}).prototype={load:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this},_readFile:function(e,t,i){if(t=t||"utf8","undefined"!==typeof XMLHttpRequest){var r,o=new XMLHttpRequest;return o.open("GET",e,i),i&&(r=new Promise((function(e,t){o.onload=function(){200===o.status?e(o.responseText):t(o.statusText)},o.onerror=function(){t(o.statusText)}}))),o.overrideMimeType&&o.overrideMimeType("text/plain; charset="+t),o.send(null),i?r:o.responseText}var s=n(2562);try{if(s.existsSync(e))return s.readFileSync(e,t);console.log("Path "+e+" does not exist.")}catch(a){return console.log(a),""}},_parseAFF:function(e){var t,n,i,r,o,s,a,l={},c=e.split(/\r?\n/);for(r=0,s=c.length;r<s;r++)if(t=(t=this._removeAffixComments(c[r])).trim()){var u=t.split(/\s+/),d=u[0];if("PFX"==d||"SFX"==d){var h=u[1],f=u[2],p=[];for(o=r+1,a=r+1+(n=parseInt(u[3],10));o<a;o++){var g=(i=c[o].split(/\s+/))[2],m=i[3].split("/"),v=m[0];"0"===v&&(v="");var y=this.parseRuleCodes(m[1]),b=i[4],w={};w.add=v,y.length>0&&(w.continuationClasses=y),"."!==b&&(w.match="SFX"===d?new RegExp(b+"$"):new RegExp("^"+b)),"0"!=g&&(w.remove="SFX"===d?new RegExp(g+"$"):g),p.push(w)}l[h]={type:d,combineable:"Y"==f,entries:p},r+=n}else if("COMPOUNDRULE"===d){for(o=r+1,a=r+1+(n=parseInt(u[1],10));o<a;o++)i=(t=c[o]).split(/\s+/),this.compoundRules.push(i[1]);r+=n}else"REP"===d?3===(i=t.split(/\s+/)).length&&this.replacementTable.push([i[1],i[2]]):this.flags[d]=u[1]}return l},_removeAffixComments:function(e){return e.match(/^\s*#/,"")?"":e},_parseDIC:function(e){var t=(e=this._removeDicComments(e)).split(/\r?\n/),n={};function i(e,t){n.hasOwnProperty(e)||(n[e]=null),t.length>0&&(null===n[e]&&(n[e]=[]),n[e].push(t))}for(var r=1,o=t.length;r<o;r++){var s=t[r];if(s){var a=s.split("/",2),l=a[0];if(a.length>1){var c=this.parseRuleCodes(a[1]);"NEEDAFFIX"in this.flags&&-1!=c.indexOf(this.flags.NEEDAFFIX)||i(l,c);for(var u=0,d=c.length;u<d;u++){var h=c[u],f=this.rules[h];if(f)for(var p=this._applyRule(l,f),g=0,m=p.length;g<m;g++){var v=p[g];if(i(v,[]),f.combineable)for(var y=u+1;y<d;y++){var b=c[y],w=this.rules[b];if(w&&w.combineable&&f.type!=w.type)for(var _=this._applyRule(v,w),x=0,k=_.length;x<k;x++){i(_[x],[])}}}h in this.compoundRuleCodes&&this.compoundRuleCodes[h].push(l)}}else i(l.trim(),[])}}return n},_removeDicComments:function(e){return e=e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(!e)return[];if(!("FLAG"in this.flags))return e.split("");if("long"===this.flags.FLAG){for(var t=[],n=0,i=e.length;n<i;n+=2)t.push(e.substr(n,2));return t}return"num"===this.flags.FLAG?e.split(","):void 0},_applyRule:function(e,t){for(var n=t.entries,i=[],r=0,o=n.length;r<o;r++){var s=n[r];if(!s.match||e.match(s.match)){var a=e;if(s.remove&&(a=a.replace(s.remove,"")),"SFX"===t.type?a+=s.add:a=s.add+a,i.push(a),"continuationClasses"in s)for(var l=0,c=s.continuationClasses.length;l<c;l++){var u=this.rules[s.continuationClasses[l]];u&&(i=i.concat(this._applyRule(a,u)))}}}return i},check:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var n=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0;if(this.checkExact(t.toLowerCase()))return!0}var i=t[0].toLowerCase()+t.substring(1);if(i!==t){if(this.hasFlag(i,"KEEPCASE"))return!1;if(this.checkExact(i))return!0}return!1},checkExact:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t,n,i=this.dictionaryTable[e];if("undefined"===typeof i){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(t=0,n=this.compoundRules.length;t<n;t++)if(e.match(this.compoundRules[t]))return!0}else{if(null===i)return!0;if("object"===typeof i)for(t=0,n=i.length;t<n;t++)if(!this.hasFlag(e,"ONLYINCOMPOUND",i[t]))return!0}return!1},hasFlag:function(e,t,n){if(!this.loaded)throw"Dictionary not loaded.";return!(!(t in this.flags)||("undefined"===typeof n&&(n=Array.prototype.concat.apply([],this.dictionaryTable[e])),!n||-1===n.indexOf(this.flags[t])))},alphabet:"",suggest:function(e,t){if(!this.loaded)throw"Dictionary not loaded.";if(t=t||5,this.memoized.hasOwnProperty(e)){var n=this.memoized[e].limit;if(t<=n||this.memoized[e].suggestions.length<n)return this.memoized[e].suggestions.slice(0,t)}if(this.check(e))return[];for(var i=0,r=this.replacementTable.length;i<r;i++){var o=this.replacementTable[i];if(-1!==e.indexOf(o[0])){var s=e.replace(o[0],o[1]);if(this.check(s))return[s]}}var a=this;function l(e,t){var n,i,r,o,s={},l=a.alphabet.length;if("string"==typeof e){var c=e;(e={})[c]=!0}for(var c in e)for(n=0,r=c.length+1;n<r;n++){var u=[c.substring(0,n),c.substring(n)];if(u[1]&&(o=u[0]+u[1].substring(1),t&&!a.check(o)||(o in s?s[o]+=1:s[o]=1)),u[1].length>1&&u[1][1]!==u[1][0]&&(o=u[0]+u[1][1]+u[1][0]+u[1].substring(2),t&&!a.check(o)||(o in s?s[o]+=1:s[o]=1)),u[1]){var d=u[1].substring(0,1).toUpperCase()===u[1].substring(0,1)?"uppercase":"lowercase";for(i=0;i<l;i++){var h=a.alphabet[i];"uppercase"===d&&(h=h.toUpperCase()),h!=u[1].substring(0,1)&&(o=u[0]+h+u[1].substring(1),t&&!a.check(o)||(o in s?s[o]+=1:s[o]=1))}}if(u[1])for(i=0;i<l;i++){d=u[0].substring(-1).toUpperCase()===u[0].substring(-1)&&u[1].substring(0,1).toUpperCase()===u[1].substring(0,1)?"uppercase":"lowercase",h=a.alphabet[i];"uppercase"===d&&(h=h.toUpperCase()),o=u[0]+h+u[1],t&&!a.check(o)||(o in s?s[o]+=1:s[o]=1)}}return s}return a.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[e]={suggestions:function(e){var n,i=l(e),r=l(i,!0);for(var o in i)a.check(o)&&(o in r?r[o]+=i[o]:r[o]=i[o]);var s=[];for(n in r)r.hasOwnProperty(n)&&s.push([n,r[n]]);s.sort((function(e,t){var n=e[1],i=t[1];return n<i?-1:n>i?1:t[0].localeCompare(e[0])})).reverse();var c=[],u="lowercase";e.toUpperCase()===e?u="uppercase":e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()===e&&(u="capitalized");var d=t;for(n=0;n<Math.min(d,s.length);n++)"uppercase"===u?s[n][0]=s[n][0].toUpperCase():"capitalized"===u&&(s[n][0]=s[n][0].substr(0,1).toUpperCase()+s[n][0].substr(1)),a.hasFlag(s[n][0],"NOSUGGEST")||-1!=c.indexOf(s[n][0])?d++:c.push(s[n][0]);return c}(e),limit:t},this.memoized[e].suggestions}}}(),e.exports=i},2562:function(){}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,n){return __webpack_require__.f[n](e,t),t}),[]))},__webpack_require__.u=function(e){return"static/js/"+e+".70079b53.chunk.js"},__webpack_require__.miniCssF=function(e){},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="editor:";__webpack_require__.l=function(n,i,r,o){if(e[n])e[n].push(i);else{var s,a;if(void 0!==r)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+r){s=u;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",t+r),s.src=n),e[n]=[i];var d=function(t,i){s.onerror=s.onload=null,clearTimeout(h);var r=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(e){return e(i)})),t)return t(i)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),a&&document.head.appendChild(s)}}}(),__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},__webpack_require__.p="/CNSSGitPage/",function(){var e={179:0};__webpack_require__.f.j=function(t,n){var i=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise((function(n,r){i=e[t]=[n,r]}));n.push(i[2]=r);var o=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(o,(function(n){if(__webpack_require__.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,n){var i,r,o=n[0],s=n[1],a=n[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)__webpack_require__.o(s,i)&&(__webpack_require__.m[i]=s[i]);if(a)a(__webpack_require__)}for(t&&t(n);l<o.length;l++)r=o[l],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunkeditor=self.webpackChunkeditor||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__={};!function(){"use strict";var e=__webpack_require__(2791),t=__webpack_require__(4164),n=__webpack_require__(8399),i=(__webpack_require__(262),__webpack_require__(1941),__webpack_require__(27),__webpack_require__(9790)),r={java:"java",txt:"txt",console:"console",markdown:"markdown",image:"image"};function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(l){a=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function h(e,t){if(null==e)return{};var n,i,r=d(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var f=__webpack_require__(1694),p=__webpack_require__.n(f),g=__webpack_require__(184),m=["as","disabled"];function v(e){var t=e.tagName,n=e.disabled,i=e.href,r=e.target,o=e.rel,s=e.onClick,a=e.tabIndex,l=void 0===a?0:a,c=e.type;t||(t=null!=i||null!=r||null!=o?"a":"button");var u={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},u];var d=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(i))&&e.preventDefault(),n?e.stopPropagation():null==s||s(e)};return"a"===t&&(i||(i="#"),n&&(i=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:l,href:i,target:"a"===t?r:void 0,"aria-disabled":n||void 0,rel:"a"===t?o:void 0,onClick:d,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),d(e))}},u]}var y=e.forwardRef((function(e,t){var n=e.as,i=e.disabled,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,m),o=u(v(Object.assign({tagName:n,disabled:i},r)),2),s=o[0],a=o[1].tagName;return(0,g.jsx)(a,Object.assign({},r,s,{ref:t}))}));y.displayName="Button";var b=["xxl","xl","lg","md","sm","xs"],w=e.createContext({prefixes:{},breakpoints:b});w.Consumer,w.Provider;function _(t,n){var i=(0,e.useContext)(w).prefixes;return t||i[n]||n}function x(){return(0,e.useContext)(w).breakpoints}var k=["as","bsPrefix","variant","size","active","className"],C=e.forwardRef((function(e,t){var n=e.as,i=e.bsPrefix,r=e.variant,o=e.size,s=e.active,l=e.className,c=h(e,k),d=_(i,"btn"),f=u(v(a({tagName:n},c)),2),m=f[0],y=f[1].tagName;return(0,g.jsx)(y,a(a(a({},m),c),{},{ref:t,className:p()(l,d,s&&"active",r&&"".concat(d,"-").concat(r),o&&"".concat(d,"-").concat(o),c.href&&c.disabled&&"disabled")}))}));C.displayName="Button",C.defaultProps={variant:"primary",active:!1,disabled:!1};var S=C;var E=function(t){var o=["bold","italic","heading","|","quote","unordered-list","ordered-list","|","link","image","|","preview","|","guide"],s=(0,e.useMemo)((function(){return{autofocus:!1,spellChecker:!1,status:!1,toolbar:o,tabSize:8}}),[t.cellInfo.markdown.focused]);function a(e){t.onChange(e)}return(0,e.useMemo)((function(){return{focus:t.onFocusMarkdown,blur:t.onBlurMarkdown}}),[]),(0,g.jsxs)(e.Fragment,{children:[(0,g.jsxs)("div",{className:"cell-border",children:[function(){if(t.cellInfo.type!==r.console&&t.cellInfo.type!==r.txt)return(0,g.jsxs)("div",{className:"cell-info",children:[(0,g.jsx)(S,{className:"cell-button",onClick:function(){return t.moveCellUp()},children:"\u2191"}),"\xa0\xa0",(0,g.jsx)(S,{className:"cell-button",onClick:function(){return t.moveCellDown()},children:"\u2193"}),"\xa0\xa0",(0,g.jsx)(S,{className:"cell-button",onClick:function(){return t.deleteCell()},children:"\u274c"})]})}(),t.cellInfo.type===r.markdown?(0,g.jsx)(i.ZP,{value:t.cellInfo.code,onChange:a,options:s}):(0,g.jsx)(n.ZP,{id:"aceEditor",height:t.cellInfo.style.height,width:1020,placeholder:"",mode:t.cellInfo.style.mode,theme:"monokai",name:t.cellInfo.type,onChange:a,fontSize:14,showPrintMargin:!1,showGutter:t.cellInfo.style.gutter,highlightActiveLine:!1,readOnly:t.cellInfo.style.readOnly,value:t.cellInfo.code,cursorStart:0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:4}})]}),(0,g.jsx)("br",{})]})};var O=function(t){function n(){!function(){t.changeConsoleCellCode("Preparing Worker...\n");var e=new Worker("./workers/CompileCodeWorker.js");e.onmessage=function(e){return function(e){switch(e.type){case"override":t.changeConsoleCellCode(e.message);break;case"add":t.addConsoleCellCode(e.message)}}(e.data)};var n={cells:t.cells,otherFiles:t.otherFiles};e.postMessage(n)}()}return(0,g.jsxs)(e.Fragment,{children:[(0,g.jsx)(S,{className:"bg-danger",onClick:function(){return n()},id:"compileButton",children:" Compile "}),(0,g.jsx)("div",{id:"console",className:"d-none"})]})},A=function(e,t){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},A(e,t)};var M=function(){return M=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},M.apply(this,arguments)};function R(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function T(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function D(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function I(e){return this instanceof I?(this.v=e,this):new I(e)}var L=Object.freeze({__proto__:null,__extends:function(e,t){function n(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},get __assign(){return M},__rest:R,__decorate:function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__param:function(e,t){return function(n,i){t(n,i,e)}},__metadata:function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},__generator:function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},__createBinding:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]},__exportStar:function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])},__values:T,__read:D,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(D(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i},__await:I,__asyncGenerator:function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||a(e,t)}))})}function a(e,t){try{(n=r[e](t)).value instanceof I?Promise.resolve(n.value.v).then(l,c):u(o[0][2],n)}catch(i){u(o[0][3],i)}var n}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function(e){var t,n;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:I(e[i](t)),done:"return"===i}:r?r(t):t}:r}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=T(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet:function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}});function N(e,t){return e(t={exports:{}},t.exports),t.exports}var F,$=N((function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],i=0;i<arguments.length;i++){var r=arguments[i];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var s=n.apply(null,r);s&&e.push(s)}else if("object"===o)for(var a in r)t.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()})),P=(0,e.createContext)({collapsed:!1,rtl:!1,toggled:!1}),j=(0,e.forwardRef)((function(t,n){var i=t.children,r=t.className,o=t.width,s=t.collapsedWidth,a=t.collapsed,l=t.rtl,c=t.toggled,u=t.image,d=t.breakPoint,h=t.onToggle,f=t.style,p=void 0===f?{}:f,g=R(t,["children","className","width","collapsedWidth","collapsed","rtl","toggled","image","breakPoint","onToggle","style"]),m=(0,e.useState)({collapsed:"undefined"!==typeof a&&a,rtl:"undefined"!==typeof l&&l,toggled:"undefined"!==typeof c&&c}),v=m[0],y=m[1],b=n||e.createRef(),w=function(){var e=v.toggled;y(M(M({},v),{toggled:!e})),h&&h(!e)},_=a?s?{width:s,minWidth:s}:{}:o?{width:o,minWidth:o}:{};return(0,e.useEffect)((function(){y(M(M({},v),{collapsed:a,rtl:l,toggled:c}))}),[a,l,c]),e.createElement(P.Provider,{value:v},e.createElement("div",M({ref:b,className:$("pro-sidebar",r,d,{collapsed:a,rtl:l,toggled:c}),style:M(M({},_),p)},g),e.createElement("div",{className:"pro-sidebar-inner"},u?e.createElement("img",{src:u,alt:"sidebar background",className:"sidebar-bg"}):null,e.createElement("div",{className:"pro-sidebar-layout"},i)),e.createElement("div",{className:"overlay",onClick:w,onKeyPress:w,role:"button",tabIndex:0,"aria-label":"overlay"})))})),B=((0,e.forwardRef)((function(t,n){var i=t.children,r=t.className,o=R(t,["children","className"]),s=n||e.createRef();return e.createElement("div",M({ref:s,className:$("pro-sidebar-header",r)},o),i)})),(0,e.forwardRef)((function(t,n){var i=t.children,r=t.className,o=R(t,["children","className"]),s=n||e.createRef();return e.createElement("div",M({ref:s,className:$("pro-sidebar-content",r)},o),i)}))),z=(0,e.forwardRef)((function(t,n){var i=t.children,r=t.className,o=R(t,["children","className"]),s=n||e.createRef();return e.createElement("div",M({ref:s,className:$("pro-sidebar-footer",r)},o),i)})),U=(0,e.forwardRef)((function(t,n){var i,r=t.children,o=t.className,s=t.iconShape,a=t.popperArrow,l=void 0!==a&&a,c=t.subMenuBullets,u=void 0!==c&&c,d=t.innerSubMenuArrows,h=void 0===d||d,f=R(t,["children","className","iconShape","popperArrow","subMenuBullets","innerSubMenuArrows"]),p=n||e.createRef();return e.createElement("nav",M({ref:p,className:$("pro-menu",o,(i={},i["shaped "+s]=["square","round","circle"].indexOf(s)>=0,i["submenu-bullets"]=u,i["inner-submenu-arrows"]=h,i))},f),e.createElement("ul",null,e.Children.toArray(r).filter(Boolean).map((function(t,n){return e.cloneElement(t,{key:n,firstchild:1,popperarrow:!0===l?1:0})}))))})),V=(0,e.forwardRef)((function(t,n){var i=t.children,r=t.className,o=t.icon,s=t.active,a=t.prefix,l=t.suffix,c=(t.firstchild,t.popperarrow,R(t,["children","className","icon","active","prefix","suffix","firstchild","popperarrow"])),u=n||e.createRef();return e.createElement("li",M({ref:u,className:$("pro-menu-item",r,{active:s})},c),e.createElement("div",{className:"pro-inner-item",tabIndex:0,role:"button"},o?e.createElement("span",{className:"pro-icon-wrapper"},e.createElement("span",{className:"pro-icon"},o)):null,a?e.createElement("span",{className:"prefix-wrapper"},a):null,e.createElement("span",{className:"pro-item-content"},i),l?e.createElement("span",{className:"suffix-wrapper"},l):null))})),W=N((function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var i=L.__importStar(e),r=function(e){function t(t){var n=e.call(this,t)||this;return n.outerRef=null,n.handleRef=function(e){if(n.outerRef=e,n.props.forwardedRef)if("function"===typeof n.props.forwardedRef)n.props.forwardedRef(e);else{if("object"!==typeof n.props.forwardedRef)throw new Error("Invalid forwardedRef "+n.props.forwardedRef);n.props.forwardedRef.current=e}},n.handleTransitionEnd=function(e){e.target===n.outerRef&&"height"===e.propertyName&&(n.state.childrenLeaving?n.setState({children:null,childrenLeaving:!1},(function(){return n.endTransition()})):n.endTransition())},n.state={children:t.children,childrenLeaving:!1},n}return L.__extends(t,e),t.prototype.componentDidMount=function(){this.outerRef&&(this.props.closed||!this.props.children?(this.outerRef.classList.add("closed"),this.outerRef.style.height="0px"):this.props.transitionOnAppear?this.startTransition("0px"):this.outerRef.style.height="auto")},t.prototype.getSnapshotBeforeUpdate=function(){return this.outerRef?this.outerRef.getBoundingClientRect().height+"px":null},t.getDerivedStateFromProps=function(e,t){return e.children?{children:e.children,childrenLeaving:!1}:t.children?{children:t.children,childrenLeaving:!0}:null},t.prototype.componentDidUpdate=function(e,t,n){this.outerRef&&this.startTransition(n)},t.prototype.startTransition=function(e){var t="0px";this.props.closed||this.state.childrenLeaving||!this.state.children||(this.outerRef.classList.remove("closed"),this.outerRef.style.height="auto",t=getComputedStyle(this.outerRef).height),parseFloat(t).toFixed(2)!==parseFloat(e).toFixed(2)&&(this.outerRef.classList.add("transitioning"),this.outerRef.style.height=e,this.outerRef.offsetHeight,this.outerRef.style.transitionProperty="height",this.outerRef.style.height=t)},t.prototype.endTransition=function(){this.outerRef.classList.remove("transitioning"),this.outerRef.style.transitionProperty="none",this.outerRef.style.height=this.props.closed?"0px":"auto",!this.props.closed&&this.state.children||this.outerRef.classList.add("closed")},t.prototype.render=function(){var e=this.props,t=e.as,n=void 0===t?"div":t,r=(e.children,e.className),o=(e.closed,e.transitionOnAppear,e.forwardedRef,L.__rest(e,["as","children","className","closed","transitionOnAppear","forwardedRef"])),s=r?"react-slidedown "+r:"react-slidedown";return i.default.createElement(n,L.__assign({ref:this.handleRef,className:s,onTransitionEnd:this.handleTransitionEnd},o),this.state.children)},t.defaultProps={transitionOnAppear:!0,closed:!1},t}(i.Component);n.SlideDown=i.forwardRef((function(e,t){return i.default.createElement(r,L.__assign({},e,{forwardedRef:t}))})),n.default=n.SlideDown})),H=(F=W)&&F.__esModule&&Object.prototype.hasOwnProperty.call(F,"default")?F.default:F;W.SlideDown;function q(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function G(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t?t.defaultView:window}return e}function K(e){var t=G(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Y(e){return e instanceof G(e).Element||e instanceof Element}function J(e){return e instanceof G(e).HTMLElement||e instanceof HTMLElement}function X(e){return e?(e.nodeName||"").toLowerCase():null}function Q(e){return(Y(e)?e.ownerDocument:e.document).documentElement}function Z(e){return q(Q(e)).left+K(e).scrollLeft}function ee(e){return G(e).getComputedStyle(e)}function te(e){var t=ee(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function ne(e,t,n){void 0===n&&(n=!1);var i=Q(t),r=q(e),o=J(t),s={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(o||!o&&!n)&&(("body"!==X(t)||te(i))&&(s=function(e){return e!==G(e)&&J(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:K(e);var t}(t)),J(t)?((a=q(t)).x+=t.clientLeft,a.y+=t.clientTop):i&&(a.x=Z(i))),{x:r.left+s.scrollLeft-a.x,y:r.top+s.scrollTop-a.y,width:r.width,height:r.height}}function ie(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function re(e){return"html"===X(e)?e:e.assignedSlot||e.parentNode||e.host||Q(e)}function oe(e){return["html","body","#document"].indexOf(X(e))>=0?e.ownerDocument.body:J(e)&&te(e)?e:oe(re(e))}function se(e,t){void 0===t&&(t=[]);var n=oe(e),i="body"===X(n),r=G(n),o=i?[r].concat(r.visualViewport||[],te(n)?n:[]):n,s=t.concat(o);return i?s:s.concat(se(re(o)))}function ae(e){return["table","td","th"].indexOf(X(e))>=0}function le(e){if(!J(e)||"fixed"===ee(e).position)return null;var t=e.offsetParent;if(t){var n=Q(t);if("body"===X(t)&&"static"===ee(t).position&&"static"!==ee(n).position)return n}return t}function ce(e){for(var t=G(e),n=le(e);n&&ae(n)&&"static"===ee(n).position;)n=le(n);return n&&"body"===X(n)&&"static"===ee(n).position?t:n||function(e){for(var t=re(e);J(t)&&["html","body"].indexOf(X(t))<0;){var n=ee(t);if("none"!==n.transform||"none"!==n.perspective||n.willChange&&"auto"!==n.willChange)return t;t=t.parentNode}return null}(e)||t}var ue="top",de="bottom",he="right",fe="left",pe="auto",ge=[ue,de,he,fe],me="start",ve="end",ye="viewport",be="popper",we=ge.reduce((function(e,t){return e.concat([t+"-"+me,t+"-"+ve])}),[]),_e=[].concat(ge,[pe]).reduce((function(e,t){return e.concat([t,t+"-"+me,t+"-"+ve])}),[]),xe=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ke(e){var t=new Map,n=new Set,i=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var i=t.get(e);i&&r(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),i}function Ce(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}function Se(e){return e.split("-")[0]}function Ee(e,t){var n=Boolean(t.getRootNode&&t.getRootNode().host);if(e.contains(t))return!0;if(n){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Oe(e){return Object.assign(Object.assign({},e),{},{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ae(e,t){return t===ye?Oe(function(e){var t=G(e),n=Q(e),i=t.visualViewport,r=n.clientWidth,o=n.clientHeight,s=0,a=0;return i&&(r=i.width,o=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=i.offsetLeft,a=i.offsetTop)),{width:r,height:o,x:s+Z(e),y:a}}(e)):J(t)?function(e){var t=q(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):Oe(function(e){var t=Q(e),n=K(e),i=e.ownerDocument.body,r=Math.max(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Math.max(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-n.scrollLeft+Z(e),a=-n.scrollTop;return"rtl"===ee(i||t).direction&&(s+=Math.max(t.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:s,y:a}}(Q(e)))}function Me(e,t,n){var i="clippingParents"===t?function(e){var t=se(re(e)),n=["absolute","fixed"].indexOf(ee(e).position)>=0&&J(e)?ce(e):e;return Y(n)?t.filter((function(e){return Y(e)&&Ee(e,n)&&"body"!==X(e)})):[]}(e):[].concat(t),r=[].concat(i,[n]),o=r[0],s=r.reduce((function(t,n){var i=Ae(e,n);return t.top=Math.max(i.top,t.top),t.right=Math.min(i.right,t.right),t.bottom=Math.min(i.bottom,t.bottom),t.left=Math.max(i.left,t.left),t}),Ae(e,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Re(e){return e.split("-")[1]}function Te(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function De(e){var t,n=e.reference,i=e.element,r=e.placement,o=r?Se(r):null,s=r?Re(r):null,a=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(o){case ue:t={x:a,y:n.y-i.height};break;case de:t={x:a,y:n.y+n.height};break;case he:t={x:n.x+n.width,y:l};break;case fe:t={x:n.x-i.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?Te(o):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case me:t[c]=Math.floor(t[c])-Math.floor(n[u]/2-i[u]/2);break;case ve:t[c]=Math.floor(t[c])+Math.ceil(n[u]/2-i[u]/2)}}return t}function Ie(e){return Object.assign(Object.assign({},{top:0,right:0,bottom:0,left:0}),e)}function Le(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function Ne(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=void 0===i?e.placement:i,o=n.boundary,s=void 0===o?"clippingParents":o,a=n.rootBoundary,l=void 0===a?ye:a,c=n.elementContext,u=void 0===c?be:c,d=n.altBoundary,h=void 0!==d&&d,f=n.padding,p=void 0===f?0:f,g=Ie("number"!==typeof p?p:Le(p,ge)),m=u===be?"reference":be,v=e.elements.reference,y=e.rects.popper,b=e.elements[h?m:u],w=Me(Y(b)?b:b.contextElement||Q(e.elements.popper),s,l),_=q(v),x=De({reference:_,element:y,strategy:"absolute",placement:r}),k=Oe(Object.assign(Object.assign({},y),x)),C=u===be?k:_,S={top:w.top-C.top+g.top,bottom:C.bottom-w.bottom+g.bottom,left:w.left-C.left+g.left,right:C.right-w.right+g.right},E=e.modifiersData.offset;if(u===be&&E){var O=E[r];Object.keys(S).forEach((function(e){var t=[he,de].indexOf(e)>=0?1:-1,n=[ue,de].indexOf(e)>=0?"y":"x";S[e]+=O[n]*t}))}return S}var Fe={placement:"bottom",modifiers:[],strategy:"absolute"};function $e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Pe(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,r=t.defaultOptions,o=void 0===r?Fe:r;return function(e,t,n){void 0===n&&(n=o);var r={placement:"bottom",orderedModifiers:[],options:Object.assign(Object.assign({},Fe),o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],a=!1,l={state:r,setOptions:function(n){c(),r.options=Object.assign(Object.assign(Object.assign({},o),r.options),n),r.scrollParents={reference:Y(e)?se(e):e.contextElement?se(e.contextElement):[],popper:se(t)};var a=function(e){var t=ke(e);return xe.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign(Object.assign(Object.assign({},n),t),{},{options:Object.assign(Object.assign({},n.options),t.options),data:Object.assign(Object.assign({},n.data),t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(i,r.options.modifiers)));return r.orderedModifiers=a.filter((function(e){return e.enabled})),r.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var a=o({state:r,name:t,instance:l,options:i}),c=function(){};s.push(a||c)}})),l.update()},forceUpdate:function(){if(!a){var e=r.elements,t=e.reference,n=e.popper;if($e(t,n)){r.rects={reference:ne(t,ce(n),"fixed"===r.options.strategy),popper:ie(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach((function(e){return r.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<r.orderedModifiers.length;i++)if(!0!==r.reset){var o=r.orderedModifiers[i],s=o.fn,c=o.options,u=void 0===c?{}:c,d=o.name;"function"===typeof s&&(r=s({state:r,options:u,name:d,instance:l})||r)}else r.reset=!1,i=-1}}},update:Ce((function(){return new Promise((function(e){l.forceUpdate(),e(r)}))})),destroy:function(){c(),a=!0}};if(!$e(e,t))return l;function c(){s.forEach((function(e){return e()})),s=[]}return l.setOptions(n).then((function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var je={passive:!0};var Be={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=void 0===r||r,s=i.resize,a=void 0===s||s,l=G(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,je)})),a&&l.addEventListener("resize",n.update,je),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,je)})),a&&l.removeEventListener("resize",n.update,je)}},data:{}};var ze={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ue(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.offsets,s=e.position,a=e.gpuAcceleration,l=e.adaptive,c=function(e){var t=e.x,n=e.y,i=window.devicePixelRatio||1;return{x:Math.round(t*i)/i||0,y:Math.round(n*i)/i||0}}(o),u=c.x,d=c.y,h=o.hasOwnProperty("x"),f=o.hasOwnProperty("y"),p=fe,g=ue,m=window;if(l){var v=ce(n);v===G(n)&&(v=Q(n)),r===ue&&(g=de,d-=v.clientHeight-i.height,d*=a?1:-1),r===fe&&(p=he,u-=v.clientWidth-i.width,u*=a?1:-1)}var y,b=Object.assign({position:s},l&&ze);return a?Object.assign(Object.assign({},b),{},((y={})[g]=f?"0":"",y[p]=h?"0":"",y.transform=(m.devicePixelRatio||1)<2?"translate("+u+"px, "+d+"px)":"translate3d("+u+"px, "+d+"px, 0)",y)):Object.assign(Object.assign({},b),{},((t={})[g]=f?d+"px":"",t[p]=h?u+"px":"",t.transform="",t))}var Ve={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,s=void 0===o||o,a={placement:Se(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign(Object.assign({},t.styles.popper),Ue(Object.assign(Object.assign({},a),{},{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign(Object.assign({},t.styles.arrow),Ue(Object.assign(Object.assign({},a),{},{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1})))),t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-placement":t.placement})},data:{}};var We={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];J(r)&&X(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],r=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});J(i)&&X(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]};var He={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.offset,o=void 0===r?[0,0]:r,s=_e.reduce((function(e,n){return e[n]=function(e,t,n){var i=Se(e),r=[fe,ue].indexOf(i)>=0?-1:1,o="function"===typeof n?n(Object.assign(Object.assign({},t),{},{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[fe,he].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=s}},qe={left:"right",right:"left",bottom:"top",top:"bottom"};function Ge(e){return e.replace(/left|right|bottom|top/g,(function(e){return qe[e]}))}var Ke={start:"end",end:"start"};function Ye(e){return e.replace(/start|end/g,(function(e){return Ke[e]}))}function Je(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?_e:l,u=Re(i),d=u?a?we:we.filter((function(e){return Re(e)===u})):ge,h=d.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=d);var f=h.reduce((function(t,n){return t[n]=Ne(e,{placement:n,boundary:r,rootBoundary:o,padding:s})[Se(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}var Xe={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=void 0===f||f,g=n.allowedAutoPlacements,m=t.options.placement,v=Se(m),y=l||(v===m||!p?[Ge(m)]:function(e){if(Se(e)===pe)return[];var t=Ge(e);return[Ye(e),t,Ye(t)]}(m)),b=[m].concat(y).reduce((function(e,n){return e.concat(Se(n)===pe?Je(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:g}):n)}),[]),w=t.rects.reference,_=t.rects.popper,x=new Map,k=!0,C=b[0],S=0;S<b.length;S++){var E=b[S],O=Se(E),A=Re(E)===me,M=[ue,de].indexOf(O)>=0,R=M?"width":"height",T=Ne(t,{placement:E,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),D=M?A?he:fe:A?de:ue;w[R]>_[R]&&(D=Ge(D));var I=Ge(D),L=[];if(o&&L.push(T[O]<=0),a&&L.push(T[D]<=0,T[I]<=0),L.every((function(e){return e}))){C=E,k=!1;break}x.set(E,L)}if(k)for(var N=function(e){var t=b.find((function(t){var n=x.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},F=p?3:1;F>0;F--){if("break"===N(F))break}t.placement!==C&&(t.modifiersData[i]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Qe(e,t,n){return Math.max(e,Math.min(t,n))}var Ze={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=void 0===h||h,p=n.tetherOffset,g=void 0===p?0:p,m=Ne(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=Se(t.placement),y=Re(t.placement),b=!y,w=Te(v),_="x"===w?"y":"x",x=t.modifiersData.popperOffsets,k=t.rects.reference,C=t.rects.popper,S="function"===typeof g?g(Object.assign(Object.assign({},t.rects),{},{placement:t.placement})):g,E={x:0,y:0};if(x){if(o){var O="y"===w?ue:fe,A="y"===w?de:he,M="y"===w?"height":"width",R=x[w],T=x[w]+m[O],D=x[w]-m[A],I=f?-C[M]/2:0,L=y===me?k[M]:C[M],N=y===me?-C[M]:-k[M],F=t.elements.arrow,$=f&&F?ie(F):{width:0,height:0},P=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},j=P[O],B=P[A],z=Qe(0,k[M],$[M]),U=b?k[M]/2-I-z-j-S:L-z-j-S,V=b?-k[M]/2+I+z+B+S:N+z+B+S,W=t.elements.arrow&&ce(t.elements.arrow),H=W?"y"===w?W.clientTop||0:W.clientLeft||0:0,q=t.modifiersData.offset?t.modifiersData.offset[t.placement][w]:0,G=x[w]+U-q-H,K=x[w]+V-q,Y=Qe(f?Math.min(T,G):T,R,f?Math.max(D,K):D);x[w]=Y,E[w]=Y-R}if(a){var J="x"===w?ue:fe,X="x"===w?de:he,Q=x[_],Z=Qe(Q+m[J],Q,Q-m[X]);x[_]=Z,E[_]=Z-Q}t.modifiersData[i]=E}},requiresIfExists:["offset"]};var et={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,r=n.elements.arrow,o=n.modifiersData.popperOffsets,s=Se(n.placement),a=Te(s),l=[fe,he].indexOf(s)>=0?"height":"width";if(r&&o){var c=n.modifiersData[i+"#persistent"].padding,u=ie(r),d="y"===a?ue:fe,h="y"===a?de:he,f=n.rects.reference[l]+n.rects.reference[a]-o[a]-n.rects.popper[l],p=o[a]-n.rects.reference[a],g=ce(r),m=g?"y"===a?g.clientHeight||0:g.clientWidth||0:0,v=f/2-p/2,y=c[d],b=m-u[l]-c[h],w=m/2-u[l]/2+v,_=Qe(y,w,b),x=a;n.modifiersData[i]=((t={})[x]=_,t.centerOffset=_-w,t)}},effect:function(e){var t=e.state,n=e.options,i=e.name,r=n.element,o=void 0===r?"[data-popper-arrow]":r,s=n.padding,a=void 0===s?0:s;null!=o&&("string"!==typeof o||(o=t.elements.popper.querySelector(o)))&&Ee(t.elements.popper,o)&&(t.elements.arrow=o,t.modifiersData[i+"#persistent"]={padding:Ie("number"!==typeof a?a:Le(a,ge))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function tt(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function nt(e){return[ue,he,de,fe].some((function(t){return e[t]>=0}))}var it=Pe({defaultModifiers:[Be,{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=De({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Ve,We,He,Xe,Ze,et,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,s=Ne(t,{elementContext:"reference"}),a=Ne(t,{altBoundary:!0}),l=tt(s,i),c=tt(a,r,o),u=nt(l),d=nt(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),rt=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,i){return e[0]===t&&(n=i,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];e.call(t,r[1],r[0])}},t}()}(),ot="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,st="undefined"!==typeof __webpack_require__.g&&__webpack_require__.g.Math===Math?__webpack_require__.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),at="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(st):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var lt=["top","right","bottom","left","width","height","size","weight"],ct="undefined"!==typeof MutationObserver,ut=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,r=0;function o(){n&&(n=!1,e()),i&&a()}function s(){at(o)}function a(){var e=Date.now();if(n){if(e-r<2)return;i=!0}else n=!0,i=!1,setTimeout(s,t);r=e}return a}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){ot&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ct?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){ot&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;lt.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),dt=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},ht=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||st},ft=bt(0,0,0,0);function pt(e){return parseFloat(e)||0}function gt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+pt(e["border-"+n+"-width"])}),0)}function mt(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return ft;var i=ht(e).getComputedStyle(e),r=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],o=e["padding-"+r];t[r]=pt(o)}return t}(i),o=r.left+r.right,s=r.top+r.bottom,a=pt(i.width),l=pt(i.height);if("border-box"===i.boxSizing&&(Math.round(a+o)!==t&&(a-=gt(i,"left","right")+o),Math.round(l+s)!==n&&(l-=gt(i,"top","bottom")+s)),!function(e){return e===ht(e).document.documentElement}(e)){var c=Math.round(a+o)-t,u=Math.round(l+s)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(u)&&(l-=u)}return bt(r.left,r.top,a,l)}var vt="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof ht(e).SVGGraphicsElement}:function(e){return e instanceof ht(e).SVGElement&&"function"===typeof e.getBBox};function yt(e){return ot?vt(e)?function(e){var t=e.getBBox();return bt(0,0,t.width,t.height)}(e):mt(e):ft}function bt(e,t,n,i){return{x:e,y:t,width:n,height:i}}var wt=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=bt(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=yt(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),_t=function(e,t){var n=function(e){var t=e.x,n=e.y,i=e.width,r=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return dt(s,{x:t,y:n,width:i,height:r,top:n,right:t+i,bottom:r+n,left:t}),s}(t);dt(this,{target:e,contentRect:n})},xt=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new rt,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof ht(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new wt(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof ht(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new _t(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),kt="undefined"!==typeof WeakMap?new WeakMap:new rt,Ct=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=ut.getInstance(),i=new xt(t,n,this);kt.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){Ct.prototype[e]=function(){var t;return(t=kt.get(this))[e].apply(t,arguments)}}));var St="undefined"!==typeof st.ResizeObserver?st.ResizeObserver:Ct,Et=(0,e.forwardRef)((function(t,n){var i,r=t.children,o=t.icon,s=t.className,a=t.title,l=t.defaultOpen,c=void 0!==l&&l,u=t.open,d=t.prefix,h=t.suffix,f=t.firstchild,p=t.popperarrow,g=t.onOpenChange,m=R(t,["children","icon","className","title","defaultOpen","open","prefix","suffix","firstchild","popperarrow","onOpenChange"]),v=(0,e.useContext)(P),y=v.collapsed,b=v.rtl,w=v.toggled,_=(0,e.useState)(!c),x=_[0],k=_[1],C=(0,e.useRef)(null),S=(0,e.useRef)(null),E=(0,e.useRef)(null),O=function(){g&&g(x),k(!x)};(0,e.useEffect)((function(){if(f&&y){if(S.current&&E.current&&(i=it(S.current,E.current,{placement:"right",strategy:"fixed",modifiers:[{name:"computeStyles",options:{adaptive:!1}}]})),C.current){var e=new St((function(){i&&i.update()}));e.observe(C.current),e.observe(S.current)}setTimeout((function(){i&&i.update()}),300)}return function(){i&&(i.destroy(),i=null)}}),[y,b,w]);var A=n||e.createRef();return e.createElement("li",M({ref:A,className:$("pro-menu-item pro-sub-menu",s,{open:"undefined"===typeof u?!x:u})},m),e.createElement("div",{ref:S,className:"pro-inner-item",onClick:O,onKeyPress:O,role:"button",tabIndex:0},o?e.createElement("span",{className:"pro-icon-wrapper"},e.createElement("span",{className:"pro-icon"},o)):null,d?e.createElement("span",{className:"prefix-wrapper"},d):null,e.createElement("span",{className:"pro-item-content"},a),h?e.createElement("span",{className:"suffix-wrapper"},h):null,e.createElement("span",{className:"pro-arrow-wrapper"},e.createElement("span",{className:"pro-arrow"}))),f&&y?e.createElement("div",{ref:E,className:$("pro-inner-list-item popper-element",{"has-arrow":p})},e.createElement("div",{className:"popper-inner",ref:C},e.createElement("ul",null,r)),p?e.createElement("div",{className:"popper-arrow","data-popper-arrow":!0}):null):e.createElement(H,{closed:"undefined"===typeof u?x:!u,className:"pro-inner-list-item"},e.createElement("div",null,e.createElement("ul",null,r))))})),Ot=__webpack_require__(2007),At=__webpack_require__.n(Ot);function Mt(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))}function Rt(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function Tt(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function Dt(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;var It=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Lt(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),i=It.get(n);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var i=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof i&&i.length>0?i:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var Nt=[".DS_Store","Thumbs.db"];function Ft(e){return"object"===typeof e&&null!==e}function $t(e){return zt(e.target.files).map((function(e){return Lt(e)}))}function Pt(e){return Mt(this,void 0,void 0,(function(){return Rt(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return Lt(e)}))]}}))}))}function jt(e,t){return Mt(this,void 0,void 0,(function(){var n;return Rt(this,(function(i){switch(i.label){case 0:return e.items?(n=zt(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(Ut))]):[3,2];case 1:return[2,Bt(Vt(i.sent()))];case 2:return[2,Bt(zt(e.files).map((function(e){return Lt(e)})))]}}))}))}function Bt(e){return e.filter((function(e){return-1===Nt.indexOf(e.name)}))}function zt(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i)}return t}function Ut(e){if("function"!==typeof e.webkitGetAsEntry)return Wt(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?qt(t):Wt(e)}function Vt(e){return e.reduce((function(e,t){return Dt(Dt([],Tt(e),!1),Tt(Array.isArray(t)?Vt(t):[t]),!1)}),[])}function Wt(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=Lt(t);return Promise.resolve(n)}function Ht(e){return Mt(this,void 0,void 0,(function(){return Rt(this,(function(t){return[2,e.isDirectory?qt(e):Gt(e)]}))}))}function qt(e){var t=e.createReader();return new Promise((function(e,n){var i=[];!function r(){var o=this;t.readEntries((function(t){return Mt(o,void 0,void 0,(function(){var o,s,a;return Rt(this,(function(l){switch(l.label){case 0:if(t.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return o=l.sent(),e(o),[3,4];case 3:return s=l.sent(),n(s),[3,4];case 4:return[3,6];case 5:a=Promise.all(t.map(Ht)),i.push(a),r(),l.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function Gt(e){return Mt(this,void 0,void 0,(function(){return Rt(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var i=Lt(n,e.fullPath);t(i)}),(function(e){n(e)}))}))]}))}))}var Kt=__webpack_require__(9998);function Yt(e){return function(e){if(Array.isArray(e))return tn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||en(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){Qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(l){a=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(e,t)||en(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){if(e){if("string"===typeof e)return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tn(e,t):void 0}}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var nn="file-invalid-type",rn="file-too-large",on="file-too-small",sn="too-many-files",an=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:nn,message:"File type must be ".concat(t)}},ln=function(e){return{code:rn,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},cn=function(e){return{code:on,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},un={code:sn,message:"Too many files"};function dn(e,t){var n="application/x-moz-file"===e.type||(0,Kt.Z)(e,t);return[n,n?null:an(t)]}function hn(e,t,n){if(fn(e.size))if(fn(t)&&fn(n)){if(e.size>n)return[!1,ln(n)];if(e.size<t)return[!1,cn(t)]}else{if(fn(t)&&e.size<t)return[!1,cn(t)];if(fn(n)&&e.size>n)return[!1,ln(n)]}return[!0,null]}function fn(e){return void 0!==e&&null!==e}function pn(e){var t=e.files,n=e.accept,i=e.minSize,r=e.maxSize,o=e.multiple,s=e.maxFiles,a=e.validator;return!(!o&&t.length>1||o&&s>=1&&t.length>s)&&t.every((function(e){var t=Zt(dn(e,n),1)[0],o=Zt(hn(e,i,r),1)[0],s=a?a(e):null;return t&&o&&!s}))}function gn(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function mn(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function vn(e){e.preventDefault()}function yn(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function bn(e){return-1!==e.indexOf("Edge/")}function wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return yn(e)||bn(e)}function _n(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.some((function(t){return!gn(e)&&t&&t.apply(void 0,[e].concat(i)),gn(e)}))}}function xn(){return"showOpenFilePicker"in window}function kn(e){return fn(e)?[{accept:Object.entries(e).filter((function(e){var t=Zt(e,2),n=t[0],i=t[1],r=!0;return On(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),r=!1),Array.isArray(i)&&i.every(An)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),r=!1),r})).reduce((function(e,t){var n=Zt(t,2),i=n[0],r=n[1];return Xt(Xt({},e),{},Qt({},i,r))}),{})}]:e}function Cn(e){if(fn(e))return Object.entries(e).reduce((function(e,t){var n=Zt(t,2),i=n[0],r=n[1];return[].concat(Yt(e),[i],Yt(r))}),[]).filter((function(e){return On(e)||An(e)})).join(",")}function Sn(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}function En(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}function On(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)}function An(e){return/^.*\.[\w]+$/.test(e)}var Mn=["children"],Rn=["open"],Tn=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Dn=["refKey","onChange","onClick"];function In(e){return function(e){if(Array.isArray(e))return Fn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(l){a=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(e,t)||Nn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(e,t){if(e){if("string"===typeof e)return Fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fn(e,t):void 0}}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){jn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bn(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var zn=(0,e.forwardRef)((function(t,n){var i=t.children,r=Wn(Bn(t,Mn)),o=r.open,s=Bn(r,Rn);return(0,e.useImperativeHandle)(n,(function(){return{open:o}}),[o]),e.createElement(e.Fragment,null,i(Pn(Pn({},s),{},{open:o})))}));zn.displayName="Dropzone";var Un={disabled:!1,getFilesFromEvent:function(e){return Mt(this,void 0,void 0,(function(){return Rt(this,(function(t){return Ft(e)&&Ft(e.dataTransfer)?[2,jt(e.dataTransfer,e.type)]:function(e){return Ft(e)&&Ft(e.target)}(e)?[2,$t(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,Pt(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};zn.defaultProps=Un,zn.propTypes={children:At().func,accept:At().objectOf(At().arrayOf(At().string)),multiple:At().bool,preventDropOnDocument:At().bool,noClick:At().bool,noKeyboard:At().bool,noDrag:At().bool,noDragEventsBubbling:At().bool,minSize:At().number,maxSize:At().number,maxFiles:At().number,disabled:At().bool,getFilesFromEvent:At().func,onFileDialogCancel:At().func,onFileDialogOpen:At().func,useFsAccessApi:At().bool,autoFocus:At().bool,onDragEnter:At().func,onDragLeave:At().func,onDragOver:At().func,onDrop:At().func,onDropAccepted:At().func,onDropRejected:At().func,onError:At().func,validator:At().func};var Vn={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Wn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Pn(Pn({},Un),t),i=n.accept,r=n.disabled,o=n.getFilesFromEvent,s=n.maxSize,a=n.minSize,l=n.multiple,c=n.maxFiles,u=n.onDragEnter,d=n.onDragLeave,h=n.onDragOver,f=n.onDrop,p=n.onDropAccepted,g=n.onDropRejected,m=n.onFileDialogCancel,v=n.onFileDialogOpen,y=n.useFsAccessApi,b=n.autoFocus,w=n.preventDropOnDocument,_=n.noClick,x=n.noKeyboard,k=n.noDrag,C=n.noDragEventsBubbling,S=n.onError,E=n.validator,O=(0,e.useMemo)((function(){return Cn(i)}),[i]),A=(0,e.useMemo)((function(){return kn(i)}),[i]),M=(0,e.useMemo)((function(){return"function"===typeof v?v:qn}),[v]),R=(0,e.useMemo)((function(){return"function"===typeof m?m:qn}),[m]),T=(0,e.useRef)(null),D=(0,e.useRef)(null),I=(0,e.useReducer)(Hn,Vn),L=Ln(I,2),N=L[0],F=L[1],$=N.isFocused,P=N.isFileDialogActive,j=(0,e.useRef)("undefined"!==typeof window&&window.isSecureContext&&y&&xn()),B=function(){!j.current&&P&&setTimeout((function(){D.current&&(D.current.files.length||(F({type:"closeDialog"}),R()))}),300)};(0,e.useEffect)((function(){return window.addEventListener("focus",B,!1),function(){window.removeEventListener("focus",B,!1)}}),[D,P,R,j]);var z=(0,e.useRef)([]),U=function(e){T.current&&T.current.contains(e.target)||(e.preventDefault(),z.current=[])};(0,e.useEffect)((function(){return w&&(document.addEventListener("dragover",vn,!1),document.addEventListener("drop",U,!1)),function(){w&&(document.removeEventListener("dragover",vn),document.removeEventListener("drop",U))}}),[T,w]),(0,e.useEffect)((function(){return!r&&b&&T.current&&T.current.focus(),function(){}}),[T,b,r]);var V=(0,e.useCallback)((function(e){S?S(e):console.error(e)}),[S]),W=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),ie(e),z.current=[].concat(In(z.current),[e.target]),mn(e)&&Promise.resolve(o(e)).then((function(t){if(!gn(e)||C){var n=t.length,i=n>0&&pn({files:t,accept:O,minSize:a,maxSize:s,multiple:l,maxFiles:c,validator:E});F({isDragAccept:i,isDragReject:n>0&&!i,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e)}})).catch((function(e){return V(e)}))}),[o,u,V,C,O,a,s,l,c,E]),H=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),ie(e);var t=mn(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&h&&h(e),!1}),[h,C]),q=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),ie(e);var t=z.current.filter((function(e){return T.current&&T.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),z.current=t,t.length>0||(F({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),mn(e)&&d&&d(e))}),[T,d,C]),G=(0,e.useCallback)((function(e,t){var n=[],i=[];e.forEach((function(e){var t=Ln(dn(e,O),2),r=t[0],o=t[1],l=Ln(hn(e,a,s),2),c=l[0],u=l[1],d=E?E(e):null;if(r&&c&&!d)n.push(e);else{var h=[o,u];d&&(h=h.concat(d)),i.push({file:e,errors:h.filter((function(e){return e}))})}})),(!l&&n.length>1||l&&c>=1&&n.length>c)&&(n.forEach((function(e){i.push({file:e,errors:[un]})})),n.splice(0)),F({acceptedFiles:n,fileRejections:i,type:"setFiles"}),f&&f(n,i,t),i.length>0&&g&&g(i,t),n.length>0&&p&&p(n,t)}),[F,l,O,a,s,c,f,p,g,E]),K=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),ie(e),z.current=[],mn(e)&&Promise.resolve(o(e)).then((function(t){gn(e)&&!C||G(t,e)})).catch((function(e){return V(e)})),F({type:"reset"})}),[o,G,V,C]),Y=(0,e.useCallback)((function(){if(j.current){F({type:"openDialog"}),M();var e={multiple:l,types:A};window.showOpenFilePicker(e).then((function(e){return o(e)})).then((function(e){G(e,null),F({type:"closeDialog"})})).catch((function(e){Sn(e)?(R(e),F({type:"closeDialog"})):En(e)?(j.current=!1,D.current?(D.current.value=null,D.current.click()):V(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):V(e)}))}else D.current&&(F({type:"openDialog"}),M(),D.current.value=null,D.current.click())}),[F,M,R,y,G,V,A,l]),J=(0,e.useCallback)((function(e){T.current&&T.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),Y()))}),[T,Y]),X=(0,e.useCallback)((function(){F({type:"focus"})}),[]),Q=(0,e.useCallback)((function(){F({type:"blur"})}),[]),Z=(0,e.useCallback)((function(){_||(wn()?setTimeout(Y,0):Y())}),[_,Y]),ee=function(e){return r?null:e},te=function(e){return x?null:ee(e)},ne=function(e){return k?null:ee(e)},ie=function(e){C&&e.stopPropagation()},re=(0,e.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.role,o=e.onKeyDown,s=e.onFocus,a=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,d=e.onDragLeave,h=e.onDrop,f=Bn(e,Tn);return Pn(Pn(jn({onKeyDown:te(_n(o,J)),onFocus:te(_n(s,X)),onBlur:te(_n(a,Q)),onClick:ee(_n(l,Z)),onDragEnter:ne(_n(c,W)),onDragOver:ne(_n(u,H)),onDragLeave:ne(_n(d,q)),onDrop:ne(_n(h,K)),role:"string"===typeof i&&""!==i?i:"presentation"},n,T),r||x?{}:{tabIndex:0}),f)}}),[T,J,X,Q,Z,W,H,q,K,x,k,r]),oe=(0,e.useCallback)((function(e){e.stopPropagation()}),[]),se=(0,e.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.onChange,r=e.onClick,o=Bn(e,Dn),s=jn({accept:O,multiple:l,type:"file",style:{display:"none"},onChange:ee(_n(i,K)),onClick:ee(_n(r,oe)),tabIndex:-1},n,D);return Pn(Pn({},s),o)}}),[D,i,l,K,r]);return Pn(Pn({},N),{},{isFocused:$&&!r,getRootProps:re,getInputProps:se,rootRef:T,inputRef:D,open:ee(Y)})}function Hn(e,t){switch(t.type){case"focus":return Pn(Pn({},e),{},{isFocused:!0});case"blur":return Pn(Pn({},e),{},{isFocused:!1});case"openDialog":return Pn(Pn({},Vn),{},{isFileDialogActive:!0});case"closeDialog":return Pn(Pn({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Pn(Pn({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Pn(Pn({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Pn({},Vn);default:return e}}function qn(){}var Gn=function(t){var n=Wn({onDrop:(0,e.useCallback)((function(e){e.forEach((function(e){var n=new FileReader;n.onabort=function(){return console.log("File reading was aborted.")},n.onerror=function(){return console.log("File reading has failed.")},n.onload=function(){var i=e.name.split(".").pop(),o=n.result,s=new TextDecoder("utf-8");switch(i){case"jpg":t.addFile(e.name,r.image,o,e.size);break;case"java":default:t.addNewCell("java-node",s.decode(o));break;case"txt":t.addNewCell("markdown-node",s.decode(o))}},n.readAsArrayBuffer(e)}))}),[])}),i=n.getRootProps,o=n.getInputProps;return(0,g.jsx)(e.Fragment,{children:(0,g.jsxs)("div",a(a({},i()),{},{className:"drag-drop-div",children:[(0,g.jsx)("input",a({},o())),"Drag To",(0,g.jsx)("br",{}),"Upload Files"]}))})};var Kn=function(t){return(0,g.jsxs)(j,{children:[(0,g.jsx)(B,{children:(0,g.jsx)("div",{className:"side-bar-content",children:(0,g.jsxs)(U,{iconShape:"square",children:[(0,g.jsxs)(Et,{title:"Add Cell",children:[(0,g.jsx)(V,{onClick:function(){return t.addNewCell("markdown")},children:"Add Markdown Cell"}),(0,g.jsx)(V,{onClick:function(){return t.addNewCell("empty")},children:"Add Java Empty Cell"}),(0,g.jsx)(V,{onClick:function(){return t.addNewCell("minimal-node")},children:"Add Minimal Node"}),(0,g.jsx)(V,{onClick:function(){return t.addNewCell("periodic-node")},children:"Add Periodic Action Node"})]}),(0,g.jsx)(V,{onClick:function(){return t.openModal("import")},children:"Import Project"}),(0,g.jsx)(V,{onClick:function(){return t.openModal("export")},children:"Export Project"}),(0,g.jsx)(V,{onClick:function(){return t.deleteAll()},children:"Reset Project"}),(0,g.jsx)(V,{children:(0,g.jsx)(Gn,{addNewCell:function(e,n){return t.addNewCell(e,n)},addFile:function(e,n,i,r){return t.addFile(e,n,i,r)}})}),(0,g.jsxs)(V,{children:["Files loaded:",(0,g.jsx)("p",{}),t.otherFiles.map((function(t,n){return function(t,n){return(0,g.jsx)(e.Fragment,{children:(0,g.jsx)("div",{children:t.name+" - "+t.content.byteLength+" bytes"})},n)}(t,n)}))]})]})})}),(0,g.jsx)(z,{children:(0,g.jsx)("div",{className:"side-bar-footer",children:(0,g.jsx)(O,{cells:t.cells,otherFiles:t.otherFiles,changeConsoleCellCode:function(e){return t.changeConsoleCellCode(e)},addConsoleCellCode:function(e){return t.addConsoleCellCode(e)}})})})]})},Yn=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,i){return e[0]===t&&(n=i,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];e.call(t,r[1],r[0])}},t}()}(),Jn="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,Xn="undefined"!==typeof __webpack_require__.g&&__webpack_require__.g.Math===Math?__webpack_require__.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),Qn="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(Xn):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var Zn=["top","right","bottom","left","width","height","size","weight"],ei="undefined"!==typeof MutationObserver,ti=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,r=0;function o(){n&&(n=!1,e()),i&&a()}function s(){Qn(o)}function a(){var e=Date.now();if(n){if(e-r<2)return;i=!0}else n=!0,i=!1,setTimeout(s,t);r=e}return a}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Jn&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ei?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Jn&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;Zn.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),ni=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},ii=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Xn},ri=ui(0,0,0,0);function oi(e){return parseFloat(e)||0}function si(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+oi(e["border-"+n+"-width"])}),0)}function ai(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return ri;var i=ii(e).getComputedStyle(e),r=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],o=e["padding-"+r];t[r]=oi(o)}return t}(i),o=r.left+r.right,s=r.top+r.bottom,a=oi(i.width),l=oi(i.height);if("border-box"===i.boxSizing&&(Math.round(a+o)!==t&&(a-=si(i,"left","right")+o),Math.round(l+s)!==n&&(l-=si(i,"top","bottom")+s)),!function(e){return e===ii(e).document.documentElement}(e)){var c=Math.round(a+o)-t,u=Math.round(l+s)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(u)&&(l-=u)}return ui(r.left,r.top,a,l)}var li="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof ii(e).SVGGraphicsElement}:function(e){return e instanceof ii(e).SVGElement&&"function"===typeof e.getBBox};function ci(e){return Jn?li(e)?function(e){var t=e.getBBox();return ui(0,0,t.width,t.height)}(e):ai(e):ri}function ui(e,t,n,i){return{x:e,y:t,width:n,height:i}}var di=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ui(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=ci(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),hi=function(e,t){var n=function(e){var t=e.x,n=e.y,i=e.width,r=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return ni(s,{x:t,y:n,width:i,height:r,top:n,right:t+i,bottom:r+n,left:t}),s}(t);ni(this,{target:e,contentRect:n})},fi=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new Yn,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof ii(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new di(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof ii(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new hi(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),pi="undefined"!==typeof WeakMap?new WeakMap:new Yn,gi=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=ti.getInstance(),i=new fi(t,n,this);pi.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){gi.prototype[e]=function(){var t;return(t=pi.get(this))[e].apply(t,arguments)}}));var mi="undefined"!==typeof Xn.ResizeObserver?Xn.ResizeObserver:gi,vi=function(e){for(var t=e.parentNode;t;){if("contents"!==getComputedStyle(t,null).getPropertyValue("display"))break;t=t.parentNode}return t||window},yi=null;"undefined"!==typeof CSS&&CSS.supports&&(CSS.supports("position","sticky")?yi="sticky":CSS.supports("position","-webkit-sticky")&&(yi="-webkit-sticky"));var bi,wi=!1;try{bi=Object.defineProperty({},"passive",{get:function(){wi={passive:!0}}}),window.addEventListener("testPassive",null,bi),window.removeEventListener("testPassive",null,bi)}catch(Lp){}var _i=function(e,t){var n,i,r,o,s,a,l,c=t.offsetTop,u=t.offsetBottom,d=t.bottom,h=function(e){for(var t=e;t=t.parentElement;){var n=getComputedStyle(t,null).getPropertyValue("overflow-y");if(t===document.body)return window;if("auto"===n||"scroll"===n)return t}return window}(e),f=h===window?window.scrollY:h.scrollTop,p=[],g=function(){return"relative"===n?i:"stickyTop"===n?Math.max(0,a+f-o+c):"stickyBottom"===n?Math.max(0,a+f+l-(o+r+u)):void 0},m=function(e){e+a+l>=o+r+i+u&&v("stickyBottom")},v=function(t){if(n=t,"relative"===t)if(e.style.position="relative",d){var o=Math.max(0,s-r-i);e.style.bottom="".concat(o,"px")}else e.style.top="".concat(i,"px");else e.style.position=yi,"stickyBottom"===t?d?e.style.bottom="".concat(u,"px"):e.style.top="".concat(l-r-u,"px"):d?e.style.bottom="".concat(l-r-u,"px"):e.style.top="".concat(c,"px");i=g()},y=function(){d?"stickyBottom"!==n&&v("stickyBottom"):"stickyTop"!==n&&v("stickyTop")},b=function(e,t,n,i){e.addEventListener(t,n,i),p.push((function(){return e.removeEventListener(t,n)}))},w=function(){var e=h===window?window.scrollY:h.scrollTop;if(e!==f){if(r+c+u<=l)return y(),void(f=e);var t=e-f;i=g(),t>0?"stickyTop"===n?e+a+c>o&&v(e+a+l<=o+r+i+u?"relative":"stickyBottom"):"relative"===n&&m(e):"stickyBottom"===n?a+e+l<o+s+u&&v(a+e+c>=o+i?"relative":"stickyTop"):"relative"===n&&a+e+c<o+i&&v("stickyTop"),f=e}},_=function(){l=window.innerHeight,a=0,w()},x=function(){0===(l=h.offsetHeight)&&console.warn("react-sticky-box's scroll pane has a height of 0. This seems odd. Please check this node:",h),a=h.firstChild.offsetParent===h?h.getBoundingClientRect().top:0,w()},k=function(){var t=vi(e),i=getComputedStyle(t,null),r=parseInt(i.getPropertyValue("padding-top"),10),l=r+parseInt(i.getPropertyValue("padding-bottom"),10);o=function(e,t){var n=e,i=0;t.firstChild&&t.firstChild.offsetParent!==t&&(i+=e.offsetTop-t.offsetTop,t=e.offsetParent,i+=-e.offsetTop);do{i+=n.offsetTop,n=n.offsetParent}while(n&&n!==t);return i}(t,h)+r+a;var c=s;s=t.getBoundingClientRect().height-l,"relative"===n&&(d?v("relative"):c>s&&m(f)),c!==s&&"relative"===n&&(f=Number.POSITIVE_INFINITY,w())},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.initial,a=r;if(r=e.getBoundingClientRect().height,!o&&a!==r){if(r+c+u<=l)return n=void 0,void y();var h=a-r,f=s-r,p=Math.min(f,g()+(d?h:0));i=Math.max(0,p),d&&"stickyBottom"===n||v("relative")}},S=function(e,t){var n=new mi(t);n.observe(e),p.push((function(){return n.disconnect()}))};return b(h,"scroll",w,wi),b(h,"mousewheel",w,wi),h===window?(b(window,"resize",_),_()):(S(h,x),x()),S(vi(e),k),k(),S(e,C),C({initial:!0}),y(),function(){return p.forEach((function(e){return e()}))}},xi=function(t){var n=t.offsetTop,i=t.offsetBottom,r=t.bottom,o=t.children,s=t.className,a=t.style,l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.offsetTop,i=void 0===n?0:n,r=t.offsetBottom,o=void 0===r?0:r,s=t.bottom,a=void 0!==s&&s,l=u((0,e.useState)(null),2),c=l[0],d=l[1],h=(0,e.useRef)({offsetTop:i,offsetBottom:o,bottom:a});return(0,e.useEffect)((function(){h.current={offsetTop:i,offsetBottom:o,bottom:a}})),(0,e.useEffect)((function(){if(c)return _i(c,h.current)}),[c]),d}({offsetTop:n,offsetBottom:i,bottom:r});return e.createElement("div",{className:s,style:a,ref:l},o)};var ki=function(t){return(0,g.jsxs)(e.Fragment,{children:[t.cells.map((function(e,n){return i=n,(0,g.jsx)(E,{cellInfo:t.cells[i],onChange:function(e){return t.changeCellCode(i,e)},onFocusMarkdown:function(){return t.onFocusMarkdown(i,!0)},onBlurMarkdown:function(){return t.onFocusMarkdown(i,!1)},moveCellUp:function(){return t.moveCell(i,-1)},moveCellDown:function(){return t.moveCell(i,1)},deleteCell:function(){return t.deleteCell(i)}});var i})),(0,g.jsx)(E,{cellInfo:t.consoleCell,onChange:null})]})};function Ci(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Si(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ei(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Oi(e,t,n){return t&&Ei(e.prototype,t),n&&Ei(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ai(e,t){return Ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ai(e,t)}function Mi(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ai(e,t)}function Ri(e){return Ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ri(e)}function Ti(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lp){return!1}}function Di(e){return Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Di(e)}function Ii(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Li(e,t){if(t&&("object"===Di(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ii(e)}function Ni(e){var t=Ti();return function(){var n,i=Ri(e);if(t){var r=Ri(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Li(this,n)}}var Fi=["bsPrefix","className","as"],$i=e.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,r=e.as,o=void 0===r?"div":r,s=h(e,Fi),l=_(n,"row"),c=x(),u="".concat(l,"-cols"),d=[];return c.forEach((function(e){var t,n=s[e];delete s[e],t=null!=n&&"object"===typeof n?n.cols:n;var i="xs"!==e?"-".concat(e):"";null!=t&&d.push("".concat(u).concat(i,"-").concat(t))})),(0,g.jsx)(o,a(a({ref:t},s),{},{className:p().apply(void 0,[i,l].concat(d))}))}));$i.displayName="Row";var Pi=$i,ji=["as","bsPrefix","className"],Bi=["className"];var zi=e.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,i=e.className,r=h(e,ji);n=_(n,"col");var o=x(),s=[],l=[];return o.forEach((function(e){var t,i,o,a=r[e];delete r[e],"object"===typeof a&&null!=a?(t=a.span,i=a.offset,o=a.order):t=a;var c="xs"!==e?"-".concat(e):"";t&&s.push(!0===t?"".concat(n).concat(c):"".concat(n).concat(c,"-").concat(t)),null!=o&&l.push("order".concat(c,"-").concat(o)),null!=i&&l.push("offset".concat(c,"-").concat(i))})),[a(a({},r),{},{className:p().apply(void 0,[i].concat(s,l))}),{as:t,bsPrefix:n,spans:s}]}(e),i=u(n,2),r=i[0],o=r.className,s=h(r,Bi),l=i[1],c=l.as,d=void 0===c?"div":c,f=l.bsPrefix,m=l.spans;return(0,g.jsx)(d,a(a({},s),{},{ref:t,className:p()(o,!m.length&&f)}))}));zi.displayName="Col";var Ui=zi,Vi={DEFAULT_NODE:'import java.util.Arrays;\nimport cnss.simulator.*;\nimport cnss.lib.*;\n\npublic class MinimalNode extends AbstractApplicationAlgorithm {\n\tpublic MinimalNode() {\n\t\tsuper(true, "minimal-node");\n\t}\n\t\n\tpublic int initialise(int now, int node_id, Node self, String[] args) {\n\t\tsuper.initialise(now, node_id, self, args);\n\t\n\t\tsuper.log( now, "args: " + Arrays.asList(args));\n\treturn 0;\n\t}\n}',DEFAULT_CONFIG:"node 0 0 cnss.lib.EndSystemControl MinimalNode arg1 arg2 \nnode 1 0 cnss.lib.EndSystemControl MinimalNode arg3 arg4",PERIODIC_NODE:'import java.util.Arrays;\nimport cnss.simulator.*;\nimport cnss.lib.*;\n\npublic class PeriodicActionNode extends AbstractApplicationAlgorithm {\n\n\tpublic PeriodicActionNode() {\n\t\tsuper(true, "periodic-node");\n\t}\n\n\tpublic int initialise(int now, int node_id, Node self, String[] args) {\n\t\tsuper.initialise(now, node_id, self, args);\n\t\treturn 1500;\n\t}\n\n\tpublic void on_clock_tick(int now) {\n\t\tsuper.log( now, "on_clock_tick");      \n\t}\n\n}',DEFAULT_MARKDOWN:"# Markdown Cell"},Wi=function(t){Mi(i,t);var n=Ni(i);function i(t){var r;return Si(this,i),(r=n.call(this,t)).canvasWidth=1070,r.canvasHeight=1e3,r.canvasRef=e.createRef(),r.nodes={},r.output={},r}return Oi(i,[{key:"storeOutput",value:function(e){console.log(e),this.output=e}},{key:"drawCanvas",value:function(){var e=this.canvasRef.current.getContext("2d");e.fillStyle="#1f1f1b",e.fillRect(0,0,e.canvas.width,e.canvas.height),this.drawNodes(this.output.nodes),this.drawMessages(this.output.messages)}},{key:"drawNodes",value:function(e){for(var t=this.canvasWidth/e.length,n=0;n<e.length;n++){var i=t/2+t*n;this.nodes[n]={name:e[n].nodeName,pos:i},this.drawNode(this.nodes[n])}}},{key:"drawNode",value:function(e){var t=this.canvasRef.current.getContext("2d");t.beginPath(),t.strokeStyle="white",t.lineWidth=1,t.font="14px arial",t.strokeText(e.name,e.pos-t.measureText(e.name).width/2,40),t.strokeStyle="white",t.lineWidth=1,t.beginPath(),t.moveTo(e.pos,50),t.lineTo(e.pos,this.canvasHeight-50),t.stroke(),t.closePath()}},{key:"drawMessages",value:function(e){var t=this.calculateScale(e);for(var n in e){var i=e[n];this.drawMessage(i.fromNode,i.toNode,i.time,i.deliveryTime,i.dropped,t)}}},{key:"drawMessage",value:function(e,t,n,i,r,o){var s=this.nodes[e].pos,a=r?(this.nodes[e].pos+this.nodes[t].pos)/2:this.nodes[t].pos,l=75+n*o,c=75+i*o,u=a-s,d=c-l,h=Math.atan2(d,u),f=this.canvasRef.current.getContext("2d");f.beginPath(),f.strokeStyle="white",r&&(f.strokeStyle="red"),f.moveTo(s,l),f.lineTo(a,c),f.lineTo(a-10*Math.cos(h-Math.PI/6),c-10*Math.sin(h-Math.PI/6)),f.moveTo(a,c),f.lineTo(a-10*Math.cos(h+Math.PI/6),c-10*Math.sin(h+Math.PI/6)),f.stroke(),f.closePath()}},{key:"calculateScale",value:function(e){var t=e[e.length-1].time+20,n=e[0].time;return(this.canvasHeight-175)/(t-n)}},{key:"degToRad",value:function(e){return e*Math.PI/180}},{key:"render",value:function(){var t=this;if(0!==Object.keys(this.output).length)return(0,g.jsxs)(e.Fragment,{children:[(0,g.jsx)(S,{className:"justify-content-center",onClick:function(){t.drawCanvas()},children:"Draw Nodes and Messages From Output"}),(0,g.jsx)("p",{}),(0,g.jsx)("canvas",{ref:this.canvasRef,width:this.canvasWidth,height:this.canvasHeight})]})}}]),i}(e.Component),Hi=!("undefined"===typeof window||!window.document||!window.document.createElement),qi=!1,Gi=!1;try{var Ki={get passive(){return qi=!0},get once(){return Gi=qi=!0}};Hi&&(window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,!0))}catch(Lp){}var Yi=function(e,t,n,i){if(i&&"boolean"!==typeof i&&!Gi){var r=i.once,o=i.capture,s=n;!Gi&&r&&(s=n.__once||function e(i){this.removeEventListener(t,e,o),n.call(this,i)},n.__once=s),e.addEventListener(t,s,qi?i:o)}e.addEventListener(t,n,i)};function Ji(e){return e&&e.ownerDocument||document}var Xi,Qi=function(e,t,n,i){var r=i&&"boolean"!==typeof i?i.capture:i;e.removeEventListener(t,n,r),n.__once&&e.removeEventListener(t,n.__once,r)};function Zi(e){if((!Xi&&0!==Xi||e)&&Hi){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Xi=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Xi}var er=function(t){var n=(0,e.useRef)(t);return(0,e.useEffect)((function(){n.current=t}),[t]),n};function tr(t){var n=er(t);return(0,e.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var nr=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var ir=function(t,n){return(0,e.useMemo)((function(){return function(e,t){var n=nr(e),i=nr(t);return function(e){n&&n(e),i&&i(e)}}(t,n)}),[t,n])};function rr(t){var n=function(t){var n=(0,e.useRef)(t);return n.current=t,n}(t);(0,e.useEffect)((function(){return function(){return n.current()}}),[])}function or(e,t){return function(e){var t=Ji(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var sr=/([A-Z])/g;var ar=/^ms-/;function lr(e){return function(e){return e.replace(sr,"-$1").toLowerCase()}(e).replace(ar,"-ms-")}var cr=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var ur=function(e,t){var n="",i="";if("string"===typeof t)return e.style.getPropertyValue(lr(t))||or(e).getPropertyValue(lr(t));Object.keys(t).forEach((function(r){var o=t[r];o||0===o?!function(e){return!(!e||!cr.test(e))}(r)?n+=lr(r)+": "+o+";":i+=r+"("+o+") ":e.style.removeProperty(lr(r))})),i&&(n+="transform: "+i+";"),e.style.cssText+=";"+n};var dr=function(e,t,n,i){return Yi(e,t,n,i),function(){Qi(e,t,n,i)}};function hr(e,t,n){void 0===n&&(n=5);var i=!1,r=setTimeout((function(){i||function(e,t,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=!0),e){var r=document.createEvent("HTMLEvents");r.initEvent(t,n,i),e.dispatchEvent(r)}}(e,"transitionend",!0)}),t+n),o=dr(e,"transitionend",(function(){i=!0}),{once:!0});return function(){clearTimeout(r),o()}}function fr(e,t,n,i){null==n&&(n=function(e){var t=ur(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var r=hr(e,n,i),o=dr(e,"transitionend",t);return function(){r(),o()}}function pr(e){void 0===e&&(e=Ji());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(Lp){return e.body}}function gr(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var mr,vr=(mr="modal-open","".concat("data-rr-ui-").concat(mr)),yr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,i=t.handleContainerOverflow,r=void 0===i||i,o=t.isRTL,s=void 0!==o&&o;Si(this,e),this.handleContainerOverflow=r,this.isRTL=s,this.modals=[],this.ownerDocument=n}return Oi(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style=o({overflow:i.style.overflow},n,i.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(ur(i,n)||"0",10)+e.scrollBarWidth,"px")),i.setAttribute(vr,""),ur(i,t)}},{key:"reset",value:function(){var e=this;Ci(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(vr),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),br=yr,wr=(0,e.createContext)(Hi?window:void 0);wr.Provider;function _r(){return(0,e.useContext)(wr)}var xr=function(e,t){var n;return Hi?null==e?(t||Ji()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};var kr,Cr=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Sr(t){var n=_r(),i=t||function(e){return kr||(kr=new br({ownerDocument:null==e?void 0:e.document})),kr}(n),r=(0,e.useRef)({dialog:null,backdrop:null});return Object.assign(r.current,{add:function(){return i.add(r.current)},remove:function(){return i.remove(r.current)},isTopModal:function(){return i.isTopModal(r.current)},setDialogRef:(0,e.useCallback)((function(e){r.current.dialog=e}),[]),setBackdropRef:(0,e.useCallback)((function(e){r.current.backdrop=e}),[])})}var Er=(0,e.forwardRef)((function(n,i){var r=n.show,o=void 0!==r&&r,s=n.role,a=void 0===s?"dialog":s,l=n.className,c=n.style,d=n.children,h=n.backdrop,f=void 0===h||h,p=n.keyboard,m=void 0===p||p,v=n.onBackdropClick,y=n.onEscapeKeyDown,b=n.transition,w=n.backdropTransition,_=n.autoFocus,x=void 0===_||_,k=n.enforceFocus,C=void 0===k||k,S=n.restoreFocus,E=void 0===S||S,O=n.restoreFocusOptions,A=n.renderDialog,M=n.renderBackdrop,R=void 0===M?function(e){return(0,g.jsx)("div",Object.assign({},e))}:M,T=n.manager,D=n.container,I=n.onShow,L=n.onHide,N=void 0===L?function(){}:L,F=n.onExit,$=n.onExited,P=n.onExiting,j=n.onEnter,B=n.onEntering,z=n.onEntered,U=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(n,Cr),V=function(t,n){var i=_r(),r=u((0,e.useState)((function(){return xr(t,null==i?void 0:i.document)})),2),o=r[0],s=r[1];if(!o){var a=xr(t);a&&s(a)}return(0,e.useEffect)((function(){n&&o&&n(o)}),[n,o]),(0,e.useEffect)((function(){var e=xr(t);e!==o&&s(e)}),[t,o]),o}(D),W=Sr(T),H=function(){var t=(0,e.useRef)(!0),n=(0,e.useRef)((function(){return t.current}));return(0,e.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),n.current}(),q=function(t){var n=(0,e.useRef)(null);return(0,e.useEffect)((function(){n.current=t})),n.current}(o),G=u((0,e.useState)(!o),2),K=G[0],Y=G[1],J=(0,e.useRef)(null);(0,e.useImperativeHandle)(i,(function(){return W}),[W]),Hi&&!q&&o&&(J.current=pr()),b||o||K?o&&K&&Y(!1):Y(!0);var X=tr((function(){if(W.add(),ie.current=dr(document,"keydown",te),ne.current=dr(document,"focus",(function(){return setTimeout(Z)}),!0),I&&I(),x){var e=pr(document);W.dialog&&e&&!gr(W.dialog,e)&&(J.current=e,W.dialog.focus())}})),Q=tr((function(){var e;(W.remove(),null==ie.current||ie.current(),null==ne.current||ne.current(),E)&&(null==(e=J.current)||null==e.focus||e.focus(O),J.current=null)}));(0,e.useEffect)((function(){o&&V&&X()}),[o,V,X]),(0,e.useEffect)((function(){K&&Q()}),[K,Q]),rr((function(){Q()}));var Z=tr((function(){if(C&&H()&&W.isTopModal()){var e=pr();W.dialog&&e&&!gr(W.dialog,e)&&W.dialog.focus()}})),ee=tr((function(e){e.target===e.currentTarget&&(null==v||v(e),!0===f&&N())})),te=tr((function(e){m&&27===e.keyCode&&W.isTopModal()&&(null==y||y(e),e.defaultPrevented||N())})),ne=(0,e.useRef)(),ie=(0,e.useRef)(),re=b;if(!V||!(o||re&&!K))return null;var oe=Object.assign({role:a,ref:W.setDialogRef,"aria-modal":"dialog"===a||void 0},U,{style:c,className:l,tabIndex:-1}),se=A?A(oe):(0,g.jsx)("div",Object.assign({},oe,{children:e.cloneElement(d,{role:"document"})}));re&&(se=(0,g.jsx)(re,{appear:!0,unmountOnExit:!0,in:!!o,onExit:F,onExiting:P,onExited:function(){Y(!0),null==$||$.apply(void 0,arguments)},onEnter:j,onEntering:B,onEntered:z,children:se}));var ae=null;if(f){var le=w;ae=R({ref:W.setBackdropRef,onClick:ee}),le&&(ae=(0,g.jsx)(le,{appear:!0,in:!!o,children:ae}))}return(0,g.jsx)(g.Fragment,{children:t.createPortal((0,g.jsxs)(g.Fragment,{children:[ae,se]}),V)})}));Er.displayName="Modal";var Or=Object.assign(Er,{Manager:br});function Ar(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ri(e)););return e}function Mr(){return Mr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=Ar(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},Mr.apply(this,arguments)}var Rr=Function.prototype.bind.call(Function.prototype.call,[].slice);function Tr(e,t){return Rr(e.querySelectorAll(t))}function Dr(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Ir,Lr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Nr=".sticky-top",Fr=".navbar-toggler",$r=function(e){Mi(n,e);var t=Ni(n);function n(){return Si(this,n),t.apply(this,arguments)}return Oi(n,[{key:"adjustAndStore",value:function(e,t,n){var i=t.style[e];t.dataset[e]=i,ur(t,o({},e,"".concat(parseFloat(ur(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],ur(t,o({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;Mr(Ri(n.prototype),"setContainerStyle",this).call(this,e);var i,r,o=this.getElement();if(r="modal-open",(i=o).classList?i.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(i,r)||("string"===typeof i.className?i.className=i.className+" "+r:i.setAttribute("class",(i.className&&i.className.baseVal||"")+" "+r)),e.scrollBarWidth){var s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Tr(o,Lr).forEach((function(n){return t.adjustAndStore(s,n,e.scrollBarWidth)})),Tr(o,Nr).forEach((function(n){return t.adjustAndStore(a,n,-e.scrollBarWidth)})),Tr(o,Fr).forEach((function(n){return t.adjustAndStore(a,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;Mr(Ri(n.prototype),"removeContainerStyle",this).call(this,e);var i,r,o=this.getElement();r="modal-open",(i=o).classList?i.classList.remove(r):"string"===typeof i.className?i.className=Dr(i.className,r):i.setAttribute("class",Dr(i.className&&i.className.baseVal||"",r));var s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Tr(o,Lr).forEach((function(e){return t.restore(s,e)})),Tr(o,Nr).forEach((function(e){return t.restore(a,e)})),Tr(o,Fr).forEach((function(e){return t.restore(a,e)}))}}]),n}(br);var Pr=!1,jr=e.createContext(null),Br="unmounted",zr="exited",Ur="entering",Vr="entered",Wr="exiting",Hr=function(n){var i,r;function o(e,t){var i;i=n.call(this,e,t)||this;var r,o=t&&!t.isMounting?e.enter:e.appear;return i.appearStatus=null,e.in?o?(r=zr,i.appearStatus=Ur):r=Vr:r=e.unmountOnExit||e.mountOnEnter?Br:zr,i.state={status:r},i.nextCallback=null,i}r=n,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Ai(i,r),o.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Br?{status:zr}:null};var s=o.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ur&&n!==Vr&&(t=Ur):n!==Ur&&n!==Vr||(t=Wr)}this.updateStatus(!1,t)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var e,t,n,i=this.props.timeout;return e=t=n=i,null!=i&&"number"!==typeof i&&(e=i.exit,t=i.enter,n=void 0!==i.appear?i.appear:t),{exit:e,enter:t,appear:n}},s.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===Ur?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===zr&&this.setState({status:Br})},s.performEnter=function(e){var n=this,i=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[t.findDOMNode(this),r],s=o[0],a=o[1],l=this.getTimeouts(),c=r?l.appear:l.enter;!e&&!i||Pr?this.safeSetState({status:Vr},(function(){n.props.onEntered(s)})):(this.props.onEnter(s,a),this.safeSetState({status:Ur},(function(){n.props.onEntering(s,a),n.onTransitionEnd(c,(function(){n.safeSetState({status:Vr},(function(){n.props.onEntered(s,a)}))}))})))},s.performExit=function(){var e=this,n=this.props.exit,i=this.getTimeouts(),r=this.props.nodeRef?void 0:t.findDOMNode(this);n&&!Pr?(this.props.onExit(r),this.safeSetState({status:Wr},(function(){e.props.onExiting(r),e.onTransitionEnd(i.exit,(function(){e.safeSetState({status:zr},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:zr},(function(){e.props.onExited(r)}))},s.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},s.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,t.nextCallback=null,e(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},s.onTransitionEnd=function(e,n){this.setNextCallback(n);var i=this.props.nodeRef?this.props.nodeRef.current:t.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(i&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],s=o[0],a=o[1];this.props.addEndListener(s,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},s.render=function(){var t=this.state.status;if(t===Br)return null;var n=this.props,i=n.children,r=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,d(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(jr.Provider,{value:null},"function"===typeof i?i(t,r):e.cloneElement(e.Children.only(i),r))},o}(e.Component);function qr(){}Hr.contextType=jr,Hr.propTypes={},Hr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:qr,onEntering:qr,onEntered:qr,onExit:qr,onExiting:qr,onExited:qr},Hr.UNMOUNTED=Br,Hr.EXITED=zr,Hr.ENTERING=Ur,Hr.ENTERED=Vr,Hr.EXITING=Wr;var Gr=Hr;function Kr(e,t){var n=ur(e,t)||"",i=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*i}function Yr(e,t){var n=Kr(e,"transitionDuration"),i=Kr(e,"transitionDelay"),r=fr(e,(function(n){n.target===e&&(r(),t(n))}),n+i)}var Jr,Xr=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],Qr=e.forwardRef((function(n,i){var r=n.onEnter,o=n.onEntering,s=n.onEntered,l=n.onExit,c=n.onExiting,u=n.onExited,d=n.addEndListener,f=n.children,p=n.childRef,m=h(n,Xr),v=(0,e.useRef)(null),y=ir(v,p),b=function(e){var n;y((n=e)&&"setState"in n?t.findDOMNode(n):null!=n?n:null)},w=function(e){return function(t){e&&v.current&&e(v.current,t)}},_=(0,e.useCallback)(w(r),[r]),x=(0,e.useCallback)(w(o),[o]),k=(0,e.useCallback)(w(s),[s]),C=(0,e.useCallback)(w(l),[l]),S=(0,e.useCallback)(w(c),[c]),E=(0,e.useCallback)(w(u),[u]),O=(0,e.useCallback)(w(d),[d]);return(0,g.jsx)(Gr,a(a({ref:i},m),{},{onEnter:_,onEntered:k,onEntering:x,onExit:C,onExited:E,onExiting:S,addEndListener:O,nodeRef:v,children:"function"===typeof f?function(e,t){return f(e,a(a({},t),{},{ref:b}))}:e.cloneElement(f,{ref:b})}))})),Zr=["className","children","transitionClasses"],eo=(o(Jr={},Ur,"show"),o(Jr,Vr,"show"),Jr),to=e.forwardRef((function(t,n){var i=t.className,r=t.children,o=t.transitionClasses,s=void 0===o?{}:o,l=h(t,Zr),c=(0,e.useCallback)((function(e,t){!function(e){e.offsetHeight}(e),null==l.onEnter||l.onEnter(e,t)}),[l]);return(0,g.jsx)(Qr,a(a({ref:n,addEndListener:Yr},l),{},{onEnter:c,childRef:r.ref,children:function(t,n){return e.cloneElement(r,a(a({},n),{},{className:p()("fade",i,r.props.className,eo[t],s[t])}))}}))}));to.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},to.displayName="Fade";var no=to,io=/-(.)/g;var ro=["className","bsPrefix","as"],oo=function(e){return e[0].toUpperCase()+(t=e,t.replace(io,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function so(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.displayName,r=void 0===i?oo(t):i,o=n.Component,s=n.defaultProps,l=e.forwardRef((function(e,n){var i=e.className,r=e.bsPrefix,s=e.as,l=void 0===s?o||"div":s,c=h(e,ro),u=_(r,t);return(0,g.jsx)(l,a({ref:n,className:p()(i,u)},c))}));return l.defaultProps=s,l.displayName=r,l}var ao=so("modal-body"),lo=e.createContext({onHide:function(){}}),co=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],uo=e.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,r=e.contentClassName,o=e.centered,s=e.size,l=e.fullscreen,c=e.children,u=e.scrollable,d=h(e,co);n=_(n,"modal");var f="".concat(n,"-dialog"),m="string"===typeof l?"".concat(n,"-fullscreen-").concat(l):"".concat(n,"-fullscreen");return(0,g.jsx)("div",a(a({},d),{},{ref:t,className:p()(f,i,s&&"".concat(n,"-").concat(s),o&&"".concat(f,"-centered"),u&&"".concat(f,"-scrollable"),l&&m),children:(0,g.jsx)("div",{className:p()("".concat(n,"-content"),r),children:c})}))}));uo.displayName="ModalDialog";var ho=uo,fo=so("modal-footer"),po=["className","variant"],go={"aria-label":At().string,onClick:At().func,variant:At().oneOf(["white"])},mo=e.forwardRef((function(e,t){var n=e.className,i=e.variant,r=h(e,po);return(0,g.jsx)("button",a({ref:t,type:"button",className:p()("btn-close",i&&"btn-close-".concat(i),n)},r))}));mo.displayName="CloseButton",mo.propTypes=go,mo.defaultProps={"aria-label":"Close"};var vo=mo,yo=["closeLabel","closeVariant","closeButton","onHide","children"],bo=e.forwardRef((function(t,n){var i=t.closeLabel,r=t.closeVariant,o=t.closeButton,s=t.onHide,l=t.children,c=h(t,yo),u=(0,e.useContext)(lo),d=tr((function(){null==u||u.onHide(),null==s||s()}));return(0,g.jsxs)("div",a(a({ref:n},c),{},{children:[l,o&&(0,g.jsx)(vo,{"aria-label":i,variant:r,onClick:d})]}))}));bo.defaultProps={closeLabel:"Close",closeButton:!1};var wo=bo,_o=["bsPrefix","className"],xo=e.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,r=h(e,_o);return n=_(n,"modal-header"),(0,g.jsx)(wo,a(a({ref:t},r),{},{className:p()(i,n)}))}));xo.displayName="ModalHeader",xo.defaultProps={closeLabel:"Close",closeButton:!1};var ko,Co=xo,So=so("modal-title",{Component:(ko="h4",e.forwardRef((function(e,t){return(0,g.jsx)("div",a(a({},e),{},{ref:t,className:p()(e.className,ko)}))})))}),Eo=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"],Oo={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:ho};function Ao(e){return(0,g.jsx)(no,a(a({},e),{},{timeout:null}))}function Mo(e){return(0,g.jsx)(no,a(a({},e),{},{timeout:null}))}var Ro=e.forwardRef((function(t,n){var i=t.bsPrefix,r=t.className,o=t.style,s=t.dialogClassName,l=t.contentClassName,c=t.children,d=t.dialogAs,f=t["aria-labelledby"],m=t["aria-describedby"],v=t["aria-label"],y=t.show,b=t.animation,x=t.backdrop,k=t.keyboard,C=t.onEscapeKeyDown,S=t.onShow,E=t.onHide,O=t.container,A=t.autoFocus,M=t.enforceFocus,R=t.restoreFocus,T=t.restoreFocusOptions,D=t.onEntered,I=t.onExit,L=t.onExiting,N=t.onEnter,F=t.onEntering,$=t.onExited,P=t.backdropClassName,j=t.manager,B=h(t,Eo),z=u((0,e.useState)({}),2),U=z[0],V=z[1],W=u((0,e.useState)(!1),2),H=W[0],q=W[1],G=(0,e.useRef)(!1),K=(0,e.useRef)(!1),Y=(0,e.useRef)(null),J=u((0,e.useState)(null),2),X=J[0],Q=J[1],Z=ir(n,Q),ee=tr(E),te="rtl"===(0,e.useContext)(w).dir;i=_(i,"modal");var ne=(0,e.useMemo)((function(){return{onHide:ee}}),[ee]);function ie(){return j||function(e){return Ir||(Ir=new $r(e)),Ir}({isRTL:te})}function re(e){if(Hi){var t=ie().getScrollbarWidth()>0,n=e.scrollHeight>Ji(e).documentElement.clientHeight;V({paddingRight:t&&!n?Zi():void 0,paddingLeft:!t&&n?Zi():void 0})}}var oe=tr((function(){X&&re(X.dialog)}));rr((function(){Qi(window,"resize",oe),null==Y.current||Y.current()}));var se=function(){G.current=!0},ae=function(e){G.current&&X&&e.target===X.dialog&&(K.current=!0),G.current=!1},le=function(){q(!0),Y.current=fr(X.dialog,(function(){q(!1)}))},ce=function(e){"static"!==x?K.current||e.target!==e.currentTarget?K.current=!1:null==E||E():function(e){e.target===e.currentTarget&&le()}(e)},ue=(0,e.useCallback)((function(e){return(0,g.jsx)("div",a(a({},e),{},{className:p()("".concat(i,"-backdrop"),P,!b&&"show")}))}),[b,P,i]),de=a(a({},o),U);de.display="block";return(0,g.jsx)(lo.Provider,{value:ne,children:(0,g.jsx)(Or,{show:y,ref:Z,backdrop:x,container:O,keyboard:!0,autoFocus:A,enforceFocus:M,restoreFocus:R,restoreFocusOptions:T,onEscapeKeyDown:function(e){k||"static"!==x?k&&C&&C(e):(e.preventDefault(),le())},onShow:S,onHide:E,onEnter:function(e,t){e&&re(e),null==N||N(e,t)},onEntering:function(e,t){null==F||F(e,t),Yi(window,"resize",oe)},onEntered:D,onExit:function(e){null==Y.current||Y.current(),null==I||I(e)},onExiting:L,onExited:function(e){e&&(e.style.display=""),null==$||$(e),Qi(window,"resize",oe)},manager:ie(),transition:b?Ao:void 0,backdropTransition:b?Mo:void 0,renderBackdrop:ue,renderDialog:function(e){return(0,g.jsx)("div",a(a({role:"dialog"},e),{},{style:de,className:p()(r,i,H&&"".concat(i,"-static")),onClick:x?ce:void 0,onMouseUp:ae,"aria-label":v,"aria-labelledby":f,"aria-describedby":m,children:(0,g.jsx)(d,a(a({},B),{},{onMouseDown:se,className:s,contentClassName:l,children:c}))}))}})})}));Ro.displayName="Modal",Ro.defaultProps=Oo;var To=Object.assign(Ro,{Body:ao,Header:Co,Title:So,Footer:fo,Dialog:ho,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var Do=function(t){var n=u((0,e.useState)(""),2),i=n[0],r=n[1];function o(){t.importProject(i)}function s(){navigator.clipboard.writeText(t.exportProject())}return(0,g.jsx)(e.Fragment,{children:(0,g.jsx)(To,{show:t.show,onHide:t.handleClose,children:t.import?(0,g.jsxs)(e.Fragment,{children:[(0,g.jsx)(To.Header,{closeButton:!0,children:(0,g.jsx)(To.Title,{children:"Import Project"})}),(0,g.jsx)(To.Body,{children:(0,g.jsx)("input",{className:"form-control form-control-lg",type:"text",onInput:function(e){return r(e.target.value)}})}),(0,g.jsxs)(To.Footer,{children:[(0,g.jsx)(S,{variant:"secondary",onClick:o,children:"Import"}),(0,g.jsx)(S,{variant:"secondary",onClick:t.handleClose,children:"Close"})]})]}):(0,g.jsxs)(e.Fragment,{children:[(0,g.jsx)(To.Header,{closeButton:!0,children:(0,g.jsx)(To.Title,{children:"Export Project"})}),(0,g.jsx)(To.Body,{children:(0,g.jsx)("input",{className:"form-control form-control-lg",type:"text",value:t.exportProject()})}),(0,g.jsxs)(To.Footer,{children:[(0,g.jsx)(S,{variant:"secondary",onClick:s,children:"Copy"}),(0,g.jsx)(S,{variant:"secondary",onClick:t.handleClose,children:"Close"})]})]})})})},Io=function(){function e(t){Si(this,e),this.nodeNameWithType=!t||(!t.nodeNameWithType||t.nodeNameWithType)}return Oi(e,[{key:"parseOutput",value:function(e){for(var t={nodes:[],messages:[]},n=e.split("\n"),i=0;i<n.length;i++){var r=n[i];r.includes("Created Node")?t.nodes.push(this.parseNewNode(r)):r.includes("DROPPED")?t.messages.push(this.parseNewMessage(r,!0)):r.includes("PACKET")&&t.messages.push(this.parseNewMessage(r,!1))}return t}},{key:"parseNewNode",value:function(e){var t={nodeName:"",nodeNumber:"-1",nodeType:""},n=e.match(new RegExp("Created Node ([\\s\\S]*?):"));n&&n.length>1&&(t.nodeNumber=n[1]);var i=e.match(new RegExp("app code:\\s(\\w+)"));return i&&i.length>1&&(t.nodeType=i[1]),t.nodeName="Node ".concat(t.nodeNumber," ").concat(this.nodeNameWithType?"("+t.nodeType+")":""),t}},{key:"parseNewMessage",value:function(e,t){return{dropped:t,fromNode:e.match(new RegExp("src\\s(\\w+)"))[1],toNode:e.match(new RegExp("dst\\s(\\w+)"))[1],type:e.match(new RegExp("type\\s(\\w+)"))[1],ttl:parseInt(e.match(new RegExp("ttl\\s(\\w+)"))[1]),seq:parseInt(e.match(new RegExp("seq\\s(\\w+)"))[1]),size:parseInt(e.match(new RegExp("size\\s(\\w+)"))[1]),time:parseInt(e.match(new RegExp("time\\s(\\w+)"))[1]),deliveryTime:t?parseInt(e.match(new RegExp("time\\s(\\w+)"))[1])+20:parseInt(e.match(new RegExp("delivery\\s(\\w+)"))[1])}}}]),e}(),Lo=Io;function No(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function Fo(e,t,n){return Fo=Ti()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Ai(r,n.prototype),r},Fo.apply(null,arguments)}function $o(e){var t="function"===typeof Map?new Map:void 0;return $o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return Fo(e,arguments,Ri(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ai(i,e)},$o(e)}var Po=__webpack_require__(7757),jo=__webpack_require__.n(Po),Bo=function(e,t){return Bo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Bo(e,t)};function zo(e,t){function n(){this.constructor=e}Bo(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Uo(e){return"function"===typeof e}var Vo=!1,Wo={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;Vo=e},get useDeprecatedSynchronousErrorHandling(){return Vo}};function Ho(e){setTimeout((function(){throw e}),0)}var qo={closed:!0,next:function(e){},error:function(e){if(Wo.useDeprecatedSynchronousErrorHandling)throw e;Ho(e)},complete:function(){}},Go=function(){return Array.isArray||function(e){return e&&"number"===typeof e.length}}();function Ko(e){return null!==e&&"object"===typeof e}var Yo=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),Jo=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,i=n._parentOrParents,r=n._ctorUnsubscribe,o=n._unsubscribe,s=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof e)i.remove(this);else if(null!==i)for(var a=0;a<i.length;++a){i[a].remove(this)}if(Uo(o)){r&&(this._unsubscribe=void 0);try{o.call(this)}catch(Lp){t=Lp instanceof Yo?Xo(Lp.errors):[Lp]}}if(Go(s)){a=-1;for(var l=s.length;++a<l;){var c=s[a];if(Ko(c))try{c.unsubscribe()}catch(Lp){t=t||[],Lp instanceof Yo?t=t.concat(Xo(Lp.errors)):t.push(Lp)}}}if(t)throw new Yo(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!==typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var i=n;(n=new e)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function Xo(e){return e.reduce((function(e,t){return e.concat(t instanceof Yo?t.errors:t)}),[])}var Qo=function(){return"function"===typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Zo=function(e){function t(n,i,r){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=qo;break;case 1:if(!n){o.destination=qo;break}if("object"===typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new es(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new es(o,n,i,r)}return o}return zo(t,e),t.prototype[Qo]=function(){return this},t.create=function(e,n,i){var r=new t(e,n,i);return r.syncErrorThrowable=!1,r},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Jo),es=function(e){function t(t,n,i,r){var o,s=e.call(this)||this;s._parentSubscriber=t;var a=s;return Uo(n)?o=n:n&&(o=n.next,i=n.error,r=n.complete,n!==qo&&(Uo((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=o,s._error=i,s._complete=r,s}return zo(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Wo.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Wo.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Ho(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Ho(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};Wo.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),Wo.useDeprecatedSynchronousErrorHandling)throw n;Ho(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!Wo.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return Wo.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(Ho(i),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Zo);var ts=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}();function ns(e){return e}function is(e){return 0===e.length?ns:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var rs=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i=this.operator,r=function(e,t,n){if(e){if(e instanceof Zo)return e;if(e[Qo])return e[Qo]()}return e||t||n?new Zo(e,t,n):new Zo(qo)}(e,t,n);if(i?r.add(i.call(r,this.source)):r.add(this.source||Wo.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),Wo.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Wo.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,i=t.destination,r=t.isStopped;if(n||r)return!1;e=i&&i instanceof Zo?i:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=os(t))((function(t,i){var r;r=n.subscribe((function(t){try{e(t)}catch(n){i(n),r&&r.unsubscribe()}}),i,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[ts]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:is(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=os(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function os(e){if(e||(e=Wo.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var ss=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),as=function(e){function t(t,n){var i=e.call(this)||this;return i.subject=t,i.subscriber=n,i.closed=!1,i}return zo(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(Jo),ls=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return zo(t,e),t}(Zo),cs=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return zo(t,e),t.prototype[Qo]=function(){return new ls(this)},t.prototype.lift=function(e){var t=new us(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new ss;if(!this.isStopped)for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].next(e)},t.prototype.error=function(e){if(this.closed)throw new ss;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new ss;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),i=0;i<t;i++)n[i].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new ss;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new ss;return this.hasError?(e.error(this.thrownError),Jo.EMPTY):this.isStopped?(e.complete(),Jo.EMPTY):(this.observers.push(e),new as(this,e))},t.prototype.asObservable=function(){var e=new rs;return e.source=this,e},t.create=function(e,t){return new us(e,t)},t}(rs),us=function(e){function t(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return zo(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Jo.EMPTY},t}(cs),ds=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return zo(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ss;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(cs);function hs(){return function(e){return e.lift(new fs(e))}}var fs=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var i=new ps(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r},e}(),ps=function(e){function t(t,n){var i=e.call(this,t)||this;return i.connectable=n,i}return zo(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null},t}(Zo),gs=function(e){function t(t,n){var i=e.call(this)||this;return i.source=t,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return zo(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Jo).add(this.source.subscribe(new vs(this.getSubject(),this))),e.closed&&(this._connection=null,e=Jo.EMPTY)),e},t.prototype.refCount=function(){return hs()(this)},t}(rs),ms=function(){var e=gs.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),vs=function(e){function t(t,n){var i=e.call(this,t)||this;return i.connectable=n,i}return zo(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(ls);var ys=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,i=this.subjectFactory(),r=n(i).subscribe(e);return r.add(t.subscribe(i)),r},e}();function bs(){return new cs}function ws(){return function(e){return hs()((t=bs,function(e){var i;if(i="function"===typeof t?t:function(){return t},"function"===typeof n)return e.lift(new ys(i,n));var r=Object.create(e,ms);return r.source=e,r.subjectFactory=i,r})(e));var t,n}}function _s(e,t){return function(n){return n.lift(new xs(e,t))}}var xs=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new ks(e,this.predicate,this.thisArg))},e}(),ks=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.predicate=n,r.thisArg=i,r.count=0,r}return zo(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(Zo);function Cs(e,t){return function(n){if("function"!==typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Ss(e,t))}}var Ss=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Es(e,this.project,this.thisArg))},e}(),Es=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.project=n,r.count=0,r.thisArg=i||r,r}return zo(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(Zo);function Os(){}function As(e,t,n){return function(i){return i.lift(new Rs(e,t,n))}}var Ms,Rs=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new Ts(e,this.nextOrObserver,this.error,this.complete))},e}(),Ts=function(e){function t(t,n,i,r){var o=e.call(this,t)||this;return o._tapNext=Os,o._tapError=Os,o._tapComplete=Os,o._tapError=i||Os,o._tapComplete=r||Os,Uo(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Os,o._tapError=n.error||Os,o._tapComplete=n.complete||Os),o}return zo(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(Zo),Ds=__webpack_require__(9899);function Is(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(Lp){o(Lp)}}function a(e){try{l(i.throw(e))}catch(Lp){o(Lp)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))}!function(e){e.TRACE="trace",e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error",e.SILENT="silent"}(Ms||(Ms={}));var Ls=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"make",value:function(t){"object"===typeof t&&(Object.freeze(t),Object.keys(t).forEach((function(t,n,i){e.make(t)})))}},{key:"copy",value:function(e,t){var n={};return Object.keys(e).forEach((function(i,r,o){n[i]=void 0!==t[i]?t[i]:e[i]})),Object.freeze(n),n}},{key:"getOrDefault",value:function(e,t){return void 0===e?t:e}},{key:"update",value:function(e,t){return void 0!==t?t:e}}]),e}(),Ns=Oi((function e(t,n,i,r,o){Si(this,e),this.timestamp=t,this.logger=n,this.level=i,this.message=r,this.error=o,Ls.make(this)})),Fs=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"isArray",value:function(e){return Array.isArray(e)}},{key:"isMap",value:function(e){return e instanceof Map}},{key:"isBoolean",value:function(e){return"boolean"===typeof e}},{key:"isDate",value:function(e){return e instanceof Date||"Date"===e.constructor.name}},{key:"isError",value:function(e){return e instanceof Error&&"undefined"!==typeof e.message}},{key:"isFunction",value:function(e){return"function"===typeof e}},{key:"isNull",value:function(e){return null===e}},{key:"isNumber",value:function(e){return"number"===typeof e&&isFinite(e)}},{key:"isObject",value:function(e){return e&&"object"===typeof e&&e.constructor===Object}},{key:"isString",value:function(e){return"string"===typeof e||e instanceof String}},{key:"isSymbol",value:function(e){return"symbol"===typeof e}},{key:"isRegExp",value:function(e){return e&&"object"===typeof e&&e.constructor===RegExp}},{key:"isUndefined",value:function(e){return"undefined"===typeof e}},{key:"isSet",value:function(t){return!e.isNull(t)&&!e.isUndefined(t)}},{key:"isNotSet",value:function(t){return!e.isSet(t)}},{key:"switch",value:function(t,n){if(e.isUndefined(n)||e.isNull(n))throw new Error("matcher must be defined.");if(e.isArray(t)&&!e.isUndefined(n.array))n.array(t);else if(e.isBoolean(t)&&!e.isUndefined(n.boolean))n.boolean(t);else if(e.isError(t)&&!e.isUndefined(n.error))n.error(t);else if(e.isDate(t)&&!e.isUndefined(n.date))n.date(t);else if(e.isFunction(t)&&!e.isUndefined(n.function))n.function(t);else if(e.isNull(t)&&!e.isUndefined(n.null))n.null();else if(e.isNumber(t)&&!e.isUndefined(n.number))n.number(t);else if(e.isObject(t)&&!e.isUndefined(n.object))n.object(t);else if(e.isRegExp(t)&&!e.isUndefined(n.regexp))n.regexp(t);else if(e.isString(t)&&!e.isUndefined(n.string))n.string(t);else if(e.isSymbol(t)&&!e.isUndefined(n.symbol))n.symbol(t);else if(e.isUndefined(t)&&!e.isUndefined(n.undefined))n.undefined();else{var i=e.isArray(n.custom)?n.custom.find((function(n){return e.isFunction(n.test)&&e.isFunction(n.callback)&&n.test(t)})):void 0;e.isUndefined(i)?e.isUndefined(n.default)||n.default(t):i.callback(t)}}}]),e}(),$s={SILENT:-1,TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},Ps=function(){function e(t,n,i){Si(this,e),this._id=t,this._logWriters=i,this.setLevel(n)}return Oi(e,[{key:"getId",value:function(){return this._id}},{key:"getLevel",value:function(){return this._level}},{key:"setLevel",value:function(e){this._level=e,this._levelPriority=$s[this._level.toUpperCase()]}},{key:"trace",value:function(e){if($s.TRACE>=this._levelPriority){var t=new Ns(new Date,this._id,Ms.TRACE,this._resolveLogMessage(e));this._log(t)}}},{key:"debug",value:function(e){if($s.DEBUG>=this._levelPriority){var t=new Ns(new Date,this._id,Ms.DEBUG,this._resolveLogMessage(e));this._log(t)}}},{key:"info",value:function(e){if($s.INFO>=this._levelPriority){var t=new Ns(new Date,this._id,Ms.INFO,this._resolveLogMessage(e));this._log(t)}}},{key:"warn",value:function(e){if($s.WARN>=this._levelPriority){var t=new Ns(new Date,this._id,Ms.WARN,this._resolveLogMessage(e));this._log(t)}}},{key:"error",value:function(e,t){if($s.ERROR>=this._levelPriority){var n=new Ns(new Date,this._id,Ms.ERROR,this._resolveLogMessage(e),t);this._log(n)}}},{key:"_log",value:function(e){this._levelPriority!==$s.SILENT&&this._logWriters.forEach((function(t){return t.writeLog(e)}))}},{key:"_resolveLogMessage",value:function(e){return Fs.isFunction(e)?e():e}}]),e}();function js(e,t){return Object.keys(e).reduce((function(n,i){return n[i]=t(e[i]),n}),{})}function Bs(e,t){return Object.keys(e).forEach((function(n){t(n,e[n])}))}function zs(e){var t=typeof e;if(null===e||void 0===e||"string"===t||"number"===t||"boolean"===t)return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.map((function(e){return zs(e)}));if(e instanceof Map){var n=new Map;return e.forEach((function(e,t){n.set(t,zs(e))})),n}if(e instanceof Set){var i=new Set;return e.forEach((function(e){return i.add(zs(e))})),i}if(e.constructor===Object){var r={};return Object.keys(e).forEach((function(t){r[t]=zs(e[t])})),r}var o=e.constructor.name||e.constructor.toString();throw new Error("Can not clone unknown type: "+o)}var Us=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"isSet",value:function(t){return!e.isNotSet(t)}},{key:"isNotSet",value:function(e){return void 0===e||null===e}},{key:"nonEmptyString",value:function(e){return"string"===typeof e&&e.length>0}},{key:"assertNonEmptyString",value:function(t,n){if(void 0===n&&(n="value"),!e.nonEmptyString(t))throw new Error(n+" must be a non-empty string: "+typeof t)}},{key:"assertString",value:function(t,n){if("string"!==typeof t)throw new Error("".concat(e.getValueName(n)," must be a string: ").concat(typeof t))}},{key:"assertValidStringIndex",value:function(t,n,i,r){e.assertValidIndex(t,0,i?n.length+1:n.length,r)}},{key:"assertNumber",value:function(t,n){if("number"!==typeof t)throw new Error("".concat(e.getValueName(n)," must be a number: ").concat(typeof t))}},{key:"assertArray",value:function(t,n){if(!Array.isArray(t))throw new Error("".concat(e.getValueName(n)," must be an array: ").concat(typeof t))}},{key:"assertNonEmptyArray",value:function(t,n){if(e.assertArray(t,n),0===t.length)throw new Error("".concat(e.getValueName(n)," must be a non-empty array: ").concat(typeof t))}},{key:"assertValidArrayIndex",value:function(t,n,i){e.assertValidIndex(t,0,n.length,i)}},{key:"assertValidIndex",value:function(t,n,i,r){if(e.assertNumber(t,r),t<n||t>=i)throw r=e.getValueName(r),new Error("Index out of bounds. ".concat(r," must be > 0 and <= ").concat(i,": ").concat(t))}},{key:"assertBoolean",value:function(t,n){if("boolean"!==typeof t)throw new Error("".concat(e.getValueName(n)," must be a boolean but was: ").concat(typeof t))}},{key:"assertDate",value:function(t,n){if(!Fs.isDate(t))throw new Error("".concat(e.getValueName(n)," must be a Date but was: ").concat(t.constructor.name))}},{key:"getValueName",value:function(e,t){return e||t||"value"}}]),e}(),Vs=function(){function e(t){var n=this;Si(this,e),this._loggers=new Map,Fs.isSet(t.loggers)&&Bs(t.loggers,(function(e,t){if(!Us.nonEmptyString(e))throw new Error("A logger's id must be a non-empty string");n._loggers.set(e,n._processLoggerConfig(t))})),this._loggers.set(e.ROOT_LOGGER_ID,this._processLoggerConfig(t.root))}return Oi(e,[{key:"resolveLoggerConfig",value:function(t){for(var n=t,i=this._loggers.get(n);void 0===i&&""!==n;){var r=n.lastIndexOf(".");n=n.substring(0,r),i=this._loggers.get(n)}return void 0!==i?i:this._loggers.get(e.ROOT_LOGGER_ID)}},{key:"_processLoggerConfig",value:function(e){return Fs.isString(e)?{level:e}:e}}]),e}();Vs.ROOT_LOGGER_ID="";var Ws=function(){function e(t){Si(this,e),this._pattern=t||e.DEFAULT_PATTERN}return Oi(e,[{key:"_formatMessage",value:function(e){var t=this._pad(e.level.toUpperCase(),5," ",!1),n=this._formatTime(e);return"".concat(t," ").concat(n," ").concat(e.message)}},{key:"_formatTime",value:function(e){var t=e.timestamp;return this._pad(t.getHours(),2,"0")+":"+this._pad(t.getMinutes(),2,"0")+":"+this._pad(t.getSeconds(),2,"0")+"."+this._pad(t.getMilliseconds(),3,"0")}},{key:"_pad",value:function(e,t,n){for(var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=String(e);r.length<t;)r=i?n+r:r+n;return r}}]),e}();Ws.FIELDS={LOG_NAME:"%l",MESSAGE:"%m",DATE_TIME:"%t",LOG_LEVEL:"%p"},Ws.DEFAULT_PATTERN="%t %p %m";var Hs=function(e){Mi(n,e);var t=Ni(n);function n(e){return Si(this,n),t.call(this,e)}return Oi(n,[{key:"writeLog",value:function(e){switch(e.level){case Ms.TRACE:case Ms.DEBUG:console.debug(this._formatMessage(e));break;case Ms.INFO:console.info(this._formatMessage(e));break;case Ms.WARN:console.warn(this._formatMessage(e));break;case Ms.ERROR:e.error?console.error(this._formatMessage(e)+"\n",e.error):console.error(this._formatMessage(e))}}}]),n}(Ws),qs={root:{level:Ms.WARN}},Gs=function(){function e(t){Si(this,e),this.configure(t||{}),this._writer=new Hs("")}return Oi(e,[{key:"configure",value:function(e){var t=Object.assign(Object.assign({},qs),e);this._config=new Vs(t),this._loggers=new Map}},{key:"root",value:function(){return this.logger()}},{key:"logger",value:function(e){if(null!==e&&void 0!==e||(e=Vs.ROOT_LOGGER_ID),!this._loggers.has(e)){var t=this._config.resolveLoggerConfig(e);this._loggers.set(e,new Ps(e,t.level,[this._writer]))}return this._loggers.get(e)}}]),e}(),Ks=new Gs,Ys=function(){function e(t,n,i){var r=this;Si(this,e),this._sendPing=function(){r._handler.sendPing(),r._schedulePongTimeout()},this._onTimeout=function(){r._logger.trace((function(){return"A pong timeout occurred"})),r._handler.onTimeout()},this._handler=t,this._pingInterval=n,this._pongTimeout=i,this._started=!1,this._logger=Ks.logger("heartbeat")}return Oi(e,[{key:"messageReceived",value:function(){this._started&&(this._cancelPongTimeout(),this._restartPingTimeout())}},{key:"start",value:function(){var e=this;if(null==this._handler)throw new Error("Can't start the HeartbeatManager unless the callback is set.");this._logger.trace((function(){return"HeartbeatHelper started with Ping Interval "+e._pingInterval+" and Pong Timeout "+e._pongTimeout})),this._started=!0,this.messageReceived()}},{key:"stop",value:function(){this._started=!1,this._stopPingTimer(),this._cancelPongTimeout(),this._logger.trace((function(){return"HeartbeatHelper stopped."}))}},{key:"started",get:function(){return this._started}},{key:"dispose",value:function(){this.stop()}},{key:"_schedulePongTimeout",value:function(){this._cancelPongTimeout();var e=1e3*this._pongTimeout;this._timeoutFuture=setTimeout(this._onTimeout,e)}},{key:"_cancelPongTimeout",value:function(){null!==this._timeoutFuture&&(clearTimeout(this._timeoutFuture),this._timeoutFuture=null)}},{key:"_stopPingTimer",value:function(){null!==this._pingFuture&&(clearTimeout(this._pingFuture),this._pingFuture=null)}},{key:"_restartPingTimeout",value:function(){this._stopPingTimer();var e=1e3*this._pingInterval;this._pingFuture=setTimeout(this._sendPing,e)}}]),e}(),Js=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,e))._code=i,o._details=r||{},o.name="ConvergenceError",Object.setPrototypeOf(Ii(o),n.prototype),o}return Oi(n,[{key:"code",get:function(){return this._code}},{key:"details",get:function(){return this._details}}]),n}($o(Error)),Xs=function(){function e(){Si(this,e),this._defaultSubject=new cs,this._observable=this._defaultSubject.asObservable().pipe(ws()),this._listeners=new Map}return Oi(e,[{key:"addListener",value:function(t,n){if("function"!==typeof n)throw new TypeError("Listeners must be functions");t=e._resolveEventKey(t);var i=this._listeners.get(t);if(void 0===i)i=[],this._listeners.set(t,i);else if(void 0!==i.find((function(e){return e.listener===n})))return this;var r=this._observable.pipe(_s((function(e){return e.name.toLowerCase()===t}))).subscribe((function(e){n(e)}));return i.push({listener:n,subscription:r}),this}},{key:"on",value:function(e,t){return this.addListener(e,t)}},{key:"once",value:function(e,t){var n=this;return this.addListener(e,(function i(r){n.removeListener(e,i),t(r)}))}},{key:"removeAllListeners",value:function(){var e=this;return Array.from(this._listeners.keys()).forEach((function(t){return e.removeListeners(t)})),this}},{key:"removeListeners",value:function(t){(t=e._resolveEventKey(t),this._listeners.has(t))&&(this._listeners.get(t).forEach((function(e){return e.subscription.unsubscribe()})),this._listeners.delete(t));return this}},{key:"removeListener",value:function(t,n){if(t=e._resolveEventKey(t),this._listeners.has(t)){var i=this._listeners.get(t),r=i.findIndex((function(e){return e.listener===n}));if(-1!==r){var o=i[r];i.splice(r,1),o.subscription.unsubscribe()}0===i.length&&this._listeners.delete(t)}return this}},{key:"off",value:function(e,t){return this.removeListener(e,t)}},{key:"events",value:function(){return this._observable}},{key:"_emitFrom",value:function(e){var t=this;return e.subscribe((function(e){t._defaultSubject.next(e)}),(function(e){t._defaultSubject.error(e)}))}},{key:"_emitEvent",value:function(e){if(Us.isNotSet(e.name))throw new Js("An event must have a name.");this._defaultSubject.next(e)}},{key:"_completeEventStream",value:function(){this._defaultSubject.complete()}}],[{key:"_resolveEventKey",value:function(e){if("string"===typeof e)return e.toLowerCase();throw new Error("Event names must be strings: "+typeof e)}}]),e}(),Qs=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,e))._code=i,o._details=r,Object.setPrototypeOf(Ii(o),n.prototype),o}return Oi(n,[{key:"code",get:function(){return this._code}},{key:"details",get:function(){return this._details}}]),n}($o(Error)),Zs=Oi((function e(t,n,i){Si(this,e),this.data=t,this.offset=n,this.totalResults=i,Object.freeze(this),Object.freeze(t)})),ea=function(){function e(){Si(this,e),this._rejected=!1,this._resolved=!1}return Oi(e,[{key:"isPending",value:function(){return!this._resolved&&!this._rejected}},{key:"isRejected",value:function(){return this._rejected}},{key:"isResolved",value:function(){return this._resolved}},{key:"resolve",value:function(e){this._rejected=!1,this._resolved=!0}},{key:"reject",value:function(e){this._rejected=!0,this._resolved=!1}},{key:"resolveFromPromise",value:function(e){var t=this;e.then((function(e){return t.resolve(e)})).catch((function(e){return t.reject(e)}))}}]),e}(),ta=function(e){Mi(n,e);var t=Ni(n);function n(){var e;return Si(this,n),(e=t.call(this))._promise=new Promise((function(t,n){e._resolve=t,e._reject=n})),e}return Oi(n,[{key:"resolve",value:function(e){Mr(Ri(n.prototype),"resolve",this).call(this,e),this._resolve(e)}},{key:"reject",value:function(e){Mr(Ri(n.prototype),"reject",this).call(this,e),this._reject(e)}},{key:"promise",value:function(){return this._promise}}]),n}(ea),na=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;Si(this,n),(o=t.call(this))._connectionError=null,o._logger=Ks.logger("socket");var s=e;return s=(s=s.replace(/https:/i,"wss:")).replace(/http:/i,"ws:"),o._url=s,o._socket=null,o._webSocketClass=null!==i?i:WebSocket,o._webSocketFactory=null!==r?r:function(e){return new o._webSocketClass(e)},o}return Oi(n,[{key:"url",get:function(){return this._url}},{key:"open",value:function(){if(this._openDeferred=new ta,this._socket&&this._socket.readyState===this._webSocketClass.CONNECTING)throw new Error("Socket already in the process of opening.");if(this._socket&&this._socket.readyState===this._webSocketClass.OPEN)throw new Error("Can not call connect on a socket that is already connected.");if(this._socket&&this._socket.readyState===this._webSocketClass.CLOSING)throw new Error("Can not call connect on a socket that is in the process of closing.");return this._socket=this._webSocketFactory(this._url),this._socket.binaryType="arraybuffer",this._attachToSocket(this._socket),this._openDeferred.promise()}},{key:"close",value:function(){return this._doClose(!0)}},{key:"terminate",value:function(e){return this._doClose(!1,e)}},{key:"isOpen",value:function(){return null!==this._socket&&this._socket.readyState===this._webSocketClass.OPEN}},{key:"isConnecting",value:function(){return null!==this._socket&&this._socket.readyState===this._webSocketClass.CONNECTING}},{key:"isClosed",value:function(){return null===this._socket||this._socket.readyState===this._webSocketClass.CLOSED}},{key:"send",value:function(e){if(!this.isOpen())throw new Error("Can't send messages because the WebSocket is not open.");this._socket.send(e)}},{key:"_doClose",value:function(e,t){if(this._socket&&this._socket.readyState!==this._webSocketClass.CLOSED){if(this._socket.readyState===this._webSocketClass.CLOSING)return this._logger.trace("Attempted to close a WebSocket that is in the CLOSING state."),Promise.reject(new Error("Can not call close on a WebSocket in the CLOSING state."));if(this._socket.readyState===this._webSocketClass.CONNECTING?this._logger.trace("Closing a connecting WebSocket."):this._logger.trace("Closing an open WebSocket."),this._closeDeferred=new ta,e?(this._logger.debug("Closing WebSocket normally."),this._socket.close(1e3,t||"The client closed the connection")):(this._logger.debug("Closing WebSocket abnormally: "+t),this._socket.close(4006,t)),null!==this._openDeferred){var n=this._openDeferred;this._openDeferred=null,n.reject(new Error("Web Socket connection closed while opening."))}return this._closeDeferred.promise()}return this._logger.trace("Attempted to close a WebSocket that is in the CLOSED state."),Promise.reject(new Error("Can not call close on a WebSocket in the CLOSED state."))}},{key:"_attachToSocket",value:function(e){var t=this;e.onmessage=function(e){try{if(!(e.data instanceof ArrayBuffer))throw new Js("Convergence protocol does not accept text frames: "+e.data);var i=new Uint8Array(e.data);t._emitEvent({name:n.Events.MESSAGE,message:i})}catch(Lp){t._emitEvent({name:n.Events.ERROR,error:Lp}),t._logger.error("Error handling  web socket frame",Lp)}},e.onopen=function(e){if(t._openDeferred){t._logger.debug("WebSocket connection opened");try{t._openDeferred.resolve()}catch(Lp){t._logger.error("Error resolving WebSocket Open Promise.",Lp)}t._openDeferred=null}else{var i={name:n.Events.ERROR,error:new Js("Received onOpen event while in state: "+t._socket.readyState)};t._emitEvent(i)}},e.onerror=function(e){if(t._logger.debug("WebSocket Error: "+e.message),void 0===t._socket||t._socket.readyState===t._webSocketClass.CONNECTING)try{var i={name:n.Events.ERROR,error:new Js("WebSocket error: "+e.message)};t._emitEvent(i)}catch(Lp){t._logger.error("Error handling WebSocket error.",Lp)}else t._connectionError=e.error},e.onclose=function(i){t._logger.trace((function(){return"WebSocket close event: {code: ".concat(i.code,', reason: "').concat(i.reason,'"}')})),n._detachFromSocket(e),t._socket=null;try{if(t._openDeferred&&(t._logger.debug((function(){return"Web Socket connection failed: {code: ".concat(i.code,', reason: "').concat(i.reason,'"}')})),t._openDeferred.reject(new Error(t._connectionError)),t._openDeferred=null),t._closeDeferred){var r={name:n.Events.CLOSE,reason:"close requested by client"};t._emitEvent(r),t._closeDeferred.resolve()}else{t._logger.debug((function(){return"Web Socket connection unexpectedly closed: {code: ".concat(i.code,', reason: "').concat(i.reason,'"}')}));var o={name:n.Events.CLOSE,reason:"unexpected Web Socket closure."};t._emitEvent(o)}}catch(Lp){t._logger.error("Error handling web socket close event.",Lp)}}}}],[{key:"_detachFromSocket",value:function(e){e.onmessage=void 0,e.onopen=void 0,e.onerror=void 0,e.onclose=void 0}}]),n}(Xs);na.Events={MESSAGE:"message",ERROR:"error",CLOSE:"close"};var ia={com:{nested:{convergencelabs:{nested:{convergence:{nested:{proto:{nested:{ConvergenceMessage:{oneofs:{body:{oneof:["ok","error","ping","pong","connectionRequest","connectionResponse","serverTimeRequest","serverTimeResponse","openRealTimeModelRequest","openRealTimeModelResponse","closeRealTimeModelRequest","closeRealTimeModelResponse","createRealTimeModelRequest","createRealTimeModelResponse","deleteRealtimeModelRequest","deleteRealtimeModelResponse","forceCloseRealTimeModel","remoteClientOpenedModel","remoteClientClosedModel","modelAutoCreateConfigRequest","modelAutoCreateConfigResponse","remoteOperation","operationSubmission","operationAck","shareReference","setReference","clearReference","unshareReference","referenceShared","referenceSet","referenceCleared","referenceUnshared","modelsQueryRequest","modelsQueryResponse","getModelPermissionsRequest","getModelPermissionsResponse","setModelPermissionsRequest","setModelPermissionsResponse","modelPermissionsChanged","modelResyncRequest","modelResyncResponse","modelResyncClientComplete","modelResyncServerComplete","remoteClientResyncStarted","remoteClientResyncCompleted","modelOfflineSubscriptionChange","modelOfflineUpdated","historicalDataRequest","historicalDataResponse","historicalOperationsRequest","historicalOperationsResponse","modelGetVersionAtTimeRequest","modelGetVersionAtTimeResponse","identityCacheUpdate","usersGetRequest","userSearchRequest","userListResponse","userGroupsRequest","userGroupsResponse","userGroupsForUsersRequest","userGroupsForUsersResponse","activityParticipantsRequest","activityParticipantsResponse","activityCreateRequest","activityDeleteRequest","activityJoinRequest","activityJoinResponse","activityLeaveRequest","activitySessionJoined","activitySessionLeft","activityUpdateState","activityStateUpdated","activityDeleted","activityForceLeave","presenceSetState","presenceRemoveState","presenceClearState","presenceStateSet","presenceStateRemoved","presenceStateCleared","presenceAvailabilityChanged","presenceRequest","presenceResponse","presenceSubscribeRequest","presenceSubscribeResponse","presenceUnsubscribe","createChatRequest","createChatResponse","removeChatRequest","removeChatResponse","chatRemoved","getChatsRequest","getChatsResponse","chatsExistRequest","chatsExistResponse","getDirectChatsRequest","getDirectChatsResponse","getJoinedChatsRequest","getJoinedChatsResponse","chatsSearchRequest","chatsSearchResponse","joinChatRequest","joinChatResponse","userJoinedChat","leaveChatRequest","leaveChatResponse","userLeftChat","addUserToChatRequest","addUserToChatResponse","userAddedToChat","removeUserFromChatRequest","removeUserFromChatResponse","userRemovedFromChat","setChatNameRequest","setChatNameResponse","chatNameChanged","setChatTopicRequest","setChatTopicResponse","chatTopicChanged","markChatEventsSeenRequest","markChatEventsSeenResponse","chatEventsMarkedSeen","publishChatMessageRequest","publishChatMessageResponse","remoteChatMessage","getChatHistoryRequest","getChatHistoryResponse","resolvePermissionsForConnectedSessionRequest","resolvePermissionsForConnectedSessionResponse","addPermissionsRequest","removePermissionsRequest","setPermissionsRequest","getPermissionsRequest","getPermissionsResponse"]}},fields:{requestId:{type:"google.protobuf.Int32Value",id:1},responseId:{type:"google.protobuf.Int32Value",id:2},ok:{type:"core.OkResponse",id:3},error:{type:"core.ErrorMessage",id:4},ping:{type:"core.PingMessage",id:5},pong:{type:"core.PongMessage",id:6},connectionRequest:{type:"core.ConnectionRequestMessage",id:7},connectionResponse:{type:"core.ConnectionResponseMessage",id:8},serverTimeRequest:{type:"core.GetServerTimeRequestMessage",id:20},serverTimeResponse:{type:"core.GetServerTimeResponseMessage",id:21},openRealTimeModelRequest:{type:"model.OpenRealtimeModelRequestMessage",id:100},openRealTimeModelResponse:{type:"model.OpenRealtimeModelResponseMessage",id:101},closeRealTimeModelRequest:{type:"model.CloseRealtimeModelRequestMessage",id:102},closeRealTimeModelResponse:{type:"model.CloseRealTimeModelResponseMessage",id:103},createRealTimeModelRequest:{type:"model.CreateRealtimeModelRequestMessage",id:104},createRealTimeModelResponse:{type:"model.CreateRealtimeModelResponseMessage",id:105},deleteRealtimeModelRequest:{type:"model.DeleteRealtimeModelRequestMessage",id:106},deleteRealtimeModelResponse:{type:"model.DeleteRealtimeModelResponseMessage",id:107},forceCloseRealTimeModel:{type:"model.ModelForceCloseMessage",id:108},remoteClientOpenedModel:{type:"model.RemoteClientOpenedMessage",id:109},remoteClientClosedModel:{type:"model.RemoteClientClosedMessage",id:110},modelAutoCreateConfigRequest:{type:"model.AutoCreateModelConfigRequestMessage",id:111},modelAutoCreateConfigResponse:{type:"model.AutoCreateModelConfigResponseMessage",id:112},remoteOperation:{type:"model.RemoteOperationMessage",id:113},operationSubmission:{type:"model.OperationSubmissionMessage",id:114},operationAck:{type:"model.OperationAcknowledgementMessage",id:115},shareReference:{type:"model.ShareReferenceMessage",id:116},setReference:{type:"model.SetReferenceMessage",id:117},clearReference:{type:"model.ClearReferenceMessage",id:118},unshareReference:{type:"model.UnshareReferenceMessage",id:119},referenceShared:{type:"model.RemoteReferenceSharedMessage",id:120},referenceSet:{type:"model.RemoteReferenceSetMessage",id:121},referenceCleared:{type:"model.RemoteReferenceClearedMessage",id:122},referenceUnshared:{type:"model.RemoteReferenceUnsharedMessage",id:123},modelsQueryRequest:{type:"model.ModelsQueryRequestMessage",id:124},modelsQueryResponse:{type:"model.ModelsQueryResponseMessage",id:125},getModelPermissionsRequest:{type:"model.GetModelPermissionsRequestMessage",id:126},getModelPermissionsResponse:{type:"model.GetModelPermissionsResponseMessage",id:127},setModelPermissionsRequest:{type:"model.SetModelPermissionsRequestMessage",id:128},setModelPermissionsResponse:{type:"model.SetModelPermissionsResponseMessage",id:129},modelPermissionsChanged:{type:"model.ModelPermissionsChangedMessage",id:130},modelResyncRequest:{type:"model.ModelResyncRequestMessage",id:131},modelResyncResponse:{type:"model.ModelResyncResponseMessage",id:132},modelResyncClientComplete:{type:"model.ModelResyncClientCompleteMessage",id:133},modelResyncServerComplete:{type:"model.ModelResyncServerCompleteMessage",id:134},remoteClientResyncStarted:{type:"model.RemoteClientResyncStartedMessage",id:135},remoteClientResyncCompleted:{type:"model.RemoteClientResyncCompletedMessage",id:136},modelOfflineSubscriptionChange:{type:"model.ModelOfflineSubscriptionChangeRequestMessage",id:137},modelOfflineUpdated:{type:"model.OfflineModelUpdatedMessage",id:138},historicalDataRequest:{type:"model.HistoricalDataRequestMessage",id:139},historicalDataResponse:{type:"model.HistoricalDataResponseMessage",id:140},historicalOperationsRequest:{type:"model.HistoricalOperationRequestMessage",id:141},historicalOperationsResponse:{type:"model.HistoricalOperationsResponseMessage",id:142},modelGetVersionAtTimeRequest:{type:"model.ModelGetVersionAtTimeRequestMessage",id:143},modelGetVersionAtTimeResponse:{type:"model.ModelGetVersionAtTimeResponseMessage",id:144},identityCacheUpdate:{type:"identity.IdentityCacheUpdateMessage",id:200},usersGetRequest:{type:"identity.GetUsersRequestMessage",id:201},userSearchRequest:{type:"identity.SearchUsersRequestMessage",id:202},userListResponse:{type:"identity.UserListMessage",id:203},userGroupsRequest:{type:"identity.UserGroupsRequestMessage",id:204},userGroupsResponse:{type:"identity.UserGroupsResponseMessage",id:205},userGroupsForUsersRequest:{type:"identity.UserGroupsForUsersRequestMessage",id:206},userGroupsForUsersResponse:{type:"identity.UserGroupsForUsersResponseMessage",id:207},activityParticipantsRequest:{type:"activity.ActivityParticipantsRequestMessage",id:300},activityParticipantsResponse:{type:"activity.ActivityParticipantsResponseMessage",id:301},activityCreateRequest:{type:"activity.ActivityCreateRequestMessage",id:302},activityDeleteRequest:{type:"activity.ActivityDeleteRequestMessage",id:304},activityJoinRequest:{type:"activity.ActivityJoinRequestMessage",id:306},activityJoinResponse:{type:"activity.ActivityJoinResponseMessage",id:307},activityLeaveRequest:{type:"activity.ActivityLeaveRequestMessage",id:308},activitySessionJoined:{type:"activity.ActivitySessionJoinedMessage",id:310},activitySessionLeft:{type:"activity.ActivitySessionLeftMessage",id:311},activityUpdateState:{type:"activity.ActivityUpdateStateMessage",id:312},activityStateUpdated:{type:"activity.ActivityStateUpdatedMessage",id:313},activityDeleted:{type:"activity.ActivityDeletedMessage",id:314},activityForceLeave:{type:"activity.ActivityForceLeaveMessage",id:315},presenceSetState:{type:"presence.PresenceSetStateMessage",id:400},presenceRemoveState:{type:"presence.PresenceRemoveStateMessage",id:401},presenceClearState:{type:"presence.PresenceClearStateMessage",id:402},presenceStateSet:{type:"presence.PresenceStateSetMessage",id:403},presenceStateRemoved:{type:"presence.PresenceStateRemovedMessage",id:404},presenceStateCleared:{type:"presence.PresenceStateClearedMessage",id:405},presenceAvailabilityChanged:{type:"presence.PresenceAvailabilityChangedMessage",id:406},presenceRequest:{type:"presence.PresenceRequestMessage",id:407},presenceResponse:{type:"presence.PresenceResponseMessage",id:408},presenceSubscribeRequest:{type:"presence.SubscribePresenceRequestMessage",id:409},presenceSubscribeResponse:{type:"presence.SubscribePresenceResponseMessage",id:410},presenceUnsubscribe:{type:"presence.UnsubscribePresenceMessage",id:411},createChatRequest:{type:"chat.CreateChatRequestMessage",id:500},createChatResponse:{type:"chat.CreateChatResponseMessage",id:501},removeChatRequest:{type:"chat.RemoveChatRequestMessage",id:502},removeChatResponse:{type:"chat.RemoveChatResponseMessage",id:503},chatRemoved:{type:"chat.ChatRemovedMessage",id:504},getChatsRequest:{type:"chat.GetChatsRequestMessage",id:505},getChatsResponse:{type:"chat.GetChatsResponseMessage",id:506},chatsExistRequest:{type:"chat.ChatsExistRequestMessage",id:507},chatsExistResponse:{type:"chat.ChatsExistResponseMessage",id:508},getDirectChatsRequest:{type:"chat.GetDirectChatsRequestMessage",id:509},getDirectChatsResponse:{type:"chat.GetDirectChatsResponseMessage",id:510},getJoinedChatsRequest:{type:"chat.GetJoinedChatsRequestMessage",id:511},getJoinedChatsResponse:{type:"chat.GetJoinedChatsResponseMessage",id:512},chatsSearchRequest:{type:"chat.ChatsSearchRequestMessage",id:513},chatsSearchResponse:{type:"chat.ChatsSearchResponseMessage",id:514},joinChatRequest:{type:"chat.JoinChatRequestMessage",id:515},joinChatResponse:{type:"chat.JoinChatResponseMessage",id:516},userJoinedChat:{type:"chat.UserJoinedChatMessage",id:517},leaveChatRequest:{type:"chat.LeaveChatRequestMessage",id:518},leaveChatResponse:{type:"chat.LeaveChatResponseMessage",id:519},userLeftChat:{type:"chat.UserLeftChatMessage",id:520},addUserToChatRequest:{type:"chat.AddUserToChatRequestMessage",id:521},addUserToChatResponse:{type:"chat.AddUserToChatResponseMessage",id:522},userAddedToChat:{type:"chat.UserAddedToChatMessage",id:523},removeUserFromChatRequest:{type:"chat.RemoveUserFromChatRequestMessage",id:524},removeUserFromChatResponse:{type:"chat.RemoveUserFromChatResponseMessage",id:525},userRemovedFromChat:{type:"chat.UserRemovedFromChatMessage",id:526},setChatNameRequest:{type:"chat.SetChatNameRequestMessage",id:527},setChatNameResponse:{type:"chat.SetChatNameResponseMessage",id:528},chatNameChanged:{type:"chat.ChatNameSetMessage",id:529},setChatTopicRequest:{type:"chat.SetChatTopicRequestMessage",id:530},setChatTopicResponse:{type:"chat.SetChatTopicResponseMessage",id:531},chatTopicChanged:{type:"chat.ChatTopicSetMessage",id:532},markChatEventsSeenRequest:{type:"chat.MarkChatEventsSeenRequestMessage",id:533},markChatEventsSeenResponse:{type:"chat.MarkChatEventsSeenResponseMessage",id:534},chatEventsMarkedSeen:{type:"chat.ChatEventsMarkedSeenMessage",id:535},publishChatMessageRequest:{type:"chat.PublishChatRequestMessage",id:536},publishChatMessageResponse:{type:"chat.PublishChatResponseMessage",id:537},remoteChatMessage:{type:"chat.RemoteChatMessageMessage",id:538},getChatHistoryRequest:{type:"chat.ChatHistoryRequestMessage",id:539},getChatHistoryResponse:{type:"chat.ChatHistoryResponseMessage",id:540},resolvePermissionsForConnectedSessionRequest:{type:"core.ResolvePermissionsForConnectedSessionRequestMessage",id:601},resolvePermissionsForConnectedSessionResponse:{type:"core.ResolvePermissionsForConnectedSessionResponseMessage",id:602},addPermissionsRequest:{type:"core.AddPermissionsRequestMessage",id:603},removePermissionsRequest:{type:"core.RemovePermissionsRequestMessage",id:605},setPermissionsRequest:{type:"core.SetPermissionsRequestMessage",id:607},getPermissionsRequest:{type:"core.GetPermissionsRequestMessage",id:609},getPermissionsResponse:{type:"core.GetPermissionsResponseMessage",id:610}}},core:{nested:{PingMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},PongMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},ConnectionRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},oneofs:{auth:{oneof:["password","jwt","anonymous","reconnect"]}},fields:{client:{type:"string",id:1},clientVersion:{type:"string",id:2},password:{type:"PasswordAuthRequestData",id:3},jwt:{type:"JwtAuthRequestData",id:4},anonymous:{type:"AnonymousAuthRequestData",id:5},reconnect:{type:"ReconnectTokenAuthRequestData",id:6}},nested:{PasswordAuthRequestData:{fields:{username:{type:"string",id:1},password:{type:"string",id:2}}},JwtAuthRequestData:{fields:{jwt:{type:"string",id:1}}},ReconnectTokenAuthRequestData:{fields:{token:{type:"string",id:1}}},AnonymousAuthRequestData:{fields:{displayName:{type:"google.protobuf.StringValue",id:1}}}}},ConnectionResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},oneofs:{response:{oneof:["success","failure"]}},fields:{server:{type:"ServerData",id:1},success:{type:"ConnectionSuccessData",id:3},failure:{type:"ConnectionFailureData",id:4}},nested:{ServerData:{fields:{version:{type:"string",id:1}}},ConnectionSuccessData:{fields:{namespace:{type:"string",id:1},domainId:{type:"string",id:2},user:{type:"DomainUserData",id:3},sessionId:{type:"string",id:4},reconnectToken:{type:"string",id:5},presenceState:{keyType:"string",type:"google.protobuf.Value",id:6}}},ConnectionFailureData:{fields:{code:{type:"string",id:1},details:{type:"string",id:2},retryOk:{type:"bool",id:3}}}}},DomainUserTypeData:{values:{Normal:0,Convergence:1,Anonymous:2}},DomainUserIdData:{fields:{userType:{type:"DomainUserTypeData",id:1},username:{type:"string",id:2}}},DomainUserIdList:{fields:{values:{rule:"repeated",type:"DomainUserIdData",id:1}}},DomainUserData:{fields:{userId:{type:"DomainUserIdData",id:1},firstName:{type:"google.protobuf.StringValue",id:2},lastName:{type:"google.protobuf.StringValue",id:3},displayName:{type:"google.protobuf.StringValue",id:4},email:{type:"google.protobuf.StringValue",id:5},disabled:{type:"bool",id:6},deleted:{type:"bool",id:7},deletedUsername:{type:"google.protobuf.StringValue",id:8}}},UserPermissionsEntry:{fields:{user:{type:"DomainUserIdData",id:1},permissions:{rule:"repeated",type:"string",id:2}}},PermissionsList:{fields:{values:{rule:"repeated",type:"string",id:1}}},PermissionTarget:{oneofs:{targetType:{oneof:["chat","activity"]}},fields:{chat:{type:"Chat",id:1},activity:{type:"Activity",id:2}},nested:{Chat:{fields:{id:{type:"string",id:1}}},Activity:{fields:{type:{type:"string",id:1},id:{type:"string",id:2}}}}},AddPermissionsRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{target:{type:"PermissionTarget",id:1},world:{rule:"repeated",type:"string",id:2},user:{rule:"repeated",type:"UserPermissionsEntry",id:3},group:{keyType:"string",type:"PermissionsList",id:4}}},RemovePermissionsRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{target:{type:"PermissionTarget",id:1},world:{rule:"repeated",type:"string",id:2},user:{rule:"repeated",type:"UserPermissionsEntry",id:3},group:{keyType:"string",type:"PermissionsList",id:4}}},SetPermissionsRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{target:{type:"PermissionTarget",id:1},world:{type:"SetWorld",id:2},user:{type:"SetUser",id:3},group:{type:"SetGroup",id:4}},nested:{SetWorld:{fields:{permissions:{rule:"repeated",type:"string",id:1}}},SetUser:{fields:{permissions:{rule:"repeated",type:"UserPermissionsEntry",id:1},replaceAll:{type:"bool",id:2}}},SetGroup:{fields:{permissions:{keyType:"string",type:"PermissionsList",id:1},replaceAll:{type:"bool",id:2}}}}},GetPermissionsRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{target:{type:"PermissionTarget",id:1}}},GetPermissionsResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{user:{rule:"repeated",type:"UserPermissionsEntry",id:1},group:{keyType:"string",type:"PermissionsList",id:2},world:{rule:"repeated",type:"string",id:3}}},ResolvePermissionsForConnectedSessionRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{target:{type:"PermissionTarget",id:1}}},ResolvePermissionsForConnectedSessionResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{permissions:{rule:"repeated",type:"string",id:1}}},ErrorMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{code:{type:"string",id:1},message:{type:"string",id:2},details:{keyType:"string",type:"google.protobuf.Value",id:3}}},OkResponse:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},GetServerTimeRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{}},GetServerTimeResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{serverTime:{type:"google.protobuf.Timestamp",id:1}}},StringList:{fields:{values:{rule:"repeated",type:"string",id:1}}},Int32List:{fields:{values:{rule:"repeated",type:"int32",id:1}}}}},activity:{nested:{ActivityCreateRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{activityType:{type:"string",id:1},activityId:{type:"string",id:2},worldPermissions:{rule:"repeated",type:"string",id:3},userPermissions:{rule:"repeated",type:"core.UserPermissionsEntry",id:4},groupPermissions:{keyType:"string",type:"core.PermissionsList",id:5}}},ActivityDeleteRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{activityType:{type:"string",id:1},activityId:{type:"string",id:2}}},ActivityParticipantsRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{activityType:{type:"string",id:1},activityId:{type:"string",id:2}}},ActivityParticipantsResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{state:{keyType:"string",type:"ActivityStateData",id:1}}},ActivityJoinRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{activityType:{type:"string",id:1},activityId:{type:"string",id:2},lurk:{type:"bool",id:3},state:{keyType:"string",type:"google.protobuf.Value",id:4},autoCreateData:{type:"AutoCreateData",id:5}},nested:{AutoCreateData:{fields:{ephemeral:{type:"bool",id:1},worldPermissions:{rule:"repeated",type:"string",id:3},userPermissions:{rule:"repeated",type:"core.UserPermissionsEntry",id:4},groupPermissions:{keyType:"string",type:"core.PermissionsList",id:5}}}}},ActivityJoinResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},state:{keyType:"string",type:"ActivityStateData",id:2},ephemeral:{type:"bool",id:3},created:{type:"google.protobuf.Timestamp",id:5}}},ActivityLeaveRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.RequestMessage"},fields:{resourceId:{type:"int32",id:1}}},ActivityUpdateStateMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{resourceId:{type:"int32",id:1},set:{keyType:"string",type:"google.protobuf.Value",id:2},complete:{type:"bool",id:3},removed:{rule:"repeated",type:"string",id:4}}},ActivitySessionJoinedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},sessionId:{type:"string",id:2},state:{keyType:"string",type:"google.protobuf.Value",id:3}}},ActivitySessionLeftMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},sessionId:{type:"string",id:2}}},ActivityStateUpdatedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},sessionId:{type:"string",id:2},set:{keyType:"string",type:"google.protobuf.Value",id:3},complete:{type:"bool",id:4},removed:{rule:"repeated",type:"string",id:5}}},ActivityDeletedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1}}},ActivityForceLeaveMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},reason:{type:"string",id:2}}},ActivityStateData:{fields:{state:{keyType:"string",type:"google.protobuf.Value",id:1}}}}},chat:{nested:{PublishChatRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatId:{type:"string",id:1},message:{type:"string",id:2}}},PublishChatResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{eventNumber:{type:"int64",id:1},timestamp:{type:"google.protobuf.Timestamp",id:2}}},RemoteChatMessageMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4},message:{type:"string",id:5}}},CreateChatRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatId:{type:"google.protobuf.StringValue",id:1},chatType:{type:"string",id:2},membership:{type:"string",id:3},name:{type:"string",id:4},topic:{type:"string",id:5},members:{rule:"repeated",type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:6}}},CreateChatResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatId:{type:"string",id:1}}},RemoveChatRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatId:{type:"string",id:1}}},RemoveChatResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},ChatRemovedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatId:{type:"string",id:1}}},JoinChatRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatId:{type:"string",id:1}}},JoinChatResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatInfo:{type:"ChatInfoData",id:1}}},UserJoinedChatMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4}}},AddUserToChatRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatId:{type:"string",id:1},userToAdd:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:2}}},AddUserToChatResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},UserAddedToChatMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4},addedUser:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:5}}},ChatJoinedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatId:{type:"string",id:1}}},LeaveChatRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatId:{type:"string",id:1}}},LeaveChatResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},UserLeftChatMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4}}},RemoveUserFromChatRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatId:{type:"string",id:1},userToRemove:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:2}}},RemoveUserFromChatResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},UserRemovedFromChatMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4},removedUser:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:5}}},ChatLeftMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatId:{type:"string",id:1}}},SetChatNameRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatId:{type:"string",id:1},name:{type:"string",id:2}}},SetChatNameResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},ChatNameSetMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4},name:{type:"string",id:5}}},SetChatTopicRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatId:{type:"string",id:1},topic:{type:"string",id:2}}},SetChatTopicResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},ChatTopicSetMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4},topic:{type:"string",id:5}}},MarkChatEventsSeenRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2}}},MarkChatEventsSeenResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},ChatEventsMarkedSeenMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatId:{type:"string",id:1},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:2},eventNumber:{type:"int64",id:3}}},GetJoinedChatsRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{}},GetJoinedChatsResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatInfo:{rule:"repeated",type:"ChatInfoData",id:1}}},GetChatsRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatIds:{rule:"repeated",type:"string",id:1}}},GetChatsResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatInfo:{rule:"repeated",type:"ChatInfoData",id:1}}},GetDirectChatsRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{userLists:{rule:"repeated",type:"com.convergencelabs.convergence.proto.core.DomainUserIdList",id:1}}},GetDirectChatsResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{chatInfo:{rule:"repeated",type:"ChatInfoData",id:1}}},ChatHistoryRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatId:{type:"string",id:1},offset:{type:"google.protobuf.Int64Value",id:2},limit:{type:"google.protobuf.Int64Value",id:3},startEvent:{type:"google.protobuf.Int64Value",id:4},forward:{type:"google.protobuf.BoolValue",id:5},eventFilter:{rule:"repeated",type:"string",id:6}}},ChatHistoryResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{data:{rule:"repeated",type:"ChatEventData",id:1},startIndex:{type:"int64",id:2},totalResults:{type:"int64",id:3}}},ChatsExistRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{chatIds:{rule:"repeated",type:"string",id:1}}},ChatsExistResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{exists:{rule:"repeated",type:"bool",id:1}}},ChatsSearchRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{searchTerm:{type:"string",id:1},searchFields:{rule:"repeated",type:"string",id:2},types:{rule:"repeated",type:"string",id:3},membership:{type:"string",id:4},offset:{type:"google.protobuf.Int64Value",id:5},limit:{type:"google.protobuf.Int64Value",id:6}}},ChatsSearchResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{data:{rule:"repeated",type:"ChatInfoData",id:1},startIndex:{type:"int64",id:2},totalResults:{type:"int64",id:3}}},ChatMemberData:{fields:{user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1},maxSeenEventNumber:{type:"int64",id:2}}},ChatInfoData:{fields:{id:{type:"string",id:1},chatType:{type:"string",id:2},membership:{type:"string",id:3},name:{type:"string",id:4},topic:{type:"string",id:5},createdTime:{type:"google.protobuf.Timestamp",id:6},lastEventTime:{type:"google.protobuf.Timestamp",id:7},lastEventNumber:{type:"int64",id:8},members:{rule:"repeated",type:"ChatMemberData",id:9}}},ChatCreatedEventData:{fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4},name:{type:"string",id:5},topic:{type:"string",id:6},members:{rule:"repeated",type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:7}}},ChatMessageEventData:{fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4},message:{type:"string",id:5}}},ChatUserJoinedEventData:{fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4}}},ChatUserLeftEventData:{fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4}}},ChatUserAddedEventData:{fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4},addedUser:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:5}}},ChatUserRemovedEventData:{fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4},removedUser:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:5}}},ChatNameChangedEventData:{fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4},name:{type:"string",id:5}}},ChatTopicChangedEventData:{fields:{chatId:{type:"string",id:1},eventNumber:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:4},topic:{type:"string",id:5}}},ChatEventData:{oneofs:{event:{oneof:["created","message","userJoined","userLeft","userAdded","userRemoved","nameChanged","topicChanged"]}},fields:{created:{type:"ChatCreatedEventData",id:1},message:{type:"ChatMessageEventData",id:2},userJoined:{type:"ChatUserJoinedEventData",id:3},userLeft:{type:"ChatUserLeftEventData",id:4},userAdded:{type:"ChatUserAddedEventData",id:5},userRemoved:{type:"ChatUserRemovedEventData",id:6},nameChanged:{type:"ChatNameChangedEventData",id:7},topicChanged:{type:"ChatTopicChangedEventData",id:8}}}}},identity:{nested:{GetUsersRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.IdentityMessage"},fields:{userIds:{rule:"repeated",type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1}}},SearchUsersRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.IdentityMessage"},fields:{fields:{rule:"repeated",type:"UserField",id:1},value:{type:"string",id:2},offset:{type:"google.protobuf.Int32Value",id:3},limit:{type:"google.protobuf.Int32Value",id:4},orderField:{type:"UserField",id:5},ascending:{type:"bool",id:6}}},UserListMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.IdentityMessage"},fields:{userData:{rule:"repeated",type:"com.convergencelabs.convergence.proto.core.DomainUserData",id:1}}},UserGroupsRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.IdentityMessage"},fields:{ids:{rule:"repeated",type:"string",id:1}}},UserGroupsResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.IdentityMessage"},fields:{groupData:{rule:"repeated",type:"UserGroupData",id:1}}},UserGroupsForUsersRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.IdentityMessage"},fields:{users:{rule:"repeated",type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1}}},UserGroupsForUsersResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.IdentityMessage"},fields:{userGroups:{rule:"repeated",type:"UserGroupsEntry",id:1}}},IdentityCacheUpdateMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.IdentityMessage"},fields:{sessions:{keyType:"string",type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1},users:{rule:"repeated",type:"com.convergencelabs.convergence.proto.core.DomainUserData",id:2}}},UserField:{values:{FIELD_NOT_SET:0,USERNAME:1,EMAIL:2,FIRST_NAME:3,LAST_NAME:4,DISPLAY_NAME:5}},UserGroupData:{fields:{id:{type:"string",id:1},description:{type:"string",id:2},members:{rule:"repeated",type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:3}}},UserGroupsEntry:{fields:{user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1},groups:{rule:"repeated",type:"string",id:2}}}}},model:{nested:{OpenRealtimeModelRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{modelId:{type:"google.protobuf.StringValue",id:1},autoCreateId:{type:"google.protobuf.Int32Value",id:2}}},OpenRealtimeModelResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},modelId:{type:"string",id:2},collection:{type:"string",id:3},valueIdPrefix:{type:"string",id:4},version:{type:"int64",id:5},createdTime:{type:"google.protobuf.Timestamp",id:6},modifiedTime:{type:"google.protobuf.Timestamp",id:7},data:{type:"ObjectValue",id:8},connectedClients:{rule:"repeated",type:"string",id:9},resyncingClients:{rule:"repeated",type:"string",id:10},references:{rule:"repeated",type:"ReferenceData",id:11},permissions:{type:"ModelPermissionsData",id:12}}},CloseRealtimeModelRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{resourceId:{type:"int32",id:1}}},CloseRealTimeModelResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},AutoCreateModelConfigRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{autoCreateId:{type:"int32",id:1}}},AutoCreateModelConfigResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{collection:{type:"string",id:1},data:{type:"ObjectValue",id:2},overridePermissions:{type:"bool",id:3},worldPermissions:{type:"ModelPermissionsData",id:4},userPermissions:{rule:"repeated",type:"UserModelPermissionsData",id:5},ephemeral:{type:"bool",id:6}}},RemoteClientClosedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},sessionId:{type:"string",id:2}}},RemoteClientOpenedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},sessionId:{type:"string",id:2}}},ModelForceCloseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},reason:{type:"string",id:2},reasonCode:{type:"int32",id:3}}},CreateRealtimeModelRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{collectionId:{type:"string",id:1},modelId:{type:"google.protobuf.StringValue",id:2},data:{type:"ObjectValue",id:3},createdTime:{type:"google.protobuf.Timestamp",id:4},overrideWorldPermissions:{type:"bool",id:5},worldPermissions:{type:"ModelPermissionsData",id:6},userPermissions:{rule:"repeated",type:"UserModelPermissionsData",id:7}}},CreateRealtimeModelResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{modelId:{type:"string",id:1}}},DeleteRealtimeModelRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{modelId:{type:"string",id:1}}},DeleteRealtimeModelResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},ModelResyncRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{modelId:{type:"string",id:1},contextVersion:{type:"int64",id:2}}},ModelResyncResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},currentVersion:{type:"int64",id:2},permissions:{type:"ModelPermissionsData",id:3}}},ModelResyncClientCompleteMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{resourceId:{type:"int32",id:1},open:{type:"bool",id:2}}},ModelResyncServerCompleteMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},connectedClients:{rule:"repeated",type:"string",id:2},resyncingClients:{rule:"repeated",type:"string",id:3},references:{rule:"repeated",type:"ReferenceData",id:4}}},RemoteClientResyncStartedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},sessionId:{type:"string",id:2}}},RemoteClientResyncCompletedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},sessionId:{type:"string",id:2}}},GetModelPermissionsRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{modelId:{type:"string",id:1}}},GetModelPermissionsResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{overridesCollection:{type:"bool",id:1},worldPermissions:{type:"ModelPermissionsData",id:2},userPermissions:{rule:"repeated",type:"UserModelPermissionsData",id:3}}},SetModelPermissionsRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{modelId:{type:"string",id:1},overrideCollection:{type:"google.protobuf.BoolValue",id:2},worldPermissions:{type:"ModelPermissionsData",id:3},removeAllUserPermissionsBeforeSet:{type:"bool",id:4},setUserPermissions:{rule:"repeated",type:"UserModelPermissionsData",id:5},removedUserPermissions:{rule:"repeated",type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:6}}},SetModelPermissionsResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{}},ModelPermissionsChangedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},permissions:{type:"ModelPermissionsData",id:2}}},ModelsQueryRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{query:{type:"string",id:1}}},ModelsQueryResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{models:{rule:"repeated",type:"ModelResult",id:1},offset:{type:"int64",id:2},totalResults:{type:"int64",id:3}},nested:{ModelResult:{fields:{collectionId:{type:"string",id:1},modelId:{type:"string",id:2},createdTime:{type:"google.protobuf.Timestamp",id:3},modifiedTime:{type:"google.protobuf.Timestamp",id:4},version:{type:"int64",id:5},data:{type:"google.protobuf.Struct",id:6}}}}},OperationSubmissionMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{resourceId:{type:"int32",id:1},sequenceNumber:{type:"int32",id:2},contextVersion:{type:"int64",id:3},operation:{type:"OperationData",id:4}}},OperationAcknowledgementMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},sequenceNumber:{type:"int32",id:2},version:{type:"int64",id:3},timestamp:{type:"google.protobuf.Timestamp",id:4}}},RemoteOperationMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},sessionId:{type:"string",id:2},contextVersion:{type:"int64",id:3},timestamp:{type:"google.protobuf.Timestamp",id:4},operation:{type:"OperationData",id:5}}},ShareReferenceMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{resourceId:{type:"int32",id:1},valueId:{type:"google.protobuf.StringValue",id:2},key:{type:"string",id:3},references:{type:"ReferenceValues",id:4},version:{type:"int64",id:5}}},RemoteReferenceSharedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},valueId:{type:"google.protobuf.StringValue",id:2},key:{type:"string",id:3},references:{type:"ReferenceValues",id:4},sessionId:{type:"string",id:5}}},UnshareReferenceMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{resourceId:{type:"int32",id:1},valueId:{type:"google.protobuf.StringValue",id:2},key:{type:"string",id:3}}},RemoteReferenceUnsharedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},valueId:{type:"google.protobuf.StringValue",id:2},key:{type:"string",id:3},sessionId:{type:"string",id:4}}},SetReferenceMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{resourceId:{type:"int32",id:1},valueId:{type:"google.protobuf.StringValue",id:2},key:{type:"string",id:3},references:{type:"ReferenceValues",id:4},version:{type:"int64",id:5}}},RemoteReferenceSetMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},valueId:{type:"google.protobuf.StringValue",id:2},key:{type:"string",id:3},references:{type:"ReferenceValues",id:4},sessionId:{type:"string",id:5}}},ClearReferenceMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{resourceId:{type:"int32",id:1},valueId:{type:"google.protobuf.StringValue",id:2},key:{type:"string",id:3}}},RemoteReferenceClearedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{resourceId:{type:"int32",id:1},valueId:{type:"google.protobuf.StringValue",id:2},key:{type:"string",id:3},sessionId:{type:"string",id:4}}},ModelOfflineSubscriptionChangeRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{subscribe:{rule:"repeated",type:"ModelOfflineSubscriptionData",id:1},unsubscribe:{rule:"repeated",type:"string",id:2},all:{type:"bool",id:3}},nested:{ModelOfflineSubscriptionData:{fields:{modelId:{type:"string",id:1},currentVersion:{type:"int64",id:2},currentPermissions:{type:"ModelPermissionsData",id:3}}}}},OfflineModelUpdatedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},oneofs:{action:{oneof:["deleted","permissionRevoked","updated","initial"]}},fields:{modelId:{type:"string",id:1},deleted:{type:"bool",id:2},permissionRevoked:{type:"bool",id:3},updated:{type:"OfflineModelUpdateData",id:4},initial:{type:"OfflineModelInitialData",id:5}},nested:{OfflineModelInitialData:{fields:{collection:{type:"string",id:1},valueIdPrefix:{type:"string",id:2},model:{type:"ModelUpdateData",id:3},permissions:{type:"ModelPermissionsData",id:4}}},OfflineModelUpdateData:{fields:{model:{type:"ModelUpdateData",id:1},permissions:{type:"ModelPermissionsData",id:2}}},ModelUpdateData:{fields:{version:{type:"int64",id:1},createdTime:{type:"google.protobuf.Timestamp",id:2},modifiedTime:{type:"google.protobuf.Timestamp",id:3},data:{type:"ObjectValue",id:4}}}}},HistoricalDataRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{modelId:{type:"string",id:1}}},HistoricalDataResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{collectionId:{type:"string",id:1},data:{type:"ObjectValue",id:2},version:{type:"int64",id:3},createdTime:{type:"google.protobuf.Timestamp",id:4},modifiedTime:{type:"google.protobuf.Timestamp",id:5}}},HistoricalOperationRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{modelId:{type:"string",id:1},first:{type:"int64",id:2},last:{type:"int64",id:3}}},HistoricalOperationsResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{operations:{rule:"repeated",type:"ModelOperationData",id:1}},nested:{ModelOperationData:{fields:{modelId:{type:"string",id:1},version:{type:"int64",id:2},timestamp:{type:"google.protobuf.Timestamp",id:3},sessionId:{type:"string",id:4},operation:{type:"AppliedOperationData",id:5}}}}},ModelGetVersionAtTimeRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ClientMessage"},fields:{modelId:{type:"string",id:1},targetTime:{type:"google.protobuf.Timestamp",id:2}}},ModelGetVersionAtTimeResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.ServerMessage"},fields:{versionAtTime:{type:"int64",id:1}}},ObjectValue:{fields:{id:{type:"string",id:1},children:{keyType:"string",type:"DataValue",id:2}}},ArrayValue:{fields:{id:{type:"string",id:1},children:{rule:"repeated",type:"DataValue",id:2}}},BooleanValue:{fields:{id:{type:"string",id:1},value:{type:"bool",id:2}}},DoubleValue:{fields:{id:{type:"string",id:1},value:{type:"double",id:2}}},NullValue:{fields:{id:{type:"string",id:1}}},StringValue:{fields:{id:{type:"string",id:1},value:{type:"string",id:2}}},DateValue:{fields:{id:{type:"string",id:1},value:{type:"google.protobuf.Timestamp",id:2}}},DataValue:{oneofs:{value:{oneof:["objectValue","arrayValue","booleanValue","doubleValue","nullValue","stringValue","dateValue"]}},fields:{objectValue:{type:"ObjectValue",id:1},arrayValue:{type:"ArrayValue",id:2},booleanValue:{type:"BooleanValue",id:3},doubleValue:{type:"DoubleValue",id:4},nullValue:{type:"NullValue",id:5},stringValue:{type:"StringValue",id:6},dateValue:{type:"DateValue",id:7}}},StringSpliceOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},index:{type:"int32",id:3},deleteCount:{type:"int32",id:4},insertedValue:{type:"string",id:5}}},StringSetOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},value:{type:"string",id:3}}},ArrayInsertOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},index:{type:"int32",id:3},value:{type:"DataValue",id:4}}},ArrayRemoveOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},index:{type:"int32",id:3}}},ArrayReplaceOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},index:{type:"int32",id:3},value:{type:"DataValue",id:4}}},ArrayMoveOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},fromIndex:{type:"int32",id:3},toIndex:{type:"int32",id:4}}},ArraySetOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},values:{rule:"repeated",type:"DataValue",id:3}}},ObjectAddPropertyOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},key:{type:"string",id:3},value:{type:"DataValue",id:4}}},ObjectSetPropertyOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},key:{type:"string",id:3},value:{type:"DataValue",id:4}}},ObjectRemovePropertyOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},key:{type:"string",id:3}}},ObjectSetOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},values:{keyType:"string",type:"DataValue",id:3}}},NumberDeltaOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},delta:{type:"double",id:3}}},NumberSetOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},value:{type:"double",id:3}}},BooleanSetOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},value:{type:"bool",id:3}}},DateSetOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},value:{type:"google.protobuf.Timestamp",id:3}}},DiscreteOperationData:{oneofs:{operation:{oneof:["stringSpliceOperation","stringSetOperation","arrayInsertOperation","arrayRemoveOperation","arrayReplaceOperation","arrayMoveOperation","arraySetOperation","objectAddPropertyOperation","objectSetPropertyOperation","objectRemovePropertyOperation","objectSetOperation","numberDeltaOperation","numberSetOperation","booleanSetOperation","dateSetOperation"]}},fields:{stringSpliceOperation:{type:"StringSpliceOperationData",id:1},stringSetOperation:{type:"StringSetOperationData",id:2},arrayInsertOperation:{type:"ArrayInsertOperationData",id:3},arrayRemoveOperation:{type:"ArrayRemoveOperationData",id:4},arrayReplaceOperation:{type:"ArrayReplaceOperationData",id:5},arrayMoveOperation:{type:"ArrayMoveOperationData",id:6},arraySetOperation:{type:"ArraySetOperationData",id:7},objectAddPropertyOperation:{type:"ObjectAddPropertyOperationData",id:8},objectSetPropertyOperation:{type:"ObjectSetPropertyOperationData",id:9},objectRemovePropertyOperation:{type:"ObjectRemovePropertyOperationData",id:10},objectSetOperation:{type:"ObjectSetOperationData",id:11},numberDeltaOperation:{type:"NumberDeltaOperationData",id:12},numberSetOperation:{type:"NumberSetOperationData",id:13},booleanSetOperation:{type:"BooleanSetOperationData",id:14},dateSetOperation:{type:"DateSetOperationData",id:15}}},CompoundOperationData:{fields:{operations:{rule:"repeated",type:"DiscreteOperationData",id:1}}},OperationData:{oneofs:{operation:{oneof:["discreteOperation","compoundOperation"]}},fields:{discreteOperation:{type:"DiscreteOperationData",id:1},compoundOperation:{type:"CompoundOperationData",id:2}}},ModelPermissionsData:{fields:{read:{type:"bool",id:1},write:{type:"bool",id:2},remove:{type:"bool",id:3},manage:{type:"bool",id:4}}},UserModelPermissionsData:{fields:{user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1},permissions:{type:"ModelPermissionsData",id:2}}},AppliedStringSpliceOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},index:{type:"int32",id:3},deletedValue:{type:"string",id:4},insertedValue:{type:"string",id:5}}},AppliedStringSetOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},value:{type:"string",id:3},oldValue:{type:"string",id:4}}},AppliedArrayInsertOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},index:{type:"int32",id:3},value:{type:"DataValue",id:4}}},AppliedArrayRemoveOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},index:{type:"int32",id:3},oldValue:{type:"DataValue",id:4}}},AppliedArrayReplaceOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},index:{type:"int32",id:3},value:{type:"DataValue",id:4},oldValue:{type:"DataValue",id:5}}},AppliedArrayMoveOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},fromIndex:{type:"int32",id:3},toIndex:{type:"int32",id:4}}},AppliedArraySetOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},values:{rule:"repeated",type:"DataValue",id:3},oldValues:{rule:"repeated",type:"DataValue",id:4}}},AppliedObjectAddPropertyOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},key:{type:"string",id:3},value:{type:"DataValue",id:4}}},AppliedObjectSetPropertyOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},key:{type:"string",id:3},value:{type:"DataValue",id:4},oldValue:{type:"DataValue",id:5}}},AppliedObjectRemovePropertyOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},key:{type:"string",id:3},oldValue:{type:"DataValue",id:4}}},AppliedObjectSetOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},values:{keyType:"string",type:"DataValue",id:3},oldValues:{keyType:"string",type:"DataValue",id:4}}},AppliedNumberDeltaOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},delta:{type:"double",id:3}}},AppliedNumberSetOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},value:{type:"double",id:3},oldValue:{type:"double",id:4}}},AppliedBooleanSetOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},value:{type:"bool",id:3},oldValue:{type:"bool",id:4}}},AppliedDateSetOperationData:{fields:{id:{type:"string",id:1},noOp:{type:"bool",id:2},value:{type:"google.protobuf.Timestamp",id:3},oldValue:{type:"google.protobuf.Timestamp",id:4}}},AppliedDiscreteOperationData:{oneofs:{operation:{oneof:["stringSpliceOperation","stringSetOperation","arrayInsertOperation","arrayRemoveOperation","arrayReplaceOperation","arrayMoveOperation","arraySetOperation","objectAddPropertyOperation","objectSetPropertyOperation","objectRemovePropertyOperation","objectSetOperation","numberDeltaOperation","numberSetOperation","booleanSetOperation","dateSetOperation"]}},fields:{stringSpliceOperation:{type:"AppliedStringSpliceOperationData",id:1},stringSetOperation:{type:"AppliedStringSetOperationData",id:2},arrayInsertOperation:{type:"AppliedArrayInsertOperationData",id:3},arrayRemoveOperation:{type:"AppliedArrayRemoveOperationData",id:4},arrayReplaceOperation:{type:"AppliedArrayReplaceOperationData",id:5},arrayMoveOperation:{type:"AppliedArrayMoveOperationData",id:6},arraySetOperation:{type:"AppliedArraySetOperationData",id:7},objectAddPropertyOperation:{type:"AppliedObjectAddPropertyOperationData",id:8},objectSetPropertyOperation:{type:"AppliedObjectSetPropertyOperationData",id:9},objectRemovePropertyOperation:{type:"AppliedObjectRemovePropertyOperationData",id:10},objectSetOperation:{type:"AppliedObjectSetOperationData",id:11},numberDeltaOperation:{type:"AppliedNumberDeltaOperationData",id:12},numberSetOperation:{type:"AppliedNumberSetOperationData",id:13},booleanSetOperation:{type:"AppliedBooleanSetOperationData",id:14},dateSetOperation:{type:"AppliedDateSetOperationData",id:15}}},AppliedCompoundOperationData:{fields:{operations:{rule:"repeated",type:"AppliedDiscreteOperationData",id:1}}},AppliedOperationData:{oneofs:{operation:{oneof:["discreteOperation","compoundOperation"]}},fields:{discreteOperation:{type:"AppliedDiscreteOperationData",id:1},compoundOperation:{type:"AppliedCompoundOperationData",id:2}}},IndexRange:{fields:{startIndex:{type:"int32",id:1},endIndex:{type:"int32",id:2}}},IndexRangeList:{fields:{values:{rule:"repeated",type:"IndexRange",id:1}}},ReferenceValues:{oneofs:{values:{oneof:["indices","ranges","properties","elements"]}},fields:{indices:{type:"com.convergencelabs.convergence.proto.core.Int32List",id:1},ranges:{type:"IndexRangeList",id:2},properties:{type:"com.convergencelabs.convergence.proto.core.StringList",id:3},elements:{type:"com.convergencelabs.convergence.proto.core.StringList",id:4}}},ReferenceData:{fields:{sessionId:{type:"string",id:1},valueId:{type:"google.protobuf.StringValue",id:2},key:{type:"string",id:3},reference:{type:"ReferenceValues",id:4}}}}},presence:{nested:{PresenceRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.PresenceMessage"},fields:{users:{rule:"repeated",type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1}}},PresenceResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.PresenceMessage"},fields:{userPresences:{rule:"repeated",type:"UserPresenceData",id:1}}},SubscribePresenceRequestMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.PresenceMessage"},fields:{users:{rule:"repeated",type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1}}},SubscribePresenceResponseMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.PresenceMessage"},fields:{userPresences:{rule:"repeated",type:"UserPresenceData",id:1}}},UnsubscribePresenceMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.PresenceMessage"},fields:{users:{rule:"repeated",type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1}}},PresenceSetStateMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.PresenceMessage"},fields:{state:{keyType:"string",type:"google.protobuf.Value",id:1}}},PresenceRemoveStateMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.PresenceMessage"},fields:{keys:{rule:"repeated",type:"string",id:1}}},PresenceClearStateMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.PresenceMessage"},fields:{}},PresenceStateSetMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.PresenceMessage"},fields:{user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1},state:{keyType:"string",type:"google.protobuf.Value",id:2}}},PresenceStateRemovedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.PresenceMessage"},fields:{user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1},keys:{rule:"repeated",type:"string",id:2}}},PresenceStateClearedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.PresenceMessage"},fields:{user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1}}},PresenceAvailabilityChangedMessage:{options:{"(scalapb.message).extends":"com.convergencelabs.convergence.proto.PresenceMessage"},fields:{user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1},available:{type:"bool",id:2}}},UserPresenceData:{fields:{user:{type:"com.convergencelabs.convergence.proto.core.DomainUserIdData",id:1},available:{type:"bool",id:2},state:{keyType:"string",type:"google.protobuf.Value",id:3}}}}}}}}}}}}},google:{nested:{protobuf:{nested:{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}}}}},ra={nested:ia},oa=Object.freeze({__proto__:null,nested:ia,default:ra}),sa=Ds.Root.fromJSON(oa),aa=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"decode",value:function(t){var n=e._convergenceMessageType.decode(t);return e._convergenceMessageType.toObject(n)}},{key:"encode",value:function(t){var n=e._convergenceMessageType.fromObject(t);return e._convergenceMessageType.encode(n).finish()}}]),e}();aa._convergenceMessageType=sa.lookupType("com.convergencelabs.convergence.proto.ConvergenceMessage");var la,ca={MODEL_ALREADY_EXISTS:"model_already_exists",REQUEST_TIMEOUT:"request_timeout",CONNECTION_FAILED:"connection_failed",AUTHENTICATION_FAILED:"authentication_failed",OFFLINE:"offline",CHAT_NOT_JOINED:"chat_not_joined"};Ls.make(ca),function(e){e.NORMAL="normal",e.CONVERGENCE="convergence",e.ANONYMOUS="anonymous"}(la||(la={}));var ua=function(){function e(t,n){Si(this,e),this.userType=t,this.username=n,Us.assertString(n,"username"),this._guid=e.guid(this.userType,this.username),Object.freeze(this)}return Oi(e,[{key:"toGuid",value:function(){return this._guid}},{key:"equals",value:function(e){return this.username===e.username&&this.userType===e.userType}}],[{key:"normal",value:function(t){return new e(la.NORMAL,t)}},{key:"anonymous",value:function(t){return new e(la.ANONYMOUS,t)}},{key:"convergence",value:function(t){return new e(la.CONVERGENCE,t)}},{key:"guid",value:function(e,t){return"".concat(e,":").concat(t)}},{key:"fromGuid",value:function(t){Us.assertNonEmptyString(t,"guid");var n=t.indexOf(":");if(n<0)throw new Error("Invalid guid value. Not separator found: "+t);var i=e.toDomainUserType(t.substring(0,n));return new e(i,t.substring(n+1,t.length))}},{key:"toDomainUserType",value:function(e){switch(e){case la.NORMAL:return la.NORMAL;case la.CONVERGENCE:return la.CONVERGENCE;case la.ANONYMOUS:return la.ANONYMOUS;default:throw new Js("Invalid guid value. Unrecognized user type: "+e)}}},{key:"toDomainUserId",value:function(t){return e.of(t)}},{key:"of",value:function(t){return t instanceof e?t:e.normal(t)}}]),e}(),da=Oi((function e(t,n,i,r,o,s){Si(this,e),this.userType=t,this.username=n,this.firstName=i,this.lastName=r,this.displayName=o,this.email=s,this.anonymous=t===la.ANONYMOUS,this.convergence=t===la.CONVERGENCE,this.normal=t===la.NORMAL,this.userId=new ua(this.userType,this.username),Object.freeze(this)})),ha=Oi((function e(t,n,i){Si(this,e),this.id=t,this.description=n,this.members=i,Object.freeze(this)}));function fa(e){switch(e){case"username":return 1;case"email":return 2;case"firstName":return 3;case"lastName":return 4;case"displayName":return 5;default:throw new Js("Invalid user field: "+e)}}function pa(e){return new da(Ia(e.userId.userType),e.userId.username,Ea(e.firstName),Ea(e.lastName),Ea(e.displayName),Ea(e.email))}var ga=["username","email","firstName","lastName","displayName"],ma=function(){function e(t){Si(this,e),this._connection=t}return Oi(e,[{key:"session",value:function(){return this._connection.session()}},{key:"profile",value:function(){return this.user(this._connection.session().user().userId)}},{key:"userExists",value:function(e){return this.user(e).then((function(e){return void 0!==e}))}},{key:"user",value:function(e){return Us.isNotSet(e)?Promise.reject("Must specify a user id."):this.users([e]).then((function(e){return 0===e.length?Promise.resolve(void 0):1===e.length?Promise.resolve(e[0]):Promise.reject(new Error("Error getting user."))}))}},{key:"users",value:function(e){if(Us.assertArray(e,"users"),0===e.length)return Promise.resolve([]);var t=e.map((function(e){return e instanceof ua?e:ua.normal(e)})),n={usersGetRequest:{userIds:Array.from(new Set(t)).map(Da)}};return this._connection.request(n).then(va)}},{key:"search",value:function(e){if(void 0===e.fields||null===e.fields||Array.isArray(e.fields)&&0===e.fields.length)return Promise.reject(new Error("Must specify at least one field to search"));if(void 0===e.term||null===e.term)return Promise.reject(new Error("Must specify a search term"));var t=Array.isArray(e.fields)?e.fields:[e.fields],n=e.orderBy||{field:"username",ascending:!0},i={userSearchRequest:{fields:this._processSearchFields(t),value:e.term,offset:Sa(e.offset),limit:Sa(e.limit),orderField:fa(n.field||"username"),ascending:n.ascending}};return this._connection.request(i).then(va)}},{key:"groups",value:function(e){Us.assertNonEmptyArray(e,"ids");var t={userGroupsRequest:{ids:e}};return this._connection.request(t).then((function(e){return e.userGroupsResponse.groupData.map((function(e){return new ha((t=e).id,t.description,t.members?t.members.map((function(e){return Ta(e).username})):[]);var t}))}))}},{key:"group",value:function(e){return this.groups([e]).then((function(e){return e[0]}))}},{key:"groupsForUser",value:function(e){return this.groupsForUsers([e]).then((function(t){return t[e]}))}},{key:"groupsForUsers",value:function(e){var t={userGroupsForUsersRequest:{users:e.map((function(e){return Da(ua.normal(e))}))}};return this._connection.request(t).then((function(e){var t=e.userGroupsForUsersResponse,n={};return t.userGroups.forEach((function(e){if(e.hasOwnProperty("user")){var t=Ta(e.user);n[t.username]=e.groups}})),n}))}},{key:"_processSearchFields",value:function(e){var t=[];return e.forEach((function(e){if(ga.indexOf(e)<0)throw new Error("Invalid user search field: "+e);var n=fa(e);t.indexOf(n)<0&&t.push(n)})),t}}]),e}();function va(e){return ka(e.userListResponse.userData).map(pa)}var ya=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"objectToMap",value:function(e){var t=new Map;return Object.keys(e).forEach((function(n){return t.set(n,e[n])})),t}},{key:"mapToObject",value:function(e){var t={};return e.forEach((function(e,n){return t[n]=e})),t}},{key:"coerceToObject",value:function(t){return void 0===t?{}:t instanceof Map?e.mapToObject(t):t}},{key:"coerceToMap",value:function(t){return void 0===t?new Map:t instanceof Map?t:e.objectToMap(t)}},{key:"toStringMap",value:function(t){return t?t instanceof Map?t:e.objectToMap(t):t}}]),e}(),ba=function(){function e(){Si(this,e),this._map=new Map}return Oi(e,[{key:"get",value:function(e){return this._map.get(ua.of(e).toGuid())}},{key:"set",value:function(e,t){this._map.set(ua.of(e).toGuid(),t)}},{key:"has",value:function(e){return this._map.has(ua.of(e).toGuid())}},{key:"delete",value:function(e){this._map.delete(ua.of(e).toGuid())}},{key:"keys",value:function(){return Array.from(this._map.keys()).map(ua.fromGuid)}},{key:"entries",value:function(){return Array.from(this._map.entries()).map((function(e){return[ua.fromGuid(e[0]),e[1]]}))}},{key:"size",value:function(){return this._map.size}},{key:"forEach",value:function(e){this._map.forEach((function(t,n){e(t,ua.fromGuid(n))}))}},{key:"toGuidObjectMap",value:function(){var e={};return this._map.forEach((function(t,n){e[n]=t})),e}}],[{key:"of",value:function(t){if(Fs.isObject(t)&&(t=ya.coerceToMap(t)),t instanceof e||Fs.isMap(t)){var n=new e;return t.forEach((function(e,t){n.set(t,e)})),n}throw new Js("Can not convert the supplied value to a DomainUserIdMap")}},{key:"fromGuidObjectMap",value:function(t){var n=new e;return Bs(t,(function(e,t){n.set(ua.fromGuid(e),t)})),n}}]),e}();function wa(e){return null===e||void 0===e?0:"number"===typeof e?e:e.toNumber()}function _a(e){return e||!1}function xa(e){return e||""}function ka(e){return e||[]}function Ca(e){return e||{}}function Sa(e){return void 0===e?null:{value:e}}function Ea(e){return e?e.value:null}function Oa(e){var t=wa(e.seconds),n=wa(e.nanos),i=Math.round(n/1e6);return new Date(1e3*t+i)}function Aa(e){var t=e.getTime(),n=Math.floor(t/1e3);return{seconds:n,nanos:1e6*(t-1e3*n)}}function Ma(e){if("undefined"!==typeof e.nullValue)return null;if("undefined"!==typeof e.boolValue)return _a(e.boolValue);if("undefined"!==typeof e.stringValue)return xa(e.stringValue);if("undefined"!==typeof e.numberValue)return wa(e.numberValue);if("undefined"!==typeof e.structValue)return js(Ca(e.structValue.fields),Ma);if("undefined"!==typeof e.listValue)return ka(e.listValue.values).map(Ma);throw new Js("Could not deserialize json value: "+JSON.stringify(e))}function Ra(e){if(null===e)return{nullValue:0};if("boolean"===typeof e)return{boolValue:e};if("string"===typeof e)return{stringValue:e};if("number"===typeof e)return{numberValue:e};if(Array.isArray(e))return{listValue:{values:e.map(Ra)}};if(void 0!==e&&e.constructor===Object)return{structValue:{fields:js(e,Ra)}};if(void 0!==e)throw new Js("Can not serialize unknown data type: "+e)}function Ta(e){return new ua(Ia(e.userType),xa(e.username))}function Da(e){return{userType:La(e.userType),username:e.username}}function Ia(e){switch(e){case 0:case void 0:return la.NORMAL;case 1:return la.CONVERGENCE;case 2:return la.ANONYMOUS}}function La(e){switch(e){case la.NORMAL:return 0;case la.CONVERGENCE:return 1;case la.ANONYMOUS:return 2}}var Na=function(e){Mi(n,e);var t=Ni(n);function n(e,i){var r;return Si(this,n),(r=t.call(this))._nextRequestId=0,r._closeRequested=!1,r._connected=!1,r._logger=Ks.logger("protocol"),r._protocolConfig=i,r._socket=e,r._socket.on(na.Events.MESSAGE,(function(e){r._onSocketMessage(e.message)})),r._socket.on(na.Events.ERROR,(function(e){r._onSocketError(e.error)})),r._socket.on(na.Events.CLOSE,(function(e){r._connected&&(r._closeRequested?r._onSocketClosed(e.reason):r._onSocketDropped())})),r._requests=new Map,r}return Oi(n,[{key:"connect",value:function(){var e=this;return this._socket.open().then((function(){e._connected=!0;var t={sendPing:function(){e.sendMessage({ping:{}})},onTimeout:function(){e.abort("heartbeat pong timeout").then((function(){e._logger.debug("Connection aborted after pong timeout")})).catch((function(t){e._logger.error("Error aborting connection after a pong timeout",t)}))}};e._heartbeatHelper=new Ys(t,e._protocolConfig.heartbeatConfig.pingInterval,e._protocolConfig.heartbeatConfig.pongTimeout),e._protocolConfig.heartbeatConfig.enabled&&e._heartbeatHelper.start()}))}},{key:"send",value:function(e){this.sendMessage(e)}},{key:"request",value:function(e,t){var n=this,i=this._nextRequestId;this._nextRequestId++;var r=new ta,o=1e3*(void 0!==t?t:this._protocolConfig.defaultRequestTimeout),s=setTimeout((function(){var t=n._requests.get(i);t&&t.replyDeferred.reject(new Js("A request timeout occurred.",ca.REQUEST_TIMEOUT,{message:e}))}),o);return this._requests.set(i,{reqId:i,replyDeferred:r,timeoutTask:s}),this.sendMessage(Object.assign(Object.assign({},e),{requestId:{value:i}})),r.promise()}},{key:"abort",value:function(e){this._heartbeatHelper&&this._heartbeatHelper.started&&this._heartbeatHelper.stop();var t=this._socket.isOpen()||this._socket.isConnecting()?this._socket.terminate(e):Promise.resolve();return this._onSocketDropped(),t}},{key:"close",value:function(){return this._closeRequested=!0,this.removeAllListeners(),void 0!==this._heartbeatHelper&&this._heartbeatHelper.started&&this._heartbeatHelper.stop(),this._requests.forEach((function(e){clearTimeout(e.timeoutTask),e.replyDeferred.reject(new Error("The connection was closed while waiting for a reply to a request message."))})),this._socket.close()}},{key:"sendMessage",value:function(e){e.ping||e.pong?this._logger.trace((function(){return"SND: "+JSON.stringify(e)})):this._logger.debug((function(){return"SND: "+JSON.stringify(e)}));try{var t=aa.encode(e);this._socket.send(t)}catch(Lp){throw this._onSocketError(Lp),Lp}}},{key:"_onSocketMessage",value:function(e){var t=aa.decode(e);this._protocolConfig.heartbeatConfig.enabled&&this._heartbeatHelper&&this._heartbeatHelper.messageReceived(),t.ping||t.pong?this._logger.trace((function(){return"RCV: "+JSON.stringify(t)})):this._logger.debug((function(){return"RCV: "+JSON.stringify(t)})),t.ping?this._onPing():t.pong||(void 0!==t.requestId?this._onRequest(t):void 0!==t.responseId?this._onReply(t):this._onNormalMessage(t))}},{key:"_onSocketClosed",value:function(e){this._connected=!1,this._heartbeatHelper&&this._heartbeatHelper.started&&this._heartbeatHelper.stop();var t={name:n.Events.CLOSED,reason:e};this._emitEvent(t)}},{key:"_onSocketDropped",value:function(){this._connected=!1,this._heartbeatHelper&&this._heartbeatHelper.started&&this._heartbeatHelper.stop(),this._emitEvent({name:n.Events.DROPPED})}},{key:"_onSocketError",value:function(e){var t={name:n.Events.ERROR,error:e};this._emitEvent(t)}},{key:"_onNormalMessage",value:function(e){var t=this;Promise.resolve().then((function(){var n={name:"message",request:!1,message:e};t._emitEvent(n)}))}},{key:"_onRequest",value:function(e){var t=e.requestId.value||0,n={name:"message",request:!0,callback:new $a(t,this),message:e};this._emitEvent(n)}},{key:"_onReply",value:function(e){var t=e.responseId.value||0,n=this._requests.get(t);if(this._requests.delete(t),n)if(clearTimeout(n.timeoutTask),e.error){var i=e.error,r=js(Ca(i.details),Ma);n.replyDeferred.reject(new Qs(i.message,i.code,r))}else n.replyDeferred.resolve(e)}},{key:"_onPing",value:function(){this.sendMessage({pong:{}})}}]),n}(Xs);Na.Events={MESSAGE:"message",ERROR:"error",CLOSED:"close",DROPPED:"dropped"};var Fa,$a=function(){function e(t,n){Si(this,e),this._reqId=t,this._protocolConnection=n}return Oi(e,[{key:"reply",value:function(e){this._protocolConnection.sendMessage(Object.assign(Object.assign({},e),{responseId:{value:this._reqId}}))}},{key:"unknownError",value:function(){this.unexpectedError("An unknown error has occurred")}},{key:"unexpectedError",value:function(e){this.expectedError("unknown",e)}},{key:"expectedError",value:function(e,t,n){var i={code:e,message:t,details:n=n||{}};this._protocolConnection.sendMessage({error:i,responseId:{value:this._reqId}})}}]),e}(),Pa=function(){function e(t,n,i,r,o){Si(this,e),this._domain=t,this._sessionId=r,this._user=i,this._reconnectToken=o,this._connection=n}return Oi(e,[{key:"domain",value:function(){return this._domain}},{key:"sessionId",value:function(){return this._sessionId}},{key:"user",value:function(){return this._user}},{key:"reconnectToken",value:function(){return this._reconnectToken}},{key:"isConnected",value:function(){return this._connection.isConnected()}},{key:"assertOnline",value:function(){if(!this.isConnected()){throw new Js("Cannot perform this action while offline",ca.OFFLINE)}}},{key:"_setSessionId",value:function(e){this._sessionId=e}},{key:"_setUser",value:function(e){this._user=e}},{key:"_setReconnectToken",value:function(e){this._reconnectToken=e}}]),e}(),ja=function(){function e(){Si(this,e),this._deferred=new ta,this._canceled=!1,this._password=null,this._jwt=null,this._displayName=null}return Oi(e,[{key:"challenge",value:function(){var e=this;return{password:function(t){e._handlePassword(t)},jwt:function(t){e._handleJwt(t)},anonymous:function(t){e._handleAnonymous(t)},cancel:function(){e._cancel()}}}},{key:"fulfilled",value:function(){return this._deferred.promise()}},{key:"isCompleted",value:function(){return this._completed}},{key:"isPassword",value:function(){return null!==this._password}},{key:"isJwt",value:function(){return null!==this._jwt}},{key:"isAnonymous",value:function(){return null!==this._displayName}},{key:"isCanceled",value:function(){return this._canceled}},{key:"getPassword",value:function(){return this._password}},{key:"getJwt",value:function(){return this._jwt}},{key:"getDisplayName",value:function(){return this._displayName}},{key:"_handlePassword",value:function(e){var t=this;this._completed=!0,this._resolveValue(e).then((function(e){t._password=e,t._deferred.resolve()}))}},{key:"_handleJwt",value:function(e){var t=this;this._completed=!0,this._resolveValue(e).then((function(e){t._jwt=e,t._deferred.resolve()}))}},{key:"_handleAnonymous",value:function(e){var t=this;this._completed=!0,this._resolveValue(e).then((function(e){t._displayName=e,t._deferred.resolve()}))}},{key:"_cancel",value:function(){this._completed=!0,this._canceled=!0,this._deferred.resolve()}},{key:"_resolveValue",value:function(e){try{return Fs.isFunction(e)?Promise.resolve(e()):Fs.isFunction(e.then)?e:Promise.resolve(e)}catch(Lp){return Promise.reject(Lp)}}}]),e}();!function(e){e.ANONYMOUS="anonymous",e.PASSWORD="password",e.JWT="jwt",e.RECONNECT="reconnect"}(Fa||(Fa={}));var Ba=function(){function e(t,n){if(Si(this,e),t<1)throw new Error;if(n.length<2)throw new Error;this._symbols=n,this._length=t}return Oi(e,[{key:"nextString",value:function(){for(var e="",t=0;t<this._length;t++)e+=this._symbols.charAt(Math.floor(Math.random()*this._length));return e}}]),e}();Ba.UpperCaseLetters="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Ba.LowerCaseLetters=Ba.UpperCaseLetters.toLowerCase(),Ba.Digits="0123456789",Ba.AlphaNumeric=Ba.UpperCaseLetters+Ba.LowerCaseLetters+Ba.Digits,Ba.Base64=Ba.AlphaNumeric+"/+";var za,Ua=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;Si(this,n),(o=t.call(this))._logger=Ks.logger("connection"),o._onWindowOnline=function(e){o._logger.debug((function(){return"Browser connectivity changed, restarting connection schedule."})),o._connectionState===za.CONNECTING&&(o._connectionAttempts=0,o._attemptConnection())},o._scheduleConnectionTimeout=function(){o._clearConnectionTimeout();var e=1e3*o._options.connectionTimeout;o._connectionTimeoutTask=setTimeout(o._onConnectionTimeout,e)},o._clearConnectionTimeout=function(){null!==o._connectionTimeoutTask&&(clearTimeout(o._connectionTimeoutTask),o._connectionTimeoutTask=null)},o._onConnectionTimeout=function(){o._protocolConnection.abort("connection timeout exceeded").catch((function(e){return o._logger.error("error aborting connection after a connection timeout",e)}))},o._url=e.trim().toLowerCase();if(!/^(https?|wss?):\/{2}.+\/.+\/.+/g.test(o._url))throw new Error("Invalid domain connection url: ".concat(o._url));o._options=r,o._url=e,o._connectionAttempts=0,o._connectionState=za.DISCONNECTED,o._connectionTimeoutTask=null,o._connectionAttemptTask=null,o._initialConnection=!0,o._protocolConnection=null,o._protocolConnectionSubscription=null,o._connectionRequestGenerator=null,o._authMethod=null;var s="offline:"+n._SessionIdGenerator.nextString();return o._session=new Pa(i,Ii(o),null,s,null),"undefined"!==typeof window&&window.addEventListener("online",o._onWindowOnline),o}return Oi(n,[{key:"url",value:function(){return this._url}},{key:"session",value:function(){return this._session}},{key:"disconnect",value:function(){var e=this;return this._connectionRequestGenerator=null,this._authMethod=null,null!==this._connectionTimeoutTask&&(clearTimeout(this._connectionTimeoutTask),this._connectionTimeoutTask=null),null!==this._connectionAttemptTask&&(clearTimeout(this._connectionAttemptTask),this._connectionAttemptTask=null),null!==this._connectionDeferred&&(this._connectionDeferred.reject(new Error("Connection canceled by user")),this._connectionDeferred=null),this._connectionState===za.DISCONNECTED?Promise.reject(new Error("Connection is already disconnected.")):(this._connectionState=za.DISCONNECTING,this._initialConnection=!0,"undefined"!==typeof window&&window.removeEventListener("online",this._onWindowOnline),this._protocolConnection.close().then((function(){e._protocolConnectionSubscription.unsubscribe(),e._protocolConnection=null,e._protocolConnectionSubscription=null,e._handleDisconnected()})))}},{key:"reconnect",value:function(){var e=this;if(this._connectionState!==za.INTERRUPTED&&this._connectionState!==za.DISCONNECTED)throw new Error("Can only call reconnect on an disconnected or interrupted connection.");return this.connectWithReconnectToken((function(){return Promise.resolve(e._session.reconnectToken())})).then((function(){}))}},{key:"isConnected",value:function(){return this._connectionState===za.CONNECTED}},{key:"isDisconnected",value:function(){return this._connectionState===za.DISCONNECTED}},{key:"send",value:function(e){this._protocolConnection.send(e)}},{key:"request",value:function(e,t){return this._protocolConnection.request(e,t)}},{key:"connectWithPassword",value:function(e){this._authMethod=Fa.PASSWORD;return this._connect((function(){return e().then((function(e){return Us.assertNonEmptyString(e.username,"username"),Us.assertNonEmptyString(e.password,"password"),{password:{username:e.username,password:e.password}}}))}))}},{key:"connectWithJwt",value:function(e){this._authMethod=Fa.JWT;return this._connect((function(){return e().then((function(e){return Us.assertNonEmptyString(e,"jwt"),{jwt:{jwt:e}}}))}))}},{key:"connectWithReconnectToken",value:function(e){var t=this;this._authMethod=Fa.RECONNECT;return this._connect((function(){return e().then((function(e){return Us.assertNonEmptyString(e,"token"),{reconnect:{token:e}}}))})).catch((function(e){return t._handleReconnectFailure(e)}))}},{key:"_handleReconnectFailure",value:function(e){var t=this;if(!(e instanceof Js&&e.code===ca.AUTHENTICATION_FAILED))return Promise.resolve(e);if(!Fs.isFunction(this._options.fallbackAuth))return Promise.resolve(e);var n=new ja;if(this._options.fallbackAuth(n.challenge()),!n.isCompleted())return Promise.reject(new Error("You must call one of the auth challenge methods."));n.fulfilled().then((function(){if(n.isPassword()){var i=t.session().user().username,r=n.getPassword();return t.connectWithPassword((function(){return Promise.resolve({username:i,password:r})}))}return n.isJwt()?t.connectWithJwt((function(){return Promise.resolve(n.getJwt())})):n.isAnonymous()?t.connectAnonymously((function(){return Promise.resolve(n.getDisplayName())})):(n.isCanceled(),Promise.reject(e))}))}},{key:"connectAnonymously",value:function(e){this._authMethod=Fa.ANONYMOUS;return this._connect((function(){return e().then((function(e){return{anonymous:{displayName:Sa(e)}}}))}))}},{key:"messages",value:function(){return this.events().pipe(_s((function(e){return"message"===e.name})))}},{key:"_connect",value:function(e){return this._connectionRequestGenerator=e,this._connectionState===za.CONNECTED?Promise.reject(new Js("already connected")):this._connectionState===za.CONNECTING?Promise.reject(new Js("already connecting")):this._connectToServer()}},{key:"_connectToServer",value:function(){if(this._connectionState!==za.DISCONNECTED&&this._connectionState!==za.INTERRUPTED)throw new Error("Can only call connect on a disconnected or interrupted connection.");return this._connectionAttempts=0,this._connectionDeferred=new ta,this._connectionState=za.CONNECTING,this._attemptConnection(),this._connectionDeferred.promise()}},{key:"_attemptConnection",value:function(){var e=this;null!==this._connectionAttemptTask&&(clearTimeout(this._connectionAttemptTask),this._connectionAttemptTask=null),this._connectionAttempts++,this._logger.debug((function(){return"Attempting to open web socket connection to: ".concat(e._url)})),this._scheduleConnectionTimeout(),this._emitEvent({name:n.Events.CONNECTING}),this._protocolConnection=this._createProtocolConnection(),this._openConnection()}},{key:"_openConnection",value:function(){var e=this;this._protocolConnection.connect().then((function(){return e._clearConnectionTimeout(),e._logger.debug("Server connection established."),e._initialConnection=!1,e._sendConnectionRequest()})).catch((function(t){e._logger.debug(t.message),e._clearConnectionTimeout();var i={name:n.Events.CONNECTION_FAILED,authMethod:e._authMethod,code:"server_connection_failed",details:t.message};if(e._emitEvent(i),!e._initialConnection||e._options.autoReconnectOnInitial)e._scheduleConnection();else{var r="The initial connection to '".concat(e._url,"' failed, and 'reconnect.autoReconnectOnInitial' was set to false");e._connectionDeferred.reject(new Js(r,"initial_connection_failed")),e._handleDisconnected()}}))}},{key:"_createProtocolConnection",value:function(){var e=this,t=new na(this._url,this._options.webSocketClass,this._options.webSocketFactory),i=new Na(t,{defaultRequestTimeout:this._options.defaultRequestTimeout,heartbeatConfig:{enabled:this._options.heartbeatEnabled,pingInterval:this._options.pingInterval,pongTimeout:this._options.pongTimeout}});return this._protocolConnectionSubscription=i.events().subscribe((function(t){switch(t.name){case Na.Events.ERROR:var i=t,r={name:n.Events.ERROR,error:i.error};e._emitEvent(r);break;case Na.Events.DROPPED:e._handleInterrupted();break;case Na.Events.CLOSED:e._handleDisconnected();break;case Na.Events.MESSAGE:var o=t,s={name:n.Events.MESSAGE,request:o.request,callback:o.callback,message:o.message};e._emitEvent(s)}})),i}},{key:"_sendConnectionRequest",value:function(){return Is(this,void 0,void 0,jo().mark((function e(){var t,i,r,o,s,a;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._connectionRequestGenerator();case 2:return t=e.sent,i=n._createConnectionRequest(t),r={name:n.Events.AUTHENTICATING,method:this._authMethod},this._emitEvent(r),o=this._options.connectionRequestTimeout,e.next=9,this.request({connectionRequest:i},o);case 9:if(s=e.sent,!(a=s.connectionResponse).success){e.next=15;break}return e.abrupt("return",this._handleConnectionSuccess(a.success));case 15:return e.abrupt("return",this._handleConnectionFailure(a.failure,this._authMethod));case 16:case"end":return e.stop()}}),e,this)})))}},{key:"_handleConnectionSuccess",value:function(e){this._domainId=e.domainId,this._namespace=e.namespace,this._session._setUser(pa(e.user)),this._session._setSessionId(e.sessionId),this._session._setReconnectToken(e.reconnectToken),this._connectionState=za.CONNECTED;var t={name:n.Events.CONNECTED,state:Ca(e.presenceState)};this._emitEvent(t),this._connectionDeferred.resolve(),this._connectionDeferred=null,this._connectionAttempts=0}},{key:"_handleConnectionFailure",value:function(e,t){var i=this;this._clearConnectionTimeout();var r=e.code,o=e.details,s=e.retryOk,a={name:n.Events.CONNECTION_FAILED,authMethod:t,code:xa(r),details:xa(o)};if(this._emitEvent(a),this._protocolConnectionSubscription.unsubscribe(),this._protocolConnection.close().catch((function(e){return i._logger.error("Error closing protocol connection after connection failure",e)})),this._protocolConnection=null,this._protocolConnectionSubscription=null,_a(s))if(!this._initialConnection||this._options.autoReconnectOnInitial)this._scheduleConnection();else{this._connectionRequestGenerator=null,this._authMethod=null;var l="The initial connection to '".concat(this._url,"' failed, and 'reconnect.autoReconnectOnInitial' was set to false.");this._connectionDeferred.reject(new Js(l,xa(r))),this._handleDisconnected()}else this._connectionDeferred.reject(new Js(xa(o),xa(r))),this._handleDisconnected()}},{key:"_scheduleConnection",value:function(){var e=this;if(this._connectionState===za.CONNECTING){var t=Math.min(this._connectionAttempts,this._options.reconnectIntervals.length-1),i=this._options.reconnectIntervals[t];this._logger.debug((function(){return"Scheduling web socket connection in ".concat(i," seconds.")}));var r={name:n.Events.CONNECTION_SCHEDULED,delay:i};this._emitEvent(r),this._connectionAttemptTask=setTimeout((function(){return e._attemptConnection()}),1e3*i)}}},{key:"_handleDisconnected",value:function(){this._connectionState!==za.DISCONNECTED&&(this._connectionState=za.DISCONNECTED,this._emitEvent({name:n.Events.DISCONNECTED}))}},{key:"_handleInterrupted",value:function(){var e=this;this._connectionState=za.INTERRUPTED,this._emitEvent({name:n.Events.INTERRUPTED}),this._options.autoReconnect&&this._session.reconnectToken()?this.reconnect().catch((function(t){return e._logger.error("Unexpected error reconnecting",t)})):this._handleDisconnected()}}],[{key:"_createConnectionRequest",value:function(e){return Object.assign(Object.assign({},e),{client:"JavaScript",clientVersion:"1.0.0-rc.12"})}}]),n}(Xs);Ua.Events={MESSAGE:"message",CONNECTION_SCHEDULED:"connection_scheduled",CONNECTING:"connecting",AUTHENTICATING:"authenticating",CONNECTED:"connected",CONNECTION_FAILED:"connection_failed",INTERRUPTED:"interrupted",DISCONNECTED:"disconnected",ERROR:"error"},Ua._SessionIdGenerator=new Ba(32,Ba.AlphaNumeric),function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.INTERRUPTED=3]="INTERRUPTED",e[e.DISCONNECTING=4]="DISCONNECTING"}(za||(za={}));var Va=Oi((function e(t){Si(this,e),this.type=t})),Wa={COMPOUND:"Compound",ARRAY_INSERT:"ArrayInsert",ARRAY_REORDER:"ArrayReorder",ARRAY_REMOVE:"ArrayRemove",ARRAY_SET:"ArraySet",ARRAY_VALUE:"ArrayValue",BOOLEAN_VALUE:"BooleanValue",NUMBER_DELTA:"NumberDelta",NUMBER_VALUE:"NumberValue",OBJECT_ADD:"ObjectAdd",OBJECT_REMOVE:"ObjectRemove",OBJECT_SET:"ObjectSet",OBJECT_VALUE:"ObjectValue",STRING_SPLICE:"StringSplice",STRING_VALUE:"StringValue",DATE_VALUE:"DateValue"};Object.freeze(Wa);var Ha,qa,Ga=Wa,Ka=function(e){Mi(n,e);var t=Ni(n);function n(e){var i;return Si(this,n),(i=t.call(this,Ga.COMPOUND)).ops=e,Object.freeze(Ii(i)),i}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.ops,e.ops))}}]),n}(Va),Ya=Oi((function e(t,n){Si(this,e),this.serverOp=t,this.clientOp=n,Object.freeze(this)})),Ja=function(){function e(t){Si(this,e),this._tfr=t}return Oi(e,[{key:"transform",value:function(e,t){return e instanceof Ka?this.transformServerCompoundOperation(e,t):t instanceof Ka?this.transformClientCompoundOperation(e,t):this.transformTwoDiscreteOps(e,t)}},{key:"transformClientCompoundOperation",value:function(e,t){var n=this,i=e,r=t.ops.map((function(e){var t=n.transform(i,e);return i=t.serverOp,t.clientOp}));return new Ya(i,new Ka(r))}},{key:"transformServerCompoundOperation",value:function(e,t){var n=this,i=t,r=e.ops.map((function(e){var t=n.transform(e,i);return i=t.clientOp,t.serverOp}));return new Ya(new Ka(r),i)}},{key:"transformTwoDiscreteOps",value:function(e,t){return e.noOp||t.noOp?new Ya(e,t):e.id===t.id?this.transformIdenticalPathOperations(e,t):new Ya(e,t)}},{key:"transformIdenticalPathOperations",value:function(e,t){var n=this._tfr.getOperationTransformationFunction(e,t);if(n)return n(e,t);throw new Error("No function found for: (".concat(e.type,",").concat(e.type,")"))}}]),e}(),Xa=function(e,t){return e.index<=t.index?new Ya(e,t.copy({index:t.index+1})):new Ya(e.copy({index:e.index+1}),t)},Qa=function(e,t){return e.index<=t.index?new Ya(e,t.copy({index:t.index+1})):new Ya(e.copy({index:e.index-1}),t)},Za=function(e,t){return e.index<=t.index?new Ya(e,t.copy({index:t.index+1})):new Ya(e,t)},el=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"getRangeIndexRelationship",value:function(e,t,n){return n<e?Ha.Before:n>t?Ha.After:n===e?Ha.Start:n===t?Ha.End:Ha.Within}},{key:"getRangeRangeRelationship",value:function(e,t,n,i){return e===n?t===i?qa.EqualTo:i>t?qa.Starts:qa.StartedBy:e>n?e>i?qa.PrecededBy:i===t?qa.Finishes:t<i?qa.ContainedBy:e===i?qa.MetBy:qa.OverlappedBy:t<n?qa.Precedes:i===t?qa.FinishedBy:t>i?qa.Contains:t===n?qa.Meets:qa.Overlaps}}]),e}();!function(e){e[e.Before=0]="Before",e[e.Start=1]="Start",e[e.Within=2]="Within",e[e.End=3]="End",e[e.After=4]="After"}(Ha||(Ha={})),function(e){e[e.Precedes=0]="Precedes",e[e.PrecededBy=1]="PrecededBy",e[e.Meets=2]="Meets",e[e.MetBy=3]="MetBy",e[e.Overlaps=4]="Overlaps",e[e.OverlappedBy=5]="OverlappedBy",e[e.Starts=6]="Starts",e[e.StartedBy=7]="StartedBy",e[e.Contains=8]="Contains",e[e.ContainedBy=9]="ContainedBy",e[e.Finishes=10]="Finishes",e[e.FinishedBy=11]="FinishedBy",e[e.EqualTo=12]="EqualTo"}(qa||(qa={}));var tl,nl=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"isForwardMove",value:function(e){return e.fromIndex<e.toIndex}},{key:"isBackwardMoveMove",value:function(e){return e.fromIndex>e.toIndex}},{key:"isIdentityMove",value:function(e){return e.fromIndex===e.toIndex}},{key:"getMoveDirection",value:function(e){return this.isForwardMove(e)?tl.Forward:this.isBackwardMoveMove(e)?tl.Backward:tl.Identity}},{key:"indexBeforeRange",value:function(e,t){return t<this.getRangeMin(e)}},{key:"indexAfterRange",value:function(e,t){return t>this.getRangeMax(e)}},{key:"indexWithinRange",value:function(e,t){return t>this.getRangeMin(e)&&t<this.getRangeMax(e)}},{key:"getRangeIndexRelationship",value:function(e,t){return el.getRangeIndexRelationship(this.getRangeMin(e),this.getRangeMax(e),t)}},{key:"getRangeRelationship",value:function(e,t){return el.getRangeRangeRelationship(this.getRangeMin(e),this.getRangeMax(e),this.getRangeMin(t),this.getRangeMax(t))}},{key:"getRangeMin",value:function(e){return Math.min(e.fromIndex,e.toIndex)}},{key:"getRangeMax",value:function(e){return Math.max(e.fromIndex,e.toIndex)}}]),e}();!function(e){e[e.Forward=0]="Forward",e[e.Backward=1]="Backward",e[e.Identity=2]="Identity"}(tl||(tl={}));var il=function(e,t){switch(nl.getMoveDirection(t)){case tl.Forward:return function(e,t){switch(nl.getRangeIndexRelationship(t,e.index)){case Ha.Before:case Ha.Start:return new Ya(e,t.copy({fromIndex:t.fromIndex+1,toIndex:t.toIndex+1}));case Ha.Within:case Ha.End:return new Ya(e.copy({index:e.index-1}),t.copy({toIndex:t.toIndex+1}));case Ha.After:return new Ya(e,t);default:throw new Error("Invalid range-index relationship")}}(e,t);case tl.Backward:return function(e,t){switch(nl.getRangeIndexRelationship(t,e.index)){case Ha.Before:case Ha.Start:return new Ya(e,t.copy({fromIndex:t.fromIndex+1,toIndex:t.toIndex+1}));case Ha.Within:case Ha.End:return new Ya(e.copy({index:e.index+1}),t.copy({fromIndex:t.fromIndex+1}));case Ha.After:return new Ya(e,t);default:throw new Error("Invalid range-index relationship")}}(e,t);case tl.Identity:return function(e,t){if(nl.getRangeIndexRelationship(t,e.index)===Ha.After)return new Ya(e,t);return new Ya(e,t.copy({fromIndex:t.fromIndex+1,toIndex:t.toIndex+1}))}(e,t);default:throw new Error("Invalid move direction")}};var rl=function(e,t){return new Ya(e.copy({noOp:!0}),t)},ol=function(e,t){return e.index<t.index?new Ya(e,t.copy({index:t.index-1})):new Ya(e.copy({index:e.index+1}),t)},sl=function(e,t){return e.index===t.index?new Ya(e.copy({noOp:!0}),t.copy({noOp:!0})):e.index<t.index?new Ya(e,t.copy({index:t.index-1})):new Ya(e.copy({index:e.index-1}),t)},al=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,e)).id=i,o.noOp=r,o}return Oi(n)}(Va),ll=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.ARRAY_INSERT,e,i)).index=r,s.value=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.index,e.index),Ls.update(this.value,e.value))}}]),n}(al),cl=function(e,t){return e.index<t.index?new Ya(e,t.copy({index:t.index-1})):e.index===t.index?new Ya(e.copy({noOp:!0}),new ll(t.id,t.noOp,t.index,t.value)):new Ya(e,t)},ul=function(e,t){switch(nl.getMoveDirection(t)){case tl.Forward:return function(e,t){switch(nl.getRangeIndexRelationship(t,e.index)){case Ha.Before:return new Ya(e,t.copy({fromIndex:t.fromIndex-1,toIndex:t.toIndex-1}));case Ha.Start:return new Ya(e.copy({index:t.toIndex}),t.copy({noOp:!0}));case Ha.Within:case Ha.End:return new Ya(e.copy({index:e.index-1}),t.copy({toIndex:t.toIndex-1}));case Ha.After:return new Ya(e,t);default:throw new Error("Invalid range-index relationship")}}(e,t);case tl.Backward:return function(e,t){switch(nl.getRangeIndexRelationship(t,e.index)){case Ha.Before:return new Ya(e,t.copy({fromIndex:t.fromIndex-1,toIndex:t.toIndex-1}));case Ha.Start:case Ha.Within:return new Ya(e.copy({index:e.index+1}),t.copy({fromIndex:t.fromIndex-1}));case Ha.End:return new Ya(e.copy({index:t.toIndex}),t.copy({noOp:!0}));case Ha.After:return new Ya(e,t);default:throw new Error("Invalid range-index relationship")}}(e,t);case tl.Identity:return function(e,t){switch(nl.getRangeIndexRelationship(t,e.index)){case Ha.Before:return new Ya(e,t.copy({fromIndex:t.fromIndex-1,toIndex:t.toIndex-1}));case Ha.Start:case Ha.Within:case Ha.End:return new Ya(e,t.copy({noOp:!0}));default:return new Ya(e,t)}}(e,t);default:throw new Error("Invalid move direction")}};var dl=function(e,t){return new Ya(e.copy({noOp:!0}),t)},hl=function(e,t){return e.index<t.index?new Ya(e,t):new Ya(e.copy({index:e.index+1}),t)},fl=function(e,t){return e.index<t.index?new Ya(e,t):e.index===t.index?new Ya(new ll(e.id,e.noOp,e.index,e.value),t.copy({noOp:!0})):new Ya(e.copy({index:e.index-1}),t)},pl=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"deepEquals",value:function(e,t){var n;if(isNaN(e)&&isNaN(t)&&"number"===typeof e&&"number"===typeof t)return!0;if(e===t)return!0;if("function"===typeof e&&"function"===typeof t||e instanceof Date&&t instanceof Date||e instanceof RegExp&&t instanceof RegExp||e instanceof String&&t instanceof String||e instanceof Number&&t instanceof Number)return e.toString()===t.toString();if(!(e instanceof Object&&t instanceof Object))return!1;if(e.isPrototypeOf(t)||t.isPrototypeOf(e))return!1;if(e.constructor!==t.constructor)return!1;if(e.prototype!==t.prototype)return!1;for(n in t){if(t.hasOwnProperty(n)!==e.hasOwnProperty(n))return!1;if(typeof t[n]!==typeof e[n])return!1}for(n in e){if(t.hasOwnProperty(n)!==e.hasOwnProperty(n))return!1;if(typeof t[n]!==typeof e[n])return!1;switch(typeof e[n]){case"object":case"function":if(!this.deepEquals(e[n],t[n]))return!1;break;default:if(e[n]!==t[n])return!1}}return!0}}]),e}(),gl=function(e,t){return e.index!==t.index?new Ya(e,t):pl.deepEquals(e.value,t.value)?new Ya(e.copy({noOp:!0}),t.copy({noOp:!0})):new Ya(e,t.copy({noOp:!0}))},ml=function(e,t){switch(nl.getMoveDirection(t)){case tl.Forward:return function(e,t){switch(nl.getRangeIndexRelationship(t,e.index)){case Ha.Before:case Ha.After:return new Ya(e,t);case Ha.Start:return new Ya(e.copy({index:t.toIndex}),t);case Ha.Within:case Ha.End:return new Ya(e.copy({index:e.index-1}),t);default:throw new Error("Invalid range-index relationship")}}(e,t);case tl.Backward:return function(e,t){switch(nl.getRangeIndexRelationship(t,e.index)){case Ha.Before:case Ha.After:return new Ya(e,t);case Ha.End:return new Ya(e.copy({index:t.toIndex}),t);case Ha.Within:case Ha.Start:return new Ya(e.copy({index:e.index+1}),t);default:throw new Error("Invalid range-index relationship")}}(e,t);case tl.Identity:return function(e,t){return new Ya(e,t)}(e,t);default:throw new Error("Invalid move direction")}};var vl=function(e,t){return new Ya(e.copy({noOp:!0}),t)},yl=function(e,t){switch(nl.getMoveDirection(e)){case tl.Forward:return function(e,t){switch(nl.getRangeIndexRelationship(e,t.index)){case Ha.Before:case Ha.Start:return new Ya(e.copy({fromIndex:e.fromIndex+1,toIndex:e.toIndex+1}),t);case Ha.Within:case Ha.End:return new Ya(e.copy({toIndex:e.toIndex+1}),t.copy({index:t.index-1}));case Ha.After:return new Ya(e,t);default:throw new Error("Invalid range-index relationship")}}(e,t);case tl.Backward:return function(e,t){switch(nl.getRangeIndexRelationship(e,t.index)){case Ha.Before:case Ha.Start:return new Ya(e.copy({fromIndex:e.fromIndex+1,toIndex:e.toIndex+1}),t);case Ha.Within:case Ha.End:return new Ya(e.copy({fromIndex:e.fromIndex+1}),t.copy({index:t.index+1}));case Ha.After:return new Ya(e,t);default:throw new Error("Invalid range-index relationship")}}(e,t);case tl.Identity:return function(e,t){if(nl.getRangeIndexRelationship(e,t.index)===Ha.After)return new Ya(e,t);return new Ya(e.copy({fromIndex:e.fromIndex+1,toIndex:e.toIndex+1}),t)}(e,t);default:throw new Error("Invalid move direction")}};var bl=function(e,t){switch(nl.getMoveDirection(e)){case tl.Forward:return function(e,t){switch(nl.getRangeIndexRelationship(e,t.index)){case Ha.Before:return new Ya(e.copy({fromIndex:e.fromIndex-1,toIndex:e.toIndex-1}),t);case Ha.Start:return new Ya(e.copy({noOp:!0}),t.copy({index:e.toIndex}));case Ha.Within:case Ha.End:return new Ya(e.copy({toIndex:e.toIndex-1}),t.copy({index:t.index-1}));case Ha.After:return new Ya(e,t);default:throw new Error("Invalid range-index relationship")}}(e,t);case tl.Backward:return function(e,t){switch(nl.getRangeIndexRelationship(e,t.index)){case Ha.Before:return new Ya(e.copy({fromIndex:e.fromIndex-1,toIndex:e.toIndex-1}),t);case Ha.Start:case Ha.Within:return new Ya(e.copy({fromIndex:e.fromIndex-1}),t.copy({index:t.index+1}));case Ha.End:return new Ya(e.copy({noOp:!0}),t.copy({index:e.toIndex}));case Ha.After:return new Ya(e,t);default:throw new Error("Invalid range-index relationship")}}(e,t);case tl.Identity:return function(e,t){switch(nl.getRangeIndexRelationship(e,t.index)){case Ha.Before:return new Ya(e.copy({fromIndex:e.fromIndex-1,toIndex:e.toIndex-1}),t);case Ha.Start:case Ha.Within:case Ha.End:return new Ya(e.copy({noOp:!0}),t);case Ha.After:return new Ya(e,t);default:throw new Error("Invalid range-index relationship")}}(e,t);default:throw new Error("Invalid move direction")}};var wl=function(e,t){switch(nl.getMoveDirection(e)){case tl.Forward:return function(e,t){switch(nl.getRangeIndexRelationship(e,t.index)){case Ha.Before:case Ha.After:return new Ya(e,t);case Ha.Start:return new Ya(e,t.copy({index:e.toIndex}));case Ha.Within:case Ha.End:return new Ya(e,t.copy({index:t.index-1}));default:throw new Error("Invalid range-index relationship")}}(e,t);case tl.Backward:return function(e,t){switch(nl.getRangeIndexRelationship(e,t.index)){case Ha.Before:case Ha.After:return new Ya(e,t);case Ha.End:return new Ya(e,t.copy({index:e.toIndex}));case Ha.Start:case Ha.Within:return new Ya(e,t.copy({index:t.index+1}));default:throw new Error("Invalid range-index relationship")}}(e,t);case tl.Identity:return function(e,t){return new Ya(e,t)}(e,t);default:throw new Error("Invalid move direction")}};var _l=function(e,t){var n=nl.getMoveDirection(e),i=nl.getMoveDirection(t);return n===tl.Forward?i===tl.Forward?function(e,t){switch(nl.getRangeRelationship(e,t)){case qa.Precedes:case qa.PrecededBy:return new Ya(e,t);case qa.Meets:return new Ya(e.copy({toIndex:e.toIndex-1}),t.copy({fromIndex:t.fromIndex-1}));case qa.MetBy:return new Ya(e.copy({fromIndex:e.fromIndex-1}),t.copy({toIndex:t.toIndex-1}));case qa.Overlaps:return new Ya(e.copy({toIndex:e.toIndex-1}),t.copy({fromIndex:t.fromIndex-1}));case qa.OverlappedBy:return new Ya(e.copy({fromIndex:e.fromIndex-1}),t.copy({toIndex:t.toIndex-1}));case qa.Starts:case qa.StartedBy:return new Ya(e.copy({fromIndex:t.toIndex}),t.copy({noOp:!0}));case qa.Contains:return new Ya(e,t.copy({fromIndex:t.fromIndex-1,toIndex:t.toIndex-1}));case qa.ContainedBy:return new Ya(e.copy({fromIndex:e.fromIndex-1,toIndex:e.toIndex-1}),t);case qa.Finishes:return new Ya(e.copy({fromIndex:e.fromIndex-1}),t.copy({toIndex:t.toIndex-1}));case qa.FinishedBy:return new Ya(e,t.copy({fromIndex:t.fromIndex-1,toIndex:t.toIndex-1}));case qa.EqualTo:return new Ya(e.copy({noOp:!0}),t.copy({noOp:!0}));default:throw new Error("Invalid range-range relationship")}}(e,t):i===tl.Backward?function(e,t){switch(nl.getRangeRelationship(e,t)){case qa.Precedes:case qa.PrecededBy:return new Ya(e,t);case qa.Meets:return new Ya(e.copy({toIndex:e.toIndex+1}),t.copy({toIndex:t.toIndex-1}));case qa.MetBy:return new Ya(e.copy({fromIndex:t.toIndex}),t.copy({noOp:!0}));case qa.Overlaps:return new Ya(e.copy({toIndex:e.toIndex+1}),t.copy({toIndex:t.toIndex-1}));case qa.OverlappedBy:return new Ya(e.copy({fromIndex:e.fromIndex+1}),t.copy({fromIndex:t.fromIndex-1}));case qa.Starts:return new Ya(e.copy({fromIndex:e.fromIndex+1,toIndex:e.toIndex+1}),t);case qa.StartedBy:return new Ya(e.copy({fromIndex:e.fromIndex+1}),t.copy({fromIndex:t.fromIndex-1}));case qa.Contains:return new Ya(e,t.copy({fromIndex:t.fromIndex-1,toIndex:t.toIndex-1}));case qa.ContainedBy:return new Ya(e.copy({fromIndex:e.fromIndex+1,toIndex:e.toIndex+1}),t);case qa.Finishes:return new Ya(e.copy({fromIndex:e.fromIndex+1}),t.copy({fromIndex:t.fromIndex-1}));case qa.FinishedBy:return new Ya(e,t.copy({fromIndex:t.fromIndex-1,toIndex:t.toIndex-1}));case qa.EqualTo:return new Ya(e.copy({fromIndex:e.fromIndex+1}),t.copy({fromIndex:t.fromIndex-1}));default:throw new Error("Invalid range-range relationship")}}(e,t):function(e,t){switch(nl.getRangeIndexRelationship(e,t.fromIndex)){case Ha.Before:case Ha.After:return new Ya(e,t);case Ha.Start:return new Ya(e,t.copy({fromIndex:e.toIndex,toIndex:e.toIndex}));case Ha.Within:case Ha.End:return new Ya(e,t.copy({fromIndex:t.fromIndex-1,toIndex:t.toIndex-1}));default:throw new Error("Invalid range-index relationship")}}(e,t):n===tl.Backward?i===tl.Forward?function(e,t){switch(nl.getRangeRelationship(e,t)){case qa.Precedes:case qa.PrecededBy:return new Ya(e,t);case qa.Meets:return new Ya(e.copy({fromIndex:t.toIndex}),t.copy({noOp:!0}));case qa.MetBy:return new Ya(e.copy({toIndex:e.toIndex-1}),t.copy({toIndex:t.toIndex+1}));case qa.Overlaps:return new Ya(e.copy({fromIndex:e.fromIndex-1}),t.copy({fromIndex:t.fromIndex+1}));case qa.OverlappedBy:return new Ya(e.copy({toIndex:e.toIndex-1}),t.copy({toIndex:t.toIndex+1}));case qa.Starts:return new Ya(e.copy({fromIndex:e.fromIndex-1}),t.copy({fromIndex:t.fromIndex+1}));case qa.StartedBy:case qa.Contains:return new Ya(e,t.copy({fromIndex:t.fromIndex+1,toIndex:t.toIndex+1}));case qa.ContainedBy:case qa.Finishes:return new Ya(e.copy({fromIndex:e.fromIndex-1,toIndex:e.toIndex-1}),t);case qa.FinishedBy:case qa.EqualTo:return new Ya(e.copy({fromIndex:e.fromIndex-1}),t.copy({fromIndex:t.fromIndex+1}));default:throw new Error("Invalid range-range relationship")}}(e,t):i===tl.Backward?function(e,t){switch(nl.getRangeRelationship(e,t)){case qa.Precedes:case qa.PrecededBy:return new Ya(e,t);case qa.Meets:return new Ya(e.copy({fromIndex:e.fromIndex+1}),t.copy({toIndex:t.toIndex+1}));case qa.MetBy:return new Ya(e.copy({toIndex:e.toIndex+1}),t.copy({fromIndex:t.fromIndex+1}));case qa.Overlaps:return new Ya(e.copy({fromIndex:e.fromIndex+1}),t.copy({toIndex:t.toIndex+1}));case qa.OverlappedBy:return new Ya(e.copy({toIndex:e.toIndex+1}),t.copy({fromIndex:t.fromIndex+1}));case qa.Starts:return new Ya(e.copy({fromIndex:e.fromIndex+1,toIndex:e.toIndex+1}),t);case qa.StartedBy:case qa.Contains:return new Ya(e,t.copy({fromIndex:t.fromIndex+1,toIndex:t.toIndex+1}));case qa.ContainedBy:return new Ya(e.copy({fromIndex:e.fromIndex+1,toIndex:e.toIndex+1}),t);case qa.Finishes:case qa.FinishedBy:return new Ya(e.copy({fromIndex:t.toIndex}),t.copy({noOp:!0}));case qa.EqualTo:return new Ya(e.copy({noOp:!0}),t.copy({noOp:!0}));default:throw new Error("Invalid range-range relationship")}}(e,t):function(e,t){switch(nl.getRangeIndexRelationship(e,t.fromIndex)){case Ha.Before:case Ha.After:return new Ya(e,t);case Ha.Start:case Ha.Within:return new Ya(e,t.copy({fromIndex:t.fromIndex+1,toIndex:t.toIndex+1}));case Ha.End:return new Ya(e,t.copy({fromIndex:e.toIndex,toIndex:e.toIndex}));default:throw new Error("Invalid range-index relationship")}}(e,t):i===tl.Forward?function(e,t){switch(nl.getRangeIndexRelationship(t,e.fromIndex)){case Ha.Before:case Ha.After:return new Ya(e,t);case Ha.Start:return new Ya(e.copy({fromIndex:t.toIndex,toIndex:t.toIndex}),t);case Ha.Within:case Ha.End:return new Ya(e.copy({fromIndex:e.fromIndex-1,toIndex:e.toIndex-1}),t);default:throw new Error("Invalid range-index relationship")}}(e,t):i===tl.Backward?function(e,t){switch(nl.getRangeIndexRelationship(t,e.fromIndex)){case Ha.Before:case Ha.After:return new Ya(e,t);case Ha.Start:case Ha.Within:return new Ya(e.copy({fromIndex:e.fromIndex+1,toIndex:e.toIndex+1}),t);case Ha.End:return new Ya(e.copy({fromIndex:t.toIndex,toIndex:t.toIndex}),t);default:throw new Error("Invalid range-index relationship")}}(e,t):function(e,t){return new Ya(e,t)}(e,t)};var xl=function(e,t){return new Ya(e.copy({noOp:!0}),t)},kl=function(e,t){return new Ya(e,t.copy({noOp:!0}))},Cl=function(e,t){return new Ya(e,t.copy({noOp:!0}))},Sl=function(e,t){return new Ya(e,t.copy({noOp:!0}))},El=function(e,t){return new Ya(e,t.copy({noOp:!0}))},Ol=function(e,t){return pl.deepEquals(e.value,t.value)?new Ya(e.copy({noOp:!0}),t.copy({noOp:!0})):new Ya(e,t.copy({noOp:!0}))},Al=function(e,t){return new Ya(e.copy({noOp:!0}),t)},Ml=function(e,t){return new Ya(e,t.copy({noOp:!0}))},Rl=function(e,t){return e.value===t.value?new Ya(e.copy({noOp:!0}),e.copy({noOp:!0})):new Ya(e,t.copy({noOp:!0}))},Tl=function(e,t){return new Ya(e,t)},Dl=function(e,t){return new Ya(e.copy({noOp:!0}),t)},Il=function(e,t){return new Ya(e,t.copy({noOp:!0}))},Ll=function(e,t){return e.value===t.value?new Ya(e.copy({noOp:!0}),e.copy({noOp:!0})):new Ya(e,t.copy({noOp:!0}))},Nl=function(e,t){return e.value===t.value?new Ya(e.copy({noOp:!0}),e.copy({noOp:!0})):new Ya(e,t.copy({noOp:!0}))},Fl=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.OBJECT_SET,e,i)).prop=r,s.value=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.prop,e.prop),Ls.update(this.value,e.value))}}]),n}(al),$l=function(e,t){return e.prop!==t.prop?new Ya(e,t):e.value!==t.value?new Ya(new Fl(e.id,e.noOp,e.prop,e.value),t.copy({noOp:!0})):new Ya(e.copy({noOp:!0}),t.copy({noOp:!0}))},Pl=function(e,t){if(e.prop!==t.prop)return new Ya(e,t);throw new Error("Add property and set property can not target the same property")},jl=function(e,t){if(e.prop!==t.prop)return new Ya(e,t);throw new Error("Add property and Remove property can not target the same property")},Bl=function(e,t){if(e.prop!==t.prop)return new Ya(e,t);throw new Error("Remove property and add property can not target the same property")},zl=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.OBJECT_ADD,e,i)).prop=r,s.value=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.prop,e.prop),Ls.update(this.value,e.value))}}]),n}(al),Ul=function(e,t){return e.prop!==t.prop?new Ya(e,t):new Ya(e.copy({noOp:!0}),new zl(t.id,t.noOp,t.prop,t.value))},Vl=function(e,t){return e.prop!==t.prop?new Ya(e,t):new Ya(e.copy({noOp:!0}),t.copy({noOp:!0}))},Wl=function(e,t){return new Ya(e.copy({noOp:!0}),t)},Hl=function(e,t){return new Ya(e.copy({noOp:!0}),t)},ql=function(e,t){if(e.prop!==t.prop)return new Ya(e,t);throw new Error("Set property and add property can not target the same property")},Gl=function(e,t){return e.prop!==t.prop?new Ya(e,t):e.value!==t.value?new Ya(e,t.copy({noOp:!0})):new Ya(e.copy({noOp:!0}),t.copy({noOp:!0}))},Kl=function(e,t){return e.prop!==t.prop?new Ya(e,t):new Ya(new zl(e.id,e.noOp,e.prop,e.value),t.copy({noOp:!0}))},Yl=function(e,t){return new Ya(e.copy({noOp:!0}),t)},Jl=function(e,t){return new Ya(e,t.copy({noOp:!0}))},Xl=function(e,t){return new Ya(e,t.copy({noOp:!0}))},Ql=function(e,t){return new Ya(e,t.copy({noOp:!0}))},Zl=function(e,t){return pl.deepEquals(e.value,t.value)?new Ya(e.copy({noOp:!0}),t.copy({noOp:!0})):new Ya(e,t.copy({noOp:!0}))},ec=Oi((function e(t,n,i,r,o,s){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.index=o,this.value=s,this.name=e.NAME,Object.freeze(this)}));ec.NAME="insert";var tc=Oi((function e(t,n,i,r,o,s){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.index=o,this.oldValue=s,this.name=e.NAME,Object.freeze(this)}));tc.NAME="remove";var nc=Oi((function e(t,n,i,r,o,s){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.fromIndex=o,this.toIndex=s,this.name=e.NAME,Object.freeze(this)}));nc.NAME="reorder";var ic=Oi((function e(t,n,i,r,o,s,a){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.index=o,this.value=s,this.oldValue=a,this.name=e.NAME,Object.freeze(this)}));ic.NAME="set";var rc=Oi((function e(t,n,i,r){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.name=e.NAME,Object.freeze(this)}));rc.NAME="value";var oc=Oi((function e(t,n,i,r,o,s){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.key=o,this.oldValue=s,this.name=e.NAME,Object.freeze(this)}));oc.NAME="remove";var sc=Oi((function e(t,n,i,r,o,s,a){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.key=o,this.value=s,this.oldValue=a,this.name=e.NAME,Object.freeze(this)}));sc.NAME="set";var ac=Oi((function e(t,n,i,r){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.name=e.NAME,Object.freeze(this)}));ac.NAME="value";var lc=Oi((function e(t,n,i,r){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.name=e.NAME,Object.freeze(this)}));lc.NAME="value";var cc=Oi((function e(t,n,i,r){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.name=e.NAME,Object.freeze(this)}));cc.NAME="value";var uc=Oi((function e(t,n,i,r){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.name=e.NAME,Object.freeze(this)}));uc.NAME="value";var dc=Oi((function e(t,n,i,r,o){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.value=o,this.name=e.NAME,Object.freeze(this)}));dc.NAME="delta";var hc=Oi((function e(t,n,i,r,o,s){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.index=o,this.value=s,this.name=e.NAME,Object.freeze(this)}));hc.NAME="insert";var fc=Oi((function e(t,n,i,r,o,s){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.index=o,this.value=s,this.name=e.NAME,Object.freeze(this)}));fc.NAME="remove";var pc=Oi((function e(t,n,i,r,o,s,a){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.index=o,this.deleteCount=s,this.insertValue=a,this.name=e.NAME,Object.freeze(this)}));pc.NAME="splice";var gc=Oi((function e(t,n,i,r){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.name=e.NAME,Object.freeze(this)}));gc.NAME="value";var mc=Oi((function e(t){Si(this,e),this.src=t,this.name=e.NAME}));mc.NAME="detached";var vc=Oi((function e(t,n,i,r,o,s){Si(this,e),this.element=t,this.user=n,this.sessionId=i,this.local=r,this.relativePath=o,this.childEvent=s,this.name=e.NAME,Object.freeze(this)}));vc.NAME="model_changed";var yc=Oi((function e(t,n,i){Si(this,e),this.src=t,this.local=n,this.reason=i,this.name=e.NAME,Object.freeze(this)}));yc.NAME="closed";var bc=Oi((function e(t,n,i){Si(this,e),this.src=t,this.local=n,this.reason=i,this.name=e.NAME,Object.freeze(this)}));bc.NAME="deleted";var wc=Oi((function e(t,n,i){Si(this,e),this.model=t,this.permissions=n,this.changes=i,this.name=e.NAME,Object.freeze(this)}));wc.NAME="permissions_changed";var _c=Oi((function e(t,n){Si(this,e),this.src=t,this.version=n,this.name=e.NAME,Object.freeze(this)}));_c.NAME="version_changed";var xc=Oi((function e(t){Si(this,e),this.src=t,this.name=e.NAME,Object.freeze(this)}));xc.NAME="online";var kc=Oi((function e(t){Si(this,e),this.src=t,this.name=e.NAME,Object.freeze(this)}));kc.NAME="offline";var Cc=Oi((function e(t){Si(this,e),this.src=t,this.name=e.NAME,Object.freeze(this)}));Cc.NAME="reconnecting";var Sc=Oi((function e(t){Si(this,e),this.src=t,this.name=e.NAME,Object.freeze(this)}));Sc.NAME="resync_started";var Ec=Oi((function e(t){Si(this,e),this.src=t,this.name=e.NAME,Object.freeze(this)}));Ec.NAME="resync_completed";var Oc=Oi((function e(t,n){Si(this,e),this.src=t,this.message=n,this.name=e.NAME,Object.freeze(this)}));Oc.NAME="resync_error";var Ac=Oi((function e(t,n,i){Si(this,e),this.reference=t,this.model=n,this.element=i,this.name=e.NAME,Object.freeze(this)}));Ac.NAME="reference";var Mc=Oi((function e(t,n,i){Si(this,e),this.model=t,this.sessionId=n,this.user=i,this.name=e.NAME,Object.freeze(this)}));Mc.NAME="remote_resync_started";var Rc=Oi((function e(t,n,i){Si(this,e),this.model=t,this.sessionId=n,this.user=i,this.name=e.NAME,Object.freeze(this)}));Rc.NAME="remote_resync_completed";var Tc=Oi((function e(t,n){Si(this,e),this.src=t,this.collaborator=n,this.name=e.NAME,Object.freeze(this)}));Tc.NAME="collaborator_opened";var Dc=Oi((function e(t,n){Si(this,e),this.src=t,this.collaborator=n,this.name=e.NAME,Object.freeze(this)}));Dc.NAME="collaborator_closed";var Ic=Oi((function e(t){Si(this,e),this.src=t,this.name=e.NAME,Object.freeze(this)}));Ic.NAME="committed";var Lc=Oi((function e(t){Si(this,e),this.src=t,this.name=e.NAME,Object.freeze(this)}));Lc.NAME="modified";var Nc=Oi((function e(t){Si(this,e),this.modelsToDownload=t,this.name=e.NAME,Object.freeze(this)}));Nc.NAME="offline_models_download_started";var Fc=Oi((function e(t,n){Si(this,e),this.modelsToDownload=t,this.trigger=n,this.name=e.NAME,Object.freeze(this)}));Fc.NAME="offline_models_download_status_changed";var $c=Oi((function e(){Si(this,e),this.name=e.NAME,Object.freeze(this)}));$c.NAME="offline_models_download_stopped";var Pc=Oi((function e(t){Si(this,e),this.modelsToSync=t,this.name=e.NAME,Object.freeze(this)}));Pc.NAME="offline_models_sync_started";var jc=Oi((function e(t){Si(this,e),this.modelsToSync=t,this.name=e.NAME,Object.freeze(this)}));jc.NAME="offline_models_sync_progress";var Bc=Oi((function e(){Si(this,e),this.name=e.NAME,Object.freeze(this)}));Bc.NAME="offline_models_sync_completed";var zc=Oi((function e(t,n){Si(this,e),this.reason=t,this.code=n,this.name=e.NAME,Object.freeze(this)}));zc.NAME="offline_models_sync_aborted";var Uc=Oi((function e(t){Si(this,e),this.modelId=t,this.name=e.NAME,Object.freeze(this)}));Uc.NAME="offline_model_sync_started";var Vc=Oi((function e(t){Si(this,e),this.modelId=t,this.name=e.NAME,Object.freeze(this)}));Vc.NAME="offline_model_sync_completed";var Wc=Oi((function e(t,n,i){Si(this,e),this.modelId=t,this.message=n,this.model=i,this.name=e.NAME,Object.freeze(this)}));Wc.NAME="offline_model_sync_error";var Hc=Oi((function e(t,n,i){Si(this,e),this.id=t,this.version=n,this.permissions=i,this.name=e.NAME,Object.freeze(this)}));Hc.NAME="offline_model_downloaded";var qc=Oi((function e(t,n,i){Si(this,e),this.id=t,this.version=n,this.permissions=i,this.name=e.NAME,Object.freeze(this)}));qc.NAME="offline_model_updated";var Gc=Oi((function e(t,n,i,r,o){Si(this,e),this.id=t,this.subscribed=n,this.available=i,this.synchronized=r,this.local=o,this.name=e.NAME,Object.freeze(this)}));Gc.NAME="offline_model_status_changed";var Kc=Oi((function e(t){Si(this,e),this.id=t,this.name=e.NAME,Object.freeze(this)}));Kc.NAME="offline_model_deleted";var Yc=Oi((function e(t){Si(this,e),this.id=t,this.name=e.NAME,Object.freeze(this)}));Yc.NAME="offline_model_permissions_revoked";var Jc=Oi((function e(t,n){Si(this,e),this.src=t,this.local=n,this.name=e.NAME}));Jc.NAME="detached";var Xc=Oi((function e(t,n,i,r,o,s){Si(this,e),this.src=t,this.local=n,this.relativePath=i,this.childEvent=r,this.sessionId=o,this.user=s,this.name=e.NAME,Object.freeze(this)}));Xc.NAME="node_changed";var Qc=Oi((function e(t,n,i,r,o,s){Si(this,e),this.src=t,this.local=n,this.index=i,this.value=r,this.sessionId=o,this.user=s,this.name=e.NAME,Object.freeze(this)}));Qc.NAME="insert";var Zc=Oi((function e(t,n,i,r,o,s){Si(this,e),this.src=t,this.local=n,this.index=i,this.oldValue=r,this.sessionId=o,this.user=s,this.name=e.NAME,Object.freeze(this)}));Zc.NAME="remove";var eu=Oi((function e(t,n,i,r,o,s,a){Si(this,e),this.src=t,this.local=n,this.index=i,this.value=r,this.oldValue=o,this.sessionId=s,this.user=a,this.name=e.NAME,Object.freeze(this)}));eu.NAME="set";var tu=Oi((function e(t,n,i,r,o,s){Si(this,e),this.src=t,this.local=n,this.fromIndex=i,this.toIndex=r,this.sessionId=o,this.user=s,this.name=e.NAME,Object.freeze(this)}));tu.NAME="reorder";var nu=Oi((function e(t,n,i,r,o){Si(this,e),this.src=t,this.local=n,this.value=i,this.sessionId=r,this.user=o,this.name=e.NAME,Object.freeze(this)}));nu.NAME="value";var iu=Oi((function e(t,n,i,r,o){Si(this,e),this.src=t,this.local=n,this.value=i,this.sessionId=r,this.user=o,this.name=e.NAME,Object.freeze(this)}));iu.NAME="value";var ru=Oi((function e(t,n,i,r,o){Si(this,e),this.src=t,this.local=n,this.value=i,this.sessionId=r,this.user=o,this.name=e.NAME,Object.freeze(this)}));ru.NAME="value";var ou=Oi((function e(t,n,i,r,o){Si(this,e),this.src=t,this.local=n,this.value=i,this.sessionId=r,this.user=o,this.name=e.NAME,Object.freeze(this)}));ou.NAME="delta";var su=Oi((function e(t,n,i,r,o,s,a){Si(this,e),this.src=t,this.local=n,this.key=i,this.value=r,this.oldValue=o,this.sessionId=s,this.user=a,this.name=e.NAME,Object.freeze(this)}));su.NAME="set";var au=Oi((function e(t,n,i,r,o,s){Si(this,e),this.src=t,this.local=n,this.key=i,this.oldValue=r,this.sessionId=o,this.user=s,this.name=e.NAME,Object.freeze(this)}));au.NAME="remove";var lu=Oi((function e(t,n,i,r,o){Si(this,e),this.src=t,this.local=n,this.value=i,this.sessionId=r,this.user=o,this.name=e.NAME,Object.freeze(this)}));lu.NAME="value";var cu=Oi((function e(t,n,i,r,o,s,a){Si(this,e),this.src=t,this.local=n,this.index=i,this.deleteCount=r,this.insertValue=o,this.sessionId=s,this.user=a,this.name=e.NAME,Object.freeze(this)}));cu.NAME="splice";var uu=Oi((function e(t,n,i,r,o,s){Si(this,e),this.src=t,this.local=n,this.index=i,this.value=r,this.sessionId=o,this.user=s,this.name=e.NAME,Object.freeze(this)}));uu.NAME="insert";var du=Oi((function e(t,n,i,r,o,s){Si(this,e),this.src=t,this.local=n,this.index=i,this.value=r,this.sessionId=o,this.user=s,this.name=e.NAME,Object.freeze(this)}));du.NAME="remove";var hu=Oi((function e(t,n,i,r,o){Si(this,e),this.src=t,this.local=n,this.value=i,this.sessionId=r,this.user=o,this.name=e.NAME,Object.freeze(this)}));hu.NAME="value";var fu=Oi((function e(t,n,i,r,o){Si(this,e),this.src=t,this.local=n,this.value=i,this.sessionId=r,this.user=o,this.name=e.NAME,Object.freeze(this)}));fu.NAME="value";var pu=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"convertEvent",value:function(e,t){if(e instanceof Jc)return new mc(t.wrap(e.src));if(e instanceof Xc)return new vc(t.wrap(e.src),e.user,e.sessionId,e.local,e.relativePath,this.convertEvent(e.childEvent,t));if(e instanceof Qc)return new ec(t.wrap(e.src),e.user,e.sessionId,e.local,e.index,t.wrap(e.value));if(e instanceof Zc)return new tc(t.wrap(e.src),e.user,e.sessionId,e.local,e.index,t.wrap(e.oldValue));if(e instanceof tu)return new nc(t.wrap(e.src),e.user,e.sessionId,e.local,e.fromIndex,e.toIndex);if(e instanceof eu)return new ic(t.wrap(e.src),e.user,e.sessionId,e.local,e.index,t.wrap(e.value),t.wrap(e.oldValue));if(e instanceof nu)return new rc(t.wrap(e.src),e.user,e.sessionId,e.local);if(e instanceof iu)return new lc(t.wrap(e.src),e.user,e.sessionId,e.local);if(e instanceof ru)return new uc(t.wrap(e.src),e.user,e.sessionId,e.local);if(e instanceof ou)return new dc(t.wrap(e.src),e.user,e.sessionId,e.local,e.value);if(e instanceof lu)return new ac(t.wrap(e.src),e.user,e.sessionId,e.local);if(e instanceof au)return new oc(t.wrap(e.src),e.user,e.sessionId,e.local,e.key,t.wrap(e.oldValue));if(e instanceof su)return new sc(t.wrap(e.src),e.user,e.sessionId,e.local,e.key,t.wrap(e.value),t.wrap(e.oldValue));if(e instanceof cu)return new pc(t.wrap(e.src),e.user,e.sessionId,e.local,e.index,e.deleteCount,e.insertValue);if(e instanceof uu)return new hc(t.wrap(e.src),e.user,e.sessionId,e.local,e.index,e.value);if(e instanceof du)return new fc(t.wrap(e.src),e.user,e.sessionId,e.local,e.index,e.value);if(e instanceof hu)return new gc(t.wrap(e.src),e.user,e.sessionId,e.local);if(e instanceof fu)return new cc(t.wrap(e.src),e.user,e.sessionId,e.local);throw new Error("Unable to convert event: "+e.name)}}]),e}(),gu=function(){function e(){Si(this,e),this._referencesBySessionId=new Map}return Oi(e,[{key:"put",value:function(e){var t=e.sessionId(),n=e.key(),i=this._referencesBySessionId.get(t);if(Fs.isUndefined(i)&&(i=new Map,this._referencesBySessionId.set(t,i)),i.has(n))throw new Error('Reference with key "'.concat(n,'" already exists for session "').concat(t,'".'));i.set(n,e)}},{key:"get",value:function(e,t){var n=this._referencesBySessionId.get(e);return Fs.isUndefined(n)?void 0:n.get(t)}},{key:"getAll",value:function(e){var t=this;Fs.isUndefined(e)&&(e={});var n=[];return(Fs.isSet(e.sessionId)?[e.sessionId]:Array.from(this._referencesBySessionId.keys())).forEach((function(i){var r=t._referencesBySessionId.get(i);(Fs.isSet(e.key)?[e.key]:Array.from(r.keys())).forEach((function(e){var t=r.get(e);Fs.isUndefined(t)||n.push(t)}))})),n}},{key:"removeAll",value:function(){this._referencesBySessionId.clear()}},{key:"remove",value:function(e,t){var n=this._referencesBySessionId.get(e);if(void 0!==n){var i=n.get(t);return n.delete(t),i}}},{key:"removeBySession",value:function(e){this._referencesBySessionId.delete(e)}},{key:"removeByKey",value:function(e){this._referencesBySessionId.forEach((function(t){t.delete(e)}))}}]),e}(),mu=Oi((function e(t,n,i,r,o){Si(this,e),this.src=t,this.oldValues=n,this.addedValues=i,this.removedValues=r,this.synthetic=o,this.name=e.NAME,n.length>0&&(this.oldValue=n[0]),Object.freeze(this)}));mu.NAME="set";var vu=Oi((function e(t,n){Si(this,e),this.src=t,this.oldValues=n,this.name=e.NAME,n.length>0&&(this.oldValue=n[0]),Object.freeze(this)}));vu.NAME="cleared";var yu=Oi((function e(t){Si(this,e),this.src=t,this.name=e.NAME,Object.freeze(this)}));yu.NAME="disposed";var bu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s,a,l){var c;return Si(this,n),(c=t.call(this))._referenceManager=e,c._disposed=!1,c._values=[],c._type=i,c._key=r,c._source=o,c._user=s,c._sessionId=a,c._local=l,c}return Oi(n,[{key:"type",value:function(){return this._type}},{key:"key",value:function(){return this._key}},{key:"source",value:function(){return this._source}},{key:"isLocal",value:function(){return this._local}},{key:"user",value:function(){return this._user}},{key:"sessionId",value:function(){return this._sessionId}},{key:"isDisposed",value:function(){return this._disposed}},{key:"_dispose",value:function(){this._disposed=!0;var e=new yu(this);this._emitEvent(e),this.removeAllListeners(),this._referenceManager._handleReferenceDisposed(this)}},{key:"value",value:function(){return this._values[0]}},{key:"values",value:function(){return this._values}},{key:"isSet",value:function(){return this._values.length>0}},{key:"_set",value:function(e,t){var n=this,i=this._values;this._values=e;var r=this._values.filter((function(e){return!i.includes(e)})),o=i.filter((function(e){return!n._values.includes(e)})),s=new mu(this,i,r,o,t);this._emitEvent(s)}},{key:"_clear",value:function(){var e=this._values;this._values=[];var t=new vu(this,e);this._emitEvent(t)}},{key:"_setIfChanged",value:function(e,t){pl.deepEquals(this._values,e)||this._set(e,t)}}]),n}(Xs);bu.Events={SET:mu.NAME,CLEARED:vu.NAME,DISPOSED:yu.NAME},bu.Types={INDEX:"index",RANGE:"range",PROPERTY:"property",ELEMENT:"element"},Object.freeze(bu.Events),Object.freeze(bu.Types);var wu=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"handleSplice",value:function(e,t,n,i){return e.map((function(e){return e>=e?e-Math.min(e-t,n)+i:e}))}},{key:"handleInsert",value:function(e,t,n){return e.map((function(e){return e>=t?e+n:e}))}},{key:"handleReorder",value:function(e,t,n){return e.map((function(e){return e>=n&&e<t?e+1:e>=t&&e<n?e-1:e}))}},{key:"handleRemove",value:function(e,t,n){return e.map((function(e){return e>t?e-Math.min(e-t,n):e}))}}]),e}(),_u=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s,a){return Si(this,n),t.call(this,e,bu.Types.INDEX,i,r,o,s,a)}return Oi(n,[{key:"_handleInsert",value:function(e,t){this._setIfChanged(wu.handleInsert(this._values,e,t),!0)}},{key:"_handleRemove",value:function(e,t){this._setIfChanged(wu.handleRemove(this._values,e,t),!0)}},{key:"_handleSplice",value:function(e,t,n){this._setIfChanged(wu.handleSplice(this._values,e,t,n),!0)}},{key:"_handleReorder",value:function(e,t){this._setIfChanged(wu.handleReorder(this._values,e,t),!0)}}]),n}(bu),xu=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"handleSplice",value:function(t,n,i,r){return t.map((function(t){var o=e._rangeToTuple(t),s=wu.handleSplice(o,n,i,r);return e._tupleToRange(s)}))}},{key:"handleInsert",value:function(t,n,i){return t.map((function(t){var r=e._rangeToTuple(t),o=wu.handleInsert(r,n,i);return e._tupleToRange(o)}))}},{key:"handleReorder",value:function(t,n,i){return t.map((function(t){var r=e._rangeToTuple(t),o=wu.handleReorder(r,n,i);return e._tupleToRange(o)}))}},{key:"handleRemove",value:function(t,n,i){return t.map((function(t){var r=e._rangeToTuple(t),o=wu.handleRemove(r,n,i);return e._tupleToRange(o)}))}},{key:"_rangeToTuple",value:function(e){return[e.start,e.end]}},{key:"_tupleToRange",value:function(e){return{start:e[0],end:e[1]}}}]),e}(),ku=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s,a){return Si(this,n),t.call(this,e,bu.Types.RANGE,i,r,o,s,a)}return Oi(n,[{key:"_handleInsert",value:function(e,t){this._setIfChanged(xu.handleInsert(this._values,e,t),!0)}},{key:"_handleRemove",value:function(e,t){this._setIfChanged(xu.handleRemove(this._values,e,t),!0)}},{key:"_handleSplice",value:function(e,t,n){this._setIfChanged(xu.handleSplice(this._values,e,t,n),!0)}},{key:"_handleReorder",value:function(e,t){this._setIfChanged(xu.handleReorder(this._values,e,t),!0)}}]),n}(bu),Cu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s,a){return Si(this,n),t.call(this,e,bu.Types.PROPERTY,i,r,o,s,a)}return Oi(n,[{key:"_handlePropertyRemoved",value:function(e){var t=this._values.indexOf(e,0);if(t>-1){var n=this._values.slice(0);n.splice(t,1),this._set(n,!0)}}}]),n}(bu),Su=Oi((function e(t,n,i,r){Si(this,e),this.sessionId=t,this.resourceId=n,this.valueId=i,this.key=r})),Eu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s,a){var l;return Si(this,n),(l=t.call(this,e,i,r,o)).referenceType=s,l.values=a,l}return Oi(n)}(Su),Ou=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){return Si(this,n),t.call(this,e,i,r,o)}return Oi(n)}(Su),Au=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o)).values=s,a}return Oi(n)}(Su),Mu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){return Si(this,n),t.call(this,e,i,r,o)}return Oi(n)}(Su),Ru=function(){function e(t,n,i,r){Si(this,e),this._referenceMap=new gu,this._localReferences=new Map,this._validTypes=n,this._source=t,this._onRemoteReference=i,this._identityCache=r}return Oi(e,[{key:"get",value:function(e,t){return this._referenceMap.get(e,t)}},{key:"getAll",value:function(e){return this._referenceMap.getAll(e)}},{key:"removeAll",value:function(){this.removeAllLocalReferences(),this.getAll().forEach((function(e){return e._dispose()}))}},{key:"addLocalReference",value:function(e){var t=e.reference().key();if(this._localReferences.has(t))throw new Error("Local reference already set for key: ".concat(t));this._localReferences.set(t,e),this._referenceMap.put(e.reference())}},{key:"removeLocalReference",value:function(e){var t=this._localReferences.get(e);void 0!==t&&t._dispose()}},{key:"removeAllLocalReferences",value:function(){var e=this;this._localReferences.forEach((function(t,n){e.removeLocalReference(n)}))}},{key:"getLocalReference",value:function(e){return this._localReferences.get(e)}},{key:"handleRemoteReferenceEvent",value:function(e){if(e instanceof Eu)this._handleRemoteReferenceShared(e);else if(e instanceof Au)this._handleRemoteReferenceSet(e);else if(e instanceof Mu)this._handleRemoteReferenceCleared(e);else{if(!(e instanceof Ou))throw new Error("Invalid reference event.");this._handleRemoteReferenceUnshared(e)}}},{key:"reShare",value:function(){this._localReferences.forEach((function(e){e.isShared()&&e.share()}))}},{key:"_handleReferenceDisposed",value:function(e){this._referenceMap.remove(e.sessionId(),e.key()),e.isLocal()&&this._localReferences.delete(e.key())}},{key:"_handleRemoteReferenceShared",value:function(e){var t,n=this._identityCache.getUserForSession(e.sessionId),i=e.values;if(this._assertValidType(e.referenceType),"index"===e.referenceType)t=new _u(this,e.key,this._source,n,e.sessionId,!1);else if("range"===e.referenceType)t=new ku(this,e.key,this._source,n,e.sessionId,!1);else if("element"===e.referenceType)t=new Iu(this,e.key,this._source,n,e.sessionId,!1);else{if("property"!==e.referenceType)throw new Js("Invalid reference type: "+e);t=new Cu(this,e.key,this._source,n,e.sessionId,!1)}null!==i&&this._setReferenceValues(t,i),this._referenceMap.put(t),this._onRemoteReference(t)}},{key:"_assertValidType",value:function(e){if(!this._validTypes.includes(e))throw new Error("Invalid reference type: ".concat(e))}},{key:"_handleRemoteReferenceUnshared",value:function(e){this._referenceMap.remove(e.sessionId,e.key)._dispose()}},{key:"_handleRemoteReferenceCleared",value:function(e){this._referenceMap.get(e.sessionId,e.key)._clear()}},{key:"_handleRemoteReferenceSet",value:function(e){var t=this._referenceMap.get(e.sessionId,e.key);this._setReferenceValues(t,e.values)}},{key:"_setReferenceValues",value:function(e,t){if(e.type()===bu.Types.ELEMENT){var n,i=[],r=No(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,s=this._source._getRegisteredValue(o);void 0!==s&&i.push(s)}}catch(a){r.e(a)}finally{r.f()}e._set(i,!1)}else e._set(t,!1)}}]),e}(),Tu={VALUE:"value",DETACHED:"detached",REFERENCE:"reference",MODEL_CHANGED:"model_changed"};Object.freeze(Tu);var Du=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s,a){var l;Si(this,n),(l=t.call(this))._delegate=e,l._callbacks=i,l._wrapperFactory=r,l._model=o;return l._referenceManager=new Ru(Ii(l),s,(function(e){l._fireReferenceCreated(e)}),a),l._delegate.events().pipe(_s((function(e){return l._model.emitLocalEvents()||!e.local||e instanceof Jc}))).subscribe((function(e){e instanceof Jc&&l._referenceManager.removeAll();var t=pu.convertEvent(e,l._wrapperFactory);l._emitEvent(t)})),l}return Oi(n,[{key:"model",value:function(){return this._model}},{key:"id",value:function(){return this._delegate.id()}},{key:"type",value:function(){return this._delegate.type()}},{key:"path",value:function(){return this._delegate.path()}},{key:"parent",value:function(){var e=this._delegate.path().slice(0);e.pop();var t=this._model.elementAt(e);return t}},{key:"relativePath",value:function(){var e=this._delegate.path().slice(0);return e.length>0?e.pop():null}},{key:"removeFromParent",value:function(){this._assertWritable();var e=this._delegate.path().slice(0);if(0===e.length)throw new Error("Can not remove the root object from the model");var t=e.pop();this._model.elementAt(e)._removeChild(t)}},{key:"isDetached",value:function(){return this._delegate.isDetached()}},{key:"isAttached",value:function(){return!this._delegate.isDetached()}},{key:"value",value:function(e){return 0===arguments.length?this._delegate.data():(this._assertWritable(),void this._delegate.data(e))}},{key:"toJSON",value:function(){return this._delegate.toJson()}},{key:"reference",value:function(e,t){return this._referenceManager.get(e,t)}},{key:"references",value:function(e){return this._referenceManager.getAll(e)}},{key:"_handleRemoteReferenceEvent",value:function(e){this._referenceManager.handleRemoteReferenceEvent(e)}},{key:"_sendOperation",value:function(e){this._callbacks.sendOperationCallback(e)}},{key:"_assertWritable",value:function(){if(!this._model.permissions().write)throw new Error("The user does not have write permissions for the model.");this._assertAttached()}},{key:"_assertAttached",value:function(){if(this.isDetached())throw Error("Can not perform actions on a detached RealTimeElement.")}},{key:"_fireReferenceCreated",value:function(e){this._emitEvent(new Ac(e,this.model(),this))}}]),n}(Xs);Du.Events=Tu,Object.freeze(Du.Events);var Iu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s,a){var l;return Si(this,n),(l=t.call(this,e,bu.Types.ELEMENT,i,r,o,s,a))._detachedListener=function(e){l._handleElementRemoved(e.src)},l}return Oi(n,[{key:"_set",value:function(e,t){var i,r=No(this.values());try{for(r.s();!(i=r.n()).done;){i.value.removeListener(Du.Events.DETACHED,this._detachedListener)}}catch(a){r.e(a)}finally{r.f()}var o,s=No(e);try{for(s.s();!(o=s.n()).done;){o.value.addListener(Du.Events.DETACHED,this._detachedListener)}}catch(a){s.e(a)}finally{s.f()}Mr(Ri(n.prototype),"_set",this).call(this,e,t)}},{key:"_clear",value:function(){var e,t=No(this.values());try{for(t.s();!(e=t.n()).done;){e.value.removeListener(Du.Events.DETACHED,this._detachedListener)}}catch(i){t.e(i)}finally{t.f()}Mr(Ri(n.prototype),"_clear",this).call(this)}},{key:"_handleElementRemoved",value:function(e){var t=this._values.indexOf(e,0);if(t>-1){var n=this._values.slice(0);n.splice(t,1),this._set(n,!0)}}}]),n}(bu),Lu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.ARRAY_SET,e,i)).index=r,s.value=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.index,e.index),Ls.update(this.value,e.value))}}]),n}(al),Nu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,Ga.ARRAY_REMOVE,e,i)).index=r,Object.freeze(Ii(o)),o}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.index,e.index))}}]),n}(al),Fu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.ARRAY_REORDER,e,i)).fromIndex=r,s.toIndex=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.fromIndex,e.fromIndex),Ls.update(this.toIndex,e.toIndex))}}]),n}(al),$u=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,Ga.ARRAY_VALUE,e,i)).value=r,Object.freeze(Ii(o)),o}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.value,e.value))}}]),n}(al),Pu=Object.assign(Object.assign({},Tu),{INSERT:"insert",REMOVE:"remove",SET:"set",REORDER:"reorder"});Object.freeze(Pu);var ju=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o,[],s))._delegate.events().subscribe((function(e){if(e.local)if(e instanceof Qc)a._sendOperation(new ll(a.id(),!1,e.index,e.src.get(e.index).dataValue()));else if(e instanceof Zc)a._sendOperation(new Nu(a.id(),!1,e.index));else if(e instanceof tu)a._sendOperation(new Fu(a.id(),!1,e.fromIndex,e.toIndex));else if(e instanceof eu){var t=e.index;a._sendOperation(new Lu(a.id(),!1,t,e.src.get(t).dataValue()))}else e instanceof nu&&a._sendOperation(new $u(a.id(),!1,e.src.dataValue().value))})),a}return Oi(n,[{key:"get",value:function(e){return this._wrapperFactory.wrap(this._delegate.get(e))}},{key:"set",value:function(e,t){return this._assertWritable(),this._wrapperFactory.wrap(this._delegate.set(e,t))}},{key:"insert",value:function(e,t){return this._assertWritable(),this._wrapperFactory.wrap(this._delegate.insert(e,t))}},{key:"remove",value:function(e){return this._assertWritable(),this._wrapperFactory.wrap(this._delegate.remove(e))}},{key:"reorder",value:function(e,t){this._assertWritable(),this._delegate.reorder(e,t)}},{key:"push",value:function(e){return this._assertWritable(),this._wrapperFactory.wrap(this._delegate.push(e))}},{key:"pop",value:function(){return this._assertWritable(),this._wrapperFactory.wrap(this._delegate.pop())}},{key:"unshift",value:function(e){return this._assertWritable(),this._wrapperFactory.wrap(this._delegate.unshift(e))}},{key:"shift",value:function(){return this._assertWritable(),this._wrapperFactory.wrap(this._delegate.shift())}},{key:"length",value:function(){return this._delegate.length()}},{key:"some",value:function(e){var t=this;return this._delegate.some((function(n,i){return e(t._wrapperFactory.wrap(n),i)}))}},{key:"every",value:function(e){var t=this;return this._delegate.every((function(n,i){return e(t._wrapperFactory.wrap(n),i)}))}},{key:"find",value:function(e){var t=this,n=this._delegate.find((function(n,i){return e(t._wrapperFactory.wrap(n),i)}));return void 0===n?void 0:this._wrapperFactory.wrap(n)}},{key:"findIndex",value:function(e){var t=this;return this._delegate.findIndex((function(n,i){return e(t._wrapperFactory.wrap(n),i)}))}},{key:"forEach",value:function(e){var t=this;this._delegate.forEach((function(n,i){e(t._wrapperFactory.wrap(n),i)}))}},{key:"elementAt",value:function(){var e;return this._wrapperFactory.wrap((e=this._delegate).valueAt.apply(e,arguments))}},{key:"_removeChild",value:function(e){if("number"!==typeof e)throw new Error("The relative path of a child must be a number: "+typeof e);this.remove(e)}},{key:"_handleRemoteReferenceEvent",value:function(e){throw new Error("Arrays to do have references yet.")}}]),n}(Du);ju.Events=Pu;var Bu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,Ga.BOOLEAN_VALUE,e,i)).value=r,Object.freeze(Ii(o)),o}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.value,e.value))}}]),n}(al),zu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o,[],s))._delegate.events().subscribe((function(e){e.local&&e instanceof iu&&a._sendOperation(new Bu(a.id(),!1,e.value))})),a}return Oi(n,[{key:"_handleRemoteReferenceEvent",value:function(e){throw new Error("Boolean values do not process references")}}]),n}(Du);zu.Events=Tu;var Uu=function(){function e(t,n,i){Si(this,e),this._idGenerator=t,this._undefinedObjectValues=n,this._undefinedArrayValues=i}return Oi(e,[{key:"createDataValue",value:function(e){var t=this,n=this._idGenerator();if(Fs.isNull(e))return{id:n,type:"null",value:null};if(Fs.isString(e))return{id:n,type:"string",value:e};if(Fs.isDate(e))return{id:n,type:"date",value:e};if(Fs.isArray(e))return{id:n,type:"array",value:e.map((function(e){if(void 0===e){if("null"===t._undefinedArrayValues)return t.createDataValue(null);throw new Js("Found an undefined value within an array. To convert undefined values in arrays to null, set the options.model.data.undefinedArrayValues option to 'null'")}return t.createDataValue(e)}))};if(Fs.isObject(e)){if(e.hasOwnProperty("$convergenceType")){var i=e.$convergenceType;if("date"===i){if(e.hasOwnProperty("value"))return{id:n,type:"date",value:new Date(e.value)};throw new Js("Invalid convergence data type 'data': The value field missing.")}throw new Js("Invalid convergence data type: "+i+" supported types are [date].")}var r={};return Object.getOwnPropertyNames(e).forEach((function(n){var i=e[n];if(void 0===i){if("omit"!==t._undefinedObjectValues)throw new Js("Found an undefined value within an object. To simply omit undefined values within objects, set the options.model.data.undefinedArrayValues option to 'omit'")}else r[n]=t.createDataValue(i)})),{id:n,type:"object",value:r}}if(Fs.isNumber(e))return{id:n,type:"number",value:e};if(Fs.isBoolean(e))return{id:n,type:"boolean",value:e};throw new Js("Unsupported data type found within model data: "+typeof e)}}]),e}(),Vu=Oi((function e(){Si(this,e)}));Vu.OBJECT="object",Vu.ARRAY="array",Vu.STRING="string",Vu.NUMBER="number",Vu.BOOLEAN="boolean",Vu.NULL="null",Vu.UNDEFINED="undefined",Vu.DATE="date";var Wu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this))._id=i,a._session=s,a._modelType=e,a._model=o,a._path=r,a._model&&a._model._registerValue(Ii(a)),a}return Oi(n,[{key:"session",value:function(){return this._session}},{key:"id",value:function(){return this._id}},{key:"type",value:function(){return this._modelType}},{key:"path",value:function(){return this._path()}},{key:"model",value:function(){return this._model}},{key:"isDetached",value:function(){return null===this._model}},{key:"_detach",value:function(e){this._model._unregisterValue(this),this._model=null;var t=new Jc(this,e);this._emitEvent(t)}},{key:"data",value:function(e){return 0===arguments.length?this._getData():void this._setData(e)}},{key:"_emitValueEvent",value:function(e){this._emitEvent(e),this._emitEvent(new Xc(this,e.local,[],e,this._session.sessionId(),this._session.user()))}},{key:"_exceptionIfDetached",value:function(){if(this.isDetached())throw Error("Can not perform actions on a detached ModelNode.")}}]),n}(Xs);Wu.Events={DETACHED:"detached",NODE_CHANGED:"node_changed",OPERATION:"operation"};var Hu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){return Si(this,n),t.call(this,Vu.UNDEFINED,e,i,void 0,r)}return Oi(n,[{key:"dataValue",value:function(){}},{key:"toJson",value:function(){}},{key:"_handleModelOperationEvent",value:function(e){throw new Error("Undefined values do not process operations")}},{key:"_getData",value:function(){}},{key:"_setData",value:function(e){throw new Error("Can not set the delta on a Undefined type.")}}]),n}(Wu);Hu.Events={DETACHED:Wu.Events.DETACHED};var qu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){return Si(this,n),t.call(this,Vu.NULL,e,i,r,o)}return Oi(n,[{key:"dataValue",value:function(){return{id:this.id(),type:"null",value:this.data()}}},{key:"toJson",value:function(){return null}},{key:"_handleModelOperationEvent",value:function(e){throw new Error("Null values do not process operations")}},{key:"_getData",value:function(){return null}},{key:"_setData",value:function(e){throw new Error("Can not set the delta on a Null type.")}}]),n}(Wu);qu.Events={DETACHED:Wu.Events.DETACHED};var Gu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Vu.STRING,e.id,i,r,o))._data=e.value,s}return Oi(n,[{key:"dataValue",value:function(){return{id:this.id(),type:"string",value:this.data()}}},{key:"toJson",value:function(){return this._data}},{key:"splice",value:function(e,t,n){this._applySplice(e,t,n,!0,this._session.sessionId(),this._session.user())}},{key:"insert",value:function(e,t){this._applySplice(e,0,t,!0,this._session.sessionId(),this._session.user())}},{key:"remove",value:function(e,t){this._applySplice(e,t,"",!0,this._session.sessionId(),this._session.user())}},{key:"length",value:function(){return this._data.length}},{key:"_handleModelOperationEvent",value:function(e){var t=e.operation.type;if(t===Ga.STRING_SPLICE)this._handleSpliceOperation(e);else{if(t!==Ga.STRING_VALUE)throw new Error("Invalid operation type for a String: "+e.operation.type);this._handleSetOperation(e)}}},{key:"_setData",value:function(e){this._applySetValue(e,!0,this._session.sessionId(),this._session.user())}},{key:"_getData",value:function(){return this._data}},{key:"_applySplice",value:function(e,t,n,i,r,o){Us.assertValidStringIndex(e,this._data,!0,"index"),Us.assertValidStringIndex(e+t,this._data,!0);var s=this._data.slice(e,e+t);if(this._data=this._data.slice(0,e)+n+this._data.slice(e+t,this._data.length),t>0&&0===n.length){var a=new du(this,i,e,s,r,o);this._emitValueEvent(a)}else if(0===t&&n.length>0){var l=new uu(this,i,e,n,r,o);this._emitValueEvent(l)}else if(t>0&&n.length>0){var c=new cu(this,i,e,t,n,r,o);this._emitValueEvent(c)}}},{key:"_applySetValue",value:function(e,t,n,i){Us.assertString(e),this._data=e;var r=new hu(this,t,e,n,i);this._emitValueEvent(r)}},{key:"_handleSpliceOperation",value:function(e){var t=e.operation;this._applySplice(t.index,t.deleteCount,t.insertValue,!1,e.sessionId,e.user)}},{key:"_handleSetOperation",value:function(e){var t=e.operation;this._applySetValue(t.value,!1,e.sessionId,e.user)}}]),n}(Wu);Gu.Events={INSERT:"insert",REMOVE:"remove",VALUE:"value",DETACHED:Wu.Events.DETACHED,MODEL_CHANGED:Wu.Events.MODEL_CHANGED};var Ku=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o,s))._nodeChangedHandler=function(e){var t=e.relativePath.slice(0);t.unshift(a._idToPathElement.get(e.src.id()));var n=new Xc(Ii(a),e.local,t,e.childEvent,a._session.sessionId(),a._session.user());a._emitEvent(n)},a._idToPathElement=new Map,a}return Oi(n,[{key:"valueAt",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=1===t.length&&Array.isArray(t[0])?t[0]:t;return 0===t.length?this:this._valueAt(i)}},{key:"_detach",value:function(e){this._detachChildren(e),Mr(Ri(n.prototype),"_detach",this).call(this,e)}},{key:"_createUndefinedNode",value:function(){return Zu.create(void 0,(function(){return null}),void 0,this._session)}}]),n}(Wu);Ku.Events={NODE_CHANGED:Wu.Events.NODE_CHANGED};var Yu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;Si(this,n),(a=t.call(this,Vu.ARRAY,e.id,i,r,o))._children=[],a._dataValueFactory=s;for(var l=0;l<e.value.length;l++){var c=e.value[l];a._idToPathElement.set(c.id,l),a._children.push(Zu.create(c,a._pathCB(c.id),r,o,s))}return a._children.forEach((function(e){e.on(n.Events.NODE_CHANGED,a._nodeChangedHandler)})),a}return Oi(n,[{key:"dataValue",value:function(){var e=this._children.map((function(e){return e.dataValue()}));return{id:this.id(),type:"array",value:e}}},{key:"toJson",value:function(){var e=[];return this.forEach((function(t){e.push(t.toJson())})),e}},{key:"get",value:function(e){return this._validateIndex(e,!1),this._children[e]}},{key:"set",value:function(e,t){this._validateIndex(e,!1);var n=this._dataValueFactory.createDataValue(t);return this._applySet(e,n,!0,this._session.sessionId(),this._session.user()),this.get(e)}},{key:"insert",value:function(e,t){this._validateIndex(e,!0);var n=this._dataValueFactory.createDataValue(t);return this._applyInsert(e,n,!0,this._session.sessionId(),this._session.user()),this.get(e)}},{key:"remove",value:function(e){this._validateIndex(e,!1);var t=this.get(e);return this._applyRemove(e,!0,this._session.sessionId(),this._session.user()),t}},{key:"reorder",value:function(e,t){this._validateIndex(e,!1,"fromIndex"),this._validateIndex(t,!1,"toIndex"),this._applyReorder(e,t,!0,this._session.sessionId(),this._session.user())}},{key:"push",value:function(e){return this.insert(this._children.length,e)}},{key:"pop",value:function(){return this.remove(this._children.length-1)}},{key:"unshift",value:function(e){return this.insert(0,e)}},{key:"shift",value:function(){return this.remove(0)}},{key:"length",value:function(){return this._children.length}},{key:"some",value:function(e){return this._children.some(e)}},{key:"every",value:function(e){return this._children.every(e)}},{key:"find",value:function(e){return this._children.find(e)}},{key:"findIndex",value:function(e){return this._children.findIndex(e)}},{key:"forEach",value:function(e){this._children.forEach(e)}},{key:"_handleModelOperationEvent",value:function(e){var t=e.operation.type;if(t===Ga.ARRAY_INSERT)this._handleInsertOperation(e);else if(t===Ga.ARRAY_REORDER)this._handleReorderOperation(e);else if(t===Ga.ARRAY_REMOVE)this._handleRemoveOperation(e);else if(t===Ga.ARRAY_SET)this._handleSetOperation(e);else{if(t!==Ga.ARRAY_VALUE)throw new Error("Invalid operation type for an Array: "+e.operation.type);this._handleSetValueOperation(e)}}},{key:"_getData",value:function(){var e=[];return this.forEach((function(t){e.push(t.data())})),e}},{key:"_setData",value:function(e){var t=this,n=e.map((function(e){return t._dataValueFactory.createDataValue(e)}));this._applySetValue(n,!0,this._session.sessionId(),this._session.user())}},{key:"_detachChildren",value:function(e){var t=this;this._idToPathElement.clear(),this.forEach((function(i){i._detach(e),i.removeListener(n.Events.NODE_CHANGED,t._nodeChangedHandler)}))}},{key:"_valueAt",value:function(e){if(0===e.length)return this;var t=e[0],n=this._children[t];return void 0===n?this._createUndefinedNode():e.length>1?n.type()===Vu.OBJECT||n.type()===Vu.ARRAY?n.valueAt(e.slice(1,e.length)):this._createUndefinedNode():n}},{key:"_validateIndex",value:function(e,t,n){if(e<0)throw new Error("".concat(n||"index"," must be >= 0: ").concat(e));if(!t&&e>=this._children.length||t&&e>this._children.length){var i=t?"<=":"<";throw new Error("".concat(n||"index"," must be ").concat(i," the length of the array: ").concat(e))}}},{key:"_applyInsert",value:function(e,t,i,r,o){this._validateInsert(e,t),this._idToPathElement.set(t.id,e);var s=Zu.create(t,this._pathCB(t.id),this._model,this._session,this._dataValueFactory);s.on(n.Events.NODE_CHANGED,this._nodeChangedHandler),this._children.splice(e,0,s),this._updateIdToPathElementMap(e);var a=new Qc(this,i,e,s,r,o);this._emitValueEvent(a)}},{key:"_applySet",value:function(e,t,i,r,o){this._validateReplace(e,t);var s=this._valueAt([e]);s.type()!==Vu.UNDEFINED&&(s.removeListener(n.Events.NODE_CHANGED,this._nodeChangedHandler),s._detach(i)),this._idToPathElement.set(t.id,e);var a=Zu.create(t,this._pathCB(t.id),this.model(),this._session,this._dataValueFactory);a.on(n.Events.NODE_CHANGED,this._nodeChangedHandler),this._children[e]=a,this._updateIdToPathElementMap(e);var l=new eu(this,i,e,a,s,r,o);this._emitValueEvent(l)}},{key:"_applyRemove",value:function(e,t,i,r){this._validateRemove(e);var o=this._valueAt([e]);o.type()!==Vu.UNDEFINED&&(o.removeListener(n.Events.NODE_CHANGED,this._nodeChangedHandler),o._detach(t)),this._children.splice(e,1),this._updateIdToPathElementMap(e);var s=new Zc(this,t,e,o,i,r);this._emitValueEvent(s)}},{key:"_applySetValue",value:function(e,t,i,r){var o=this;Us.assertArray(e,"data"),this._detachChildren(t),this._children=e.map((function(e,t){return o._idToPathElement.set(e.id,t),Zu.create(e,o._pathCB(e.id),o.model(),o._session,o._dataValueFactory)})),this._children.forEach((function(e){e.on(n.Events.NODE_CHANGED,o._nodeChangedHandler)}));var s=new nu(this,t,this.data(),i,r);this._emitValueEvent(s)}},{key:"_applyReorder",value:function(e,t,n,i,r){this._validateMove(e,t);var o=this._children[e];this._children.splice(e,1),this._children.splice(t,0,o),this._updateIdToPathElementMap(Math.min(e,t));var s=new tu(this,n,e,t,i,r);this._emitValueEvent(s)}},{key:"_handleInsertOperation",value:function(e){var t=e.operation;this._applyInsert(t.index,t.value,!1,e.sessionId,e.user)}},{key:"_handleReorderOperation",value:function(e){var t=e.operation;this._applyReorder(t.fromIndex,t.toIndex,!1,e.sessionId,e.user)}},{key:"_handleRemoveOperation",value:function(e){var t=e.operation;this._applyRemove(t.index,!1,e.sessionId,e.user)}},{key:"_handleSetOperation",value:function(e){var t=e.operation;this._applySet(t.index,t.value,!1,e.sessionId,e.user)}},{key:"_handleSetValueOperation",value:function(e){var t=e.operation;this._applySetValue(t.value,!1,e.sessionId,e.user)}},{key:"_pathCB",value:function(e){var t=this;return function(){var n=t.path();return n.push(t._idToPathElement.get(e)),n}}},{key:"_validateInsert",value:function(e,t){if(this._children.length<e||e<0)throw new Error("Index out of bounds!");if("undefined"===typeof t||"function"===typeof t)throw new Error("Invalid value for insert!")}},{key:"_validateMove",value:function(e,t){if(this._children.length<=e||e<0||this._children.length<=t||t<0)throw new Error("Index out of bounds!")}},{key:"_validateRemove",value:function(e){if(this._children.length<=e||e<0)throw new Error("Index out of bounds!")}},{key:"_validateReplace",value:function(e,t){if(this._children.length<=e||e<0)throw new Error("Index out of bounds!");if("undefined"===typeof t||"function"===typeof t)throw new Error("Illegal argument!")}},{key:"_updateIdToPathElementMap",value:function(e){for(var t=e;t<this._children.length;t++){var n=this._children[t];this._idToPathElement.set(n.id(),t)}}}]),n}(Ku);Yu.Events={INSERT:"insert",REMOVE:"remove",SET:"set",REORDER:"reorder",VALUE:"value",DETACHED:Wu.Events.DETACHED,NODE_CHANGED:Ku.Events.NODE_CHANGED};var Ju=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Vu.NUMBER,e.id,i,r,o))._data=e.value,s}return Oi(n,[{key:"dataValue",value:function(){return{id:this.id(),type:"number",value:this.data()}}},{key:"toJson",value:function(){return this._data}},{key:"add",value:function(e){this._applyDelta(e,!0,this._session.sessionId(),this._session.user())}},{key:"subtract",value:function(e){this.add(-e)}},{key:"increment",value:function(){this.add(1)}},{key:"decrement",value:function(){this.add(-1)}},{key:"_handleModelOperationEvent",value:function(e){var t=e.operation.type;if(t===Ga.NUMBER_DELTA)this._handleAddOperation(e);else{if(t!==Ga.NUMBER_VALUE)throw new Error("Invalid operation type for a Number: "+e.operation.type);this._handleSetOperation(e)}}},{key:"_setData",value:function(e){this._applySet(e,!0,this._session.sessionId(),this._session.user())}},{key:"_getData",value:function(){return this._data}},{key:"_applyDelta",value:function(e,t,n,i){if(this._validateNumber(e),0!==e){this._data+=e;var r=new ou(this,t,e,n,i);this._emitValueEvent(r)}}},{key:"_applySet",value:function(e,t,n,i){this._validateNumber(e),this._data=e;var r=new ru(this,t,e,n,i);this._emitValueEvent(r)}},{key:"_handleAddOperation",value:function(e){var t=e.operation;this._applyDelta(t.delta,!1,e.sessionId,e.user)}},{key:"_handleSetOperation",value:function(e){var t=e.operation;this._applySet(t.value,!1,e.sessionId,e.user)}},{key:"_validateNumber",value:function(e){if("number"!==typeof e)throw new Error("The value must be a number but was: ".concat(typeof e));if(isNaN(e))throw new Error("The delta must not be NaN")}}]),n}(Wu);Ju.Events={DELTA:"delta",VALUE:"value",DETACHED:Wu.Events.DETACHED,MODEL_CHANGED:Wu.Events.MODEL_CHANGED};var Xu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Vu.BOOLEAN,e.id,i,r,o))._data=e.value,s}return Oi(n,[{key:"dataValue",value:function(){return{id:this.id(),type:"boolean",value:this.data()}}},{key:"toJson",value:function(){return this._data}},{key:"_handleModelOperationEvent",value:function(e){if(e.operation.type!==Ga.BOOLEAN_VALUE)throw new Error("Invalid operation type for a Boolean: "+e.operation.type);this._handleSetOperation(e)}},{key:"_setData",value:function(e){this._applySetValue(e,!0,this._session.sessionId(),this._session.user())}},{key:"_getData",value:function(){return this._data}},{key:"_applySetValue",value:function(e,t,n,i){Us.assertBoolean(e),this._data=e;var r=new iu(this,t,e,n,i);this._emitValueEvent(r)}},{key:"_handleSetOperation",value:function(e){var t=e.operation;this._applySetValue(t.value,!1,e.sessionId,e.user)}}]),n}(Wu);Xu.Events={VALUE:"value",DETACHED:Wu.Events.DETACHED,MODEL_CHANGED:Wu.Events.MODEL_CHANGED};var Qu=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Vu.DATE,e.id,i,r,o))._data=e.value,s}return Oi(n,[{key:"dataValue",value:function(){return{id:this.id(),type:"date",value:this.data()}}},{key:"toJson",value:function(){return{$convergenceType:"date",value:this._data.toISOString()}}},{key:"_handleModelOperationEvent",value:function(e){if(e.operation.type!==Ga.DATE_VALUE)throw new Error("Invalid operation type for a Date: "+e.operation.type);this._handleSetOperation(e)}},{key:"_setData",value:function(e){this._applySetValue(e,!0,this._session.sessionId(),this._session.user())}},{key:"_getData",value:function(){return this._data}},{key:"_applySetValue",value:function(e,t,n,i){Us.assertDate(e),this._data=e;var r=new fu(this,t,e,n,i);this._emitValueEvent(r)}},{key:"_handleSetOperation",value:function(e){var t=e.operation;this._applySetValue(t.value,!1,e.sessionId,e.user)}}]),n}(Wu);Qu.Events={VALUE:"value",DETACHED:Wu.Events.DETACHED,MODEL_CHANGED:Wu.Events.MODEL_CHANGED};var Zu=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"create",value:function(e,t,n,i,r){if(void 0===e)return new Hu(void 0,t,i);var o=e.type;if("null"===o)return new qu(e.id,t,n,i);if("string"===o)return new Gu(e,t,n,i);if("array"===o)return new Yu(e,t,n,i,r);if("object"===o)return new ed(e,t,n,i,r);if("number"===o)return new Ju(e,t,n,i);if("boolean"===o)return new Xu(e,t,n,i);if("date"===o)return new Qu(e,t,n,i);throw new Error("Invalid data type: "+o)}}]),e}(),ed=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,Vu.OBJECT,e.id,i,r,o)).dataValueFactory=s,a._children=new Map,Object.getOwnPropertyNames(e.value).forEach((function(t){var n=e.value[t];a._idToPathElement.set(n.id,t),a._children.set(t,Zu.create(n,a._pathCB(n.id),r,a._session,a.dataValueFactory))})),a._children.forEach((function(e){e.on(n.Events.NODE_CHANGED,a._nodeChangedHandler)})),a}return Oi(n,[{key:"dataValue",value:function(){var e={};return this._children.forEach((function(t,n){e[n]=t.dataValue()})),{id:this.id(),type:"object",value:e}}},{key:"toJson",value:function(){var e={};return this.forEach((function(t,n){e[n]=t.toJson()})),e}},{key:"get",value:function(e){return Us.assertString(e,"key"),this._valueAt([e])}},{key:"set",value:function(e,t){var n=this.dataValueFactory.createDataValue(t);return this._applySet(e,n,!0,this._session.sessionId(),this._session.user()),this.get(e)}},{key:"remove",value:function(e){var t=this._valueAt([e]);return this._applyRemove(e,!0,this._session.sessionId(),this._session.user()),t}},{key:"keys",value:function(){var e=[];return this._children.forEach((function(t,n){e.push(n)})),e}},{key:"hasKey",value:function(e){return this._children.has(e)}},{key:"forEach",value:function(e){this._children.forEach((function(t,n){e(t,n)}))}},{key:"_handleModelOperationEvent",value:function(e){switch(e.operation.type){case Ga.OBJECT_ADD:this._handleAddPropertyOperation(e);break;case Ga.OBJECT_SET:this._handleSetPropertyOperation(e);break;case Ga.OBJECT_REMOVE:this._handleRemovePropertyOperation(e);break;case Ga.OBJECT_VALUE:this._handleSetOperation(e);break;default:throw new Error("Invalid operation type for an Object: "+e.operation.type)}}},{key:"_getData",value:function(){var e={};return this.forEach((function(t,n){e[n]=t.data()})),e}},{key:"_setData",value:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=this.dataValueFactory.createDataValue(e[n]));this._applySetValue(t,!0,this._session.sessionId(),this._session.user())}},{key:"_valueAt",value:function(e){if(0===e.length)return this;var t=e[0],n=this._children.get(t);return void 0===n?this._createUndefinedNode():e.length>1?n.type()===Vu.OBJECT||n.type()===Vu.ARRAY?n.valueAt(e.slice(1,e.length)):this._createUndefinedNode():n}},{key:"_detachChildren",value:function(e){var t=this;this.forEach((function(i){i._detach(e),i.removeListener(n.Events.NODE_CHANGED,t._nodeChangedHandler)}))}},{key:"_pathCB",value:function(e){var t=this;return function(){var n=t.path();return n.push(t._idToPathElement.get(e)),n}}},{key:"_applySet",value:function(e,t,i,r,o){Us.assertString(e,"key");var s=this._valueAt([e]);s.type()!==Vu.UNDEFINED&&(s.removeListener(n.Events.NODE_CHANGED,this._nodeChangedHandler),s._detach(i));var a=Zu.create(t,this._pathCB(t.id),this._model,this._session,this.dataValueFactory);a.on(n.Events.NODE_CHANGED,this._nodeChangedHandler),this._children.set(e,a),this._idToPathElement.set(a.id(),e);var l=new su(this,i,e,a,s,r,o);this._emitValueEvent(l)}},{key:"_applyRemove",value:function(e,t,i,r){if(Us.assertString(e,"key"),this._children.has(e)){this._idToPathElement.delete(e);var o=this._children.get(e);o.removeListener(n.Events.NODE_CHANGED,this._nodeChangedHandler),o._detach(t),this._children.delete(e);var s=new au(this,t,e,o,i,r);this._emitValueEvent(s)}}},{key:"_applySetValue",value:function(e,t,i,r){var o=this;for(var s in this._detachChildren(t),this._children=new Map,e)if(e.hasOwnProperty(s)){var a=e[s];this._idToPathElement.set(a.id,s),this._children.set(s,Zu.create(a,this._pathCB(a.id),this.model(),this._session,this.dataValueFactory))}this._children.forEach((function(e){e.on(n.Events.NODE_CHANGED,o._nodeChangedHandler)}));var l=new lu(this,t,this.data(),i,r);this._emitValueEvent(l)}},{key:"_handleAddPropertyOperation",value:function(e){var t=e.operation;this._applySet(t.prop,t.value,!1,e.sessionId,e.user)}},{key:"_handleSetPropertyOperation",value:function(e){var t=e.operation;this._applySet(t.prop,t.value,!1,e.sessionId,e.user)}},{key:"_handleRemovePropertyOperation",value:function(e){var t=e.operation;this._applyRemove(t.prop,!1,e.sessionId,e.user)}},{key:"_handleSetOperation",value:function(e){var t=e.operation;this._applySetValue(t.value,!1,e.sessionId,e.user)}}]),n}(Ku);ed.Events={SET:"set",REMOVE:"remove",VALUE:"value",DETACHED:Wu.Events.DETACHED,NODE_CHANGED:Wu.Events.NODE_CHANGED,OPERATION:Wu.Events.OPERATION};var td,nd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;Si(this,n),(a=t.call(this))._session=e,a._valueIdPrefix=i,a._idToValue=new Map,a._vidCounter=0;var l=new Uu((function(){return a._valueIdPrefix+":"+a._vidCounter++}),o,s);return a._data=new ed(r,(function(){return[]}),Ii(a),e,l),a}return Oi(n,[{key:"root",value:function(){return this._data}},{key:"valueAt",value:function(){var e;return(e=this._data).valueAt.apply(e,arguments)}},{key:"setValueIdPrefix",value:function(e){this._valueIdPrefix=e}},{key:"_getRegisteredValue",value:function(e){return this._idToValue.get(e)}},{key:"_registerValue",value:function(e){this._idToValue.set(e.id(),e)}},{key:"_unregisterValue",value:function(e){this._idToValue.delete(e.id())}},{key:"handleModelOperationEvent",value:function(e){var t=this._idToValue.get(e.operation.id);t&&t._handleModelOperationEvent(e)}},{key:"valueIdPrefix",value:function(){return this._valueIdPrefix}}]),n}(Xs);nd.Events={DELETED:"deleted",MODIFIED:"modified"},Object.freeze(nd.Events),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.UNAUTHORIZED=1]="UNAUTHORIZED",e[e.DELETED=2]="DELETED",e[e.ERROR_APPLYING_OPERATION=3]="ERROR_APPLYING_OPERATION",e[e.INVALID_REFERENCE_EVENT=4]="INVALID_REFERENCE_EVENT",e[e.PERMISSION_ERROR=5]="PERMISSION_ERROR",e[e.UNEXPECTED_COMMITTED_VERSION=6]="UNEXPECTED_COMMITTED_VERSION"}(td||(td={}));var id=function(){function e(t,n,i,r,o){Si(this,e),this.sessionId=t,this.seqNo=n,this.contextVersion=i,this.timestamp=r,this.operation=o,Object.freeze(this)}return Oi(e,[{key:"copy",value:function(t){return t=Ls.getOrDefault(t,{}),new e(Ls.getOrDefault(t.sessionId,this.sessionId),Ls.getOrDefault(t.seqNo,this.seqNo),Ls.getOrDefault(t.contextVersion,this.contextVersion),Ls.getOrDefault(t.timestamp,this.timestamp),Ls.getOrDefault(t.operation,this.operation))}}]),e}(),rd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this))._sessionId=e,a._lastSequenceNumber=r,a._contextVersion=i,a._unappliedOperations=[],a._inflightOperations=[],a._transformer=o,a._referenceTransformer=s,a._compoundOpInProgress=!1,a._pendingCompoundOperation=[],a}return Oi(n,[{key:"lastSequenceNumber",value:function(){return this._lastSequenceNumber}},{key:"setState",value:function(e,t,n){var i;this._contextVersion=e,this._lastSequenceNumber=t,this._inflightOperations.length=0,(i=this._inflightOperations).push.apply(i,Ci(n))}},{key:"contextVersion",value:function(){return this._contextVersion}},{key:"isCommitted",value:function(){return!this.hasInflightOperation()||this._pendingCompoundOperation.length>0}},{key:"hasInflightOperation",value:function(){return this._inflightOperations.length>0}},{key:"firstInFlightOperation",value:function(){return this._inflightOperations[0]}},{key:"getInFlightOperations",value:function(){return this._inflightOperations.slice(0)}},{key:"hasNextIncomingOperation",value:function(){return 0!==this._unappliedOperations.length}},{key:"getNextIncomingOperation",value:function(){return 0===this._unappliedOperations.length?null:this._unappliedOperations.shift()}},{key:"hasNextRemoteReference",value:function(){return 0!==this._unappliedOperations.length}},{key:"getNextRemoteReferenceSetEvent",value:function(){return 0===this._unappliedOperations.length?null:this._unappliedOperations.shift()}},{key:"startBatchOperation",value:function(){if(this._compoundOpInProgress)throw new Error("Batch operation already in progress.");this._pendingCompoundOperation=[],this._compoundOpInProgress=!0}},{key:"cancelBatchOperation",value:function(){if(!this._compoundOpInProgress)throw new Error("Batch operation not in progress.");if(0!==this._pendingCompoundOperation.length)throw new Error("Can not cancel a batch operation if operations have been issued.");this._compoundOpInProgress=!1}},{key:"completeBatchOperation",value:function(){if(!this._compoundOpInProgress)throw new Error("Batch operation not in progress.");if(this._compoundOpInProgress=!1,0===this._pendingCompoundOperation.length)throw new Error("A Batch operation must have at least one operation.");var e=new Ka(this._pendingCompoundOperation);this._pendingCompoundOperation=[];var t=++this._lastSequenceNumber,n=new id(this._sessionId(),t,this._contextVersion,new Date,e);return this._inflightOperations.push(n),n}},{key:"batchSize",value:function(){return this._pendingCompoundOperation.length}},{key:"isBatchOperationInProgress",value:function(){return this._compoundOpInProgress}},{key:"processOutgoingOperation",value:function(e){if(this._compoundOpInProgress&&!(e instanceof al))throw new Error("Can't process a compound operation that is in progress");var t=this.transformOutgoing(this._unappliedOperations,e),i=0===this._inflightOperations.length&&0===this._pendingCompoundOperation.length,r=null;if(this._compoundOpInProgress?this._pendingCompoundOperation.push(t):(r=new id(this._sessionId(),++this._lastSequenceNumber,this._contextVersion,new Date,t),this._inflightOperations.push(r)),i){var o={name:n.Events.COMMIT_STATE_CHANGED,committed:!1};this._emitEvent(o)}return r}},{key:"processOutgoingSetReference",value:function(e){for(var t=0;t<this._unappliedOperations.length&&e;t++)e=this._referenceTransformer.transform(this._unappliedOperations[t].operation,e);return e}},{key:"dispose",value:function(){}},{key:"processAcknowledgement",value:function(e,t){if(0===this._inflightOperations.length)throw new Error("Received an acknowledgment, but had no uncommitted operations.");if(this._contextVersion!==e)throw new Error("Acknowledgement did not meet expected context version of ".concat(this._contextVersion,": ").concat(e));var i=this._inflightOperations.shift();if(void 0!==t&&i.seqNo!==t)throw new Error("Acknowledgement did not meet expected sequence number of ".concat(i.seqNo,": ").concat(t));if(this._contextVersion++,0===this._inflightOperations.length&&0===this._pendingCompoundOperation.length){var r={name:n.Events.COMMIT_STATE_CHANGED,committed:!0};this._emitEvent(r)}return i}},{key:"processRemoteOperation",value:function(e){if(e.version!==this._contextVersion)throw new Error("Invalid version of ".concat(e.version,", expected ").concat(this._contextVersion,"."));e=this.transformInflightOperations(e),e=this.transformPendingCompoundOperations(e),this._contextVersion++,this._unappliedOperations.push(e)}},{key:"processRemoteReferenceSet",value:function(e){for(var t=0;t<this._inflightOperations.length&&e;t++)e=this._referenceTransformer.transform(this._inflightOperations[t].operation,e);return e}},{key:"transformInflightOperations",value:function(e){for(var t=e.operation,n=0;n<this._inflightOperations.length;n++){var i=this._inflightOperations[n],r=this._transformer.transform(t,i.operation);t=r.serverOp,this._inflightOperations[n]=i.copy({contextVersion:e.version+1,operation:r.clientOp})}return e.copy({operation:t})}},{key:"transformPendingCompoundOperations",value:function(e){for(var t=e.operation,n=0;n<this._pendingCompoundOperation.length;n++){var i=this._pendingCompoundOperation[n],r=this._transformer.transform(t,i);t=r.serverOp,this._pendingCompoundOperation[n]=r.clientOp}return e.copy({operation:t})}},{key:"transformOutgoing",value:function(e,t){for(var n=t,i=0;i<e.length;i++){var r=e[i],o=this._transformer.transform(r.operation,n);e[i]=r.copy({operation:o.serverOp}),n=o.clientOp}return n}}]),n}(Xs);rd.Events={COMMIT_STATE_CHANGED:"commit_state_changed"};var od=function(){function e(){Si(this,e),this._wrappers=new Map}return Oi(e,[{key:"wrap",value:function(e){var t=this,n=this._wrappers.get(e.id());return void 0===n&&(n=this._createWrapper(e),this._wrappers.set(e.id(),n),e.on(Wu.Events.DETACHED,(function(){t._wrappers.delete(e.id())}))),n}}]),e}(),sd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,Ga.OBJECT_REMOVE,e,i)).prop=r,Object.freeze(Ii(o)),o}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.prop,e.prop))}}]),n}(al),ad=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,Ga.OBJECT_VALUE,e,i)).value=r,Object.freeze(Ii(o)),o}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.value,e.value))}}]),n}(al),ld=Object.assign({SET:"set",REMOVE:"remove"},Tu);Object.freeze(ld);var cd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o,[bu.Types.PROPERTY],s))._delegate.events().subscribe((function(e){return a._handleReferenceEvents(e)})),a}return Oi(n,[{key:"get",value:function(e){return this._wrapperFactory.wrap(this._delegate.get(e))}},{key:"set",value:function(e,t){this._assertWritable();var n=this._delegate.hasKey(e),i=this._delegate.set(e,t),r=n?new Fl(this.id(),!1,e,i.dataValue()):new zl(this.id(),!1,e,i.dataValue());return this._sendOperation(r),this._wrapperFactory.wrap(i)}},{key:"remove",value:function(e){return this._assertWritable(),this._wrapperFactory.wrap(this._delegate.remove(e))}},{key:"keys",value:function(){return this._delegate.keys()}},{key:"hasKey",value:function(e){return this._delegate.hasKey(e)}},{key:"forEach",value:function(e){var t=this;this._delegate.forEach((function(n,i){e(t._wrapperFactory.wrap(n),i)}))}},{key:"elementAt",value:function(){var e;return this._wrapperFactory.wrap((e=this._delegate).valueAt.apply(e,arguments))}},{key:"propertyReference",value:function(e){var t=this._referenceManager.getLocalReference(e);if(void 0!==t){if(t.reference().type()!==bu.Types.PROPERTY)throw new Error("A reference with this key already exists, but is not an index reference");return t}var n=new Cu(this._referenceManager,e,this,this._delegate.session().user(),this._delegate.session().sessionId(),!0),i=new ah(n,this._callbacks.referenceEventCallbacks);return this._referenceManager.addLocalReference(i),i}},{key:"_removeChild",value:function(e){if("string"!==typeof e)throw new Error("The relative path of a child must be a string: "+typeof e);this.remove(e)}},{key:"_handleReferenceEvents",value:function(e){e instanceof lu?(e.local&&this._sendOperation(new ad(this.id(),!1,this._delegate.dataValue().value)),this._referenceManager.removeAll()):e instanceof au?(e.local&&this._sendOperation(new sd(this.id(),!1,e.key)),this._referenceManager.getAll().forEach((function(t){t instanceof Cu&&t._handlePropertyRemoved(e.key)}))):e instanceof su&&(e.local,this._referenceManager.getAll().forEach((function(t){t instanceof Cu&&t._handlePropertyRemoved(e.key)})))}}]),n}(Du);cd.Events=ld;var ud=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){return Si(this,n),t.call(this,e,i,r,o,[],s)}return Oi(n,[{key:"handleRemoteReferenceEvent",value:function(e){throw new Error("Null values do not process references")}}]),n}(Du);ud.Events=Tu;var dd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,Ga.NUMBER_VALUE,e,i)).value=r,Object.freeze(Ii(o)),o}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.value,e.value))}}]),n}(al),hd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,Ga.NUMBER_DELTA,e,i)).delta=r,Object.freeze(Ii(o)),o}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.delta,e.delta))}}]),n}(al),fd=Object.assign({DELTA:"delta"},Tu);Object.freeze(fd);var pd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o,[],s))._delegate.events().subscribe((function(e){e.local&&(e instanceof ru?a._sendOperation(new dd(a.id(),!1,e.value)):e instanceof ou&&a._sendOperation(new hd(a.id(),!1,e.value)))})),a}return Oi(n,[{key:"add",value:function(e){this._assertWritable(),this._delegate.add(e)}},{key:"subtract",value:function(e){this._assertWritable(),this._delegate.subtract(e)}},{key:"increment",value:function(){this._assertWritable(),this._delegate.increment()}},{key:"decrement",value:function(){this._assertWritable(),this._delegate.decrement()}},{key:"_handleRemoteReferenceEvent",value:function(e){throw new Error("Number values do not process references")}}]),n}(Du);pd.Events=fd;var gd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,Ga.STRING_VALUE,e,i)).value=r,Object.freeze(Ii(o)),o}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.value,e.value))}}]),n}(al),md=Object.assign({INSERT:"insert",REMOVE:"remove",SPLICE:"splice"},Tu);Object.freeze(md);var vd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,Ga.STRING_SPLICE,e,i)).index=r,a.deleteCount=o,a.insertValue=s,Object.freeze(Ii(a)),a}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.index,e.index),Ls.update(this.deleteCount,e.deleteCount),Ls.update(this.insertValue,e.insertValue))}}]),n}(al),yd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o,[bu.Types.INDEX,bu.Types.RANGE],s))._delegate.events().subscribe((function(e){return a._handleDelegateModelEvents(e)})),a}return Oi(n,[{key:"insert",value:function(e,t){this._assertWritable(),this._string.insert(e,t)}},{key:"remove",value:function(e,t){this._assertWritable(),this._string.remove(e,t)}},{key:"splice",value:function(e,t,n){this._assertWritable(),this._string.splice(e,t,n)}},{key:"length",value:function(){return this._string.length()}},{key:"indexReference",value:function(e){var t=this._referenceManager.getLocalReference(e);if(void 0!==t){if(t.reference().type()!==bu.Types.INDEX)throw new Error("A reference with this key already exists, but is not an index reference");return t}var n=new _u(this._referenceManager,e,this,this._delegate.session().user(),this._delegate.session().sessionId(),!0),i=new sh(n,this._callbacks.referenceEventCallbacks);return this._referenceManager.addLocalReference(i),i}},{key:"rangeReference",value:function(e){var t=this._referenceManager.getLocalReference(e);if(void 0!==t){if(t.reference().type()!==bu.Types.RANGE)throw new Error("A reference with this key already exists, but is not a range reference");return t}var n=new ku(this._referenceManager,e,this,this._delegate.session().user(),this._delegate.session().sessionId(),!0),i=new lh(n,this._callbacks.referenceEventCallbacks);return this._referenceManager.addLocalReference(i),i}},{key:"_handleDelegateModelEvents",value:function(e){e instanceof uu?(e.local&&this._sendOperation(new vd(this.id(),!1,e.index,0,e.value)),this._referenceManager.getAll().forEach((function(t){(t instanceof _u||t instanceof ku)&&t._handleInsert(e.index,e.value.length)}))):e instanceof du?(e.local&&this._sendOperation(new vd(this.id(),!1,e.index,e.value.length,"")),this._referenceManager.getAll().forEach((function(t){(t instanceof _u||t instanceof ku)&&t._handleRemove(e.index,e.value.length)}))):e instanceof cu?(e.local&&this._sendOperation(new vd(this.id(),!1,e.index,e.deleteCount,e.insertValue)),this._referenceManager.getAll().forEach((function(t){(t instanceof _u||t instanceof ku)&&t._handleSplice(e.index,e.deleteCount,e.insertValue.length)}))):e instanceof hu&&(e.local&&this._sendOperation(new gd(this.id(),!1,e.value)),this._referenceManager.removeAll())}},{key:"_string",get:function(){return this._delegate}}]),n}(Du);yd.Events=md,Object.freeze(yd.Events);var bd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){return Si(this,n),t.call(this,e,i,r,o,[],s)}return Oi(n,[{key:"path",value:function(){return null}},{key:"relativePath",value:function(){return null}},{key:"parent",value:function(){return null}},{key:"removeFromParent",value:function(){}},{key:"handleRemoteReferenceEvent",value:function(e){throw new Error("Undefined values do not process references")}},{key:"setData",value:function(e){throw new Error("Can not set the delta on a Undefined type.")}}]),n}(Du);bd.Events=Tu;var wd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,Ga.DATE_VALUE,e,i)).value=r,Object.freeze(Ii(o)),o}return Oi(n,[{key:"copy",value:function(e){return new n(Ls.update(this.id,e.id),Ls.update(this.noOp,e.noOp),Ls.update(this.value,e.value))}}]),n}(al),_d=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o,[],s))._delegate.events().subscribe((function(e){e.local&&e instanceof fu&&a._sendOperation(new wd(a.id(),!1,e.value))})),a}return Oi(n,[{key:"_handleRemoteReferenceEvent",value:function(e){throw new Error("Date values do not process references")}}]),n}(Du);_d.Events=Tu;var xd=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this))._callbacks=e,o._model=i,o._identityCache=r,o}return Oi(n,[{key:"_createWrapper",value:function(e){switch(e.type()){case Vu.ARRAY:return new ju(e,this._callbacks,this,this._model,this._identityCache);case Vu.OBJECT:return new cd(e,this._callbacks,this,this._model,this._identityCache);case Vu.BOOLEAN:return new zu(e,this._callbacks,this,this._model,this._identityCache);case Vu.NULL:return new ud(e,this._callbacks,this,this._model,this._identityCache);case Vu.NUMBER:return new pd(e,this._callbacks,this,this._model,this._identityCache);case Vu.STRING:return new yd(e,this._callbacks,this,this._model,this._identityCache);case Vu.UNDEFINED:return new bd(e,this._callbacks,this,this._model,this._identityCache);case Vu.DATE:return new _d(e,this._callbacks,this,this._model,this._identityCache);default:return null}}}]),n}(od),kd=function(){function e(t,n,i,r){Si(this,e),this.clientId=t,this.version=n,this.timestamp=i,this.operation=r,Object.freeze(this)}return Oi(e,[{key:"copy",value:function(t){return t=Ls.getOrDefault(t,{}),new e(Ls.getOrDefault(t.clientId,this.clientId),Ls.getOrDefault(t.version,this.version),Ls.getOrDefault(t.timestamp,this.timestamp),Ls.getOrDefault(t.operation,this.operation))}}]),e}(),Cd=Oi((function e(t,n,i,r,o){Si(this,e),this.sessionId=t,this.user=n,this.version=i,this.timestamp=r,this.operation=o,Object.freeze(this)})),Sd=Oi((function e(t,n){Si(this,e),this.user=t,this.sessionId=n,Object.freeze(this)})),Ed={CLOSED:"closed",DELETED:"deleted",VERSION_CHANGED:"version_changed"};Object.freeze(Ed);var Od=function(){function e(t,n,i,r){Si(this,e),this.read=t,this.write=n,this.remove=i,this.manage=r,Object.freeze(this)}return Oi(e,[{key:"toJSON",value:function(){return{read:this.read,write:this.write,remove:this.remove,manage:this.manage}}}],[{key:"fromJSON",value:function(t){return new e(t.read,t.write,t.remove,t.manage)}}]),e}();Od.NONE=new Od(!1,!1,!1,!1);var Ad=Oi((function e(t,n,i,r,o,s){Si(this,e),this.data=t,this.collectionId=n,this.modelId=i,this.created=r,this.modified=o,this.version=s,Object.freeze(this)}));function Md(e){if(e.arrayValue){var t=e.arrayValue;return{type:"array",id:t.id,value:ka(t.children).map(Md)}}if(e.objectValue)return Dd(e.objectValue);if(e.booleanValue){var n=e.booleanValue;return{type:"boolean",id:n.id,value:_a(n.value)}}if(e.dateValue){var i=e.dateValue;return{type:"date",id:i.id,value:Oa(i.value)}}if(e.doubleValue){var r=e.doubleValue;return{type:"number",id:r.id,value:wa(r.value)}}if(e.stringValue){var o=e.stringValue;return{type:"string",id:o.id,value:xa(o.value)}}if(e.nullValue)return{type:"null",id:e.nullValue.id,value:null};throw new Js("Invalid data delta type: "+JSON.stringify(e))}function Rd(e){if("array"===e.type)return{arrayValue:{id:e.id,children:e.value.map(Rd)}};if("object"===e.type)return{objectValue:{id:e.id,children:js(e.value,Rd)}};if("boolean"===e.type)return{booleanValue:{id:e.id,value:e.value}};if("date"===e.type)return{dateValue:{id:e.id,value:Aa(e.value)}};if("number"===e.type)return{doubleValue:{id:e.id,value:e.value}};if("null"===e.type)return{nullValue:{id:e.id}};if("string"===e.type)return{stringValue:{id:e.id,value:e.value}};throw new Js("Invalid data delta type: "+JSON.stringify(e))}function Td(e){return{id:e.id,children:js(e.value,Rd)}}function Dd(e){return{type:"object",id:e.id,value:js(Ca(e.children),Md)}}function Id(e){return void 0===e?void 0:new Od(_a(e.read),_a(e.write),_a(e.remove),_a(e.manage))}function Ld(e){var t=Ca(e.data.fields);return new Ad(js(t,Ma),e.collectionId,e.modelId,Oa(e.createdTime),Oa(e.modifiedTime),wa(e.version))}function Nd(e){if(void 0===e||null===e)return[];var t=[];return e.forEach((function(e,n){t.push({user:Da(n),permissions:e})})),t}var Fd=function(){function e(t,n){Si(this,e),this._modelId=t,this._connection=n}return Oi(e,[{key:"modelId",get:function(){return this._modelId}},{key:"getPermissions",value:function(){var e=this;return this.getAllUserPermissions().then((function(t){var n=t.get(e._connection.session().user().userId.toGuid());return void 0!==n?n:Od.NONE}))}},{key:"setOverridesCollection",value:function(e){var t={setModelPermissionsRequest:{modelId:this._modelId,overrideCollection:{value:e},removeAllUserPermissionsBeforeSet:!1,setUserPermissions:[],removedUserPermissions:[]}};return this._connection.request(t).then((function(){}))}},{key:"getOverridesCollection",value:function(){var e={getModelPermissionsRequest:{modelId:this._modelId}};return this._connection.request(e).then((function(e){return e.getModelPermissionsResponse.overridesCollection}))}},{key:"getWorldPermissions",value:function(){var e={getModelPermissionsRequest:{modelId:this._modelId}};return this._connection.request(e).then((function(e){return Id(e.getModelPermissionsResponse.worldPermissions)}))}},{key:"setWorldPermissions",value:function(e){var t={setModelPermissionsRequest:{modelId:this._modelId,worldPermissions:e,removeAllUserPermissionsBeforeSet:!1,setUserPermissions:[],removedUserPermissions:[]}};return this._connection.request(t).then((function(){}))}},{key:"getAllUserPermissions",value:function(){var e={getModelPermissionsRequest:{modelId:this._modelId}};return this._connection.request(e).then((function(e){return function(e){var t=new ba;return Fs.isArray(e)&&e.forEach((function(e){var n=Ta(e.user);t.set(n,Id(e.permissions))})),t}(e.getModelPermissionsResponse.userPermissions)}))}},{key:"setAllUserPermissions",value:function(e){e=ba.of(e);var t={setModelPermissionsRequest:{modelId:this._modelId,setUserPermissions:Nd(e),removeAllUserPermissionsBeforeSet:!0}};return this._connection.request(t).then((function(){}))}},{key:"getUserPermissions",value:function(e){return this.getAllUserPermissions().then((function(t){return t.get(e)}))}},{key:"setUserPermissions",value:function(e,t){var n=ua.of(e),i={setModelPermissionsRequest:{modelId:this._modelId,worldPermissions:null,setUserPermissions:[{user:Da(n),permissions:t}],removeAllUserPermissionsBeforeSet:!1,removedUserPermissions:[]}};return this._connection.request(i).then((function(){}))}},{key:"removeUserPermissions",value:function(e){var t=ua.of(e),n={setModelPermissionsRequest:{modelId:this._modelId,removeAllUserPermissionsBeforeSet:!1,removedUserPermissions:[Da(t)]}};return this._connection.request(n).then((function(){}))}}]),e}();function $d(e){if(e.compoundOperation)return function(e){var t=ka(e.operations).map(Pd);return new Ka(t)}(e.compoundOperation);if(e.discreteOperation)return Pd(e.discreteOperation);throw new Js("Invalid operation data: "+JSON.stringify(e))}function Pd(e){if(e.arrayInsertOperation){var t=e.arrayInsertOperation,n=t.id,i=t.noOp,r=t.index,o=t.value;return new ll(n,_a(i),wa(r),Md(o))}if(e.arrayRemoveOperation){var s=e.arrayRemoveOperation,a=s.id,l=s.noOp,c=s.index;return new Nu(a,_a(l),wa(c))}if(e.arrayMoveOperation){var u=e.arrayMoveOperation,d=u.id,h=u.noOp,f=u.fromIndex,p=u.toIndex;return new Fu(d,_a(h),wa(f),wa(p))}if(e.arrayReplaceOperation){var g=e.arrayReplaceOperation,m=g.id,v=g.noOp,y=g.index,b=g.value;return new Lu(m,_a(v),wa(y),Md(b))}if(e.arraySetOperation){var w=e.arraySetOperation,_=w.id,x=w.noOp,k=w.values;return new $u(_,_a(x),ka(k).map(Md))}if(e.objectAddPropertyOperation){var C=e.objectAddPropertyOperation,S=C.id,E=C.noOp,O=C.key,A=C.value;return new zl(S,_a(E),xa(O),Md(A))}if(e.objectSetPropertyOperation){var M=e.objectSetPropertyOperation,R=M.id,T=M.noOp,D=M.key,I=M.value;return new Fl(R,_a(T),xa(D),Md(I))}if(e.objectRemovePropertyOperation){var L=e.objectRemovePropertyOperation,N=L.id,F=L.noOp,$=L.key;return new sd(N,_a(F),xa($))}if(e.objectSetOperation){var P=e.objectSetOperation,j=P.id,B=P.noOp,z=P.values;return new ad(j,_a(B),js(z,Md))}if(e.stringSpliceOperation){var U=e.stringSpliceOperation,V=U.id,W=U.noOp,H=U.index,q=U.deleteCount,G=U.insertedValue;return new vd(V,_a(W),wa(H),wa(q),xa(G))}if(e.stringSetOperation){var K=e.stringSetOperation,Y=K.id,J=K.noOp,X=K.value;return new gd(Y,_a(J),xa(X))}if(e.numberDeltaOperation){var Q=e.numberDeltaOperation,Z=Q.id,ee=Q.noOp,te=Q.delta;return new hd(Z,_a(ee),wa(te))}if(e.numberSetOperation){var ne=e.numberSetOperation,ie=ne.id,re=ne.noOp,oe=ne.value;return new dd(ie,_a(re),wa(oe))}if(e.booleanSetOperation){var se=e.booleanSetOperation,ae=se.id,le=se.noOp,ce=se.value;return new Bu(ae,_a(le),_a(ce))}if(e.dateSetOperation){var ue=e.dateSetOperation,de=ue.id,he=ue.noOp,fe=ue.value;return new wd(de,_a(he),Oa(fe))}}function jd(e){if(e instanceof Ka)return{compoundOperation:Bd(e)};if(e instanceof al)return{discreteOperation:zd(e)};throw new Js("Invalid operation data: "+JSON.stringify(e))}function Bd(e){return{operations:e.ops.map(zd)}}function zd(e){return e instanceof ll?{arrayInsertOperation:{id:e.id,noOp:e.noOp,index:e.index,value:Rd(e.value)}}:e instanceof Nu?{arrayRemoveOperation:{id:e.id,noOp:e.noOp,index:e.index}}:e instanceof Fu?{arrayMoveOperation:{id:e.id,noOp:e.noOp,fromIndex:e.fromIndex,toIndex:e.toIndex}}:e instanceof Lu?{arrayReplaceOperation:{id:e.id,noOp:e.noOp,index:e.index,value:Rd(e.value)}}:e instanceof $u?{arraySetOperation:{id:e.id,noOp:e.noOp,values:e.value.map(Rd)}}:e instanceof zl?{objectAddPropertyOperation:{id:e.id,noOp:e.noOp,key:e.prop,value:Rd(e.value)}}:e instanceof Fl?{objectSetPropertyOperation:{id:e.id,noOp:e.noOp,key:e.prop,value:Rd(e.value)}}:e instanceof sd?{objectRemovePropertyOperation:{id:e.id,noOp:e.noOp,key:e.prop}}:e instanceof ad?{objectSetOperation:{id:e.id,noOp:e.noOp,values:js(e.value,Rd)}}:e instanceof vd?{stringSpliceOperation:{id:e.id,noOp:e.noOp,index:e.index,deleteCount:e.deleteCount,insertedValue:e.insertValue}}:e instanceof gd?{stringSetOperation:{id:e.id,noOp:e.noOp,value:e.value}}:e instanceof hd?{numberDeltaOperation:{id:e.id,noOp:e.noOp,delta:e.delta}}:e instanceof dd?{numberSetOperation:{id:e.id,noOp:e.noOp,value:e.value}}:e instanceof Bu?{booleanSetOperation:{id:e.id,noOp:e.noOp,value:e.value}}:e instanceof wd?{dateSetOperation:{id:e.id,noOp:e.noOp,value:Aa(e.value)}}:void 0}function Ud(e){return e.indices?{referenceType:"index",values:ka(e.indices.values).map(wa)}:e.ranges?{referenceType:"range",values:ka(e.ranges.values).map((function(e){var t=e.startIndex,n=e.endIndex;return{start:wa(t),end:wa(n)}}))}:e.properties?{referenceType:"property",values:ka(e.properties.values).map(xa)}:e.elements?{referenceType:"element",values:ka(e.elements.values).map(xa)}:void 0}function Vd(e,t){switch(e){case bu.Types.INDEX:return{indices:{values:t}};case bu.Types.PROPERTY:return{properties:{values:t}};case bu.Types.RANGE:return{ranges:{values:t.map((function(e){return{startIndex:e.start,endIndex:e.end}}))}};case bu.Types.ELEMENT:var n,i=[],r=No(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;i.push(o.id())}}catch(s){r.e(s)}finally{r.f()}return{elements:{values:i}};default:throw new Error("Invalid reference type")}}function Wd(e){return e instanceof Ka?{type:"compound",ops:e.ops.map((function(e){return Wd(e)}))}:e instanceof ll?{type:"array_insert",id:e.id,noOp:e.noOp,index:e.index,value:e.value}:e instanceof Lu?{type:"array_replace",id:e.id,noOp:e.noOp,index:e.index,value:e.value}:e instanceof Nu?{type:"array_remove",id:e.id,noOp:e.noOp,index:e.index}:e instanceof Fu?{type:"array_move",id:e.id,noOp:e.noOp,fromIndex:e.fromIndex,toIndex:e.toIndex}:e instanceof $u?{type:"array_set",id:e.id,noOp:e.noOp,value:e.value}:e instanceof zl?{type:"object_add_property",id:e.id,noOp:e.noOp,key:e.prop,value:e.value}:e instanceof Fl?{type:"object_set_property",id:e.id,noOp:e.noOp,key:e.prop,value:e.value}:e instanceof sd?{type:"object_remove_property",id:e.id,noOp:e.noOp,key:e.prop}:e instanceof ad?{type:"object_set",id:e.id,noOp:e.noOp,value:e.value}:e instanceof vd?{type:"string_splice",id:e.id,noOp:e.noOp,index:e.index,deleteCount:e.deleteCount,insertedValue:e.insertValue}:e instanceof gd?{type:"string_set",id:e.id,noOp:e.noOp,value:e.value}:e instanceof hd?{type:"number_delta",id:e.id,noOp:e.noOp,value:e.delta}:e instanceof dd?{type:"number_set",id:e.id,noOp:e.noOp,value:e.value}:e instanceof Bu?{type:"boolean_set",id:e.id,noOp:e.noOp,value:e.value}:e instanceof wd?{type:"date_set",id:e.id,noOp:e.noOp,value:e.value}:void 0}function Hd(e){switch(e.type){case"array_insert":var t=e;return new ll(t.id,t.noOp,t.index,t.value);case"array_remove":var n=e;return new Nu(n.id,n.noOp,n.index);case"array_replace":var i=e;return new Lu(i.id,i.noOp,i.index,i.value);case"array_move":var r=e;return new Fu(r.id,r.noOp,r.fromIndex,r.toIndex);case"array_set":var o=e;return new $u(o.id,o.noOp,o.value);case"object_add_property":var s=e;return new zl(s.id,s.noOp,s.key,s.value);case"object_set_property":var a=e;return new Fl(a.id,a.noOp,a.key,a.value);case"object_remove_property":var l=e;return new sd(l.id,l.noOp,l.key);case"object_set":var c=e;return new ad(c.id,c.noOp,c.value);case"string_splice":var u=e;return new vd(u.id,u.noOp,u.index,u.deleteCount,u.insertedValue);case"string_set":var d=e;return new gd(d.id,d.noOp,d.value);case"number_delta":var h=e;return new hd(h.id,h.noOp,h.value);case"number_set":var f=e;return new dd(f.id,f.noOp,f.value);case"boolean_set":var p=e;return new Bu(p.id,p.noOp,p.value);case"date_set":var g=e;return new wd(g.id,g.noOp,g.value);case"compound":var m=e.ops.map((function(e){return Hd(e)}));return new Ka(m)}}var qd=function(e){Mi(n,e);var t=Ni(n);function n(){var e;return Si(this,n),(e=t.call(this))._deferreds=[],e._value=void 0,e._error=void 0,e}return Oi(n,[{key:"resolve",value:function(e){Mr(Ri(n.prototype),"resolve",this).call(this,e),this._value=e,this._deferreds.forEach((function(t){return t.resolve(e)}))}},{key:"reject",value:function(e){Mr(Ri(n.prototype),"reject",this).call(this,e),this._error=e,this._deferreds.forEach((function(t){return t.reject(e)}))}},{key:"promise",value:function(){if(this.isPending()){var e=new ta;return this._deferreds.push(e),e.promise()}return this.isRejected()?Promise.reject(this._error):Promise.resolve(this._value)}}],[{key:"resolved",value:function(e){var t=new n;return t.resolve(e),t}}]),n}(ea),Gd=Oi((function e(t){Si(this,e),this.domain=t,this.name=e.NAME,Object.freeze(this)}));Gd.NAME="connected";var Kd=Oi((function e(t,n,i,r){Si(this,e),this.domain=t,this.code=n,this.authMethod=i,this.message=r,this.name=e.NAME,Object.freeze(this)}));Kd.NAME="connection_failed";var Yd=Oi((function e(t,n){Si(this,e),this.domain=t,this.delay=n,this.name=e.NAME,Object.freeze(this)}));Yd.NAME="connection_scheduled";var Jd=Oi((function e(t){Si(this,e),this.domain=t,this.name=e.NAME,Object.freeze(this)}));Jd.NAME="connecting";var Xd=Oi((function e(t,n){Si(this,e),this.domain=t,this.method=n,this.name=e.NAME,Object.freeze(this)}));Xd.NAME="authenticating";var Qd=Oi((function e(t){Si(this,e),this.domain=t,this.name=e.NAME,Object.freeze(this)}));Qd.NAME="disconnected";var Zd=Oi((function e(t){Si(this,e),this.domain=t,this.name=e.NAME,Object.freeze(this)}));Zd.NAME="interrupted";var eh=Oi((function e(t,n,i){Si(this,e),this.domain=t,this.message=n,this.cause=i,this.name=e.NAME,Object.freeze(this)}));eh.NAME="error";var th=Object.assign(Object.assign({},Ed),{MODIFIED:Lc.NAME,COMMITTED:Ic.NAME,RESYNC_STARTED:Sc.NAME,RESYNC_COMPLETED:Ec.NAME,RESYNC_ERROR:Oc.NAME,REMOTE_RESYNC_STARTED:Mc.NAME,REMOTE_RESYNC_COMPLETED:Rc.NAME,OFFLINE:kc.NAME,ONLINE:xc.NAME,RECONNECTING:Cc.NAME,COLLABORATOR_OPENED:Tc.NAME,COLLABORATOR_CLOSED:Dc.NAME,REFERENCE:Ac.NAME,PERMISSIONS_CHANGED:wc.NAME}),nh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s,a,l,c,u,d,h,f,p,g,m,v,y,b,w,_){var x;Si(this,n),(x=t.call(this))._log=Ks.logger("models"),x._emitLocal=!1,x._resourceId=e,x._local=o,x._createdTime=d,x._time=h,x._modelId=f,x._collectionId=p,x._concurrencyControl=g,x._connection=m,x._modelService=y,x._permissions=u,x._identityCache=v,x._offlineManager=b,x._resyncOnly=s,x._offline=!1,x._resyncData=null,x._closingData={deferred:new qd,closing:!1,waitingForServer:!1},x._model=new nd(x.session(),i,r,w,_),x._referencesBySession=new Map,x._sessions=Ci(a),x._resyncingSessions=Ci(l),x._collaboratorsSubject=new ds(x.collaborators());x._referenceManager=new Ru(Ii(x),[bu.Types.ELEMENT],(function(e){return x._onRemoteReferenceShared(e)}),x._identityCache),x._concurrencyControl.on(rd.Events.COMMIT_STATE_CHANGED,(function(e){var t=e.committed?new Ic(Ii(x)):new Lc(Ii(x));x._emitEvent(t)}));var k={onShare:x._onShareReference.bind(Ii(x)),onUnShare:x._onUnshareReference.bind(Ii(x)),onSet:x._onSetReference.bind(Ii(x)),onClear:x._onClearReference.bind(Ii(x))};return x._callbacks={sendOperationCallback:function(e){var t=x._concurrencyControl.processOutgoingOperation(e);x._concurrencyControl.isBatchOperationInProgress()||x._handleLocalOperation(t)},referenceEventCallbacks:k},x._wrapperFactory=new xd(x._callbacks,Ii(x),x._identityCache),x._open=!0,x._initializeReferences(c),x._storeOffline=x._offlineManager.isOfflineEnabled(),x}return Oi(n,[{key:"permissions",value:function(){return this._permissions}},{key:"permissionsManager",value:function(){return new Fd(this._modelId,this._connection)}},{key:"session",value:function(){return this._connection.session()}},{key:"emitLocalEvents",value:function(e){return 0===arguments.length?this._emitLocal:void(this._emitLocal=e)}},{key:"collaborators",value:function(){var e=this;return this._sessions.map((function(t){var n=e._identityCache.getUserForSession(t);return new Sd(n,t)}))}},{key:"resynchronizingCollaborators",value:function(){var e=this;return this._resyncingSessions.map((function(t){var n=e._identityCache.getUserForSession(t);return new Sd(n,t)}))}},{key:"collaboratorsAsObservable",value:function(){return this._collaboratorsSubject.asObservable()}},{key:"collectionId",value:function(){return this._collectionId}},{key:"modelId",value:function(){return this._modelId}},{key:"time",value:function(){return this._time}},{key:"minTime",value:function(){return this._createdTime}},{key:"maxTime",value:function(){return this.time()}},{key:"createdTime",value:function(){return this._createdTime}},{key:"version",value:function(){return this._concurrencyControl.contextVersion()}},{key:"minVersion",value:function(){return 0}},{key:"maxVersion",value:function(){return this.version()}},{key:"isCommitted",value:function(){return this._concurrencyControl.isCommitted()}},{key:"root",value:function(){return this._wrapperFactory.wrap(this._model.root())}},{key:"elementAt",value:function(){var e;return this._wrapperFactory.wrap((e=this._model).valueAt.apply(e,arguments))}},{key:"isOpen",value:function(){return this._open}},{key:"isLocal",value:function(){return this._local}},{key:"close",value:function(){if(this._log.debug("RealtimeModel.close() called: "+this._modelId),this._closingData.closing)return Promise.reject(new Js("The model '".concat(this._modelId,"' is already closing")));if(!this._open)return Promise.reject(new Js("The model '".concat(this._modelId,"' has already been closed")));if(null!==this._resyncData)return this._debug("Close called on a resyncing model"),this._resyncOnly=!0,Promise.resolve();this._debug("Close called on a non-resyncing model");var e=new yc(this,!0);return this._initiateClose(!0,e),this._closingData.deferred.promise()}},{key:"isClosing",value:function(){return this._closingData.closing||this._mustCloseAfterResync()}},{key:"whenClosed",value:function(){return this._closingData.deferred.promise()}},{key:"startBatch",value:function(){this._concurrencyControl.startBatchOperation()}},{key:"endBatch",value:function(){this.completeBatch()}},{key:"completeBatch",value:function(){var e=this._concurrencyControl.completeBatchOperation();this._handleLocalOperation(e)}},{key:"batchSize",value:function(){return this._concurrencyControl.batchSize()}},{key:"cancelBatch",value:function(){return this._concurrencyControl.cancelBatchOperation()}},{key:"isBatchStarted",value:function(){return this._concurrencyControl.isBatchOperationInProgress()}},{key:"elementReference",value:function(e){var t=this._referenceManager.getLocalReference(e);if(void 0!==t){if(t.reference().type()!==bu.Types.ELEMENT)throw new Error("A reference with this key already exists, but is not an observable reference");return t}var n=this.session(),i=new Iu(this._referenceManager,e,this,n.user(),n.sessionId(),!0),r=new oh(i,this._callbacks.referenceEventCallbacks);return this._referenceManager.addLocalReference(r),r}},{key:"reference",value:function(e,t){return this._referenceManager.get(e,t)}},{key:"references",value:function(e){return this._referenceManager.getAll(e)}},{key:"subscribeOffline",value:function(){return this._offlineManager.subscribe([this._modelId])}},{key:"unsubscribeOffline",value:function(){return this._offlineManager.unsubscribe([this._modelId])}},{key:"isSubscribedOffline",value:function(){return this._offlineManager.isModelSubscribed(this._modelId)}},{key:"_getResourceId",value:function(){return this._resourceId}},{key:"_initiateClose",value:function(e,t){var n=this;if(this._closingData.closing)throw new Js("The model '".concat(this._modelId,"' is already closing."),"already_closing");if(this._closingData.closing=!0,this._closingData.event=t,this._connection.isConnected()&&e){this._debug("Close initiated (online)"),this._closingData.waitingForServer=!0;var i={closeRealTimeModelRequest:{resourceId:this._resourceId}};this._connection.request(i).then((function(){n._debug("Closed with server"),n._closingData.waitingForServer=!1,n._checkIfCanClose()})).catch((function(e){n._log.error("Unexpected error closing a model: ".concat(n._modelId),e),n._closingData.deferred.reject(e)}))}else this._debug("Close initiated (offline)"),this._checkIfCanClose()}},{key:"_valueIdPrefix",value:function(){return this._model.valueIdPrefix()}},{key:"_checkIfCanClose",value:function(){!this._closingData.closing||this._closingData.waitingForServer||!this._concurrencyControl.isCommitted()&&this._connection.isConnected()||this._close()}},{key:"_openAfterResync",value:function(){if(this._closingData.closing)throw new Js("Can't open after resynchronization if the mode is closing: "+this._modelId);this._resyncOnly=!1}},{key:"_isResyncOnly",value:function(){return this._resyncOnly}},{key:"_getConcurrencyControlStateSnapshot",value:function(){return{data:this._model.root().dataValue(),lastSequenceNumber:this._concurrencyControl.lastSequenceNumber(),uncommittedOperations:Ci(this._concurrencyControl.getInFlightOperations())}}},{key:"_rehydrateFromOfflineState",value:function(e,t,n){for(var i=t.map((function(e){var t=Hd(e.operation);return new kd(e.sessionId,e.version,e.timestamp,t)})).sort((function(e,t){return e.version-t.version})),r=n.map((function(e){var t=Hd(e.operation);return new id(e.sessionId,e.sequenceNumber,e.contextVersion,e.timestamp,t)})).sort((function(e,t){return e.contextVersion===t.contextVersion?e.seqNo-t.seqNo:e.contextVersion-t.contextVersion})),o=this._concurrencyControl.contextVersion(),s=this._concurrencyControl.lastSequenceNumber(),a=[];r.length>0&&r[0].seqNo<=s;)r.shift();for(var l=function(){return i.length>0&&(0===r.length||i[0].version<=r[0].contextVersion)},c=function(){return r.length>0&&r[0].contextVersion===o};l()||c();){for(;l();){var u=i.shift();this._applyOperation(u.operation,u.clientId,u.version,u.timestamp),o++}for(;c();){var d=r.shift();this._applyOperation(d.operation,this._connection.session().sessionId(),d.contextVersion,d.timestamp),s=d.seqNo,a.push(d)}}if(i.length>0||r.length>0)throw new Error('Unable to apply all events while rehydrating model "'.concat(this._modelId,'" from offline state.'));if(o!==e)throw new Error("Did not arrive at the proper version (".concat(e,") when rehydrating model: ").concat(o));this._concurrencyControl.setState(o,s,a)}},{key:"_getRegisteredValue",value:function(e){return this._wrapperFactory.wrap(this._model._getRegisteredValue(e))}},{key:"_handleMessage",value:function(e){var t=e.message,n=t.forceCloseRealTimeModel,i=t.remoteOperation,r=t.referenceShared,o=t.referenceSet,s=t.referenceCleared,a=t.referenceUnshared,l=t.operationAck,c=t.remoteClientOpenedModel,u=t.remoteClientClosedModel,d=t.modelPermissionsChanged,h=t.remoteClientResyncStarted,f=t.remoteClientResyncCompleted,p=t.modelResyncServerComplete;if(n)this._handleForceClose(n);else if(i)this._handleRemoteOperation(i);else if(l)this._handleOperationAck(l);else if(r||o||s||a){var g=function(e){if(e.referenceShared){var t=e.referenceShared,n=t.sessionId,i=t.key,r=t.references,o=t.valueId,s=t.resourceId,a=Ud(r),l=a.referenceType,c=a.values;return new Eu(n,s,Ea(o),i,l,c)}if(e.referenceSet){var u=e.referenceSet,d=u.sessionId,h=u.key,f=u.references,p=u.valueId,g=u.resourceId,m=Ud(f).values;return new Au(d,g,Ea(p),h,m)}if(e.referenceCleared){var v=e.referenceCleared,y=v.sessionId,b=v.key,w=v.valueId,_=v.resourceId;return new Mu(y,_,Ea(w),b)}if(e.referenceUnshared){var x=e.referenceUnshared,k=x.sessionId,C=x.key,S=x.valueId,E=x.resourceId;return new Ou(k,E,Ea(S),C)}}(e.message);this._handleRemoteReferenceEvent(g)}else if(c)this._handleClientOpen(xa(c.sessionId));else if(u)this._handleClientClosed(xa(u.sessionId));else if(d)this._handleModelPermissionsChanged(d);else if(h)this._handleRemoteClientResyncStarted(h);else if(f)this._handleRemoteClientResyncCompleted(f);else{if(!p)throw new Error("Unexpected message"+JSON.stringify(e.message));this._handleModelResyncServerComplete(p)}}},{key:"_isOffline",value:function(){return this._offline}},{key:"_setOffline",value:function(){var e=this;this._debug("Offline"),this._offline=!0,this._emitEvent(new kc(this)),this._sessions.forEach((function(t){return e._handleClientClosed(t)})),this._sessions=[],this._resyncData=null,this._resourceId=null,this._closingData.closing&&this._close()}},{key:"_setOnline",value:function(){var e=this;this._offline=!1,this._resyncData={bufferedOperations:[],resyncCompleted:!1,upToDate:!1},this._local?this._createLocalModelAtServer().catch((function(t){e._log.error("An unexpected error occurred while synchronizing offline model on reconnect.",t)})):this._resynchronize()}},{key:"_createLocalModelAtServer",value:function(){return Is(this,void 0,void 0,jo().mark((function e(){var t,n,i=this;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._offlineManager.getModelMetaData(this._modelId);case 3:return t=e.sent,e.next=6,this._deleteBeforeCreateIfNeeded(t);case 6:return e.next=8,this._offlineManager.getModelCreationData(this._modelId);case 8:return n=e.sent,e.next=11,this._createLocalModel(n).catch((function(e){return i._handleCreationErrorOnResync(n,e)}));case 11:return this._local=!1,e.next=14,this._offlineManager.modelCreated(this._modelId);case 14:this._resynchronize(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),this._resyncError(e.t0.message);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})))}},{key:"_handleCreationErrorOnResync",value:function(e,t){if(t instanceof Qs&&t.code!==ca.MODEL_ALREADY_EXISTS){var n=t.details.fingerprint;if(e.createdTime.getTime().toString()===n)return}return Promise.reject(t)}},{key:"_createLocalModel",value:function(e){this._debug("Creating offline model at the server");var t=e.userPermissions&&ba.fromGuidObjectMap(e.userPermissions),n={id:e.modelId,collection:e.collection,overrideCollectionWorldPermissions:e.overrideCollectionWorldPermissions,worldPermissions:e.worldPermissions,userPermissions:t};return this._modelService._create(n,e.initialData)}},{key:"_deleteBeforeCreateIfNeeded",value:function(e){var t=this;return e.deleted?this._modelService.remove(this._modelId).catch((function(e){console.log(e)})).then((function(){return t._offlineManager.modelDeleted(t._modelId)})):Promise.resolve()}},{key:"_handleLocallyDeleted",value:function(){this._storeOffline=!1;var e=new yc(this,!0,"The model was locally deleted");this._initiateClose(!0,e);var t="The model '".concat(this._modelId,"' was locally deleted while offline."),n=new bc(this,!0,t);this._emitEvent(n)}},{key:"_resynchronize",value:function(){var e=this;this._debug("Requesting model resynchronization"),this._emitEvent(new Cc(this));var t={modelResyncRequest:{modelId:this._modelId,contextVersion:this._concurrencyControl.contextVersion()}};this._connection.request(t).then((function(t){e._debug("Starting model resynchronization"),e._emitEvent(new Sc(e));var n=t.modelResyncResponse;e._permissions=Id(n.permissions),e._resyncData.reconnectVersion=wa(n.currentVersion),e._resourceId=wa(n.resourceId),e._modelService._resyncStarted(e._modelId,e._resourceId),e._checkForReconnectUpToDate()})).catch((function(t){return e._resyncError(t.message)}))}},{key:"_resyncError",value:function(e){this._emitEvent(new Oc(this,e)),this._modelService._resyncError(this._modelId,e,this)}},{key:"_handleModelPermissionsChanged",value:function(e){var t=this._permissions;this._permissions=Id(e.permissions);var n=[];this._permissions.read!==t.read&&n.push("read"),this._permissions.write!==t.write&&n.push("write"),this._permissions.remove!==t.remove&&n.push("remove"),this._permissions.manage!==t.manage&&n.push("manage");var i=new wc(this,this._permissions,n);this._emitEvent(i)}},{key:"_handleRemoteClientResyncStarted",value:function(e){var t=xa(e.sessionId);this._resyncingSessions.push(t);var n=this._identityCache.getUserForSession(t),i=new Mc(this,t,n);this._emitEvent(i)}},{key:"_handleRemoteClientResyncCompleted",value:function(e){var t=xa(e.sessionId);this._resyncingSessions.push(t);var n=this._resyncingSessions.indexOf(t);n>=0&&this._resyncingSessions.splice(n,1);var i=this._identityCache.getUserForSession(t),r=new Rc(this,t,i);this._emitEvent(r)}},{key:"_handleClientOpen",value:function(e){this._sessions.push(e),this._referencesBySession.set(e,[]);var t=this._identityCache.getUserForSession(e),n=new Tc(this,new Sd(t,e));this._emitEvent(n),this._collaboratorsSubject.next(this.collaborators())}},{key:"_handleClientClosed",value:function(e){this._sessions=this._sessions.filter((function(t){return t!==e}));var t=this._referencesBySession.get(e);this._referencesBySession.delete(e),t.forEach((function(e){e._dispose()}));var n=this._identityCache.getUserForSession(e),i=new Dc(this,new Sd(n,e));this._emitEvent(i),this._collaboratorsSubject.next(this.collaborators())}},{key:"_handleRemoteReferenceEvent",value:function(e){if(null===e.valueId)this._modelReferenceEvent(e);else{var t=this._getRegisteredValue(e.valueId);if(!t)return;if(e instanceof Eu){if(e.values){var n={type:e.referenceType,valueId:e.valueId,values:e.values};n=this._concurrencyControl.processRemoteReferenceSet(n),e=new Eu(e.sessionId,e.resourceId,e.valueId,e.key,e.referenceType,n.values)}}else if(e instanceof Au){var i=t.reference(e.sessionId,e.key);if(!i)return void this._log.warn("received an update for a non-existent reference.");var r={type:i.type(),valueId:e.valueId,values:e.values};r=this._concurrencyControl.processRemoteReferenceSet(r),e=new Au(e.sessionId,e.resourceId,e.valueId,e.key,r.values)}if(e instanceof Ou){var o=t.reference(e.sessionId,e.key),s=this._referencesBySession.get(e.sessionId).indexOf(o);this._referencesBySession.get(e.sessionId).splice(s,1)}if(t._handleRemoteReferenceEvent(e),e instanceof Eu){var a=t.reference(e.sessionId,e.key);this._referencesBySession.get(e.sessionId).push(a)}}}},{key:"_handleForceClose",value:function(e){if(!this.isClosing()){var t=new yc(this,!1,e.reason);if(this._initiateClose(!1,t),e.reasonCode===td.DELETED){var n=new bc(this,!1,e.reason);this._emitEvent(n)}else this._log.error("The model with id '".concat(this._modelId,"' was forcefully closed by the server: ").concat(e.reason))}}},{key:"_close",value:function(){this._debug("Finishing close");var e=this._closingData,t=e.deferred,n=e.event;this._modelService._close(this),this._offlineManager.isOfflineEnabled()&&this._offlineManager.modelClosed(this),this._model.root()._detach(!1),this._open=!1,this._connection=null,this._resourceId=null,this._closingData.closing=!1,t.resolve(),n&&this._emitEvent(n)}},{key:"_handleOperationAck",value:function(e){var t,n=this,i=wa(e.version),r=wa(e.sequenceNumber);try{t=this._concurrencyControl.processAcknowledgement(i,r)}catch(Lp){return void this._handleConcurrencyControlError(Lp)}if(this._time=Oa(e.timestamp),this._storeOffline){var o=Wd(t.operation),s={modelId:this._modelId,sessionId:this._connection.session().sessionId(),version:i,timestamp:this._time,operation:o};this._offlineManager.processOperationAck(this.modelId(),r,s).catch((function(e){n._emitErrorEvent("Error storing operation ack: ".concat(n._modelId),e)}))}this._checkIfCanClose(),this._emitVersionChanged()}},{key:"_handleRemoteOperation",value:function(e){if(null===this._resyncData||this._resyncData.upToDate)this._processRemoteOperation(e);else if(wa(e.contextVersion)>this._resyncData.reconnectVersion)this._resyncData.bufferedOperations.push(e);else if(this._concurrencyControl.hasInflightOperation()&&this._concurrencyControl.firstInFlightOperation().sessionId===e.sessionId){var t={resourceId:e.resourceId,version:e.contextVersion,timestamp:e.timestamp};this._handleOperationAck(t),this._checkForReconnectUpToDate()}else this._processRemoteOperation(e),this._checkForReconnectUpToDate()}},{key:"_processRemoteOperation",value:function(e){var t=new kd(xa(e.sessionId),wa(e.contextVersion),Oa(e.timestamp),$d(e.operation));this._processServerOperationEvent(t)}},{key:"_processServerOperationEvent",value:function(e){var t=this;try{this._concurrencyControl.processRemoteOperation(e)}catch(Lp){return void this._handleConcurrencyControlError(Lp)}var n=this._concurrencyControl.getNextIncomingOperation(),i=n.operation,r=n.clientId,o=n.version,s=n.timestamp;if(this._time=new Date(s),this._applyOperation(i,r,o,s),this._emitVersionChanged(),this._storeOffline){var a=this._concurrencyControl.getInFlightOperations();this._offlineManager.processServerOperationEvent(this._modelId,n,a).catch((function(e){t._emitErrorEvent("Error storing remote operation: ".concat(t._modelId),e)}))}}},{key:"_handleConcurrencyControlError",value:function(e){var t='A concurrency control error occurred within model "'.concat(this._modelId,'".');this._emitErrorEvent(t,e);var n=new yc(this,!1,"A concurrency control error occurred.");this._initiateClose(!0,n)}},{key:"_applyOperation",value:function(e,t,n,i){var r=this,o=this._identityCache.getUserForSession(t);if(e.type===Ga.COMPOUND){e.ops.forEach((function(e){r._applyDiscreteOperation(e,o,t,n,i)}))}else{var s=e;this._applyDiscreteOperation(s,o,t,n,i)}}},{key:"_applyDiscreteOperation",value:function(e,t,n,i,r){if(!e.noOp){var o=new Cd(n,t,i,r,e);this._deliverToChild(o)}}},{key:"_checkForReconnectUpToDate",value:function(){var e=this;null===this._resyncData||this._resyncData.upToDate||this._resyncData.reconnectVersion!==this._concurrencyControl.contextVersion()||(this._resyncData.upToDate=!0,this._resyncData.bufferedOperations.forEach((function(t){e._processRemoteOperation(t)})),this._debug("All server operations applied during resynchronization"),this._concurrencyControl.getInFlightOperations().forEach((function(t){return e._sendOperation(t)})),this._debug("All local operations resent during resynchronization"),this._completeResynchronization())}},{key:"_completeResynchronization",value:function(){this._debug("Requesting resynchronization completion"),this._resyncData.resyncCompleted=!0,this._resyncData.openAfterComplete=!this._resyncOnly;var e={modelResyncClientComplete:{resourceId:this._resourceId,open:this._resyncData.openAfterComplete}};this._connection.send(e)}},{key:"_handleModelResyncServerComplete",value:function(e){var t=this;this._debug("Resynchronization completed");var n=this._resyncData.openAfterComplete,i=n&&!this._resyncOnly;(this._resyncData=null,this._emitEvent(new Ec(this)),this._modelService._resyncCompleted(this._modelId),i)?(this._debug("Opening after reconnect"),ka(e.connectedClients).forEach((function(e){return t._handleClientOpen(e)})),this._initializeReferences(ka(e.references)),this._referenceManager.reShare(),this._debug("Online"),this._emitEvent(new xc(this))):this._initiateClose(n)}},{key:"_mustCloseAfterResync",value:function(){return null!==this._resyncData&&this._resyncData.resyncCompleted&&!this._resyncData.openAfterComplete}},{key:"_debug",value:function(e){this._log.debug('Model("'.concat(this._modelId,'"): ').concat(e))}},{key:"_deliverToChild",value:function(e){this._model.handleModelOperationEvent(e)}},{key:"_handleLocalOperation",value:function(e){var t=this;this._storeOffline&&this._offlineManager.processLocalOperation(this._modelId,e).catch((function(e){t._emitErrorEvent("Error storing local operation: ".concat(t._modelId),e)})),this._sendOperation(e)}},{key:"_sendOperation",value:function(e){if(this._sendEvents()){var t={operationSubmission:{resourceId:this._resourceId,sequenceNumber:e.seqNo,contextVersion:e.contextVersion,operation:jd(e.operation)}};this._connection.send(t)}}},{key:"_emitVersionChanged",value:function(){var e=new _c(this,this._concurrencyControl.contextVersion());this._emitEvent(e)}},{key:"_modelReferenceEvent",value:function(e){this._referenceManager.handleRemoteReferenceEvent(e)}},{key:"_onRemoteReferenceShared",value:function(e){this._referencesBySession.get(e.sessionId()).push(e),this._emitEvent(new Ac(e,this))}},{key:"_initializeReferences",value:function(e){var t=this;this._referencesBySession.clear(),this._sessions.forEach((function(e){t._referencesBySession.set(e,[])})),e.forEach((function(e){var n,i=Ea(e.valueId);null!==i&&(n=t._wrapperFactory.wrap(t._model._getRegisteredValue(i)));var r=Ud(e.reference),o=r.referenceType,s=r.values,a=new Eu(e.sessionId,t._resourceId,i,e.key,o,s);if(void 0!==n){n._handleRemoteReferenceEvent(a);var l=n.reference(e.sessionId,e.key);t._referencesBySession.get(e.sessionId).push(l)}else t._modelReferenceEvent(a)}))}},{key:"_onShareReference",value:function(e){if(this._sendEvents()){var t=e.reference().source(),n=t instanceof Du?t.id():null,i={type:e.reference().type(),valueId:n,values:e.reference().values()};void 0!==n&&(i=this._concurrencyControl.processOutgoingSetReference(i));var r={shareReference:{resourceId:this._resourceId,key:e.reference().key(),valueId:Sa(n),references:Vd(e.reference().type(),i.values),version:this._concurrencyControl.contextVersion()}};this._connection.send(r)}}},{key:"_onUnshareReference",value:function(e){if(this._sendEvents()){var t=e.reference().source(),n=t instanceof Du?t.id():null,i={unshareReference:{resourceId:this._resourceId,valueId:Sa(n),key:e.reference().key()}};this._connection.send(i)}}},{key:"_onSetReference",value:function(e){if(this._sendEvents()){var t=e.reference().source(),n=t instanceof Du?t.id():null,i={type:e.reference().type(),valueId:n,values:e.reference().values()};if(void 0!==n&&(i=this._concurrencyControl.processOutgoingSetReference(i)),i){var r={setReference:{resourceId:this._resourceId,key:e.reference().key(),valueId:Sa(i.valueId),references:Vd(e.reference().type(),i.values),version:this._concurrencyControl.contextVersion()}};this._connection.send(r)}}}},{key:"_onClearReference",value:function(e){if(this._sendEvents()){var t=e.reference().source(),n=t instanceof Du?t.id():null,i={clearReference:{resourceId:this._resourceId,key:e.reference().key(),valueId:Sa(n)}};this._connection.send(i)}}},{key:"_sendEvents",value:function(){return this._connection.isConnected()&&!this._offline&&(null===this._resyncData||this._resyncData.upToDate)}},{key:"_emitErrorEvent",value:function(e,t){this._log.error(e,t);var n=new eh(this._connection.session().domain(),e,t);this._emitEvent(n),this._modelService._emitError(n)}}]),n}(Xs);nh.Events=th,Object.freeze(nh.Events);var ih=function(e){Mi(n,e);var t=Ni(n);function n(e,i){var r;return Si(this,n),(r=t.call(this))._emitFrom(e.events()),r._reference=e,r._shared=!1,r._callbacks=i,r}return Oi(n,[{key:"type",value:function(){return this._reference.type()}},{key:"key",value:function(){return this._reference.key()}},{key:"source",value:function(){return this._reference.source()}},{key:"isLocal",value:function(){return!0}},{key:"user",value:function(){return this._reference.user()}},{key:"sessionId",value:function(){return this._reference.sessionId()}},{key:"isDisposed",value:function(){return this._reference.isDisposed()}},{key:"value",value:function(){return this._reference.value()}},{key:"values",value:function(){return this._reference.values()}},{key:"reference",value:function(){return this._reference}},{key:"share",value:function(){this._ensureAttached(),this.isShared()||(this._callbacks.onShare(this),this._shared=!0)}},{key:"unshare",value:function(){this._ensureAttached(),this.isShared()&&(this._callbacks.onUnShare(this),this._shared=!1)}},{key:"isShared",value:function(){return this._shared}},{key:"set",value:function(e){this._ensureAttached(),e instanceof Array?this._reference._set(e,!1):this._reference._set([e],!1),this.isShared()&&this._callbacks.onSet(this)}},{key:"clear",value:function(){this._ensureAttached(),this._reference._clear(),this._callbacks.onClear(this)}},{key:"isSet",value:function(){return this._reference.isSet()}},{key:"dispose",value:function(){this._ensureAttached(),this._dispose()}},{key:"_ensureAttached",value:function(){if(this.type()!==bu.Types.ELEMENT&&this.reference().source().isDetached())throw new Error("The source model is detached")}},{key:"_dispose",value:function(){var e=this.source();(e instanceof Du&&e.isAttached()||e instanceof nh&&e.isOpen())&&this.unshare(),this._reference._dispose(),this._callbacks=null}}]),n}(Xs);ih.Events=bu.Events;var rh,oh=function(e){Mi(n,e);var t=Ni(n);function n(e,i){return Si(this,n),t.call(this,e,i)}return Oi(n)}(ih),sh=function(e){Mi(n,e);var t=Ni(n);function n(e,i){return Si(this,n),t.call(this,e,i)}return Oi(n)}(ih),ah=function(e){Mi(n,e);var t=Ni(n);function n(e,i){return Si(this,n),t.call(this,e,i)}return Oi(n)}(ih),lh=function(e){Mi(n,e);var t=Ni(n);function n(e,i){return Si(this,n),t.call(this,e,i)}return Oi(n)}(ih),ch=function(e,t){var n=wu.handleSplice(t.values,e.index,e.deleteCount,e.insertValue.length);return Ls.copy(t,{values:n})},uh=function(e,t){return null},dh=function(e,t){var n=xu.handleSplice(t.values,e.index,e.deleteCount,e.insertValue.length);return Ls.copy(t,{values:n})},hh=function(e,t){return null},fh=function(e,t){return e.value.getTime()===t.value.getTime()?new Ya(e.copy({noOp:!0}),e.copy({noOp:!0})):new Ya(e,t.copy({noOp:!0}))};function ph(e){return 0===e.deleteCount&&e.insertValue.length>0?rh.Insert:e.deleteCount>0&&0===e.insertValue.length?rh.Remove:e.deleteCount>0&&e.insertValue.length>0?rh.Splice:rh.NoOp}!function(e){e[e.Insert=0]="Insert",e[e.Remove=1]="Remove",e[e.Splice=2]="Splice",e[e.NoOp=3]="NoOp"}(rh||(rh={}));var gh=function(e,t){var n=ph(e),i=ph(t);return n===rh.NoOp||i===rh.NoOp?new Ya(e,t):n===rh.Insert&&i===rh.Insert?function(e,t){return e.index<=t.index?new Ya(e,t.copy({index:t.index+e.insertValue.length})):new Ya(e.copy({index:e.index+t.insertValue.length}),t)}(e,t):n===rh.Insert&&i===rh.Remove?function(e,t){return e.index<=t.index?new Ya(e,t.copy({index:t.index+e.insertValue.length})):e.index>=t.index+t.deleteCount?new Ya(e.copy({index:e.index-t.deleteCount}),t):new Ya(e.copy({noOp:!0}),t.copy({deleteCount:t.deleteCount+e.insertValue.length}))}(e,t):n===rh.Insert&&i===rh.Splice?function(e,t){return e.index<=t.index?new Ya(e,t.copy({index:t.index+e.insertValue.length})):t.index+t.deleteCount>e.index?new Ya(e.copy({noOp:!0}),t.copy({deleteCount:t.deleteCount+e.insertValue.length})):new Ya(e.copy({index:e.index-t.deleteCount+t.insertValue.length}),t)}(e,t):n===rh.Remove&&i===rh.Insert?function(e,t){return t.index<=e.index?new Ya(e.copy({index:e.index+t.insertValue.length}),t):t.index>=e.index+e.deleteCount?new Ya(e,t.copy({index:t.index-e.deleteCount})):new Ya(e.copy({deleteCount:e.deleteCount+t.insertValue.length}),t.copy({noOp:!0}))}(e,t):n===rh.Remove&&i===rh.Remove?function(e,t){var n=t.index,i=t.index+t.deleteCount,r=e.index,o=e.index+e.deleteCount;switch(el.getRangeRangeRelationship(r,o,n,i)){case qa.Precedes:return new Ya(e,t.copy({index:t.index-e.deleteCount}));case qa.PrecededBy:return new Ya(e.copy({index:e.index-t.deleteCount}),t);case qa.Meets:case qa.Overlaps:var s=e.index+e.deleteCount-t.index;return new Ya(e.copy({deleteCount:e.deleteCount-s}),t.copy({index:e.index,deleteCount:t.deleteCount-s}));case qa.MetBy:case qa.OverlappedBy:var a=t.index+t.deleteCount-e.index;return new Ya(e.copy({index:t.index,deleteCount:e.deleteCount-a}),t.copy({deleteCount:t.deleteCount-a}));case qa.Starts:case qa.ContainedBy:case qa.Finishes:return new Ya(e.copy({noOp:!0}),t.copy({deleteCount:t.deleteCount-e.deleteCount}));case qa.StartedBy:case qa.Contains:case qa.FinishedBy:return new Ya(e.copy({deleteCount:e.deleteCount-t.deleteCount}),t.copy({noOp:!0}));case qa.EqualTo:return new Ya(e.copy({noOp:!0}),t.copy({noOp:!0}))}}(e,t):n===rh.Remove&&i===rh.Splice?function(e,t){var n=t.index,i=t.index+t.deleteCount,r=e.index,o=e.index+e.deleteCount;switch(el.getRangeRangeRelationship(r,o,n,i)){case qa.Precedes:return new Ya(e,t.copy({index:t.index-e.deleteCount}));case qa.PrecededBy:return new Ya(e.copy({index:e.index-t.deleteCount+t.insertValue.length}),t);case qa.Meets:case qa.Overlaps:var s=e.index+e.deleteCount-t.index;return new Ya(e.copy({deleteCount:e.deleteCount-s}),t.copy({index:e.index,deleteCount:t.deleteCount-s}));case qa.MetBy:case qa.OverlappedBy:var a=t.index+t.deleteCount-e.index;return new Ya(e.copy({index:t.index+t.insertValue.length,deleteCount:e.deleteCount-a}),t.copy({deleteCount:t.deleteCount-a}));case qa.Starts:case qa.Finishes:case qa.ContainedBy:return new Ya(e.copy({noOp:!0}),t.copy({deleteCount:t.deleteCount-e.deleteCount}));case qa.StartedBy:return new Ya(e.copy({index:e.index+t.insertValue.length,deleteCount:e.deleteCount-t.deleteCount}),t.copy({index:e.index,deleteCount:0}));case qa.FinishedBy:return new Ya(e.copy({deleteCount:e.deleteCount-t.deleteCount}),t.copy({index:e.index,deleteCount:0}));case qa.Contains:return new Ya(e.copy({deleteCount:e.deleteCount-t.deleteCount+t.insertValue.length}),t.copy({noOp:!0}));case qa.EqualTo:return new Ya(e.copy({noOp:!0}),t.copy({deleteCount:0}))}}(e,t):n===rh.Splice&&i===rh.Insert?function(e,t){return t.index<=e.index?new Ya(e.copy({index:e.index+t.insertValue.length}),t):e.index+e.deleteCount>t.index?new Ya(e.copy({deleteCount:e.deleteCount+t.insertValue.length}),t.copy({noOp:!0})):new Ya(e,t.copy({index:t.index-e.deleteCount+e.insertValue.length}))}(e,t):n===rh.Splice&&i===rh.Remove?function(e,t){var n=t.index,i=t.index+t.deleteCount,r=e.index,o=e.index+e.deleteCount;switch(el.getRangeRangeRelationship(r,o,n,i)){case qa.Precedes:return new Ya(e,t.copy({index:t.index-e.deleteCount+e.insertValue.length}));case qa.PrecededBy:return new Ya(e.copy({index:e.index-t.deleteCount}),t);case qa.Meets:case qa.Overlaps:var s=e.index+e.deleteCount-t.index;return new Ya(e.copy({deleteCount:e.deleteCount-s}),t.copy({index:e.index+e.insertValue.length,deleteCount:t.deleteCount-s}));case qa.MetBy:case qa.OverlappedBy:var a=t.index+t.deleteCount-e.index;return new Ya(e.copy({index:t.index,deleteCount:e.deleteCount-a}),t.copy({deleteCount:t.deleteCount-a}));case qa.Starts:return new Ya(e.copy({deleteCount:0}),t.copy({index:t.index+e.insertValue.length,deleteCount:t.deleteCount-e.deleteCount}));case qa.Finishes:return new Ya(e.copy({index:t.index,deleteCount:0}),t.copy({deleteCount:t.deleteCount-e.deleteCount}));case qa.ContainedBy:return new Ya(e.copy({noOp:!0}),t.copy({deleteCount:t.deleteCount-e.deleteCount+e.insertValue.length}));case qa.StartedBy:case qa.FinishedBy:case qa.Contains:return new Ya(e.copy({deleteCount:e.deleteCount-t.deleteCount}),t.copy({deleteCount:0}));case qa.EqualTo:return new Ya(e.copy({deleteCount:0}),t.copy({noOp:!0}))}}(e,t):n===rh.Splice&&i===rh.Splice?function(e,t){var n=t.index,i=t.index+t.deleteCount,r=e.index,o=e.index+e.deleteCount;switch(el.getRangeRangeRelationship(r,o,n,i)){case qa.Precedes:return new Ya(e,t.copy({index:t.index-e.deleteCount+e.insertValue.length}));case qa.PrecededBy:return new Ya(e.copy({index:e.index-t.deleteCount+e.insertValue.length}),t);case qa.Meets:case qa.Overlaps:var s=e.index+e.deleteCount-t.index;return new Ya(e.copy({deleteCount:e.deleteCount-s}),t.copy({index:e.index+e.insertValue.length,deleteCount:t.deleteCount-s}));case qa.MetBy:case qa.OverlappedBy:var a=t.index+t.deleteCount-e.index;return new Ya(e.copy({index:t.index+t.insertValue.length,deleteCount:e.deleteCount-a}),t.copy({deleteCount:t.deleteCount-a}));case qa.Starts:return new Ya(e.copy({deleteCount:0}),t.copy({index:t.index+e.insertValue.length,deleteCount:t.deleteCount-e.deleteCount}));case qa.ContainedBy:return new Ya(e.copy({noOp:!0}),t.copy({deleteCount:t.deleteCount-e.deleteCount+e.insertValue.length}));case qa.Finishes:return new Ya(e.copy({index:t.index+t.insertValue.length,deleteCount:0}),t.copy({deleteCount:t.deleteCount-e.deleteCount}));case qa.StartedBy:return new Ya(e.copy({index:e.index+t.insertValue.length,deleteCount:e.deleteCount-t.deleteCount}),t.copy({deleteCount:0}));case qa.Contains:return new Ya(e.copy({deleteCount:e.deleteCount-t.deleteCount+t.insertValue.length}),t.copy({noOp:!0}));case qa.FinishedBy:return new Ya(e.copy({deleteCount:e.deleteCount-t.deleteCount}),t.copy({deleteCount:0,index:e.index+e.insertValue.length}));case qa.EqualTo:return new Ya(e.copy({deleteCount:0}),t.copy({index:t.index+e.insertValue.length,deleteCount:0}))}}(e,t):void 0};var mh=function(){function e(){Si(this,e),this._otfs={},this._rtfs={},this.registerOtf(Ga.STRING_SPLICE,Ga.STRING_SPLICE,gh),this.registerOtf(Ga.STRING_SPLICE,Ga.STRING_VALUE,Al),this.registerOtf(Ga.STRING_VALUE,Ga.STRING_SPLICE,Ml),this.registerOtf(Ga.STRING_VALUE,Ga.STRING_VALUE,Rl),this.registerOtf(Ga.OBJECT_ADD,Ga.OBJECT_ADD,$l),this.registerOtf(Ga.OBJECT_ADD,Ga.OBJECT_SET,Pl),this.registerOtf(Ga.OBJECT_ADD,Ga.OBJECT_REMOVE,jl),this.registerOtf(Ga.OBJECT_ADD,Ga.OBJECT_VALUE,Wl),this.registerOtf(Ga.OBJECT_REMOVE,Ga.OBJECT_ADD,Bl),this.registerOtf(Ga.OBJECT_REMOVE,Ga.OBJECT_SET,Ul),this.registerOtf(Ga.OBJECT_REMOVE,Ga.OBJECT_REMOVE,Vl),this.registerOtf(Ga.OBJECT_REMOVE,Ga.OBJECT_VALUE,Hl),this.registerOtf(Ga.OBJECT_SET,Ga.OBJECT_ADD,ql),this.registerOtf(Ga.OBJECT_SET,Ga.OBJECT_SET,Gl),this.registerOtf(Ga.OBJECT_SET,Ga.OBJECT_REMOVE,Kl),this.registerOtf(Ga.OBJECT_SET,Ga.OBJECT_VALUE,Yl),this.registerOtf(Ga.OBJECT_VALUE,Ga.OBJECT_ADD,Jl),this.registerOtf(Ga.OBJECT_VALUE,Ga.OBJECT_SET,Xl),this.registerOtf(Ga.OBJECT_VALUE,Ga.OBJECT_REMOVE,Ql),this.registerOtf(Ga.OBJECT_VALUE,Ga.OBJECT_VALUE,Zl),this.registerOtf(Ga.ARRAY_INSERT,Ga.ARRAY_INSERT,Xa),this.registerOtf(Ga.ARRAY_INSERT,Ga.ARRAY_REMOVE,Qa),this.registerOtf(Ga.ARRAY_INSERT,Ga.ARRAY_SET,Za),this.registerOtf(Ga.ARRAY_INSERT,Ga.ARRAY_REORDER,il),this.registerOtf(Ga.ARRAY_INSERT,Ga.ARRAY_VALUE,rl),this.registerOtf(Ga.ARRAY_REMOVE,Ga.ARRAY_INSERT,ol),this.registerOtf(Ga.ARRAY_REMOVE,Ga.ARRAY_REMOVE,sl),this.registerOtf(Ga.ARRAY_REMOVE,Ga.ARRAY_SET,cl),this.registerOtf(Ga.ARRAY_REMOVE,Ga.ARRAY_REORDER,ul),this.registerOtf(Ga.ARRAY_REMOVE,Ga.ARRAY_VALUE,dl),this.registerOtf(Ga.ARRAY_SET,Ga.ARRAY_INSERT,hl),this.registerOtf(Ga.ARRAY_SET,Ga.ARRAY_REMOVE,fl),this.registerOtf(Ga.ARRAY_SET,Ga.ARRAY_SET,gl),this.registerOtf(Ga.ARRAY_SET,Ga.ARRAY_REORDER,ml),this.registerOtf(Ga.ARRAY_SET,Ga.ARRAY_VALUE,vl),this.registerOtf(Ga.ARRAY_REORDER,Ga.ARRAY_INSERT,yl),this.registerOtf(Ga.ARRAY_REORDER,Ga.ARRAY_REMOVE,bl),this.registerOtf(Ga.ARRAY_REORDER,Ga.ARRAY_SET,wl),this.registerOtf(Ga.ARRAY_REORDER,Ga.ARRAY_REORDER,_l),this.registerOtf(Ga.ARRAY_REORDER,Ga.ARRAY_VALUE,xl),this.registerOtf(Ga.ARRAY_VALUE,Ga.ARRAY_INSERT,kl),this.registerOtf(Ga.ARRAY_VALUE,Ga.ARRAY_REMOVE,Cl),this.registerOtf(Ga.ARRAY_VALUE,Ga.ARRAY_SET,Sl),this.registerOtf(Ga.ARRAY_VALUE,Ga.ARRAY_REORDER,El),this.registerOtf(Ga.ARRAY_VALUE,Ga.ARRAY_VALUE,Ol),this.registerOtf(Ga.NUMBER_DELTA,Ga.NUMBER_DELTA,Tl),this.registerOtf(Ga.NUMBER_DELTA,Ga.NUMBER_VALUE,Dl),this.registerOtf(Ga.NUMBER_VALUE,Ga.NUMBER_DELTA,Il),this.registerOtf(Ga.NUMBER_VALUE,Ga.NUMBER_VALUE,Ll),this.registerOtf(Ga.BOOLEAN_VALUE,Ga.BOOLEAN_VALUE,Nl),this.registerOtf(Ga.DATE_VALUE,Ga.DATE_VALUE,fh),this.registerRtf(bu.Types.INDEX,Ga.STRING_SPLICE,ch),this.registerRtf(bu.Types.INDEX,Ga.STRING_VALUE,uh),this.registerRtf(bu.Types.RANGE,Ga.STRING_SPLICE,dh),this.registerRtf(bu.Types.RANGE,Ga.STRING_VALUE,hh)}return Oi(e,[{key:"registerOtf",value:function(e,t,n){var i=e+t;if(this._otfs[i])throw new Error("Function already registered for "+e+", "+t);this._otfs[i]=n}},{key:"registerRtf",value:function(e,t,n){var i=t+e;if(this._rtfs[i])throw new Error("Function already registered for "+t+", "+e);this._rtfs[i]=n}},{key:"getOperationTransformationFunction",value:function(e,t){var n=e.type+t.type;return this._otfs[n]}},{key:"getReferenceTransformationFunction",value:function(e,t){var n=e.type+t.type;return this._rtfs[n]}}]),e}(),vh=function(){function e(t){Si(this,e),this._tfr=t}return Oi(e,[{key:"transform",value:function(e,t){return e instanceof Ka?this.transformCompoundOperation(e,t):this.transformDiscreteOperation(e,t)}},{key:"transformCompoundOperation",value:function(e,t){for(var n=t,i=0;i<e.ops.length&&n;i++)n=this.transform(e.ops[i],n);return n}},{key:"transformDiscreteOperation",value:function(e,t){return e.noOp?t:e.id===t.valueId?this.transformWithIdenticalPathOperation(e,t):t}},{key:"transformWithIdenticalPathOperation",value:function(e,t){var n=this._tfr.getReferenceTransformationFunction(e,t);if(n)return n(e,t);throw new Error("No function found for: (".concat(e.type,",").concat(t.type,")"))}}]),e}(),yh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this))._delegate=e,o._wrapperFactory=i,o._model=r,o._delegate.events().subscribe((function(e){var t=pu.convertEvent(e,o._wrapperFactory);o._emitEvent(t)})),o}return Oi(n,[{key:"id",value:function(){return this._delegate.id()}},{key:"type",value:function(){return this._delegate.type()}},{key:"path",value:function(){return this._delegate.path()}},{key:"relativePath",value:function(){var e=this._delegate.path().slice(0);return e.length>0?e.pop():null}},{key:"parent",value:function(){var e=this._delegate.path().slice(0);e.pop();var t=this._model.elementAt(e);return t}},{key:"isAttached",value:function(){return!this._delegate.isDetached()}},{key:"isDetached",value:function(){return this._delegate.isDetached()}},{key:"value",value:function(){return this._delegate.data()}},{key:"toJSON",value:function(){return this._delegate.toJson()}},{key:"model",value:function(){return this._model}}]),n}(Xs);yh.Events=Tu;var bh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){return Si(this,n),t.call(this,e,i,r)}return Oi(n,[{key:"get",value:function(e){return this._wrapperFactory.wrap(this._delegate.get(e))}},{key:"length",value:function(){return this._delegate.length()}},{key:"forEach",value:function(e){var t=this;this._delegate.forEach((function(n,i){e(t._wrapperFactory.wrap(n),i)}))}},{key:"elementAt",value:function(){var e;return this._wrapperFactory.wrap((e=this._delegate).valueAt.apply(e,arguments))}}]),n}(yh);bh.Events=Pu;var wh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){return Si(this,n),t.call(this,e,i,r)}return Oi(n)}(yh);wh.Events=Tu;var _h=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){return Si(this,n),t.call(this,e,i,r)}return Oi(n,[{key:"get",value:function(e){return this._wrapperFactory.wrap(this._delegate.get(e))}},{key:"keys",value:function(){return this._delegate.keys()}},{key:"hasKey",value:function(e){return this._delegate.hasKey(e)}},{key:"forEach",value:function(e){var t=this;this._delegate.forEach((function(n,i){e(t._wrapperFactory.wrap(n),i)}))}},{key:"elementAt",value:function(){var e;return this._wrapperFactory.wrap((e=this._delegate).valueAt.apply(e,arguments))}}]),n}(yh);_h.Events=ld;var xh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){return Si(this,n),t.call(this,e,i,r)}return Oi(n)}(yh);xh.Events=Tu;var kh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){return Si(this,n),t.call(this,e,i,r)}return Oi(n)}(yh);kh.Events=fd;var Ch=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){return Si(this,n),t.call(this,e,i,r)}return Oi(n,[{key:"length",value:function(){return this._delegate.length()}}]),n}(yh);Ch.Events=md;var Sh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){return Si(this,n),t.call(this,e,i,r)}return Oi(n)}(yh);Sh.Events=Tu;var Eh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){return Si(this,n),t.call(this,e,i,r)}return Oi(n)}(yh);Eh.Events=Tu;var Oh=function(e){Mi(n,e);var t=Ni(n);function n(e){var i;return Si(this,n),(i=t.call(this))._model=e,i}return Oi(n,[{key:"_createWrapper",value:function(e){switch(e.type()){case Vu.ARRAY:return new bh(e,this,this._model);case Vu.OBJECT:return new _h(e,this,this._model);case Vu.BOOLEAN:return new wh(e,this,this._model);case Vu.NULL:return new xh(e,this,this._model);case Vu.NUMBER:return new kh(e,this,this._model);case Vu.STRING:return new Ch(e,this,this._model);case Vu.UNDEFINED:return new Sh(e,this,this._model);case Vu.DATE:return new Eh(e,this,this._model);default:return null}}}]),n}(od),Ah=Oi((function e(t,n,i,r,o,s){Si(this,e),this.modelId=t,this.version=n,this.timestamp=i,this.user=r,this.sessionId=o,this.operation=s,Object.freeze(this)})),Mh=Oi((function e(t){Si(this,e),this.type=t})),Rh=function(e){Mi(n,e);var t=Ni(n);function n(e){var i;return Si(this,n),(i=t.call(this,Ga.COMPOUND)).ops=e,Object.freeze(Ii(i)),i}return Oi(n,[{key:"inverse",value:function(){return new n(this.ops.map((function(e){return e.inverse()})))}}]),n}(Mh),Th=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,e)).id=i,o.noOp=r,o}return Oi(n)}(Mh),Dh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.ARRAY_REMOVE,e,i)).index=r,s.oldValue=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"inverse",value:function(){return new Ih(this.id,this.noOp,this.index,this.oldValue)}}]),n}(Th),Ih=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.ARRAY_INSERT,e,i)).index=r,s.value=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"inverse",value:function(){return new Dh(this.id,this.noOp,this.index,this.value)}}]),n}(Th),Lh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.ARRAY_REORDER,e,i)).fromIndex=r,s.toIndex=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"inverse",value:function(){return new n(this.id,this.noOp,this.toIndex,this.fromIndex)}}]),n}(Th),Nh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,Ga.ARRAY_SET,e,i)).index=r,a.value=o,a.oldValue=s,Object.freeze(Ii(a)),a}return Oi(n,[{key:"inverse",value:function(){return new n(this.id,this.noOp,this.index,this.oldValue,this.value)}}]),n}(Th),Fh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.ARRAY_VALUE,e,i)).value=r,s.oldValue=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"inverse",value:function(){return new n(this.id,this.noOp,this.oldValue,this.value)}}]),n}(Th),$h=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.OBJECT_REMOVE,e,i)).prop=r,s.oldValue=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"inverse",value:function(){return new Ph(this.id,this.noOp,this.prop,this.oldValue)}}]),n}(Th),Ph=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.OBJECT_ADD,e,i)).prop=r,s.value=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"inverse",value:function(){return new $h(this.id,this.noOp,this.prop,this.value)}}]),n}(Th),jh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,Ga.OBJECT_SET,e,i)).prop=r,a.value=o,a.oldValue=s,Object.freeze(Ii(a)),a}return Oi(n,[{key:"inverse",value:function(){return new n(this.id,this.noOp,this.prop,this.oldValue,this.value)}}]),n}(Th),Bh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.OBJECT_VALUE,e,i)).value=r,s.oldValue=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"inverse",value:function(){return new n(this.id,this.noOp,this.oldValue,this.value)}}]),n}(Th),zh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s,a){var l;return Si(this,n),(l=t.call(this,Ga.STRING_SPLICE,e,i)).index=r,l.deletedValue=o,l.deleteCount=s,l.insertValue=a,Object.freeze(Ii(l)),l}return Oi(n,[{key:"inverse",value:function(){return new n(this.id,this.noOp,this.index,this.insertValue,this.insertValue.length,this.deletedValue)}}]),n}(Th),Uh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.STRING_VALUE,e,i)).value=r,s.oldValue=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"inverse",value:function(){return new n(this.id,this.noOp,this.oldValue,this.value)}}]),n}(Th),Vh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,Ga.NUMBER_DELTA,e,i)).delta=r,Object.freeze(Ii(o)),o}return Oi(n,[{key:"inverse",value:function(){return new n(this.id,this.noOp,-this.delta)}}]),n}(Th),Wh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.NUMBER_VALUE,e,i)).value=r,s.oldValue=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"inverse",value:function(){return new n(this.id,this.noOp,this.oldValue,this.value)}}]),n}(Th),Hh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.BOOLEAN_VALUE,e,i)).value=r,s.oldValue=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"inverse",value:function(){return new n(this.id,this.noOp,this.oldValue,this.value)}}]),n}(Th),qh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,Ga.DATE_VALUE,e,i)).value=r,s.oldValue=o,Object.freeze(Ii(s)),s}return Oi(n,[{key:"inverse",value:function(){return new n(this.id,this.noOp,this.oldValue,this.value)}}]),n}(Th);function Gh(e,t){var n;if(e.operation.compoundOperation)n=function(e){var t=ka(e.operations).map(Kh);return new Rh(t)}(e.operation.compoundOperation);else{if(!e.operation.discreteOperation)throw new Js("Invalid model operation: "+JSON.stringify(e));n=Kh(e.operation.discreteOperation)}return new Ah(e.modelId,wa(e.version),Oa(e.timestamp),t.getUserForSession(e.sessionId),e.sessionId,n)}function Kh(e){if(e.arrayInsertOperation){var t=e.arrayInsertOperation,n=t.id,i=t.noOp,r=t.index,o=t.value;return new Ih(n,_a(i),wa(r),Md(o))}if(e.arrayRemoveOperation){var s=e.arrayRemoveOperation,a=s.id,l=s.noOp,c=s.index,u=s.oldValue,d=l?void 0:Md(u);return new Dh(a,_a(l),wa(c),d)}if(e.arrayMoveOperation){var h=e.arrayMoveOperation,f=h.id,p=h.noOp,g=h.fromIndex,m=h.toIndex;return new Lh(f,_a(p),wa(g),wa(m))}if(e.arrayReplaceOperation){var v=e.arrayReplaceOperation,y=v.id,b=v.noOp,w=v.index,_=v.value,x=v.oldValue,k=b?void 0:Md(x);return new Nh(y,_a(b),wa(w),Md(_),k)}if(e.arraySetOperation){var C=e.arraySetOperation,S=C.id,E=C.noOp,O=C.values,A=C.oldValues,M=E?void 0:ka(A).map(Md);return new Fh(S,_a(E),ka(O).map(Md),M)}if(e.objectAddPropertyOperation){var R=e.objectAddPropertyOperation,T=R.id,D=R.noOp,I=R.key,L=R.value;return new Ph(T,_a(D),xa(I),Md(L))}if(e.objectSetPropertyOperation){var N=e.objectSetPropertyOperation,F=N.id,$=N.noOp,P=N.key,j=N.value,B=N.oldValue,z=$?void 0:Md(B);return new jh(F,_a($),xa(P),Md(j),z)}if(e.objectRemovePropertyOperation){var U=e.objectSetPropertyOperation,V=U.id,W=U.noOp,H=U.key,q=U.oldValue,G=W?void 0:Md(q);return new $h(V,_a(W),xa(H),G)}if(e.objectSetOperation){var K=e.objectSetOperation,Y=K.id,J=K.noOp,X=K.values,Q=K.oldValues,Z=J?void 0:js(Ca(Q),Md);return new Bh(Y,_a(J),js(Ca(X),Md),Z)}if(e.stringSpliceOperation){var ee=e.stringSpliceOperation,te=ee.id,ne=ee.noOp,ie=ee.index,re=ee.deletedValue,oe=ee.insertedValue;return new zh(te,_a(ne),wa(ie),xa(re),xa(re).length,xa(oe))}if(e.stringSetOperation){var se=e.stringSetOperation,ae=se.id,le=se.noOp,ce=se.value,ue=se.oldValue,de=le?void 0:xa(ue);return new Uh(ae,_a(le),xa(ce),de)}if(e.numberDeltaOperation){var he=e.numberDeltaOperation,fe=he.id,pe=he.noOp,ge=he.delta;return new Vh(fe,_a(pe),wa(ge))}if(e.numberSetOperation){var me=e.numberSetOperation,ve=me.id,ye=me.noOp,be=me.value,we=me.oldValue,_e=ye?void 0:wa(we);return new Wh(ve,_a(ye),wa(be),_e)}if(e.booleanSetOperation){var xe=e.booleanSetOperation,ke=xe.id,Ce=xe.noOp,Se=xe.value,Ee=xe.oldValue,Oe=Ce?void 0:_a(Ee);return new Hh(ke,_a(Ce),_a(Se),Oe)}if(e.dateSetOperation){var Ae=e.dateSetOperation,Me=Ae.id,Re=Ae.noOp,Te=Ae.value,De=Ae.oldValue,Ie=Re?void 0:Oa(De);return new qh(Me,_a(Re),Oa(Te),Ie)}}var Yh=Object.assign(Object.assign({},Ed),{TARGET_VERSION_CHANGED:"target_changed",TRANSITION_START:"transition_start",TRANSITION_END:"transition_end"});Object.freeze(Yh);var Jh=function(){function e(t,n,i,r,o,s,a,l,c){Si(this,e),this._session=l,this._connection=a,this._identityCache=c,this._modelId=o,this._collectionId=s,this._model=new nd(this.session(),null,t,"error","error"),this._wrapperFactory=new Oh(this),this._version=n,this._targetVersion=n,this._maxVersion=n,this._currentTime=i,this._modifiedTime=i,this._createdTime=r,this._opRequests=[]}return Oi(e,[{key:"session",value:function(){return this._session}},{key:"collectionId",value:function(){return this._collectionId}},{key:"modelId",value:function(){return this._modelId}},{key:"time",value:function(){return this._currentTime}},{key:"minTime",value:function(){return this.createdTime()}},{key:"maxTime",value:function(){return this._modifiedTime}},{key:"createdTime",value:function(){return this._createdTime}},{key:"version",value:function(){return this._version}},{key:"minVersion",value:function(){return 0}},{key:"maxVersion",value:function(){return this._maxVersion}},{key:"targetVersion",value:function(){return this._targetVersion}},{key:"isTransitioning",value:function(){return this._targetVersion===this._version}},{key:"root",value:function(){return this._wrapperFactory.wrap(this._model.root())}},{key:"elementAt",value:function(){var e;return this._wrapperFactory.wrap((e=this._model).valueAt.apply(e,arguments))}},{key:"playTo",value:function(e){var t,n,i=this;if(e<0)throw new Error("Version must be >= 0: ".concat(e));if(e>this._maxVersion)throw new Error("Version must be <= maxVersion: ".concat(e));var r=null;if(e===this._targetVersion)return Promise.resolve();e>this._targetVersion?(t=this._targetVersion+1,n=e,r=!0):(t=e,n=this._targetVersion,r=!1),this._targetVersion=e;var o={historicalOperationsRequest:{modelId:this._modelId,first:t,last:n}},s={forward:r,completed:!1,operations:null};return this._opRequests.push(s),this._connection.request(o).then((function(e){var n=e.historicalOperationsResponse;s.completed=!0,s.operations=ka(n.operations).map((function(e){return Gh(e,i._identityCache)})),s.forward||1===t||(s.precedingOp=s.operations.shift()),i._checkAndProcess()}))}},{key:"playToTime",value:function(e){var t=this,n={modelGetVersionAtTimeRequest:{modelId:this._modelId,targetTime:Aa(e)}};return this._connection.request(n).then((function(e){var n=wa(e.modelGetVersionAtTimeResponse.versionAtTime);return t.playTo(n)}))}},{key:"forward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<1)throw new Error("delta must be > 0");if(this._targetVersion+e>this._maxVersion)throw new Error("Cannot move forward by ".concat(e,", because that would exceed the model's maxVersion."));var t=this._targetVersion+e;return this.playTo(t)}},{key:"backward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(e<1)throw new Error("delta must be > 0");if(this._targetVersion-e<0)throw new Error("Cannot move backward by ".concat(e,", because that would move beyond version 0."));var t=this._targetVersion-e;return this.playTo(t)}},{key:"_checkAndProcess",value:function(){if(0===this._opRequests.length)throw new Error("There are no operation requests to process");for(;this._opRequests.length>0&&this._opRequests[0].completed;){var e=this._opRequests[0];this._playOperations(e.operations,e.forward,e.precedingOp),this._opRequests.shift()}}},{key:"_playOperations",value:function(e,t,n){var i=this;if(t)e.forEach((function(e){e.operation.type===Ga.COMPOUND?e.operation.ops.forEach((function(t){i._playDiscreteOp(e,t,!1)})):i._playDiscreteOp(e,e.operation,!1)}));else{var r=e.reverse();r.forEach((function(e,t){var o=t===r.length-1?n:r[t+1];e.operation.type===Ga.COMPOUND?e.operation.ops.reverse().forEach((function(t){i._playDiscreteOp(e,t,!0,o)})):i._playDiscreteOp(e,e.operation,!0,o)}))}}},{key:"_playDiscreteOp",value:function(e,t,n,i){if(!t.noOp){var r=n?t.inverse():t;this._model.handleModelOperationEvent(new Cd(e.sessionId,e.user,e.version,e.timestamp,r))}if(n)if(2===e.version)this._version=1,this._currentTime=this._createdTime;else{if(void 0===i)throw new Error("no preceding operation was supplied to _playDiscreteOp");this._version=i.version,this._currentTime=i.timestamp}else this._version=e.version,this._currentTime=new Date(e.timestamp)}}]),e}();Jh.Events=Yh;var Xh={OFFLINE_MODEL_SYNC_STARTED:"offline_model_sync_started",OFFLINE_MODEL_SYNC_COMPLETED:"offline_model_sync_completed",OFFLINE_MODEL_SYNC_ERROR:"offline_model_sync_error",OFFLINE_MODEL_STATUS_CHANGED:"offline_model_status_changed",OFFLINE_MODEL_UPDATED:"offline_model_updated",OFFLINE_MODEL_DELETED:"offline_model_deleted",OFFLINE_MODEL_PERMISSIONS_REVOKED:"offline_model_permissions_revoked",OFFLINE_MODELS_DOWNLOAD_PENDING:"offline_models_download_pending",OFFLINE_MODELS_DOWNLOAD_PROGRESS:"offline_models_download_progress",OFFLINE_MODELS_DOWNLOAD_COMPLETED:"offline_models_download_completed",OFFLINE_MODELS_SYNC_STARTED:"offline_models_sync_started",OFFLINE_MODELS_SYNC_PROGRESS:"offline_models_sync_progress",OFFLINE_MODELS_SYNC_COMPLETED:"offline_models_sync_completed",OFFLINE_MODELS_SYNC_ABORTED:"offline_models_sync_aborted"};Object.freeze(Xh);var Qh=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this))._openModelRequests=new Map,a._openModels=new Map,a._resourceIdToModelId=new Map,a._resyncingModels=new Map,a._setOffline=function(){a._openModels.forEach((function(e){e._setOffline(),a._resyncingModels.has(e.modelId())&&a._resyncingModels.delete(e.modelId())})),a._resyncingModels.forEach((function(e){e.resyncModel&&(e.resyncModel._setOffline(),e.resyncModel._initiateClose(!1))})),a._resyncingModels.clear(),a._modelResyncQueue.length=0,null!==a._offlineSyncStartedDeferred&&(a._offlineSyncStartedDeferred.resolve(),a._offlineSyncStartedDeferred=null),null!==a._syncCompletedDeferred&&(a._emitEvent(new zc("Convergence went offline during the sync","offline")),a._syncCompletedDeferred.resolve(),a._syncCompletedDeferred=null),a._modelOfflineManager.setOffline(),a._resourceIdToModelId.clear(),a._checkResyncQueue()},a._setOnline=function(){a._openModels.forEach((function(e){a._resyncOpenModel(e)})),0!==a._resyncingModels.size&&(a._syncCompletedDeferred=new ta),a._modelOfflineManager.isOfflineEnabled()&&(a._offlineSyncStartedDeferred=new qd,a._modelOfflineManager.ready().then((function(){return a._initiateOfflineModelSync()})).catch((function(e){return a._log.error("Error resynchronizing models after reconnect",e)})))},a._connection=e,a._identityCache=i,a._connection.messages().subscribe((function(e){return a._handleMessage(e)})),a._autoRequestId=0,a._autoCreateRequests=new Map,a._connection.on(Ua.Events.INTERRUPTED,a._setOffline),a._connection.on(Ua.Events.DISCONNECTED,a._setOffline),a._connection.on(Ua.Events.CONNECTED,a._setOnline),a._modelResyncQueue=[],a._syncCompletedDeferred=null,a._offlineSyncStartedDeferred=null,a._modelOfflineManager=r,a._emitFrom(r.events()),a._undefinedArrayValues=s,a._undefinedObjectValues=o,a._modelIdGenerator=new Ba(32,Ba.AlphaNumeric),a._log=Ks.logger("models"),a}return Oi(n,[{key:"session",value:function(){return this._connection.session()}},{key:"isResyncing",value:function(){return null!==this._syncCompletedDeferred}},{key:"query",value:function(e){Us.assertNonEmptyString(e,"query");var t={modelsQueryRequest:{query:e}};return this._connection.request(t).then((function(e){var t=e.modelsQueryResponse,n=ka(t.models).map(Ld),i=wa(t.offset),r=wa(t.totalResults);return new Zs(n,i,r)}))}},{key:"isOpen",value:function(e){return Us.assertNonEmptyString(e,"id"),this._openModels.has(e)}},{key:"isOpening",value:function(e){return Us.assertNonEmptyString(e,"id"),this._openModelRequests.has(e)}},{key:"open",value:function(e){return Us.assertNonEmptyString(e,"id"),this._checkAndOpen(e)}},{key:"openAutoCreate",value:function(e){if(Us.isNotSet(e))throw new Js("'options' is a required parameter");if(""===e.id)throw new Js("'options.id' can not be an empty string");return Us.nonEmptyString(e.collection)?this._checkAndOpen(void 0,e):Promise.reject(new Error("options.collection must be a non-null, non empty string."))}},{key:"create",value:function(e){if(Us.isNotSet(e))throw new Js("'options' is a required parameter");return Us.nonEmptyString(e.collection)?this._checkAndCreate(e):Promise.reject(new Error("options.collection must be a non-null, non empty string."))}},{key:"remove",value:function(e){return Is(this,void 0,void 0,jo().mark((function t(){var n,i,r=this;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Us.assertNonEmptyString(e,"id"),null===this._offlineSyncStartedDeferred){t.next=4;break}return t.next=4,this._offlineSyncStartedDeferred.promise();case 4:if(!this._resyncingModels.has(e)){t.next=15;break}if("delete"!==(n=this._resyncingModels.get(e)).action){t.next=8;break}return t.abrupt("return",Promise.reject(new Error("The model has already been deleted locally and resynchronization is in process.")));case 8:if(!n.inProgress){t.next=14;break}return this._log.debug('Removing model "'.concat(e,'" the is resynchronizing. Waiting for resynchronization to complete before removing')),t.next=12,n.done.promise();case 12:t.next=15;break;case 14:n.action="delete";case 15:if(!this._openModels.get(e)){t.next=20;break}return(i=this._openModels.get(e))._handleLocallyDeleted(),t.next=20,i.whenClosed();case 20:if(!this._modelOfflineManager.isOfflineEnabled()){t.next=23;break}return t.next=23,this._modelOfflineManager.getModelMetaData(e).then((function(t){if(t)return r._modelOfflineManager.markModelForDeletion(e)})).catch((function(e){r._log.error("Could not mark model for deletion",e)}));case 23:if(this._connection.isConnected()||this._modelOfflineManager.isOfflineEnabled()){t.next=27;break}throw new Js("Can not delete a model while not connected and without offline support enabled.");case 27:if(!this._connection.isConnected()){t.next=29;break}return t.abrupt("return",this._removeOnline(e));case 29:case"end":return t.stop()}}),t,this)})))}},{key:"history",value:function(e){var t=this;Us.assertNonEmptyString(e,"id");var n={historicalDataRequest:{modelId:e}};return this._connection.request(n).then((function(n){var i=n.historicalDataResponse;return new Jh(Dd(i.data),wa(i.version),Oa(i.modifiedTime),Oa(i.createdTime),e,i.collectionId,t._connection,t.session(),t._identityCache)}))}},{key:"permissions",value:function(e){return Us.assertNonEmptyString(e,"id"),new Fd(e,this._connection)}},{key:"subscribeOffline",value:function(e){var t=Fs.isArray(e)?e:[e];return this._modelOfflineManager.subscribe(t)}},{key:"unsubscribeOffline",value:function(e){var t=Fs.isArray(e)?e:[e];return this._modelOfflineManager.unsubscribe(t)}},{key:"setOfflineSubscription",value:function(e){return this._modelOfflineManager.setSubscriptions(e)}},{key:"getOfflineSubscriptions",value:function(){return Is(this,void 0,void 0,jo().mark((function e(){var t;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._modelOfflineManager.ready();case 2:return e.next=4,this._modelOfflineManager.getSubscribedModelIds();case 4:return t=e.sent,e.abrupt("return",Array.from(t));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"getOfflineModelMetaData",value:function(){return Is(this,void 0,void 0,jo().mark((function e(){return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._modelOfflineManager.ready();case 2:return e.abrupt("return",this._modelOfflineManager.getAllModelMetaData());case 3:case"end":return e.stop()}}),e,this)})))}},{key:"_create",value:function(e,t){return Is(this,void 0,void 0,jo().mark((function n(){var i,r,o,s,a,l,c,u,d;return jo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.collection,!this._connection.isConnected()){n.next=8;break}return r=Nd(e.userPermissions&&ba.of(e.userPermissions)),o=t||this._getDataFromCreateOptions(e),s={createRealTimeModelRequest:{collectionId:i,modelId:Sa(e.id),data:Td(o),overrideWorldPermissions:e.overrideCollectionWorldPermissions,worldPermissions:e.worldPermissions,userPermissions:r}},n.abrupt("return",this._connection.request(s).then((function(e){return e.createRealTimeModelResponse.modelId})));case 8:if(!this._modelOfflineManager.isOfflineEnabled()){n.next=19;break}return a=e.id||this._modelIdGenerator.nextString(),l=t||this._getDataFromCreateOptions(e),c=e.userPermissions&&ba.of(e.userPermissions).toGuidObjectMap(),u={modelId:a,collection:e.collection,initialData:l,createdTime:new Date,valueIdPrefix:"@",overrideCollectionWorldPermissions:e.overrideCollectionWorldPermissions,worldPermissions:e.worldPermissions,userPermissions:c},n.next=15,this._modelOfflineManager.createOfflineModel(u);case 15:return this._connection.isConnected()&&(d=this._resyncingModels.size>0||this._modelResyncQueue.length>0,this._addResyncModel(a,"resync"),d||this._checkResyncQueue()),n.abrupt("return",a);case 19:throw new Js("Can not create a model while not connected and without offline support enabled.");case 20:case"end":return n.stop()}}),n,this)})))}},{key:"_close",value:function(e){var t=e.modelId();this._log.debug("Model closed: "+e.modelId()),this._openModels.has(t)&&this._openModels.delete(t);var n=e._getResourceId();null!==n&&this._resourceIdToModelId.delete(n)}},{key:"_resyncStarted",value:function(e,t){this._registerResourceId(e,t)}},{key:"_resyncCompleted",value:function(e){this._emitEvent(new Vc(e)),this._log.debug('Resync completed for model: "'.concat(e,'"')),this._resyncingModels.get(e).done.resolve(),this._resyncingModels.delete(e),this._checkResyncQueue()}},{key:"_resyncError",value:function(e,t,n){this._log.debug('Resync error for model: "'.concat(e,'"... ').concat(t));var i=new Wc(e,t,n);this._emitEvent(i),this._resyncingModels.get(e).ready.reject(new Error(t)),this._resyncCompleted(e)}},{key:"_emitError",value:function(e){this._emitEvent(e),this._connection.session().domain()._emitError(e)}},{key:"_dispose",value:function(){var e=this;this._openModels.forEach((function(t){return t.close().catch((function(t){return e._log.error(t)}))}))}},{key:"_registerResourceId",value:function(e,t){this._log.debug('Registering resource id: {modelId: "'.concat(e,'", resourceId: ').concat(t,"}")),this._resourceIdToModelId.set(t,e)}},{key:"_checkAndOpen",value:function(e,t){return Is(this,void 0,void 0,jo().mark((function n(){var i,r,o=this;return jo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==e||void 0!==t){n.next=2;break}throw new Error("Internal error, id or options must be defined.");case 2:if(null===this._offlineSyncStartedDeferred){n.next=5;break}return n.next=5,this._offlineSyncStartedDeferred.promise();case 5:if(Fs.isNotSet(e)&&(e=t.id),!e||!this._openModels.has(e)){n.next=14;break}if(!(i=this._openModels.get(e)).isClosing()){n.next=12;break}return n.abrupt("return",i.whenClosed().then((function(){return o._open(e,t)})));case 12:return this._log.debug("Opening model '".concat(e,"' that is already open")),n.abrupt("return",Promise.resolve(i));case 14:if(!e||!this._openModelRequests.has(e)){n.next=17;break}return this._log.debug("Opening model '".concat(e,"' that is already opening")),n.abrupt("return",this._openModelRequests.get(e).promise());case 17:if(!(r=this._resyncingModels.get(e))||!r.resyncModel){n.next=26;break}if(this._log.debug("Opening model '".concat(e,"' that is resyncing")),!r.resyncModel.isClosing()){n.next=24;break}return n.abrupt("return",r.resyncModel.whenClosed().then((function(){return o._open(e,t)})));case 24:return r.resyncModel._openAfterResync(),n.abrupt("return",Promise.resolve(r.resyncModel));case 26:return n.abrupt("return",this._open(e,t));case 27:case"end":return n.stop()}}),n,this)})))}},{key:"_open",value:function(e,t){var n=this,i=t?this._autoRequestId++:void 0;void 0!==t&&this._autoCreateRequests.set(i,t);var r=new ta;void 0!==e&&this._openModelRequests.set(e,r);var o=(this._connection.isConnected()?this._openOnline(e,i):this._modelOfflineManager.isOfflineEnabled()?this._openOffline(e,i):Promise.reject(new Js("Can not open a model while not online and without offline enabled."))).then((function(t){return n._clearOpenRequestRecords(e,i),n._openModels.set(t.modelId(),t),t._isOffline()&&n._connection.isConnected()&&n._resyncOpenModel(t),t})).catch((function(t){return n._clearOpenRequestRecords(e,i),Promise.reject(t)}));return r.resolveFromPromise(o),r.promise()}},{key:"_resyncOpenModel",value:function(e){this._addResyncModel(e.modelId(),"resync",e),e._setOnline()}},{key:"_addResyncModel",value:function(e,t,n){var i={modelId:e,action:t,inProgress:void 0!==n,done:new qd,ready:void 0!==n?qd.resolved():new qd,resyncModel:n||null};this._resyncingModels.set(e,i),i.inProgress||this._modelResyncQueue.push(i)}},{key:"_clearOpenRequestRecords",value:function(e,t){void 0!==e&&this._openModelRequests.delete(e),void 0!==t&&this._autoCreateRequests.delete(t)}},{key:"_openOnline",value:function(e,t){return Fs.isString(e)&&this._modelOfflineManager.isOfflineEnabled()?(this._log.debug("Opening model '".concat(e,"' while online")),this._openOnlineWithOfflineEnabled(e,t)):this._requestOpenFromServer(e,t)}},{key:"_openOnlineWithOfflineEnabled",value:function(e,t){return Is(this,void 0,void 0,jo().mark((function n(){var i,r,o,s,a;return jo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this._modelResyncQueue.findIndex((function(t){return t.modelId===e})),!(i>=0)){n.next=5;break}return r=this._modelResyncQueue.splice(i,1),o=u(r,1),s=o[0],n.next=5,this._initiateModelResync(s.modelId);case 5:if(!this._resyncingModels.has(e)){n.next=16;break}return a=this._resyncingModels.get(e),n.next=9,a.ready.promise();case 9:if("resync"!==a.action){n.next=13;break}return n.abrupt("return",a.resyncModel);case 13:this._requestOpenFromServer(e,t);case 14:n.next=17;break;case 16:return n.abrupt("return",this._requestOpenFromServer(e,t));case 17:case"end":return n.stop()}}),n,this)})))}},{key:"_requestOpenFromServer",value:function(e,t){var n=this,i={openRealTimeModelRequest:{modelId:Sa(e),autoCreateId:Sa(t)}};return this._connection.request(i).then((function(e){var t=e.openRealTimeModelResponse,i=Dd(t.data),r=n._createModel(wa(t.resourceId),xa(t.modelId),xa(t.collection),!1,!1,wa(t.version),0,Oa(t.createdTime),Oa(t.modifiedTime),xa(t.valueIdPrefix),ka(t.connectedClients),ka(t.resyncingClients),ka(t.references),Id(t.permissions),i);return n._registerResourceId(r.modelId(),wa(t.resourceId)),n._modelOfflineManager.isOfflineEnabled()?n._modelOfflineManager.storeOpenModelOffline(r).then((function(){return n._modelOfflineManager.modelOpened(r,0),r})):r}))}},{key:"_openOffline",value:function(e,t){return Is(this,void 0,void 0,jo().mark((function n(){var i,r,o,s,a,l,c,u;return jo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Fs.isUndefined(e)&&(e=this._modelIdGenerator.nextString()),this._log.debug("Opening model '".concat(e,"' while offline")),n.next=4,this._modelOfflineManager.getOfflineModelState(e);case 4:if(i=n.sent,!Fs.isSet(i)){n.next=13;break}return n.next=8,this._modelOfflineManager.claimValueIdPrefix(e);case 8:return r=n.sent,o=this._creteModelFromOfflineState(i,r,!1),n.abrupt("return",Promise.resolve(o));case 13:if(!this._autoCreateRequests.has(t)){n.next=22;break}return s=this._autoCreateRequests.get(t),a=this._createNewModelOffline(e,s),l=a._getConcurrencyControlStateSnapshot(),c=s.userPermissions&&ba.of(s.userPermissions).toGuidObjectMap(),u={modelId:e,collection:s.collection,initialData:l.data,createdTime:new Date,valueIdPrefix:"@",overrideCollectionWorldPermissions:s.overrideCollectionWorldPermissions,worldPermissions:s.worldPermissions,userPermissions:c},n.abrupt("return",this._modelOfflineManager.createOfflineModel(u).then((function(){return a})));case 22:return n.abrupt("return",Promise.reject(new Error("Model not available offline, and not auto create options were provided")));case 23:case"end":return n.stop()}}),n,this)})))}},{key:"_creteModelFromOfflineState",value:function(e,t,n){this._log.debug("Creating model '".concat(e.modelId,"' from offline state"));var i=this._createModel(null,e.modelId,e.collection,e.local,n,e.snapshot.version,e.snapshot.sequenceNumber,e.createdTime,e.modifiedTime,"".concat(t.prefix,"-").concat(t.increment),[],[],[],e.permissions,e.snapshot.data);i._setOffline(),i._rehydrateFromOfflineState(e.version,e.snapshot.serverOperations,e.snapshot.localOperations);var r=e.version-e.snapshot.version+(e.lastSequenceNumber-e.snapshot.sequenceNumber);return this._modelOfflineManager.modelOpened(i,r),i}},{key:"_removeOnline",value:function(e){var t=this;this._log.debug('Removing model online: "'.concat(e,'"'));var n={deleteRealtimeModelRequest:{modelId:e}};return this._connection.request(n).then((function(){return t._handleOnlineDeletion(e)})).catch((function(n){return n instanceof Js&&n.code===ca.REQUEST_TIMEOUT||t._handleOnlineDeletion(e),Promise.reject(n)}))}},{key:"_handleOnlineDeletion",value:function(e){var t=this;return this._modelOfflineManager.isOfflineEnabled()?this._modelOfflineManager.getModelMetaData(e).then((function(n){if(n)return t._modelOfflineManager.modelDeleted(e)})).catch((function(n){t._emitEvent(new eh(t._connection.session().domain(),"There was an error removing the model with id '".concat(e,"' from the offline store: ").concat(n.message))),t._log.error("Error removing model from offline store.",n)})):Promise.resolve()}},{key:"_createNewModelOffline",value:function(e,t){this._log.debug("Creating new offline model '".concat(e,"' using auto-create options."));var n=this._getDataFromCreateOptions(t),i=new Date,r=new Od(!0,!0,!0,!0),o=this._createModel(null,e,t.collection,!0,!1,1,0,i,i,"0",[],[],[],r,n);return o._setOffline(),this._modelOfflineManager.modelOpened(o,0),o}},{key:"_createModel",value:function(e,t,n,i,r,o,s,a,l,c,u,d,h,f,p){var g=this,m=new Ja(new mh),v=new vh(new mh),y=new rd((function(){return g._connection.session().sessionId()}),o,s,m,v);return new nh(e,c,p,i,r,u,d,h,f,a,l,t,n,y,this._connection,this._identityCache,this,this._modelOfflineManager,this._undefinedObjectValues,this._undefinedArrayValues)}},{key:"_handleMessage",value:function(e){var t=e.message,n=function(e){var t=function(e){return e.forceCloseRealTimeModel||e.remoteOperation||e.referenceShared||e.referenceSet||e.referenceCleared||e.referenceUnshared||e.operationAck||e.remoteClientOpenedModel||e.remoteClientClosedModel||e.modelPermissionsChanged||e.remoteClientResyncStarted||e.remoteClientResyncCompleted||e.modelResyncServerComplete||null}(e);return null!==t?wa(t.resourceId):null}(t);if(null!==n){var i=this._getModelForResourceId(n);i?i._handleMessage(e):this._log.warn("Received a message for a model that is not open or resynchronizing: "+JSON.stringify(t))}else t.modelAutoCreateConfigRequest&&this._handleModelDataRequest(t.modelAutoCreateConfigRequest,e.callback)}},{key:"_getModelForResourceId",value:function(e){var t=this._resourceIdToModelId.get(e);if(void 0===t)return null;var n=this._openModels.get(t);if(void 0!==n)return n;var i=this._resyncingModels.get(t);return void 0!==i?i.resyncModel?i.resyncModel:(this._log.warn("Received a message for model that is resyncing but not ready: "+t),null):null}},{key:"_handleModelDataRequest",value:function(e,t){var n=e.autoCreateId||0;if(this._autoCreateRequests.has(n)){var i=this._autoCreateRequests.get(n);this._autoCreateRequests.delete(n);var r=this._getDataFromCreateOptions(i),o=Nd(i.userPermissions&&ba.of(i.userPermissions)),s={modelAutoCreateConfigResponse:{data:Td(r),ephemeral:i.ephemeral,collection:i.collection,overridePermissions:i.overrideCollectionWorldPermissions,worldPermissions:i.worldPermissions,userPermissions:o}};t.reply(s)}else{var a="Received a request for an auto create id that was not expected: ".concat(n);this._log.error(a),t.expectedError("unknown_model",a)}}},{key:"_getDataFromCreateOptions",value:function(e){var t=e.data;Fs.isFunction(t)?t=t():Fs.isNotSet(t)&&(t={}),t=Object.assign({},t);var n=new Zh;return new Uu((function(){return n.id()}),this._undefinedObjectValues,this._undefinedArrayValues).createDataValue(t)}},{key:"_initiateOfflineModelSync",value:function(){return Is(this,void 0,void 0,jo().mark((function e(){return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._connection.isConnected()){e.next=3;break}return e.next=3,this._syncDirtyModelsToServer();case 3:if(!this._connection.isConnected()){e.next=6;break}return e.next=6,this._modelOfflineManager.setOnline();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"_syncDirtyModelsToServer",value:function(){return Is(this,void 0,void 0,jo().mark((function e(){var t,n,i=this;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===this._syncCompletedDeferred&&(this._syncCompletedDeferred=new ta),e.next=3,this._modelOfflineManager.getModelsRequiringSync();case 3:return t=e.sent,this._emitEvent(new Pc(t.length)),t.forEach((function(e){i._openModels.has(e.modelId)||i._openModelRequests.has(e.modelId)||i._resyncingModels.has(e.modelId)||i._addResyncModel(e.modelId,e.available?"resync":"delete")})),n=this._syncCompletedDeferred.promise(),null!==this._offlineSyncStartedDeferred&&(this._offlineSyncStartedDeferred.resolve(),this._offlineSyncStartedDeferred=null),this._checkResyncQueue(),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"_checkResyncQueue",value:function(){var e=this;if(this._connection.isConnected()){var t=Array.from(this._resyncingModels.values()).filter((function(e){return e.inProgress}));if(this._log.debug("Checking resync status"),this._log.debug((function(){var e=t.map((function(e){return e.modelId}));return"In Progress Resync Models (".concat(t.length,"): ").concat(JSON.stringify(e))})),this._log.debug((function(){var t=e._modelResyncQueue.map((function(e){return e.modelId}));return"Queued Resync Models (".concat(e._modelResyncQueue.length,"): ").concat(JSON.stringify(t))})),null===this._offlineSyncStartedDeferred&&this._emitEvent(new jc(t.length+this._modelResyncQueue.length)),0===t.length)if(0===this._modelResyncQueue.length)null!==this._offlineSyncStartedDeferred?(this._log.debug("Resync queue is empty, but waiting for offline sync to start."),this._offlineSyncStartedDeferred.promise().then((function(){return e._checkResyncQueue()}))):null!==this._syncCompletedDeferred&&(this._log.debug("Resync queue is empty, completing resync process"),this._emitEvent(new Bc),this._syncCompletedDeferred.resolve(),this._syncCompletedDeferred=null);else{var n=this._modelResyncQueue.pop();this._initiateModelResync(n.modelId).catch((function(t){e._log.error("Error resyncing models",t)}))}}}},{key:"_initiateModelResync",value:function(e){return Is(this,void 0,void 0,jo().mark((function t(){var n,i,r,o,s,a=this;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._log.debug('Initiating sync for model: "'.concat(e,'"')),n=this._resyncingModels.get(e),this._emitEvent(new Uc(n.modelId)),"resync"!==n.action){t.next=21;break}return t.next=6,this._modelOfflineManager.getOfflineModelState(n.modelId);case 6:if(i=t.sent,!Fs.isSet(i)){t.next=16;break}return t.next=10,this._modelOfflineManager.claimValueIdPrefix(n.modelId);case 10:r=t.sent,o=this._createAndSyncModel(i,r),n.resyncModel=o,n.ready.resolve(),t.next=19;break;case 16:return s='The state for model "'.concat(e,'" could not be found to resynchronize the model'),this._resyncError(e,s),t.abrupt("return",Promise.reject(new Error(s)));case 19:t.next=22;break;case 21:return t.abrupt("return",this._deleteResyncModel(n.modelId).then((function(){return n.ready.resolve()})).catch((function(t){return a._resyncError(e,t.message),Promise.reject(new Error(t.message))})));case 22:case"end":return t.stop()}}),t,this)})))}},{key:"_deleteResyncModel",value:function(e){var t=this;return this._log.debug('Deleting resync model from the server: "'.concat(e,'"')),this._removeOnline(e).then((function(){return t._resyncCompleted(e)})).catch((function(n){return n instanceof Qs&&"model_not_found"===n.code?(t._resyncCompleted(e),Promise.resolve()):Promise.reject(n)}))}},{key:"_createAndSyncModel",value:function(e,t){this._log.debug("Creating and resynchronizing model: ".concat(e.modelId));var n=this._creteModelFromOfflineState(e,t,!0);return n._setOnline(),n}},{key:"_checkAndCreate",value:function(e){return Is(this,void 0,void 0,jo().mark((function t(){var n,i,r;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._openModels.has(e.id)){t.next=3;break}return n="A model with id '".concat(e.id,"' is open locally."),t.abrupt("return",Promise.reject(new Js(n)));case 3:if(null===this._offlineSyncStartedDeferred){t.next=6;break}return t.next=6,this._offlineSyncStartedDeferred.promise();case 6:if(!this._resyncingModels.has(e.id)){t.next=15;break}if("resync"!==(i=this._resyncingModels.get(e.id)).action){t.next=13;break}return r="A model with id '".concat(e.id,"' is resynchronizing."),t.abrupt("return",Promise.reject(new Js(r)));case 13:return t.next=15,i.ready;case 15:return t.abrupt("return",this._create(e));case 16:case"end":return t.stop()}}),t,this)})))}}]),n}(Xs);Qh.Events=Xh;var Zh=function(){function e(){Si(this,e),this._prefix="@",this._id=0}return Oi(e,[{key:"id",value:function(){return this._prefix+":"+this._id++}}]),e}(),ef=function(){function e(t,n,i,r,o){Si(this,e),this.activity=t,this.user=n,this.sessionId=i,this.local=r,this._state=zs(o),Object.freeze(this)}return Oi(e,[{key:"state",get:function(){return zs(this._state)}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(void 0!==t.activity?t.activity:this.activity,void 0!==t.user?t.user:this.user,void 0!==t.sessionId?t.sessionId:this.sessionId,void 0!==t.local?t.local:this.local,void 0!==t.state?t.state:this.state)}}]),e}(),tf=Oi((function e(t,n,i,r,o){Si(this,e),this.activity=t,this.user=n,this.sessionId=i,this.local=r,this.participant=o,this.name=e.EVENT_NAME,Object.freeze(this)}));tf.EVENT_NAME="session_joined";var nf=Oi((function e(t,n,i,r){Si(this,e),this.activity=t,this.user=n,this.sessionId=i,this.local=r,this.name=e.EVENT_NAME,Object.freeze(this)}));nf.EVENT_NAME="session_left";var rf=Oi((function e(t,n,i,r,o,s,a){Si(this,e),this.activity=t,this.user=n,this.sessionId=i,this.local=r,this.key=o,this.value=s,this.oldValue=a,this.name=e.EVENT_NAME,Object.freeze(this)}));rf.EVENT_NAME="state_set";var of=Oi((function e(t,n,i,r,o,s){Si(this,e),this.activity=t,this.user=n,this.sessionId=i,this.local=r,this.key=o,this.oldValue=s,this.name=e.EVENT_NAME,Object.freeze(this)}));of.EVENT_NAME="state_removed";var sf=Oi((function e(t,n,i,r,o){Si(this,e),this.activity=t,this.user=n,this.sessionId=i,this.local=r,this.oldValues=o,this.name=e.EVENT_NAME,Object.freeze(this)}));sf.EVENT_NAME="state_cleared";var af=Oi((function e(t,n,i,r,o,s,a,l){Si(this,e),this.activity=t,this.user=n,this.sessionId=i,this.local=r,this.values=o,this.complete=s,this.removed=a,this.oldValues=l,this.name=e.EVENT_NAME,Object.freeze(this)}));af.EVENT_NAME="state_delta";var lf=Oi((function e(t,n,i,r){Si(this,e),this.activity=t,this.user=n,this.sessionId=i,this.local=r,this.name=e.EVENT_NAME,Object.freeze(this)}));lf.EVENT_NAME="left";var cf=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"userPermissions",value:function(t){var n=[];return t instanceof ba?t.forEach((function(t,i){n.push(e.toUserPermissionEntry(i,t))})):Fs.isMap(t)?t.forEach((function(t,i){i=ua.of(i),n.push(e.toUserPermissionEntry(i,t))})):Fs.isObject(t)&&Bs(t,(function(t,i){var r=ua.of(t);n.push(e.toUserPermissionEntry(r,i))})),n}},{key:"toGroupPermissionsProto",value:function(e){var t={};return(Fs.isMap(e)||Fs.isObject(e))&&ya.coerceToMap(e).forEach((function(e,n){t[n]=e})),t}},{key:"toUserPermissionEntry",value:function(e,t){return{user:Da(e),permissions:t}}}]),e}(),uf=function(){function e(t){Si(this,e),this._connection=t}return Oi(e,[{key:"resolveSessionPermissions",value:function(){this._connection.session().assertOnline();var e={resolvePermissionsForConnectedSessionRequest:{target:this._getTarget()}};return this._connection.request(e).then((function(e){var t=e.resolvePermissionsForConnectedSessionResponse;return new Set(ka(t.permissions))}))}},{key:"getPermissions",value:function(){var e=this;this._connection.session().assertOnline();var t={getPermissionsRequest:{target:this._getTarget()}};return this._connection.request(t).then((function(t){var n=t.getPermissionsResponse,i=new Set(ka(n.world)),r=e._permissionsEntriesToUserMap(ka(n.user));return{worldPermissions:i,groupPermissions:ya.coerceToMap(js(Ca(n.group),(function(e){return new Set(ka(e.values))}))),userPermissions:r}}))}},{key:"addWorldPermissions",value:function(e){this._connection.session().assertOnline();var t={addPermissionsRequest:{target:this._getTarget(),world:Array.from(e)}};return this._connection.request(t).then((function(){}))}},{key:"removeWorldPermissions",value:function(e){this._connection.session().assertOnline();var t={removePermissionsRequest:{target:this._getTarget(),world:Array.from(e)}};return this._connection.request(t).then((function(){}))}},{key:"setWorldPermissions",value:function(e){this._connection.session().assertOnline();var t={setPermissionsRequest:{target:this._getTarget(),world:{permissions:Array.from(e)}}};return this._connection.request(t).then((function(){}))}},{key:"getWorldPermissions",value:function(){return this._connection.session().assertOnline(),this.getPermissions().then((function(e){return e.worldPermissions}))}},{key:"addUserPermissions",value:function(e){this._connection.session().assertOnline();var t=ba.of(e),n={addPermissionsRequest:{target:this._getTarget(),user:this._permissionsMapToPermissionEntries(t)}};return this._connection.request(n).then((function(){}))}},{key:"removeUserPermissions",value:function(e){this._connection.session().assertOnline();var t=ba.of(e),n={removePermissionsRequest:{target:this._getTarget(),user:this._permissionsMapToPermissionEntries(t)}};return this._connection.request(n).then((function(){}))}},{key:"setUserPermissions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connection.session().assertOnline();var n=ba.of(e),i={setPermissionsRequest:{target:this._getTarget(),user:{permissions:this._permissionsMapToPermissionEntries(n),replaceAll:t}}};return this._connection.request(i).then((function(){}))}},{key:"getAllUserPermissions",value:function(){return this._connection.session().assertOnline(),this.getPermissions().then((function(e){return e.userPermissions}))}},{key:"getUserPermissions",value:function(e){return this._connection.session().assertOnline(),this.getPermissions().then((function(t){return t.userPermissions.get(ua.normal(e))||new Set}))}},{key:"addGroupPermissions",value:function(e){this._connection.session().assertOnline();var t=this._coercePermissionsToGroupedProtoPermissionList(e),n={addPermissionsRequest:{target:this._getTarget(),group:t}};return this._connection.request(n).then((function(){}))}},{key:"removeGroupPermissions",value:function(e){this._connection.session().assertOnline();var t=this._coercePermissionsToGroupedProtoPermissionList(e),n={removePermissionsRequest:{target:this._getTarget(),group:t}};return this._connection.request(n).then((function(){}))}},{key:"setGroupPermissions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connection.session().assertOnline();var n=this._coercePermissionsToGroupedProtoPermissionList(e),i={setPermissionsRequest:{target:this._getTarget(),group:{permissions:n,replaceAll:t}}};return this._connection.request(i).then((function(){}))}},{key:"getAllGroupPermissions",value:function(){return this._connection.session().assertOnline(),this.getPermissions().then((function(e){return e.groupPermissions}))}},{key:"getGroupPermissions",value:function(e){return this._connection.session().assertOnline(),this.getPermissions().then((function(t){return t.groupPermissions.get(e)||new Set}))}},{key:"_permissionsMapToPermissionEntries",value:function(e){var t=[];return e.forEach((function(e,n){t.push({user:Da(n),permissions:Array.from(e)})})),t}},{key:"_permissionsEntriesToUserMap",value:function(e){var t=new ba;return e.forEach((function(e){var n=Ta(e.user),i=new Set(ka(e.permissions));t.set(n,i)})),t}},{key:"_coercePermissionsToGroupedProtoPermissionList",value:function(e){return js(ya.coerceToObject(e),(function(e){return{values:Array.from(e)}}))}}]),e}(),df=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this,r))._target={activity:{type:e,id:i}},o}return Oi(n,[{key:"type",value:function(){return this._target.activity.type}},{key:"id",value:function(){return this._target.activity.id}},{key:"_getTarget",value:function(){return this._target}}]),n}(uf),hf=Oi((function e(t,n,i,r,o){Si(this,e),this.activity=t,this.user=n,this.sessionId=i,this.local=r,this.reason=o,this.name=e.EVENT_NAME,Object.freeze(this)}));hf.EVENT_NAME="force_leave";var ff=Oi((function e(t,n,i,r){Si(this,e),this.activity=t,this.user=n,this.sessionId=i,this.local=r,this.name=e.EVENT_NAME,Object.freeze(this)}));ff.EVENT_NAME="deleted";var pf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this))._setOnline=function(){s._logger.debug((function(){return"Activity '".concat(s._id,"' is online")}));var e=s._lurking?new Map:s._localParticipant.state,t=new ta;s._joinWhileOnline(t,e)},s._setOffline=function(){s._logger.debug((function(){return"Activity '".concat(s._id,"' is offline")})),s._mutateParticipants((function(e){var t,n,i=No(e);try{for(i.s();!(n=i.n()).done;){var r=u(n.value,2),o=r[0],a=r[1];if(o!==(null===(t=s._localParticipant)||void 0===t?void 0:t.sessionId)){e.delete(o);var l=new nf(Ii(s),a.user,a.sessionId,!1);s._emitEvent(l)}}}catch(c){i.e(c)}finally{i.f()}}))},s._identityCache=r,s._type=e,s._id=i,s._resource=null,s._permissionsManager=new df(e,i,o),s._participants=new ds(new Map),s._joined=!0,s._connection=o,s._logger=Ks.logger("activities.activity"),s._joinPromise=null,s._lurking=!1,s._connection.on(Ua.Events.INTERRUPTED,s._setOffline),s._connection.on(Ua.Events.DISCONNECTED,s._setOffline),s._connection.on(Ua.Events.CONNECTED,s._setOnline),s._connectionMessageSubscription=s._connection.messages().subscribe((function(e){var t=e.message;t.activitySessionJoined&&wa(t.activitySessionJoined.resourceId)===s._resource?s._onSessionJoined(t.activitySessionJoined):t.activitySessionLeft&&wa(t.activitySessionLeft.resourceId)===s._resource?s._onSessionLeft(t.activitySessionLeft):t.activityStateUpdated&&wa(t.activityStateUpdated.resourceId)===s._resource?s._onRemoteStateUpdated(t.activityStateUpdated):t.activityDeleted&&wa(t.activityDeleted.resourceId)===s._resource?s._onDeleted(t.activityDeleted):t.activityForceLeave&&wa(t.activityForceLeave.resourceId)===s._resource&&s._onForceLeave(t.activityForceLeave)})),s}return Oi(n,[{key:"session",value:function(){return this._connection.session()}},{key:"type",value:function(){return this._type}},{key:"id",value:function(){return this._id}},{key:"createdTime",value:function(){return this._created}},{key:"isEphemeral",value:function(){return this._ephemeral}},{key:"permissions",value:function(){return this._permissionsManager}},{key:"leave",value:function(){var e=this;return this.isJoined()?this._connection.isConnected()?this._connection.request({activityLeaveRequest:{resourceId:this._resource}}).then((function(){e._completeLeave()})):(this._completeLeave(),Promise.resolve()):Promise.reject(new Js("The activity was not joined: ".concat(this._id)))}},{key:"isJoined",value:function(){return this._joined}},{key:"state",value:function(){return this._lurking?new Map:this._localParticipant.state}},{key:"setState",value:function(){var e,t=this;if((this._assertNotLurking(),this.isJoined())&&(1===arguments.length?e=ya.coerceToMap(arguments[0]):2===arguments.length&&(e=new Map).set(arguments[0],arguments[1]),e.size>0)){this._sendStateUpdate(e,!1,[]);var n=new Map,i=this.state();e.forEach((function(e,t){n.set(t,i.get(t)),i.set(t,e)})),this._mutateLocalParticipant((function(e){return e.clone({state:i})}));var r=this._connection.session(),o=new af(this,r.user(),r.sessionId(),!0,e,!1,[],n);this._emitEvent(o),e.forEach((function(e,i){var o=n.get(i),s=new rf(t,r.user(),r.sessionId(),!0,i,e,o);t._emitEvent(s)}))}}},{key:"removeState",value:function(e){var t=this;if(this._assertNotLurking(),this.isJoined()&&(Fs.isString(e)&&(e=[e]),e.length>0)){this._sendStateUpdate(null,!1,e);var n=this.state(),i=new Map;e.forEach((function(e){i.set(e,n.get(e)),n.delete(e)})),this._mutateLocalParticipant((function(e){return e.clone({state:n})}));var r=this._connection.session(),o=new af(this,r.user(),r.sessionId(),!0,new Map,!1,e,i);this._emitEvent(o),e.forEach((function(e){var n=i.get(e),o=new of(t,r.user(),r.sessionId(),!0,e,n);t._emitEvent(o)}))}}},{key:"clearState",value:function(){if(this._assertNotLurking(),this.isJoined()&&this._localParticipant.state.size>0){this._sendStateUpdate(new Map,!0,null);var e=this.state();this._mutateLocalParticipant((function(e){return e.clone({state:new Map})}));var t=this._connection.session(),n=new af(this,t.user(),t.sessionId(),!0,new Map,!0,[],e);this._emitEvent(n);var i=new sf(this,t.user(),t.sessionId(),!0,e);this._emitEvent(i)}}},{key:"participant",value:function(e){return this._participants.getValue().get(e)}},{key:"participants",value:function(){return Array.from(this._participants.getValue().values())}},{key:"participantsAsObservable",value:function(){return this._participants.asObservable().pipe(Cs((function(e){return Array.from(e.values())})))}},{key:"_join",value:function(e){if(null===this._joinPromise){e=e||{},e=Object.assign({lurk:!1},e);var t=new ta,n=e.state?ya.coerceToMap(e.state):new Map;this._lurking=e.lurk,this._autoCreateOptions=e.autoCreate||null,this._connection.isConnected()?this._joinWhileOnline(t,n):this._joinWhileOffline(t,n),this._joinPromise=t.promise()}}},{key:"_whenJoined",value:function(){return this._joinPromise}},{key:"_completeLeave",value:function(){this._joined=!1,this._resource=null;var e=this._connection.session().user(),t=this._connection.session().sessionId(),n=new lf(this,e,t,!0);this._emitEvent(n),this._connectionMessageSubscription.unsubscribe(),this._completeEventStream()}},{key:"_onSessionJoined",value:function(e){var t=this._identityCache.getUserForSession(e.sessionId),n=js(Ca(e.state),Ma),i=new ef(this,t,e.sessionId,!1,ya.objectToMap(n));this._mutateParticipants((function(e){return e.set(i.sessionId,i)})),this._emitParticipantJoined(i)}},{key:"_emitParticipantJoined",value:function(e){var t=new tf(this,e.user,e.sessionId,!1,e);this._emitEvent(t)}},{key:"_onSessionLeft",value:function(e){var t=this._participants.getValue().get(e.sessionId);this._emitParticipantLeft(t),this._mutateParticipants((function(e){return e.delete(t.sessionId)}))}},{key:"_emitParticipantLeft",value:function(e){var t=new nf(this,e.user,e.sessionId,e.local);this._emitEvent(t)}},{key:"_assertNotLurking",value:function(){if(this._lurking)throw new Js("Can not mutate local activity state when lurking.")}},{key:"_onRemoteStateUpdated",value:function(e){var t=xa(e.sessionId),n=ya.objectToMap(Ca(e.set)),i=_a(e.complete),r=ka(e.removed);i?0===n.size?this._handleStateCleared(t):this._handleStateReplaced(t,n):(r.length>0&&this._handleStateRemoved(t,r),n.size>0&&this._handleStateSet(t,n))}},{key:"_onDeleted",value:function(e){var t=new ff(this,this._connection.session().user(),this._connection.session().sessionId(),!0);this._emitEvent(t),this._completeLeave()}},{key:"_onForceLeave",value:function(e){var t=new hf(this,this._connection.session().user(),this._connection.session().sessionId(),!0,xa(e.reason));this._emitEvent(t),this._completeLeave()}},{key:"_handleStateSet",value:function(e,t){var n=this,i=this._identityCache.getUserForSession(e),r=new Map;t.forEach((function(e,t){var n=Ma(e);r.set(t,n)}));var o=new Map;this._mutateParticipants((function(t){var n=t.get(e),i=new Map(n.state);r.forEach((function(e,t){o.set(t,i.get(t)),i.set(t,e)})),t.set(e,n.clone({state:i}))}));var s=new af(this,i,e,!0,r,!1,[],o);this._emitEvent(s),r.forEach((function(t,r){var s=o.get(r),a=new rf(n,i,e,!1,r,t,s);n._emitEvent(a)}))}},{key:"_handleStateReplaced",value:function(e,t){var n=this,i=this._identityCache.getUserForSession(e),r=new Map;Object.keys(t).forEach((function(e){var n=Ma(t[e]);r.set(e,n)}));var o=this._participants.getValue().get(e).state;this._mutateParticipants((function(t){var n=t.get(e);t.set(e,n.clone({state:r}))}));var s=[];o.forEach((function(e,t){r.has(t)||s.push(t)}));var a=new af(this,i,e,!0,r,!1,s,o);this._emitEvent(a),s.forEach((function(t){var r=o.get(t),s=new of(n,i,e,!1,t,r);n._emitEvent(s)})),r.forEach((function(t,r){var s=o.get(r),a=new rf(n,i,e,!1,r,t,s);n._emitEvent(a)}))}},{key:"_handleStateCleared",value:function(e){var t=this._identityCache.getUserForSession(e),n=this._participants.getValue().get(e).state;this._mutateParticipants((function(t){var n=t.get(e),i=new Map;t.set(e,n.clone({state:i}))}));var i=new af(this,t,e,!0,new Map,!0,[],n);this._emitEvent(i);var r=new sf(this,t,e,!1,n);this._emitEvent(r)}},{key:"_handleStateRemoved",value:function(e,t){var n=this,i=this._identityCache.getUserForSession(e),r=new Map;this._mutateParticipants((function(n){var i=n.get(e),o=new Map(i.state);t.forEach((function(e){r.set(e,o.get(e)),o.delete(e)})),n.set(e,i.clone({state:o}))}));var o=new af(this,i,e,!0,new Map,!1,t,r);this._emitEvent(o),t.forEach((function(t){var o=r.get(t),s=new of(n,i,e,!1,t,o);n._emitEvent(s)}))}},{key:"_mutateParticipants",value:function(e){var t=new Map(this._participants.getValue());e(t),this._participants.next(t)}},{key:"_mutateLocalParticipant",value:function(e){var t=this;this._mutateParticipants((function(n){t._localParticipant=e(t._localParticipant),n.set(t._localParticipant.sessionId,t._localParticipant)}))}},{key:"_joinWhileOnline",value:function(e,t){var n,i=this;this._autoCreateOptions&&(n={worldPermissions:this._autoCreateOptions.worldPermissions||[],userPermissions:cf.userPermissions(this._autoCreateOptions.userPermissions),groupPermissions:cf.toGroupPermissionsProto(this._autoCreateOptions.groupPermissions),ephemeral:this._autoCreateOptions.ephemeral});var r=js(ya.mapToObject(t),Ra),o={activityJoinRequest:{activityType:this._type,activityId:this._id,lurk:this._lurking,state:r,autoCreateData:n}};this._resource=null,this._connection.request(o).then((function(t){var n=t.activityJoinResponse,r=i._connection.session().sessionId();i._resource=wa(n.resourceId),i._ephemeral=_a(n.ephemeral),i._created=Oa(n.created);var o=new Map,s=Ca(n.state);if(Bs(s,(function(e){var t=s[e]||{},n=i._identityCache.getUserForSession(e),a=e===r,l=js(Ca(t.state),Ma),c=ya.objectToMap(l),u=new ef(i,n,e,a,c);o.set(e,u)})),void 0!==i._localParticipant){i._emitParticipantLeft(i._localParticipant);var a=o.get(r),l=a.clone({state:i._localParticipant.state});i._syncStateAfterJoinOnline(a.state,i._localParticipant.state),o.set(r,l)}i._localParticipant=o.get(r),i._participants.next(o),o.forEach((function(e){return i._emitParticipantJoined(e)})),e.resolve()})).catch((function(t){e.reject(t)}))}},{key:"_syncStateAfterJoinOnline",value:function(e,t){var n=[];e.forEach((function(e,i){t.has(i)||n.push(i)}));var i=new Map;t.forEach((function(t,n){pl.deepEquals(!e.get(n),t)||i.set(n,t)})),(n.length>0||i.size>0)&&this._sendStateUpdate(i,!1,n)}},{key:"_joinWhileOffline",value:function(e,t){this._joined=!0;var n=this._connection.session();this._localParticipant=new ef(void 0,n.user(),n.sessionId(),!0,t);var i=new Map;i.set(this._localParticipant.sessionId,this._localParticipant),this._participants.next(i),e.resolve()}},{key:"_sendStateUpdate",value:function(e,t,n){var i=null!==e?js(ya.mapToObject(e),Ra):{},r=null!==n?n:[];if(this._connection.isConnected()){var o={activityUpdateState:{resourceId:this._resource,set:i,complete:t,removed:r}};this._connection.send(o)}}}]),n}(Xs);pf.Events={SESSION_JOINED:tf.EVENT_NAME,SESSION_LEFT:nf.EVENT_NAME,STATE_SET:rf.EVENT_NAME,STATE_CLEARED:sf.EVENT_NAME,STATE_REMOVED:of.EVENT_NAME,STATE_DELTA:af.EVENT_NAME,LEFT:lf.EVENT_NAME,DELETED:lf.EVENT_NAME,FORCE_LEAVE:hf.EVENT_NAME},Object.freeze(pf.Events);var gf=function(e){Mi(n,e);var t=Ni(n);function n(e,i){var r;return Si(this,n),(r=t.call(this))._logger=Ks.logger("activities.service"),r._connection=e,r._identityCache=i,r._joinedActivities=new Map,r}return Oi(n,[{key:"session",value:function(){return this._connection.session()}},{key:"create",value:function(e){Us.assertNonEmptyString(e.activityType,"options.activityType");var t=e.worldPermissions||[],n=cf.userPermissions(e.userPermissions),i=cf.toGroupPermissionsProto(e.groupPermissions),r={activityCreateRequest:{activityId:e.activityId,activityType:e.activityType,worldPermissions:t,userPermissions:n,groupPermissions:i}};return this._connection.request(r).then((function(){}))}},{key:"remove",value:function(e,t){Us.assertNonEmptyString(t,"activityType");var n={activityDeleteRequest:{activityId:e,activityType:t}};return this._connection.request(n).then((function(){}))}},{key:"join",value:function(e,t,i){var r=this,o=this._joinedActivities.get(n._activityToIdString(e,t));if(void 0===o){o=new pf(e,t,this._identityCache,this._connection),this._joinedActivities.set(n._activityToIdString(e,t),o);var s=o.events().pipe(_s((function(e){return e.name===lf.EVENT_NAME})),As((function(){return r._onActivityLeave(e,t)})));o._join(i),o._whenJoined().then((function(){return r._emitFrom(s),Promise.resolve(o)})).catch((function(e){return r._joinedActivities.delete(t),Promise.reject(e)}))}return o._whenJoined().then((function(){return o}))}},{key:"joined",value:function(){return new Map(this._joinedActivities)}},{key:"isJoined",value:function(e,t){return this._joinedActivities.has(n._activityToIdString(e,t))}},{key:"_onActivityLeave",value:function(e,t){this._joinedActivities.delete(n._activityToIdString(e,t))}}],[{key:"_activityToIdString",value:function(e,t){return"".concat(e,"/").concat(t)}}]),n}(Xs),mf=function(){function e(t,n,i){Si(this,e),this.user=t,this.available=n,this._state=zs(i),Object.freeze(this)}return Oi(e,[{key:"state",get:function(){return zs(this._state)}}]),e}(),vf=Oi((function e(t,n){Si(this,e),this.user=t,this.available=n,this.name=e.NAME,Object.freeze(this)}));vf.NAME="availability_changed";var yf=Oi((function e(t){Si(this,e),this.user=t,this.name=e.NAME,Object.freeze(this)}));yf.NAME="state_cleared";var bf=Oi((function e(t,n){Si(this,e),this.user=t,this.keys=n,this.name=e.NAME,Object.freeze(this)}));bf.NAME="state_removed";var wf=Oi((function e(t,n){Si(this,e),this.user=t,this.state=n,this.name=e.NAME,Object.freeze(this)}));wf.NAME="state_set";var _f=function(e){Mi(n,e);var t=Ni(n);function n(e){var i;return Si(this,n),(i=t.call(this))._manager=e,i._emitFrom(e.events()),i}return Oi(n,[{key:"user",get:function(){return this._manager.user()}},{key:"available",get:function(){return this._manager.isAvailable()}},{key:"state",get:function(){return this._manager.state()}},{key:"asObservable",value:function(){return this._manager.asObservable()}},{key:"unsubscribe",value:function(){null!==this._manager&&this._manager.unsubscribe(this),this._manager=null}}]),n}(Xs);_f.Events={STATE_SET:wf.NAME,STATE_REMOVED:bf.NAME,STATE_CLEARED:yf.NAME,AVAILABILITY_CHANGED:vf.NAME};var xf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this))._presence=new mf(e.user,e.available,e.state),o._subscriptions=[],o._onUnsubscribe=r,o._setStream(i),o._subject=new ds(o._presence),o}return Oi(n,[{key:"user",value:function(){return this._presence.user}},{key:"isAvailable",value:function(){return this._presence.available}},{key:"state",value:function(){return this._presence.state}},{key:"asObservable",value:function(){return this._subject.asObservable()}},{key:"subscribe",value:function(){var e=new _f(this);return this._subscriptions.push(e),e}},{key:"unsubscribe",value:function(e){this._subscriptions=this._subscriptions.filter((function(t){return t!==e})),0===this._subscriptions.length&&(this._messageSubscription.unsubscribe(),this._subject.complete(),this._onUnsubscribe(this.user().userId))}},{key:"availability",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._presence=new mf(this._presence.user,e,this._presence.state);var n=new vf(this._presence.user,e);this._emitEvent(n),t&&this._subject.next(this._presence)}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._presence.state;e.forEach((function(e,t){return n.set(t,zs(e))})),this._presence=new mf(this._presence.user,this._presence.available,n);var i=new wf(this._presence.user,n);this._emitEvent(i),t&&this._subject.next(this._presence)}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._presence.state;e.forEach((function(e){return n.delete(e)})),this._presence=new mf(this._presence.user,this._presence.available,n);var i=new bf(this._presence.user,e);this._emitEvent(i),t&&this._subject.next(this._presence)}},{key:"clear",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._presence=new mf(this._presence.user,this._presence.available,new Map);var t=new yf(this._presence.user);this._emitEvent(t),e&&this._subject.next(this._presence)}},{key:"hasKey",value:function(e){return this._presence.state.has(e)}},{key:"_setOnline",value:function(e){this.availability(e.available,!1),this.clear(!1),this.set(e.state),this._subject.next(e)}},{key:"_setStream",value:function(e){var t=this;this._messageSubscription&&this._messageSubscription.unsubscribe(),this._messageSubscription=e.subscribe((function(e){return t._handleMessage(e)}))}},{key:"_setOffline",value:function(){this.availability(!1,!1)}},{key:"_handleMessage",value:function(e){var t=e.message;if(t.presenceAvailabilityChanged){var n=t.presenceAvailabilityChanged.available;this.availability(_a(n))}else if(t.presenceStateSet){var i=t.presenceStateSet.state,r=ya.objectToMap(js(Ca(i),Ma));this.set(r)}else if(t.presenceStateCleared)this.clear();else if(t.presenceStateRemoved){var o=t.presenceStateRemoved.keys;this.remove(ka(o))}}}]),n}(Xs),kf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;Si(this,n),(o=t.call(this))._logger=Ks.logger("connection"),o._setOnline=function(){var e=o.session().user(),t=o._streamForUsername(e.userId);o._localManager._setStream(t);var n=[];o._subscribedManagers.forEach((function(e){n.push(e.user().userId)})),o._subscribeToServer(n).then((function(e){e.forEach((function(e){var t=o._getManager(e.user.userId);t&&t._setOnline(e)}))})).catch((function(e){o._logger.error("Error resubscribing to presence",e)}))},o._setOffline=function(){o._localManager._setOffline(),o._subscribedManagers.forEach((function(e){e._setOffline()}))},o._connection=e,o._identityCache=i,o._subscribedManagers=new Map,o._messageStream=o._connection.messages().pipe(ws());var s=void 0!==r?r:new da(la.ANONYMOUS,""),a=o._streamForUsername(s.userId),l=new mf(s,!1,new Map);return o._localManager=new xf(l,a,(function(){})),o._localPresence=o._localManager.subscribe(),o._emitFrom(o._localPresence.events()),o._connection.on(Ua.Events.INTERRUPTED,o._setOffline),o._connection.on(Ua.Events.DISCONNECTED,o._setOffline),o._connection.on(Ua.Events.CONNECTED,o._setOnline),o}return Oi(n,[{key:"session",value:function(){return this._connection.session()}},{key:"isAvailable",value:function(){return this._localPresence.available}},{key:"setState",value:function(){var e;if(1===arguments.length)e=ya.objectToMap(arguments[0]);else if(2===arguments.length)(e=new Map).set(arguments[0],arguments[1]);else if(0===arguments.length)return;if(this._localManager.set(e),this._connection.isConnected()){var t={presenceSetState:{state:js(ya.mapToObject(e),Ra)}};this._connection.send(t)}}},{key:"removeState",value:function(e){var t=this,n=("string"===typeof e?[e]:e).filter((function(e){return t._localManager.hasKey(e)}));if(n.length>0&&(this._localManager.remove(n),this._connection.isConnected())){var i={presenceRemoveState:{keys:n}};this._connection.send(i)}}},{key:"clearState",value:function(){if(this._localManager.clear(),this._connection.isConnected()){this._connection.send({presenceClearState:{}})}}},{key:"state",value:function(){return this._localPresence.state}},{key:"presence",value:function(e){return this._connection.session().assertOnline(),Array.isArray(e)?this._get(e.map(ua.toDomainUserId)):this._get([ua.toDomainUserId(e)]).then((function(e){return e[0]}))}},{key:"subscribe",value:function(e){var t=this,n=Array.isArray(e)?e.map(ua.toDomainUserId):[ua.toDomainUserId(e)];return this._subscribe(n).then((function(){var i=n.map((function(e){return t._subscribedManagers.get(e.toGuid()).subscribe()}));return Array.isArray(e)?i:i[0]}))}},{key:"_setInternalState",value:function(e){this._localManager.clear(!1),this._localManager.set(e)}},{key:"_get",value:function(e){var t=this,n={presenceRequest:{users:e.map(Da)}};return this._connection.request(n).then((function(e){return ka(e.presenceResponse.userPresences).map((function(e){return t._mapUserPresence(e)}))}))}},{key:"_streamForUsername",value:function(e){return this._messageStream.pipe(_s((function(t){var n=t.message,i=n.presenceAvailabilityChanged&&n.presenceAvailabilityChanged.user||n.presenceStateSet&&n.presenceStateSet.user||n.presenceStateRemoved&&n.presenceStateRemoved.user||n.presenceStateCleared&&n.presenceStateCleared.user;return i&&Ta(i).equals(e)})))}},{key:"_subscribe",value:function(e){var t=this,n=e.filter((function(e){return void 0===t._subscribedManagers.get(e.toGuid())}));return n.length>0?this._subscribeToServer(n).then((function(e){e.forEach((function(e){var n=e.user.userId.toGuid(),i=t._streamForUsername(e.user.userId),r=new xf(e,i,(function(e){return t._unsubscribe(e)}));t._subscribedManagers.set(n,r)}))})):Promise.resolve()}},{key:"_subscribeToServer",value:function(e){var t=this,n={presenceSubscribeRequest:{users:e.map(Da)}};return this._connection.request(n).then((function(e){return ka(e.presenceSubscribeResponse.userPresences).map((function(e){return t._mapUserPresence(e)}))}))}},{key:"_unsubscribe",value:function(e){if(this._connection.isConnected()){var t={presenceUnsubscribe:{users:[Da(e)]}};this._connection.send(t)}var n=e.toGuid();this._subscribedManagers.delete(n)}},{key:"_mapUserPresence",value:function(e){var t=Ta(e.user),n=this._identityCache.getUser(t);n||(n=new da(t.userType,t.username));var i=_a(e.available),r=ya.objectToMap(js(Ca(e.state),Ma));return new mf(n,i,r)}},{key:"_getManager",value:function(e){return e.equals(this._localManager.user().userId)?this._localManager:this._subscribedManagers.get(e.toGuid())}}]),n}(Xs);kf.Events={STATE_SET:wf.NAME,STATE_REMOVED:bf.NAME,STATE_CLEARED:yf.NAME,AVAILABILITY_CHANGED:vf.NAME},Object.freeze(kf.Events);var Cf=Oi((function e(t,n,i,r){Si(this,e),this.chatId=t,this.eventNumber=n,this.timestamp=i,this.user=r})),Sf=Oi((function e(t){Si(this,e),this.chatId=t,this.name=e.NAME,Object.freeze(this)}));Sf.NAME="joined";var Ef=Oi((function e(t){Si(this,e),this.chatId=t,this.name=e.NAME,Object.freeze(this)}));Ef.NAME="left";var Of=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o)).message=s,a.name=n.NAME,Object.freeze(Ii(a)),a}return Oi(n)}(Cf);Of.NAME="message";var Af=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o)).chatName=s,a.name=n.NAME,Object.freeze(Ii(a)),a}return Oi(n)}(Cf);Af.NAME="name_changed";var Mf=Oi((function e(t){Si(this,e),this.chatId=t,this.name=e.NAME,Object.freeze(this)}));Mf.NAME="removed";var Rf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o)).topic=s,a.name=n.NAME,Object.freeze(Ii(a)),a}return Oi(n)}(Cf);Rf.NAME="topic_changed";var Tf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o)).addedUser=s,a.name=n.NAME,Object.freeze(Ii(a)),a}return Oi(n)}(Cf);Tf.NAME="user_added";var Df=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,e,i,r,o)).name=n.NAME,Object.freeze(Ii(s)),s}return Oi(n)}(Cf);Df.NAME="user_joined";var If=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,e,i,r,o)).name=n.NAME,Object.freeze(Ii(s)),s}return Oi(n)}(Cf);If.NAME="user_left";var Lf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,e,i,r,o)).removedUser=s,a.name=n.NAME,Object.freeze(Ii(a)),a}return Oi(n)}(Cf);Lf.NAME="user_removed";var Nf=Oi((function e(t,n,i){Si(this,e),this.chatId=t,this.maxSeenEventNumber=n,this.user=i,this.name=e.NAME,Object.freeze(this)}));Nf.NAME="events_seen";var Ff=Oi((function e(t,n,i,r,o){Si(this,e),this.type=t,this.chatId=n,this.eventNumber=i,this.timestamp=r,this.user=o}));Ff.TYPES={CREATED:"created",MESSAGE:"message",USER_JOINED:"user_joined",USER_LEFT:"user_left",USER_ADDED:"user_added",USER_REMOVED:"user_removed",NAME_CHANGED:"name_changed",TOPIC_CHANGED:"topic_changed"},Ls.make(Ff.TYPES);var $f=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s,a,l){var c;return Si(this,n),(c=t.call(this,n.TYPE,e,i,r,o)).name=s,c.topic=a,c.members=l,Ls.make(Ii(c)),c}return Oi(n)}(Ff);$f.TYPE=Ff.TYPES.CREATED;var Pf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,n.TYPE,e,i,r,o)).message=s,Ls.make(Ii(a)),a}return Oi(n)}(Ff);Pf.TYPE=Ff.TYPES.MESSAGE;var jf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,n.TYPE,e,i,r,o)).addedUser=s,Ls.make(Ii(a)),a}return Oi(n)}(Ff);jf.TYPE=Ff.TYPES.USER_ADDED;var Bf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,n.TYPE,e,i,r,o)).removedUser=s,Ls.make(Ii(a)),a}return Oi(n)}(Ff);Bf.TYPE=Ff.TYPES.USER_REMOVED;var zf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),s=t.call(this,n.TYPE,e,i,r,o),Ls.make(Ii(s)),s}return Oi(n)}(Ff);zf.TYPE=Ff.TYPES.USER_JOINED;var Uf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),s=t.call(this,n.TYPE,e,i,r,o),Ls.make(Ii(s)),s}return Oi(n)}(Ff);Uf.TYPE=Ff.TYPES.USER_LEFT;var Vf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,n.TYPE,e,i,r,o)).name=s,Ls.make(Ii(a)),a}return Oi(n)}(Ff);Vf.TYPE=Ff.TYPES.NAME_CHANGED;var Wf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o,s){var a;return Si(this,n),(a=t.call(this,n.TYPE,e,i,r,o)).topic=s,Ls.make(Ii(a)),a}return Oi(n)}(Ff);Wf.TYPE=Ff.TYPES.TOPIC_CHANGED;var Hf,qf=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"toChatHistoryEntry",value:function(e,t){if(e.created){var n=e.created,i=n.chatId,r=n.eventNumber,o=n.timestamp,s=n.user,a=n.name,l=n.topic,c=ka(n.members).map((function(e){return t.getUser(Ta(e))}));return new $f(i,wa(r),Oa(o),t.getUser(Ta(s)),a,l,c)}if(e.message){var u=e.message,d=u.chatId,h=u.eventNumber,f=u.timestamp,p=u.user,g=u.message;return new Pf(d,wa(h),Oa(f),t.getUser(Ta(p)),g)}if(e.userAdded){var m=e.userAdded,v=m.chatId,y=m.eventNumber,b=m.timestamp,w=m.user,_=m.addedUser;return new jf(v,wa(y),Oa(b),t.getUser(Ta(w)),t.getUser(Ta(_)))}if(e.userRemoved){var x=e.userRemoved,k=x.chatId,C=x.eventNumber,S=x.timestamp,E=x.user,O=x.removedUser;return new Bf(k,wa(C),Oa(S),t.getUser(Ta(E)),t.getUser(Ta(O)))}if(e.userJoined){var A=e.userJoined,M=A.chatId,R=A.eventNumber,T=A.timestamp,D=A.user;return new zf(M,wa(R),Oa(T),t.getUser(Ta(D)))}if(e.userLeft){var I=e.userLeft,L=I.chatId,N=I.eventNumber,F=I.timestamp,$=I.user;return new Uf(L,wa(N),Oa(F),t.getUser(Ta($)))}if(e.topicChanged){var P=e.topicChanged,j=P.chatId,B=P.eventNumber,z=P.timestamp,U=P.user,V=P.topic;return new Wf(j,wa(B),Oa(z),t.getUser(Ta(U)),xa(V))}if(e.nameChanged){var W=e.nameChanged,H=W.chatId,q=W.eventNumber,G=W.timestamp,K=W.user,Y=W.name;return new Vf(H,wa(q),Oa(G),t.getUser(Ta(K)),xa(Y))}throw new Js("Invalid chat event: "+JSON.stringify(e))}}]),e}();function Gf(e,t,n){var i=-1,r=e.user().userId,o=ka(n.members).map((function(e){var n=Ta(e.user);return n.equals(r)&&(i=wa(e.maxSeenEventNumber)),{user:t.getUser(n),maxSeenEventNumber:wa(e.maxSeenEventNumber)}}));return{chatId:n.id,chatType:n.chatType,membership:n.membership,name:xa(n.name),topic:xa(n.topic),createdTime:Oa(n.createdTime),lastEventTime:Oa(n.lastEventTime),lastEventNumber:wa(n.lastEventNumber),maxSeenEventNumber:i,members:o,joined:void 0!==o.find((function(e){return e.user.userId.equals(r)}))}}!function(e){e.DIRECT="direct",e.CHANNEL="channel",e.ROOM="room"}(Hf||(Hf={}));var Kf=function(e){Mi(n,e);var t=Ni(n);function n(e,i){var r;return Si(this,n),(r=t.call(this,i))._target={chat:{id:e}},r}return Oi(n,[{key:"id",value:function(){return this._target.activity.id}},{key:"_getTarget",value:function(){return this._target}}]),n}(uf),Yf={MESSAGE:Of.NAME,USER_JOINED:Df.NAME,USER_LEFT:If.NAME,USER_ADDED:Tf.NAME,USER_REMOVED:Lf.NAME};Object.freeze(Yf);var Jf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this))._connection=e,s._identityCache=i,s._info=o,r.subscribe((function(e){s._processEvent(e),s._emitEvent(e)})),s}return Oi(n,[{key:"session",value:function(){return this._connection.session()}},{key:"info",value:function(){return Object.assign({},this._info)}},{key:"isJoined",value:function(){return this._info.joined}},{key:"send",value:function(e){return this._connection.session().assertOnline(),this._assertJoined(),this._connection.request({publishChatMessageRequest:{chatId:this._info.chatId,message:e}}).then((function(e){var t=e.publishChatMessageResponse;return{eventNumber:wa(t.eventNumber),timestamp:Oa(t.timestamp)}}))}},{key:"setName",value:function(e){return this._connection.session().assertOnline(),this._assertJoined(),this._connection.request({setChatNameRequest:{chatId:this._info.chatId,name:e}}).then((function(){}))}},{key:"setTopic",value:function(e){return this._connection.session().assertOnline(),this._assertJoined(),this._connection.request({setChatTopicRequest:{chatId:this._info.chatId,topic:e}}).then((function(){}))}},{key:"markSeen",value:function(e){return this._connection.session().assertOnline(),this._assertJoined(),this._connection.request({markChatEventsSeenRequest:{chatId:this._info.chatId,eventNumber:e}}).then((function(){}))}},{key:"getHistory",value:function(e){var t=this;return this._connection.session().assertOnline(),this._assertJoined(),this._connection.request({getChatHistoryRequest:{chatId:this._info.chatId,startEvent:Sa(e.startEvent),limit:Sa(e.limit),forward:Sa(e.forward),eventFilter:e.eventFilter}}).then((function(e){var n=e.getChatHistoryResponse,i=ka(n.data).map((function(e){return qf.toChatHistoryEntry(e,t._identityCache)}));return new Zs(i,wa(n.startIndex),wa(n.totalResults))}))}},{key:"permissions",value:function(){return new Kf(this._info.chatId,this._connection)}},{key:"_updateWithData",value:function(e){this._info=Gf(this._connection.session(),this._identityCache,e)}},{key:"_join",value:function(){var e=this;return this._connection.request({joinChatRequest:{chatId:this._info.chatId}}).then((function(t){var n=t.joinChatResponse;e._updateWithData(n.chatInfo)}))}},{key:"_assertJoined",value:function(){if(!this.isJoined()){var e="Chat channel not joined: ".concat(this._info.chatId);throw new Js(e,ca.CHAT_NOT_JOINED)}}},{key:"_processEvent",value:function(e){if(e instanceof Cf&&(this._info=Object.assign(Object.assign({},this._info),{lastEventNumber:e.eventNumber,lastEventTime:e.timestamp})),e instanceof Df||e instanceof Tf){var t=e instanceof Df?e.user:e.addedUser,n=this._info.members.slice(0),i={user:t,maxSeenEventNumber:-1};n.push(i),e.user.username===this.session().user().username&&(this._info=Object.assign(Object.assign({},this._info),{joined:!0})),this._info=Object.assign(Object.assign({},this._info),{members:n})}else if(e instanceof If||e instanceof Lf){var r=e instanceof If?e.user:e.removedUser;this.session().user().userId.equals(r.userId)&&(this._info=Object.assign(Object.assign({},this._info),{joined:!1}));var o=this._info.members.filter((function(e){return!e.user.userId.equals(r.userId)}));this._info=Object.assign(Object.assign({},this._info),{members:o})}else if(e instanceof Af)this._info=Object.assign(Object.assign({},this._info),{name:e.chatName});else if(e instanceof Rf)this._info=Object.assign(Object.assign({},this._info),{topic:e.topic});else if(e instanceof Nf){var s=this._info.members.slice(0),a=s.findIndex((function(t){return t.user.userId.equals(e.user.userId)}));if(a>=0){var l=s[a];if(l){var c=Object.assign(Object.assign({},l),{eventNumber:e.maxSeenEventNumber});s[a]=c,this._info=Object.assign(Object.assign({},this._info),{members:s}),this.session().user().userId.equals(l.user.userId)&&(this._info=Object.assign(Object.assign({},this._info),{maxSeenEventNumber:e.maxSeenEventNumber}))}}}Ls.make(this._info)}}]),n}(Xs);Jf.Events=Yf;var Xf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){return Si(this,n),t.call(this,e,i,r,o)}return Oi(n,[{key:"info",value:function(){var e=Mr(Ri(n.prototype),"info",this).call(this),t=this.session().user().userId,i=e.members.filter((function(e){return!e.user.userId.equals(t)}));return Object.assign(Object.assign({},e),{otherUsers:i})}}]),n}(Jf),Qf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){return Si(this,n),t.call(this,e,i,r,o)}return Oi(n,[{key:"info",value:function(){return Mr(Ri(n.prototype),"info",this).call(this)}},{key:"leave",value:function(){return this._connection.session().assertOnline(),this._assertJoined(),this._connection.request({leaveChatRequest:{chatId:this._info.chatId}}).then((function(){}))}},{key:"remove",value:function(e){return this._connection.session().assertOnline(),this._assertJoined(),this._connection.request({removeUserFromChatRequest:{chatId:this._info.chatId,userToRemove:Da(ua.toDomainUserId(e))}}).then((function(){}))}}]),n}(Jf),Zf=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){return Si(this,n),t.call(this,e,i,r,o)}return Oi(n,[{key:"add",value:function(e){return this._connection.session().assertOnline(),this._assertJoined(),this._connection.request({addUserToChatRequest:{chatId:this._info.chatId,userToAdd:Da(ua.toDomainUserId(e))}}).then((function(){}))}}]),n}(Qf),ep=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r,o){var s;return Si(this,n),(s=t.call(this,e,i,r,o))._setOnline=function(){s._join().catch((function(e){return console.log(e)}))},s._setOffline=function(){s._info=Object.assign(Object.assign({},s._info),{joined:!1})},e.on(Ua.Events.INTERRUPTED,s._setOffline),e.on(Ua.Events.DISCONNECTED,s._setOffline),e.on(Ua.Events.CONNECTED,s._setOnline),s}return Oi(n)}(Qf),tp={MESSAGE:Of.NAME,USER_JOINED:Df.NAME,USER_LEFT:If.NAME,USER_ADDED:Tf.NAME,USER_REMOVED:Lf.NAME,CHANNEL_JOINED:Sf.NAME,CHANNEL_LEFT:Ef.NAME};Object.freeze(tp);var np=function(e){Mi(n,e);var t=Ni(n);function n(e,i){var r;return Si(this,n),(r=t.call(this))._connection=e,r._identityCache=i,r._messageStream=r._connection.messages().pipe(_s((function(e){return function(e){return!!e.remoteChatMessage||!!e.userJoinedChat||!!e.userLeftChat||!!e.userAddedToChat||!!e.userRemovedFromChat||!!e.chatRemoved||!!e.chatNameChanged||!!e.chatTopicChanged||!!e.chatEventsMarkedSeen}(e.message)})),Cs((function(e){return function(e,t){if(e.userJoinedChat){var n=e.userJoinedChat;return new Df(n.chatId,wa(n.eventNumber),Oa(n.timestamp),t.getUser(Ta(n.user)))}if(e.userLeftChat){var i=e.userLeftChat;return new If(i.chatId,wa(i.eventNumber),Oa(i.timestamp),t.getUser(Ta(i.user)))}if(e.userAddedToChat){var r=e.userAddedToChat;return new Tf(r.chatId,wa(r.eventNumber),Oa(r.timestamp),t.getUser(Ta(r.user)),t.getUser(Ta(r.addedUser)))}if(e.userRemovedFromChat){var o=e.userRemovedFromChat;return new Lf(o.chatId,wa(o.eventNumber),Oa(o.timestamp),t.getUser(Ta(o.user)),t.getUser(Ta(o.removedUser)))}if(e.chatRemoved){var s=e.chatRemoved;return new Mf(s.chatId)}if(e.chatNameChanged){var a=e.chatNameChanged;return new Af(a.chatId,wa(a.eventNumber),Oa(a.timestamp),t.getUser(Ta(a.user)),xa(a.name))}if(e.chatTopicChanged){var l=e.chatTopicChanged;return new Rf(l.chatId,wa(l.eventNumber),Oa(l.timestamp),t.getUser(Ta(l.user)),xa(l.topic))}if(e.remoteChatMessage){var c=e.remoteChatMessage;return new Of(c.chatId,wa(c.eventNumber),Oa(c.timestamp),t.getUser(Ta(c.user)),xa(c.message))}if(e.chatEventsMarkedSeen){var u=e.chatEventsMarkedSeen;return new Nf(u.chatId,wa(u.eventNumber),t.getUser(Ta(u.user)))}throw new Js("Invalid chat event")}(e.message,r._identityCache)})),As((function(e){if(e instanceof Df&&e.user.username===r.session().user().username){var t=new Sf(e.chatId);r._emitEvent(t)}else if(e instanceof If&&e.user.username===r.session().user().username){var n=new Ef(e.chatId);r._emitEvent(n)}})),ws()),r._emitFrom(r._messageStream),r}return Oi(n,[{key:"session",value:function(){return this._connection.session()}},{key:"search",value:function(e){var t=this;return this.session().assertOnline(),this._connection.request({chatsSearchRequest:{searchTerm:e.searchTerm,searchFields:e.searchFields,types:e.types,membership:e.membership,limit:Ra(e.limit),offset:Ra(e.offset)}}).then((function(e){var n=e.chatsSearchResponse,i=ka(n.data).map((function(e){return Gf(t._connection.session(),t._identityCache,e)}));return new Zs(i,wa(n.startIndex),wa(n.totalResults))}))}},{key:"exists",value:function(e){var t=n._toChatIdsArray(e);return this.session().assertOnline(),this._connection.request({chatsExistRequest:{chatIds:t}}).then((function(t){var n=ka(t.chatsExistResponse.exists);return Fs.isString(e)?_a(n[0]):Fs.isArray(e)?new Map(e.map((function(e,t){return[e,_a(n[t])]}))):void 0}))}},{key:"get",value:function(e){var t=this,i=n._toChatIdsArray(e);return this.session().assertOnline(),this._connection.request({getChatsRequest:{chatIds:i}}).then((function(n){var i=ka(n.getChatsResponse.chatInfo).map((function(e){var n=Gf(t._connection.session(),t._identityCache,e);return t._createChat(n)}));return Fs.isString(e)?i[0]:Fs.isArray(e)?new Map(i.map((function(e){return[e.info().chatId,e]}))):void 0}))}},{key:"joined",value:function(){var e=this;return this.session().isConnected()?this._connection.request({getJoinedChatsRequest:{}}).then((function(t){return ka(t.getJoinedChatsResponse.chatInfo).map((function(t){return Gf(e._connection.session(),e._identityCache,t)}))})):Promise.resolve([])}},{key:"create",value:function(e){if(!e)throw new Error("create options must be supplied");if("channel"!==e.type&&"room"!==e.type)throw new Error("type must be 'channel' or 'room': ".concat(e.type));if("public"!==e.membership&&"private"!==e.membership)throw new Error("membership must be 'public' or 'private': ".concat(e.membership));if("room"===e.type&&"private"===e.membership)throw new Error("membership must be 'public' for a 'room': ".concat(e.membership));void 0!==e.id&&Us.assertNonEmptyString(e.id,"id"),this.session().assertOnline();var t=e.id,n=e.type,i=e.name,r=e.topic,o=e.membership,s=(e.members||[]).map((function(e){return Da(e instanceof ua?e:ua.normal(e))}));return this._connection.request({createChatRequest:{chatId:Sa(t),chatType:n,membership:o,name:i,topic:r,members:s}}).then((function(e){return e.createChatResponse.chatId})).catch((function(n){return n instanceof Qs&&"chat_already_exists"===n.code&&e.ignoreExistsError?Promise.resolve(t):Promise.reject(n)}))}},{key:"remove",value:function(e){return Us.assertNonEmptyString(e,"chatId"),this.session().assertOnline(),this._connection.request({removeChatRequest:{chatId:e}}).then((function(){}))}},{key:"join",value:function(e){var t=this;return Us.assertNonEmptyString(e,"chatId"),this.session().assertOnline(),this._connection.request({joinChatRequest:{chatId:e}}).then((function(e){var n=e.joinChatResponse,i=Gf(t._connection.session(),t._identityCache,n.chatInfo);return t._createChat(i)}))}},{key:"leave",value:function(e){return Us.assertNonEmptyString(e,"chatId"),this.session().assertOnline(),this._connection.request({leaveChatRequest:{chatId:e}}).then((function(){}))}},{key:"direct",value:function(e){var t=this;this.session().assertOnline();var n=this.processDirectChatArgs(e),i=n.directIds,r=n.single,o=i.map((function(e){return{values:e.map((function(e){return Da(e instanceof ua?e:ua.normal(e))}))}}));return this._connection.request({getDirectChatsRequest:{userLists:o}}).then((function(e){var n=ka(e.getDirectChatsResponse.chatInfo).map((function(e){var n=Gf(t._connection.session(),t._identityCache,e);return t._createChat(n)}));return r?n[0]:n}))}},{key:"permissions",value:function(e){return new Kf(e,this._connection)}},{key:"processDirectChatArgs",value:function(e){var t,n=!0;if("string"===typeof e||e instanceof ua)t=[[e]];else{if(!Array.isArray(e))throw new Js("users must be a string, DomainUserId, or an Array");if(0===e.length)throw new Js("users can not be an empty array");var i=Array.isArray(e[0]);if(i!==e.every((function(e){return Array.isArray(e)})))throw new Js("When passing an array, all elements must be single usernames / DomainUserIds or they must all be arrays.");i?(t=e,n=!1):t=[e]}return{directIds:t,single:n}}},{key:"_createChat",value:function(e){var t=this._messageStream.pipe(_s((function(t){return t.chatId===e.chatId})));switch(e.chatType){case Hf.DIRECT:return new Xf(this._connection,this._identityCache,t,e);case Hf.CHANNEL:return new Zf(this._connection,this._identityCache,t,e);case Hf.ROOM:return new ep(this._connection,this._identityCache,t,e);default:throw new Error("Invalid chat chat type: ".concat(e.chatType))}}}],[{key:"_toChatIdsArray",value:function(e){if(Fs.isString(e))return[e];if(Fs.isArray(e))return e;throw new Js("chatIds must be a string or string array: "+e)}}]),n}(Xs);np.Events=tp;var ip=function(){function e(t,n){var i=this;Si(this,e),this._users=new Map,this._sessions=new Map,t.messages().subscribe((function(e){e.message.identityCacheUpdate&&i._processIdentityUpdate(e.message.identityCacheUpdate)})),this._storage=n,this._log=Ks.logger("identity")}return Oi(e,[{key:"init",value:function(){return Is(this,void 0,void 0,jo().mark((function e(){var t=this;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._storage.isEnabled()){e.next=9;break}return e.next=3,this._storage.identityStore().getUsers();case 3:return e.sent.forEach((function(e){t._users.set(e.userId.toGuid(),e)})),e.next=7,this._storage.identityStore().getSessions();case 7:e.sent.forEach((function(e,n){var i=t._users.get(e.toGuid());t._sessions.set(n,i)}));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"getUserForSession",value:function(e){return this._sessions.get(e)}},{key:"getUser",value:function(e){return this._users.get(e.toGuid())}},{key:"_processIdentityUpdate",value:function(e){var t=this;ka(e.users).forEach((function(e){var n=pa(e);t._users.set(n.userId.toGuid(),n),t._storage.isEnabled()&&t._storage.identityStore().putUser(n).catch((function(e){return t._log.error("Error storing user",e)}))})),Bs(Ca(e.sessions),(function(e,n){var i=Ia(n.userType),r=xa(n.username),o=t._users.get(ua.guid(i,r));t._sessions.set(e,o),t._storage.isEnabled()&&t._storage.identityStore().putSession(e,o.userId).catch((function(e){return t._log.error("Error storing session",e)}))}))}}]),e}(),rp=function(){function e(t){Si(this,e),e.validate(t);var n={timeout:e.DEFAULT_CONNECTION_TIMEOUT,connectionRequestTimeout:e.DEFAULT_CONNECTION_REQUEST_TIMEOUT},i=Object.assign(Object.assign({},n),t.connection),r=i.timeout,o=i.connectionRequestTimeout;this.connectionTimeout=r,this.connectionRequestTimeout=o;var s={autoReconnect:e.DEFAULT_AUTO_RECONNECT,autoReconnectOnInitial:e.DEFAULT_AUTO_RECONNECT_ON_INITIAL,reconnectIntervals:e.DEFAULT_RECONNECT_INTERVALS,fallbackAuth:{jwt:null,password:null,anonymous:null}},a=Object.assign(Object.assign({},s),t.reconnect),l=a.autoReconnect,c=a.autoReconnectOnInitial,u=a.reconnectIntervals,d=a.fallbackAuth;this.autoReconnect=l,this.autoReconnectOnInitial=c,this.reconnectIntervals=u,this.fallbackAuth=null,Fs.isFunction(d)&&(this.fallbackAuth=d);var h={defaultRequestTimeout:e.DEFAULT_REQUEST_TIMEOUT,heartbeat:{enabled:e.DEFAULT_HEARTBEAT_ENABLED,pingInterval:e.DEFAULT_PING_INTERVAL,pongTimeout:e.DEFAULT_PONG_TIMEOUT}},f=Object.assign(Object.assign({},h),t.protocol),p=f.defaultRequestTimeout,g=f.heartbeat;this.defaultRequestTimeout=p,this.heartbeatEnabled=void 0!==g.enabled?g.enabled:e.DEFAULT_HEARTBEAT_ENABLED,this.pingInterval=void 0!==g.pingInterval?g.pingInterval:e.DEFAULT_PING_INTERVAL,this.pongTimeout=void 0!==g.pongTimeout?g.pongTimeout:e.DEFAULT_PONG_TIMEOUT;var m={factory:e.DEFAULT_WEBSOCKET_FACTORY,constructor:e.DEFAULT_WEBSOCKET_CONSTRUCTOR},v=Object.assign(Object.assign({},m),t.webSocket);this.webSocketFactory=v.factory||null,this.webSocketClass=v.class||null;var y=Object.assign({},t.offline);this.storageAdapter=y.storage||null,this.offlineStorageEnabled=null!==this.storageAdapter,this.offlineModelOperationSnapshotInterval=y.modelSnapshotInterval||100;var b=(t.models||{}).data,w=Object.assign(Object.assign({},e.DEFAULT_MODEL_DATA_OPTIONS),b);this.modelDataUndefinedObjectValues=w.undefinedObjectValues,this.modelDataUndefinedArrayValues=w.undefinedArrayValues}return Oi(e,[{key:"getOptions",value:function(){return{connection:{timeout:this.connectionTimeout,connectionRequestTimeout:this.connectionRequestTimeout},protocol:{defaultRequestTimeout:this.defaultRequestTimeout,heartbeat:{enabled:this.heartbeatEnabled,pingInterval:this.pingInterval,pongTimeout:this.pongTimeout}},reconnect:{autoReconnect:this.autoReconnect,autoReconnectOnInitial:this.autoReconnectOnInitial,reconnectIntervals:this.reconnectIntervals,fallbackAuth:this.fallbackAuth},offline:{storage:this.storageAdapter},webSocket:{factory:this.webSocketFactory,class:this.webSocketClass}}}}],[{key:"validate",value:function(e){var t=!1;try{t=2===WebSocket.CLOSING}catch(Lp){}if(!t&&(!e.webSocket||!e.webSocket.class)){throw new Js("Convergence depends on the WebSockets API. If Convergence is not being run in a browser, you must set the 'webSocket.class' property in the connection options.","websockets_not_supported")}}}]),e}();rp.DEFAULT_CONNECTION_TIMEOUT=5,rp.DEFAULT_CONNECTION_REQUEST_TIMEOUT=10,rp.DEFAULT_AUTO_RECONNECT=!0,rp.DEFAULT_AUTO_RECONNECT_ON_INITIAL=!0,rp.DEFAULT_RECONNECT_INTERVALS=[0,5,10,20,30],rp.DEFAULT_REQUEST_TIMEOUT=10,rp.DEFAULT_HEARTBEAT_ENABLED=!0,rp.DEFAULT_PING_INTERVAL=5,rp.DEFAULT_PONG_TIMEOUT=10,rp.DEFAULT_WEBSOCKET_FACTORY=null,rp.DEFAULT_WEBSOCKET_CONSTRUCTOR=null,rp.DEFAULT_MODEL_DATA_OPTIONS={undefinedObjectValues:"error",undefinedArrayValues:"error"};var op=function(){function e(){Si(this,e),this._log=Ks.logger("storage"),this._storage=null}return Oi(e,[{key:"configure",value:function(e){if(this._log.debug("Initializing storage engine: "+e.adapterId()),!e)throw new Error("storage must be specified");this._storage=e}},{key:"openStore",value:function(e,t,n){return this._storage.initialize(e,t,n)}},{key:"isEnabled",value:function(){return null!==this._storage}},{key:"isInitialized",value:function(){return null!==this._storage&&this._storage.isInitialized()}},{key:"dispose",value:function(){if(!this.isInitialized())throw new Error("Can not disposed a storage adapter that is not initialized");if(this.isDisposed())throw new Error("Already disposed");this._storage.dispose()}},{key:"isDisposed",value:function(){return null!==this._storage&&this._storage.isDisposed()}},{key:"modelStore",value:function(){return this._storage.modelStore()}},{key:"identityStore",value:function(){return this._storage.identityStore()}}]),e}(),sp=function(e){Mi(n,e);var t=Ni(n);function n(e,i,r){var o;return Si(this,n),(o=t.call(this))._log=Ks.logger("models.offline"),o._modelCommitted=function(e){o._onCommitStateChanged(e.src)},o._modelModified=function(e){o._onCommitStateChanged(e.src)},o._connection=e,o._storage=r,o._offlineModels=new Map,o._openModels=new Map,o._ready=new qd,o._snapshotInterval=i,o._online=!1,o._downloadInProgress=!1,o._modelsToDownload=0,o._connection.messages().subscribe((function(e){var t=e.message;t.modelOfflineUpdated&&o._handleModelOfflineUpdated(t.modelOfflineUpdated)})),o}return Oi(n,[{key:"init",value:function(){return Is(this,void 0,void 0,jo().mark((function e(){return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._log.debug("Initializing offline model manager"),e.prev=1,e.next=4,this._initOfflineModels();case 4:this._checkAndUpdateModelDownloadStatus(!1),this._ready.resolve(),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),this._ready.reject(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[1,8]])})))}},{key:"isOfflineEnabled",value:function(){return this._storage.isEnabled()}},{key:"ready",value:function(){return this._ready.promise()}},{key:"setOnline",value:function(){return this._online=!0,this._resubscribe()}},{key:"setOffline",value:function(){this._online=!1,this._downloadInProgress&&this._handleDownloadStopped()}},{key:"modelOpened",value:function(e,t){var n={model:e,opsSinceSnapshot:t};this._openModels.set(e.modelId(),n),this._offlineModels.has(e.modelId())||(this._offlineModels.set(e.modelId(),{subscribed:!1,available:!0,deleted:!1,uncommited:!e.isCommitted(),created:e.isLocal(),version:e.version(),permissions:e.permissions()}),this._emitOfflineStatusChanged(e.modelId())),e.on(nh.Events.MODIFIED,this._modelModified),e.on(nh.Events.COMMITTED,this._modelCommitted)}},{key:"modelClosed",value:function(e){var t=this;this._openModels.delete(e.modelId()),this._deleteIfNotNeeded(e.modelId()).catch((function(e){return t._log.error("Error cleaning up model after close",e)})),e.off(nh.Events.MODIFIED,this._modelModified),e.off(nh.Events.COMMITTED,this._modelCommitted)}},{key:"isModelSubscribed",value:function(e){return this._offlineModels.has(e)&&this._offlineModels.get(e).subscribed}},{key:"getSubscribedModelIds",value:function(){return new Set(this._offlineModels.keys())}},{key:"getModelsRequiringSync",value:function(){return this._storage.modelStore().getModelsRequiringSync()}},{key:"subscribe",value:function(e){var t=this,n=e.filter((function(e){return!t.isModelSubscribed(e)}));return this._updateSubscriptions(n,[],!1)}},{key:"unsubscribe",value:function(e){return Is(this,void 0,void 0,jo().mark((function t(){var n,i,r=this;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],i=e.filter((function(e){return r.isModelSubscribed(e)})),t.abrupt("return",this._updateSubscriptions(n,i,!1));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"setSubscriptions",value:function(e){var t=this,n=e.filter((function(e){return t.isModelSubscribed(e)})),i=Array.from(this._getSubscribedModelIds()).filter((function(t){return!e.includes(t)}));return this._updateSubscriptions(n,i,!0)}},{key:"getModelCreationData",value:function(e){return this._storage.modelStore().getModelCreationData(e)}},{key:"modelCreated",value:function(e){var t=this;return this._storage.modelStore().completeModelCreation(e).then((function(){var n=t._offlineModels.get(e);return n&&(n.created=!1),t._deleteIfNotNeeded(e)}))}},{key:"createOfflineModel",value:function(e){var t=this;return this._storage.modelStore().initiateModelCreation(e).then((function(n){t._offlineModels.set(e.modelId,{subscribed:!1,available:!0,uncommited:!1,deleted:n.deleted,created:!0,version:0}),t._emitOfflineStatusChanged(e.modelId)}))}},{key:"getOfflineModelState",value:function(e){return this._storage.modelStore().getModelState(e)}},{key:"claimValueIdPrefix",value:function(e){return this._storage.modelStore().claimValueIdPrefix(e)}},{key:"getModelMetaData",value:function(e){return this._storage.modelStore().getModelMetaData(e)}},{key:"getAllModelMetaData",value:function(){return this._storage.modelStore().getAllModelMetaData()}},{key:"processLocalOperation",value:function(e,t){var i=this,r=n._mapClientOperationEvent(e,t),o=this._offlineModels.get(e);return o&&(o.uncommited=!0),this._storage.modelStore().processLocalOperation(r).then((function(){return i._handleOperation(e)}))}},{key:"processOperationAck",value:function(e,t,n){var i=this._offlineModels.get(e),r=this._openModels.get(e);return i&&r&&(i.uncommited=!r.model.isCommitted()),this._storage.modelStore().processOperationAck(e,t,n)}},{key:"processServerOperationEvent",value:function(e,t,i){var r=this,o=Wd(t.operation),s={modelId:e,sessionId:t.clientId,version:t.version,timestamp:t.timestamp,operation:o},a=i.map((function(t){return n._mapClientOperationEvent(e,t)}));return this._storage.modelStore().processServerOperation(s,a).then((function(){return r._handleOperation(e)}))}},{key:"markModelForDeletion",value:function(e){var t=this;return this._storage.modelStore().initiateModelDeletion(e).then((function(){return t._deleteIfNotNeeded(e)}))}},{key:"modelDeleted",value:function(e){var t=this;return this._storage.modelStore().completeModelDeletion(e).then((function(){return t._deleteIfNotNeeded(e)}))}},{key:"storeOpenModelOffline",value:function(e){var t=this._getSnapshot(e),n=e.version(),i={modelId:e.modelId(),collection:e.collectionId(),valueIdPrefix:{prefix:e._valueIdPrefix(),increment:0},version:n,lastSequenceNumber:t.sequenceNumber,createdTime:e.createdTime(),modifiedTime:e.time(),local:e.isLocal(),permissions:e.permissions(),snapshot:t};return this._storage.modelStore().setModelState(i)}},{key:"_resubscribe",value:function(){this._checkAndUpdateModelDownloadStatus(!1);var e=[];return this._offlineModels.forEach((function(t,n){e.push({modelId:n,currentPermissions:t.permissions?t.permissions.toJSON():void 0,currentVersion:t.version?t.version:0})})),this._sendSubscriptionRequest(e,[],!0)}},{key:"_initOfflineModels",value:function(){return Is(this,void 0,void 0,jo().mark((function e(){var t,n,i,r,o;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._storage.modelStore().getAllModelMetaData();case 2:t=e.sent,n=No(t),e.prev=4,n.s();case 6:if((i=n.n()).done){e.next=14;break}return r=i.value,o={version:r.details?r.details.version:0,permissions:r.details?Od.fromJSON(r.details.permissions):void 0,available:r.available,subscribed:r.subscribed,created:r.created,deleted:r.deleted,uncommited:r.uncommitted},this._offlineModels.set(r.modelId,o),e.next=12,this._deleteIfNotNeeded(r.modelId);case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})))}},{key:"_updateSubscriptions",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Is(this,void 0,void 0,jo().mark((function r(){var o,s,a,l,c,u=this;return jo().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n||0===t.length){r.next=2;break}return r.abrupt("return",Promise.reject(new Js("Unsubscribe must be empty when setting all subscriptions")));case 2:return e.forEach((function(e){return u._setModeSubscribed(e)})),e.forEach((function(e){return u._emitOfflineStatusChanged(e)})),t.forEach((function(e){return u._setModelUnsubscribed(e)})),(o=t.filter((function(e){return u._canBeDeleted(e)}))).forEach((function(e){return u._offlineModels.delete(e)})),t.forEach((function(e){return u._emitOfflineStatusChanged(e)})),this._checkAndUpdateModelDownloadStatus(!1),n?(s=[],this._offlineModels.forEach((function(e,t){e.subscribed&&s.push(t)})),a=[]):(s=e,a=t),l=s.map((function(e){if(u._openModels.has(e)){var t=u._openModels.get(e);return{modelId:e,version:t.model.version(),permissions:t.model.permissions().toJSON()}}return{modelId:e,version:0}})),c=this._storage.modelStore(),r.next=14,c.updateSubscriptions(e,t);case 14:return r.next=16,c.deleteModels(o);case 16:if(i){r.next=18;break}return r.abrupt("return",this._sendSubscriptionRequest(l,a,n));case 18:case"end":return r.stop()}}),r,this)})))}},{key:"_setModeSubscribed",value:function(e){var t=this._offlineModels.get(e);if(t)t.subscribed=!0;else{this._offlineModels.set(e,{version:0,subscribed:!0,available:!1,created:!1,deleted:!1,uncommited:!1})}}},{key:"_setModelUnsubscribed",value:function(e){var t=this._offlineModels.get(e);t&&(t.subscribed=!1)}},{key:"_canBeDeleted",value:function(e){var t=this._offlineModels.get(e);return void 0!==t&&!t.subscribed&&!t.created&&!t.uncommited&&!t.deleted&&!this._openModels.has(e)}},{key:"_sendSubscriptionRequest",value:function(e,t,n){var i=n||e.length>0||t.length>0;if(this._online&&i){var r={modelOfflineSubscriptionChange:{subscribe:e,unsubscribe:t,all:n}};return this._connection.request(r).then((function(){}))}return Promise.resolve()}},{key:"_handleModelOfflineUpdated",value:function(e){var t=xa(e.modelId);this._openModels.has(t)||(_a(e.deleted)?this._handleOfflineModelDeleted(t):_a(e.permissionRevoked)?this._handleOfflineModelPermissionRevoked(t):e.initial?this._handleOfflineModelInitialDownload(t,e):e.updated&&this._handleOfflineModelUpdated(t,e))}},{key:"_handleOfflineModelUpdated",value:function(e,t){var n=this;if(this.isModelSubscribed(e)){var i=t.updated,r=i.model,o=i.permissions,s=r?{version:wa(r.version),createdTime:Oa(r.createdTime),modifiedTime:Oa(r.modifiedTime),data:Dd(r.data)}:void 0,a=Id(o),l={modelId:e,dataUpdate:s,permissionsUpdate:a};this._storage.modelStore().processOfflineModelUpdate(l).catch((function(e){n._emitErrorEvent("Could not update offline model after download.",e)})).then((function(){var t=n._offlineModels.get(e);if(t&&t.available){s&&n._offlineModels.set(e,{version:wa(r.version),permissions:a,available:!0,subscribed:!0,created:!1,uncommited:!1,deleted:!1});var i=a?Od.fromJSON(a):null,o=s?s.version:null;n._emitEvent(new qc(e,o,i))}}))}}},{key:"_handleOfflineModelInitialDownload",value:function(e,t){var n=this;if(this.isModelSubscribed(e)){var i=t.initial,r=i.collection,o=i.model,s=i.permissions,a=i.valueIdPrefix,l=Id(s),c=wa(o.version),u={modelId:e,collection:r,valueIdPrefix:{prefix:a,increment:0},version:c,lastSequenceNumber:0,createdTime:Oa(o.createdTime),modifiedTime:Oa(o.modifiedTime),local:!1,permissions:l,snapshot:{version:wa(o.version),sequenceNumber:0,data:Dd(o.data),serverOperations:[],localOperations:[]}};this._storage.modelStore().setModelState(u).catch((function(e){return n._emitErrorEvent("Could not store offline model after download.",e)})).then((function(){n._offlineModels.set(e,{version:c,permissions:l,available:!0,subscribed:!0,uncommited:!1,created:!1,deleted:!1}),n._emitEvent(new Hc(e,c,l)),n._emitOfflineStatusChanged(e),n._checkAndUpdateModelDownloadStatus(!0)}))}}},{key:"_handleOfflineModelPermissionRevoked",value:function(e){var t=this;this._updateSubscriptions([],[e],!1,!0).then((function(){return t._deleteIfNotNeeded(e)})).then((function(){var n=new Yc(e);t._emitEvent(n),t._emitOfflineStatusChanged(e),t._checkAndUpdateModelDownloadStatus(!1)})).catch((function(e){return t._emitErrorEvent("Could not delete offline model after permissions revoked.",e)}))}},{key:"_handleOfflineModelDeleted",value:function(e){var t=this;this._updateSubscriptions([],[e],!1,!0).then((function(){return t._deleteIfNotNeeded(e)})).then((function(){var n=new Kc(e);t._emitEvent(n),t._emitOfflineStatusChanged(e),t._checkAndUpdateModelDownloadStatus(!1)})).catch((function(e){return t._emitErrorEvent("Could not delete offline model after permissions revoked.",e)}))}},{key:"_emitOfflineStatusChanged",value:function(e){var t=this._offlineModels.get(e),n=t?new Gc(e,t.subscribed,t.available,!t.uncommited,t.created):new Gc(e,!1,!1,!1,!1);this._emitEvent(n)}},{key:"_handleOperation",value:function(e){return Is(this,void 0,void 0,jo().mark((function t(){var n,i,r,o,s=this;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._openModels.has(e)){t.next=8;break}if(n=this._openModels.get(e),i=n.model,r=n.opsSinceSnapshot,!(++r>=this._snapshotInterval)){t.next=7;break}return o=this._getSnapshot(i),t.next=7,this._storage.modelStore().snapshotModel(e,o.version,o.sequenceNumber,o.data).then((function(){r=0})).catch((function(e){return s._log.error("Error snapshotting model",e)}));case 7:this._openModels.set(e,{model:i,opsSinceSnapshot:r});case 8:case"end":return t.stop()}}),t,this)})))}},{key:"_getSnapshot",value:function(e){var t=e._getConcurrencyControlStateSnapshot(),i=t.uncommittedOperations.map((function(t){return n._mapClientOperationEvent(e.modelId(),t)}));return{version:e.version(),sequenceNumber:t.lastSequenceNumber,data:t.data,localOperations:i,serverOperations:[]}}},{key:"_checkAndUpdateModelDownloadStatus",value:function(e){var t=this._howManyModelsToDownload(),n=t>0;this._modelsToDownload!==t&&this._handleDownloadStatusChanged(e,t),this._online&&(this._downloadInProgress&&!n?this._handleDownloadStopped():!this._downloadInProgress&&n&&this._handleDownloadStarted(t))}},{key:"_handleDownloadStarted",value:function(e){this._downloadInProgress=!0,this._emitEvent(new Nc(e))}},{key:"_handleDownloadStopped",value:function(){this._downloadInProgress=!1,this._emitEvent(new $c)}},{key:"_handleDownloadStatusChanged",value:function(e,t){var n=e?"download":"subscription_changed";this._emitEvent(new Fc(t,n)),this._modelsToDownload=t}},{key:"_howManyModelsToDownload",value:function(){var e=0;return this._offlineModels.forEach((function(t){t.available||e++})),e}},{key:"_getSubscribedModelIds",value:function(){var e=new Set;return this._offlineModels.forEach((function(t,n){t.subscribed&&e.add(n)})),e}},{key:"_deleteIfNotNeeded",value:function(e){return Is(this,void 0,void 0,jo().mark((function t(){return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._canBeDeleted(e)){t.next=5;break}return t.next=3,this._storage.modelStore().deleteModels([e]);case 3:this._offlineModels.delete(e),this._emitOfflineStatusChanged(e);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"_onCommitStateChanged",value:function(e){if(!e.isLocal()){var t=this._offlineModels.get(e.modelId());t?(t.uncommited=!e.isCommitted(),this._emitOfflineStatusChanged(e.modelId())):this._log.warn("Offline entry not found for open model (".concat(e.modelId(),") handling commit state changed"))}}},{key:"_emitErrorEvent",value:function(e,t){this._emitEvent(new eh(this._connection.session().domain(),e,t))}}],[{key:"_mapClientOperationEvent",value:function(e,t){var n=Wd(t.operation);return{sessionId:t.sessionId,modelId:e,sequenceNumber:t.seqNo,contextVersion:t.contextVersion,timestamp:t.timestamp,operation:n}}}]),n}(Xs),ap=function(e){Mi(n,e);var t=Ni(n);function n(e,i){var r;Si(this,n),(r=t.call(this))._log=Ks.logger("domain"),Us.assertString(e,"url");var o=/^(https?|wss?):\/{2}(.+)\/(.+)\/(.+)/.exec(e.trim());if(!o||5!==o.length)throw new Error("Invalid url: ".concat(e));return r._namespace=o[3],r._domainId=o[4],r._options=new rp(i||{}),r._disposed=!1,r._initialized=!1,r._connection=new Ua(e,Ii(r),r._options),r._storage=new op,r._identityCache=new ip(r._connection,r._storage),r._modelOfflineManager=new sp(r._connection,r._options.offlineModelOperationSnapshotInterval,r._storage),r._modelService=new Qh(r._connection,r._identityCache,r._modelOfflineManager,r._options.modelDataUndefinedObjectValues,r._options.modelDataUndefinedArrayValues),r._identityService=new ma(r._connection),r._activityService=new gf(r._connection,r._identityCache),r._presenceService=new kf(r._connection,r._identityCache,void 0),r._chatService=new np(r._connection,r._identityCache),r._bindConnectionEvents(),r._options.storageAdapter&&(r._log.debug("options.offline.storage is set, configuring offline storage"),r._storage.configure(r._options.storageAdapter)),r}return Oi(n,[{key:"url",value:function(){return this._connection.url()}},{key:"options",value:function(){return this._options.getOptions()}},{key:"namespace",value:function(){return this._namespace}},{key:"id",value:function(){return this._domainId}},{key:"session",value:function(){return this._connection.session()}},{key:"models",value:function(){return this._modelService}},{key:"identity",value:function(){return this._identityService}},{key:"activities",value:function(){return this._activityService}},{key:"presence",value:function(){return this._presenceService}},{key:"chat",value:function(){return this._chatService}},{key:"serverTime",value:function(){return this._connection.request({serverTimeRequest:{}}).then((function(e){return Oa(e.serverTimeResponse.serverTime)}))}},{key:"dispose",value:function(){return this._disposed=!0,void 0!==this._modelService&&this._modelService._dispose(),this._connection.isConnected()?this._connection.disconnect():Promise.resolve()}},{key:"isDisposed",value:function(){return this._disposed}},{key:"connectWithPassword",value:function(e){var t=this,i=n._toPromiseCallback(e);return this._connection.connectWithPassword(i).then((function(){return t._init(t._connection.session().user().username)}))}},{key:"connectAnonymously",value:function(e){var t=this,i=n._toPromiseCallback(e);return this._connection.connectAnonymously(i).then((function(){return t._init(t._connection.session().user().username)}))}},{key:"connectWithJwt",value:function(e){var t=this,i=n._toPromiseCallback(e);return this._connection.connectWithJwt(i).then((function(){return t._init(t._connection.session().user().username)}))}},{key:"reconnect",value:function(e){var t=this;if(e=e||this._connection.session().reconnectToken(),Fs.isSet(e)){var i=n._toPromiseCallback(e);return this._connection.connectWithReconnectToken(i).then((function(){return t._init(t._connection.session().user().username)}))}return Promise.reject(new Error("No reconnect token was provided, and there is not one in memory"))}},{key:"initializeOffline",value:function(e){var t=this,i=n._toPromiseCallback(e);if(Fs.isNotSet(e))throw new Error("An username must be provided to initialize the domain offline.");if(Fs.isNotSet(this._options.storageAdapter))throw new Error("'options.offline.storage' must be set to initialize the domain offline.");return i().then((function(e){return t._init(e)}))}},{key:"disconnect",value:function(){return this._connection.isDisconnected()?Promise.resolve():this._connection.disconnect()}},{key:"isDisconnected",value:function(){return this._connection.isDisconnected()}},{key:"isConnected",value:function(){return this._connection.isConnected()}},{key:"_emitError",value:function(e){this._emitEvent(e)}},{key:"_authenticateWithJwt",value:function(e){return this._connection.connectWithJwt(e).then((function(){}))}},{key:"_authenticateWithReconnectToken",value:function(e){return this._connection.connectWithReconnectToken(e).then((function(){}))}},{key:"_authenticateAnonymously",value:function(e){return this._connection.connectAnonymously(e).then((function(){}))}},{key:"_bindConnectionEvents",value:function(){var e=this;this._connection.on(Ua.Events.CONNECTION_SCHEDULED,(function(t){return e._emitEvent(new Yd(e,t.delay))})),this._connection.on(Ua.Events.CONNECTING,(function(){return e._emitEvent(new Jd(e))})),this._connection.on(Ua.Events.AUTHENTICATING,(function(t){return e._emitEvent(new Xd(e,t.method))})),this._connection.on(Ua.Events.CONNECTED,(function(t){e._emitEvent(new Gd(e)),e._onAuthenticated(t)})),this._connection.on(Ua.Events.CONNECTION_FAILED,(function(t){e._emitEvent(new Kd(e,t.code,t.authMethod,t.details))})),this._connection.on(Ua.Events.INTERRUPTED,(function(){e._emitEvent(new Zd(e))})),this._connection.on(Ua.Events.DISCONNECTED,(function(){e._emitEvent(new Qd(e))})),this._connection.on(Ua.Events.ERROR,(function(t){return e._emitEvent(new eh(e,t.error.message))}))}},{key:"_init",value:function(e){var t=this;return this._initialized?Promise.resolve():(this._log.debug("Initializing domain"),this._options.storageAdapter?(this._log.debug("options.offline.storage is set, opening offline storage"),this._storage.openStore(this._namespace,this._domainId,e).then((function(){return Is(t,void 0,void 0,jo().mark((function e(){return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._initialized=!0,e.next=3,this._modelOfflineManager.init();case 3:return e.next=5,this._identityCache.init();case 5:case"end":return e.stop()}}),e,this)})))}))):(this._initialized=!0,Promise.resolve()))}},{key:"_onAuthenticated",value:function(e){var t=js(Ca(e.state),Ma);this._presenceService._setInternalState(ya.objectToMap(t))}}],[{key:"_toPromiseCallback",value:function(e){return void 0===e?function(){return Promise.resolve(void 0)}:"function"===typeof e?e:function(){return Promise.resolve(e)}}}]),n}(Xs);ap.Events={CONNECTION_SCHEDULED:Yd.NAME,CONNECTING:Jd.NAME,AUTHENTICATING:Xd.NAME,CONNECTED:Gd.NAME,CONNECTION_FAILED:Kd.NAME,INTERRUPTED:Zd.NAME,DISCONNECTED:Qd.NAME,ERROR:eh.NAME},Object.freeze(ap.Events);var lp=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"connect",value:function(t,n,i,r,o){return e.connectWithPassword(t,{username:n,password:i},r,o)}},{key:"connectWithPassword",value:function(t,n,i,r){var o=e._createDomain(t,i,r);return o.connectWithPassword(n).then((function(){return o}))}},{key:"connectAnonymously",value:function(t,n,i,r){var o=e._createDomain(t,i,r);return o.connectAnonymously(n).then((function(){return o}))}},{key:"connectWithJwt",value:function(t,n,i,r){var o=e._createDomain(t,i,r);return o.connectWithJwt(n).then((function(){return o}))}},{key:"reconnect",value:function(t,n,i,r){var o=e._createDomain(t,i,r);return o.reconnect(n).then((function(){return o}))}},{key:"configureLogging",value:function(e){Ks.configure(e)}},{key:"_createDomain",value:function(e,t,n){var i=new ap(e,t);return"object"===typeof n&&n._bind((function(){return i.dispose()})),i}}]),e}();lp.connect,lp.connectWithPassword,lp.connectAnonymously,lp.connectWithJwt,lp.reconnect,lp.configureLogging;function cp(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function up(e){return cp(e).then((function(){}))}function dp(e){return new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}var hp="readonly",fp="readwrite",pp=function(){function e(t){Si(this,e),this._db=t}return Oi(e,[{key:"_withWriteStore",value:function(e,t){return this._withStores([e],fp,(function(e){return t(e[0])}))}},{key:"_withReadStore",value:function(e,t){return this._withStores([e],hp,(function(e){return t(e[0])}))}},{key:"_withWriteStores",value:function(e,t){return this._withStores(e,fp,t)}},{key:"_withReadStores",value:function(e,t){return this._withStores(e,hp,t)}},{key:"_withStores",value:function(e,t,n){var i=this._db.transaction(e,t),r=n(e.map((function(e){return i.objectStore(e)}))).catch((function(e){return i.abort(),Promise.reject(e)}));return Promise.all([r,dp(i)]).then((function(e){var t=u(e,2),n=t[0];t[1];return n}))}},{key:"put",value:function(e,t){return this._withWriteStore(e,(function(e){return up(e.put(t))}))}},{key:"add",value:function(e,t){return this._withWriteStore(e,(function(e){return up(e.add(t))}))}},{key:"_getAll",value:function(e,t){var n=[];return this._readIterator(e,null,(function(e){n.push(e)}),t).then((function(){return n}))}},{key:"_getAllFromIndex",value:function(e,t,n){var i=[];return this._readIterator(e,t,(function(e){i.push(e)}),n).then((function(){return i}))}},{key:"_readIterator",value:function(t,n,i,r,o){var s=function(e){i(e.value)};return this._withReadStore(t,(function(t){return e._cursorIterator(t,n,s,r,o)}))}},{key:"_deleteIterator",value:function(e,t,n,i){return this._writeIterator(e,t,(function(e){e.delete()}),n,i)}},{key:"_writeIterator",value:function(t,n,i,r,o){return this._withWriteStore(t,(function(t){return e._cursorIterator(t,n,i,r,o)}))}}],[{key:"deleteFromIndex",value:function(e,t,n){return this._cursorIterator(e,t,(function(e){e.delete()}),n)}},{key:"_getAllFromOpenIndex",value:function(t,n,i){var r=[],o=t.openCursor(n,i);return e._iterateOverCursor(o,(function(e){return r.push(e.value)})).then((function(){return r}))}},{key:"_cursorIterator",value:function(t,n,i,r,o){var s;null===n?s=t.openCursor(r,o):s=t.index(n).openCursor(r,o);return e._iterateOverCursor(s,i)}},{key:"_iterateOverCursor",value:function(e,t){return new Promise((function(n,i){e.onsuccess=function(e){var i=e.target.result;i?(t(i),i.continue()):n()},e.onerror=function(){i(e.error)}}))}}]),e}(),gp={Store:"ModelCreation",Fields:{ModelId:"modelId"},Indices:{ModelId:"ModelCreation.modelId"}},mp={Store:"ModelMetaData",Fields:{ModelId:"modelId",Subscribed:"subscribed",Created:"created",Deleted:"deleted",SyncRequired:"syncRequired",Uncommitted:"uncommitted"},Indices:{ModelId:"ModelMetaData.modelId",Created:"ModelMetaData.created",Deleted:"ModelMetaData.deleted",Uncommitted:"ModelMetaData.uncommitted",SyncRequired:"ModelMetaData.syncRequired",Subscribed:"ModelMetaData.subscribed"}},vp={Store:"ModelData",Fields:{ModelId:"modelId"},Indices:{ModelId:"ModelData.modelId"}},yp={Store:"ModelServerOperation",Fields:{ModelId:"modelId",Version:"version"},Indices:{ModelId:"ModelServerOperation.modelId",ModelId_Version:"ModelServerOperation.modelId_version"}},bp={Store:"ModelLocalOperation",Fields:{ModelId:"modelId",SequenceNumber:"sequenceNumber"},Indices:{ModelId:"ModelLocalOperation.modelId",ModelId_SequenceNumber:"ModelLocalOperation.modelId_sequenceNumber"}},wp={Store:"DomainUser",Fields:{Username:"username",UserType:"userType"},Indices:{UserType_Username:"DomainUser.userType_username"}},_p={Store:"Session",Fields:{SessionId:"sessionId",Username:"username",UserType:"userType"},Indices:{UserType_Username:"DomainUser.userType_username",SessionId:"Session.sessionId"}},xp=function(e){Mi(n,e);var t=Ni(n);function n(){return Si(this,n),t.apply(this,arguments)}return Oi(n,[{key:"initiateModelCreation",value:function(e){var t=this,i=[gp.Store,mp.Store,vp.Store,bp.Store,yp.Store];return this._withWriteStores(i,(function(i){var r=u(i,5),o=r[0],s=r[1],a=r[2],l=r[3],c=r[4];return Is(t,void 0,void 0,jo().mark((function t(){var i,r,u,d;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.modelId,t.next=3,cp(s.get(i));case 3:if(r=t.sent,!Fs.isSet(r)||!r.available){t.next=6;break}return t.abrupt("return",Promise.reject(new Js("An offline model with the specified id already exists: ".concat(i))));case 6:return t.next=8,up(o.put(e));case 8:return 1,0,u=new Od(!0,!0,!0,!0),d={modelId:i,collection:e.collection,valueIdPrefix:{prefix:e.valueIdPrefix,increment:0},version:1,lastSequenceNumber:0,createdTime:e.createdTime,modifiedTime:e.createdTime,permissions:u,local:!0,snapshot:{version:1,sequenceNumber:0,data:e.initialData,localOperations:[],serverOperations:[]}},t.abrupt("return",n._mergeAndPutModelState(d,s,a,l,c));case 13:case"end":return t.stop()}}),t)})))}))}},{key:"getModelCreationData",value:function(e){var t=this;return this._withReadStore(gp.Store,(function(n){return Is(t,void 0,void 0,jo().mark((function t(){return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",cp(n.get(e)).then((function(e){return e||null})));case 1:case"end":return t.stop()}}),t)})))}))}},{key:"completeModelCreation",value:function(e){var t=this,i=[gp.Store,mp.Store];return this._withWriteStores(i,(function(i){var r=u(i,2),o=r[0],s=r[1];return Is(t,void 0,void 0,jo().mark((function t(){var i;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cp(o.get(e));case 2:if(t.sent){t.next=5;break}throw new Js("Can't complete model creation for a model that was created.");case 5:return t.next=7,up(o.delete(e));case 7:return t.next=9,cp(s.get(e));case 9:return(i=t.sent).available=1,delete i.created,n._setSyncRequired(i),t.next=15,up(s.put(i));case 15:case"end":return t.stop()}}),t)})))}))}},{key:"initiateModelDeletion",value:function(e){var t=this,i=[gp.Store,mp.Store,vp.Store,bp.Store,yp.Store];return this._withWriteStores(i,(function(i){var r=u(i,5),o=r[0],s=r[1],a=r[2],l=r[3],c=r[4];return Is(t,void 0,void 0,jo().mark((function t(){var i;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cp(s.get(e));case 2:if(i=t.sent){t.next=5;break}throw new Js("Can't delete model '".concat(e,"' because it doesn't exist."));case 5:return delete i.details,delete i.subscribed,delete i.available,delete i.uncommitted,1===i.created?delete i.created:i.deleted=1,n._setSyncRequired(i),t.next=13,up(s.put(i));case 13:return t.next=15,up(o.delete(e));case 15:return t.next=17,n._deleteLocalOperationsForModel(l,e);case 17:return t.next=19,n._deleteServerOperationsForModel(c,e);case 19:return t.next=21,up(a.delete(e));case 21:case"end":return t.stop()}}),t)})))}))}},{key:"completeModelDeletion",value:function(e){var t=this,i=[mp.Store];return this._withWriteStores(i,(function(i){var r=u(i,1)[0];return Is(t,void 0,void 0,jo().mark((function t(){var i;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cp(r.get(e));case 2:if(!(i=t.sent)){t.next=8;break}return delete i.deleted,n._setSyncRequired(i),t.next=8,up(r.put(i));case 8:case"end":return t.stop()}}),t)})))}))}},{key:"deleteModels",value:function(e){var t=this,i=[gp.Store,mp.Store,vp.Store,bp.Store,yp.Store];return this._withWriteStores(i,(function(i){var r=u(i,5),o=r[0],s=r[1],a=r[2],l=r[3],c=r[4];return Is(t,void 0,void 0,jo().mark((function t(){var i,r,u;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=No(e),t.prev=1,i.s();case 3:if((r=i.n()).done){t.next=9;break}return u=r.value,t.next=7,n._deleteModel(u,o,s,a,l,c);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),i.e(t.t0);case 14:return t.prev=14,i.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})))}))}},{key:"modelMetaDataExists",value:function(e){if(void 0===e||null===e)throw new Js("modelId must be defined");return this._withReadStore(mp.Store,(function(t){return cp(t.index(mp.Indices.ModelId).count(e)).then((function(e){return e>0}))}))}},{key:"getModelMetaData",value:function(e){var t=this;return this._withReadStore(mp.Store,(function(i){return Is(t,void 0,void 0,jo().mark((function t(){var r;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cp(i.get(e));case 2:if(!(r=t.sent)){t.next=7;break}return t.abrupt("return",n._metaDataDocToMetaData(r));case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t)})))}))}},{key:"getAllModelMetaData",value:function(){return this._getAll(mp.Store).then((function(e){return e.map(n._metaDataDocToMetaData)}))}},{key:"getModelsRequiringSync",value:function(){return this._getAllFromIndex(mp.Store,mp.Indices.SyncRequired).then((function(e){return e.map(n._metaDataDocToMetaData)}))}},{key:"getSubscribedModels",value:function(){var e=this,t=mp.Store;return this._withReadStore(t,(function(t){return Is(e,void 0,void 0,jo().mark((function e(){var i,r;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.index(mp.Indices.Subscribed),e.next=3,pp._getAllFromOpenIndex(i);case 3:return r=e.sent,e.abrupt("return",r.map(n._metaDataDocToMetaData));case 5:case"end":return e.stop()}}),e)})))}))}},{key:"updateSubscriptions",value:function(e,t){var i=this,r=[mp.Store];return this._withWriteStores(r,(function(r){var o=u(r,1)[0];return Is(i,void 0,void 0,jo().mark((function i(){return jo().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n._removeSubscriptions(t,o);case 2:return i.next=4,n._addSubscriptions(e,o);case 4:case"end":return i.stop()}}),i)})))}))}},{key:"setModelState",value:function(e){var t=this,i=[mp.Store,vp.Store,bp.Store,yp.Store];return this._withWriteStores(i,(function(i){var r=u(i,4),o=r[0],s=r[1],a=r[2],l=r[3];return Is(t,void 0,void 0,jo().mark((function t(){return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._mergeAndPutModelState(e,o,s,a,l);case 2:case"end":return t.stop()}}),t)})))}))}},{key:"getModelState",value:function(e){var t=this;if(void 0===e||null===e)return Promise.reject(new Js("modelId must be defined"));var n=[mp.Store,vp.Store,bp.Store,yp.Store];return this._withReadStores(n,(function(n){var i=u(n,4),r=i[0],o=i[1],s=i[2],a=i[3];return Is(t,void 0,void 0,jo().mark((function t(){var n,i,l,c,u,d,h,f,p;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cp(r.get(e));case 2:return n=t.sent,t.next=5,cp(o.get(e));case 5:if(i=t.sent,!n||!i){t.next=21;break}return l=s.index(bp.Indices.ModelId),t.next=10,pp._getAllFromOpenIndex(l,e);case 10:return c=t.sent,u=a.index(yp.Indices.ModelId),t.next=14,pp._getAllFromOpenIndex(u,e);case 14:return d=t.sent,h={version:n.details.snapshotVersion,sequenceNumber:n.details.snapshotSequenceNumber,data:i.data,localOperations:c,serverOperations:d},f=n.details.version,p=n.details.lastSequenceNumber,t.abrupt("return",{modelId:n.modelId,collection:n.details.collection,createdTime:n.details.createdTime,modifiedTime:n.details.modifiedTime,version:f,lastSequenceNumber:p,valueIdPrefix:Object.assign({},n.details.valueIdPrefix),permissions:new Od(n.details.permissions.read,n.details.permissions.write,n.details.permissions.remove,n.details.permissions.manage),local:1===n.created,snapshot:h});case 21:return t.abrupt("return",null);case 22:case"end":return t.stop()}}),t)})))}))}},{key:"processOfflineModelUpdate",value:function(e){var t=this,i=[mp.Store,vp.Store,yp.Store];return this._withWriteStores(i,(function(i){var r=u(i,3),o=r[0],s=r[1],a=r[2];return Is(t,void 0,void 0,jo().mark((function t(){var i,r,l,c,u;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.modelId,r=e.dataUpdate,l=e.permissionsUpdate,t.next=3,cp(o.get(i));case 3:if(void 0!==(c=t.sent)){t.next=6;break}return t.abrupt("return");case 6:if(!c.uncommitted){t.next=8;break}throw new Js("A model update was received for an model ('".concat(i,"')with uncommitted operations."));case 8:return t.next=10,n._deleteServerOperationsForModel(a,i);case 10:if(!r){t.next=19;break}return c.details.version=r.version,c.details.createdTime=r.createdTime,c.details.modifiedTime=r.modifiedTime,c.details.snapshotSequenceNumber=c.details.lastSequenceNumber,c.details.snapshotVersion=r.version,u={modelId:i,data:r.data},t.next=19,up(s.put(u));case 19:return l&&(c.details.permissions=l),t.abrupt("return",up(o.put(c)));case 21:case"end":return t.stop()}}),t)})))}))}},{key:"processServerOperation",value:function(e,t){var i=this;if(!e)return Promise.reject(new Js("serverOp was undefined."));if(!Array.isArray(t))return Promise.reject(new Js("localOps was not an array."));if(!t.every((function(t){return t.modelId===e.modelId})))return Promise.reject(new Js("localOp modelId did not match the serverOp modelId."));var r=[mp.Store,yp.Store,bp.Store];return this._withWriteStores(r,(function(r){var o=u(r,3),s=o[0],a=o[1],l=o[2];return Is(i,void 0,void 0,jo().mark((function i(){var r;return jo().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,cp(s.get(e.modelId));case 2:if(r=i.sent){i.next=5;break}throw new Js("Model meta data for model '".concat(e.modelId,"' not found when processing a server operation."));case 5:if(r.details){i.next=7;break}throw new Js("Can't store server operation for Model '".concat(e.modelId,"' because the model details are missing from storage."));case 7:return r.details.version=e.version+1,r.details.modifiedTime=e.timestamp,i.next=11,up(a.add(e));case 11:return i.next=13,n._deleteLocalOperationsForModel(l,e.modelId);case 13:return i.next=15,n._putLocalOperationsForModel(l,t);case 15:return i.next=17,up(s.put(r));case 17:case"end":return i.stop()}}),i)})))}))}},{key:"processLocalOperation",value:function(e){var t=this;if(!e)return Promise.reject(new Js("localOp is required."));var i=[mp.Store,bp.Store];return this._withWriteStores(i,(function(i){var r=u(i,2),o=r[0],s=r[1];return Is(t,void 0,void 0,jo().mark((function t(){var i;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cp(o.get(e.modelId));case 2:if(i=t.sent){t.next=5;break}throw new Js("Model meta data not found for '".concat(e.modelId,"' while processing local operation."));case 5:if(i.details){t.next=7;break}throw new Js("Model details not found for '".concat(e.modelId,"' while processing local operation."));case 7:return i.uncommitted=1,i.details.lastSequenceNumber=e.sequenceNumber,n._setSyncRequired(i),t.next=12,up(s.add(e));case 12:return t.next=14,up(o.put(i));case 14:case"end":return t.stop()}}),t)})))}))}},{key:"processOperationAck",value:function(e,t,i){var r=this,o=[bp.Store,yp.Store,mp.Store];return this._withWriteStores(o,(function(o){var s=u(o,3),a=s[0],l=s[1],c=s[2];return Is(r,void 0,void 0,jo().mark((function r(){var o,s;return jo().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,cp(c.get(e));case 2:if(o=r.sent){r.next=5;break}throw new Js("Model meta data not found for '".concat(e,"' while processing operation acknowledgement."));case 5:if(o.details){r.next=7;break}throw new Js("Model details not found for '".concat(e,"' while processing operation acknowledgement."));case 7:return o.details.version=i.version+1,o.details.modifiedTime=i.timestamp,r.next=11,up(a.delete([e,t]));case 11:return r.next=13,up(l.add(i));case 13:return s=a.index(bp.Indices.ModelId),r.next=16,cp(s.count(e)).then((function(e){return e>0}));case 16:return r.sent?o.uncommitted=1:delete o.uncommitted,n._setSyncRequired(o),r.next=21,up(c.put(o));case 21:case"end":return r.stop()}}),r)})))}))}},{key:"snapshotModel",value:function(e,t,i,r){var o=this;if(!r)return Promise.reject(new Js("modelData must be defined"));var s=[mp.Store,vp.Store,yp.Store];return this._withWriteStores(s,(function(s){var a=u(s,3),l=a[0],c=a[1],d=a[2];return Is(o,void 0,void 0,jo().mark((function o(){var s,a;return jo().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,cp(l.get(e));case 2:if(s=o.sent){o.next=5;break}throw new Js("Model meta data not found for '".concat(e,"' while snapshotting model."));case 5:if(s.available){o.next=7;break}throw new Js("Model '".concat(e,"' is not available locally."));case 7:return s.details.snapshotVersion=t,s.details.snapshotSequenceNumber=i,o.next=11,up(l.put(s));case 11:return a={modelId:e,data:r},o.next=14,up(c.put(a));case 14:return o.next=16,n._deleteServerOperationsForModel(d,e);case 16:case"end":return o.stop()}}),o)})))}))}},{key:"claimValueIdPrefix",value:function(e){var t=this;return this._withWriteStore(mp.Store,(function(n){return Is(t,void 0,void 0,jo().mark((function t(){var i,r;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cp(n.get(e));case 2:if((i=t.sent)&&i.details){t.next=5;break}throw new Js("The specified model is not available offline: "+e);case 5:return r=Object.assign({},i.details.valueIdPrefix),i.details.valueIdPrefix.increment=i.details.valueIdPrefix.increment+1,t.next=9,up(n.put(i));case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})))}))}}],[{key:"_deleteServerOperationsForModel",value:function(e,t){return pp.deleteFromIndex(e,yp.Indices.ModelId,IDBKeyRange.only(t))}},{key:"_deleteLocalOperationsForModel",value:function(e,t){return pp.deleteFromIndex(e,bp.Indices.ModelId,IDBKeyRange.only(t))}},{key:"_putLocalOperationsForModel",value:function(e,t){return Is(this,void 0,void 0,jo().mark((function n(){var i,r,o;return jo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=No(t),n.prev=1,i.s();case 3:if((r=i.n()).done){n.next=9;break}return o=r.value,n.next=7,up(e.add(o));case 7:n.next=3;break;case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),i.e(n.t0);case 14:return n.prev=14,i.f(),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})))}},{key:"_putServerOperationsForModel",value:function(e,t){return Is(this,void 0,void 0,jo().mark((function n(){var i,r,o;return jo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=No(t),n.prev=1,i.s();case 3:if((r=i.n()).done){n.next=9;break}return o=r.value,n.next=7,up(e.add(o));case 7:n.next=3;break;case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),i.e(n.t0);case 14:return n.prev=14,i.f(),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})))}},{key:"_metaDataDocToMetaData",value:function(e){var t={modelId:e.modelId,subscribed:1===e.subscribed,available:1===e.available,deleted:1===e.deleted,created:1===e.created,uncommitted:1===e.uncommitted,syncRequired:1===e.syncRequired};return e.details&&(t.details={collection:e.details.collection,valueIdPrefix:e.details.valueIdPrefix,version:e.details.version,lastSequenceNumber:e.details.lastSequenceNumber,createdTime:e.details.createdTime,modifiedTime:e.details.modifiedTime,permissions:new Od(e.details.permissions.read,e.details.permissions.write,e.details.permissions.remove,e.details.permissions.manage),snapshotVersion:e.details.snapshotVersion,snapshotSequenceNumber:e.details.snapshotSequenceNumber}),t}},{key:"_mergeAndPutModelState",value:function(e,t,i,r,o){return Is(this,void 0,void 0,jo().mark((function s(){var a,l,c,u;return jo().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,cp(t.get(e.modelId));case 2:return a=s.sent,l={prefix:e.valueIdPrefix.prefix,increment:e.valueIdPrefix.increment||0},c={modelId:e.modelId,available:1,details:{collection:e.collection,valueIdPrefix:l,createdTime:e.createdTime,modifiedTime:e.modifiedTime,permissions:{read:e.permissions.read,write:e.permissions.write,remove:e.permissions.remove,manage:e.permissions.manage},lastSequenceNumber:e.lastSequenceNumber,version:e.version,snapshotVersion:e.snapshot.version,snapshotSequenceNumber:e.snapshot.sequenceNumber}},e.local&&(c.created=1),c.available=1,e.snapshot.localOperations.length>0?c.uncommitted=1:delete c.uncommitted,a&&(c.subscribed=a.subscribed,c.deleted=a.deleted),n._setSyncRequired(c),s.next=12,up(t.put(c));case 12:return u={modelId:e.modelId,data:e.snapshot.data},s.next=15,up(i.put(u));case 15:return s.next=17,n._deleteServerOperationsForModel(o,c.modelId);case 17:return s.next=19,n._deleteLocalOperationsForModel(r,c.modelId);case 19:return s.next=21,n._putLocalOperationsForModel(r,e.snapshot.localOperations);case 21:return s.next=23,n._putServerOperationsForModel(o,e.snapshot.serverOperations);case 23:return s.abrupt("return",n._metaDataDocToMetaData(c));case 24:case"end":return s.stop()}}),s)})))}},{key:"_removeSubscriptions",value:function(e,t){return Is(this,void 0,void 0,jo().mark((function i(){var r,o,s,a;return jo().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:r=No(e),i.prev=1,r.s();case 3:if((o=r.n()).done){i.next=16;break}return s=o.value,i.next=7,cp(t.get(s));case 7:if(a=i.sent){i.next=10;break}return i.abrupt("continue",14);case 10:return delete a.subscribed,n._setSyncRequired(a),i.next=14,t.put(a);case 14:i.next=3;break;case 16:i.next=21;break;case 18:i.prev=18,i.t0=i.catch(1),r.e(i.t0);case 21:return i.prev=21,r.f(),i.finish(21);case 24:case"end":return i.stop()}}),i,null,[[1,18,21,24]])})))}},{key:"_deleteModel",value:function(e,t,i,r,o,s){return Is(this,void 0,void 0,jo().mark((function a(){return jo().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.delete(e);case 2:return a.next=4,i.delete(e);case 4:return a.next=6,r.delete(e);case 6:return a.next=8,n._deleteServerOperationsForModel(s,e);case 8:return a.next=10,n._deleteLocalOperationsForModel(o,e);case 10:case"end":return a.stop()}}),a)})))}},{key:"_addSubscriptions",value:function(e,t){return Is(this,void 0,void 0,jo().mark((function n(){var i,r,o,s,a;return jo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=No(e),n.prev=1,i.s();case 3:if((r=i.n()).done){n.next=14;break}return o=r.value,n.next=7,cp(t.get(o));case 7:return s=n.sent,a=void 0,void 0!==s?(a=s).subscribed=1:a={modelId:o,subscribed:1},n.next=12,up(t.put(a));case 12:n.next=3;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(1),i.e(n.t0);case 19:return n.prev=19,i.f(),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[1,16,19,22]])})))}},{key:"_setSyncRequired",value:function(e){1===e.deleted||1===e.created||1===e.uncommitted?e.syncRequired=1:delete e.syncRequired}}]),n}(pp),kp=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"upgrade",value:function(e){e.createObjectStore(gp.Store,{keyPath:gp.Fields.ModelId}).createIndex(gp.Indices.ModelId,gp.Fields.ModelId,{unique:!0});var t=e.createObjectStore(mp.Store,{keyPath:mp.Fields.ModelId});t.createIndex(mp.Indices.ModelId,mp.Fields.ModelId,{unique:!0}),t.createIndex(mp.Indices.Created,mp.Fields.Created,{unique:!1}),t.createIndex(mp.Indices.Deleted,mp.Fields.Deleted,{unique:!1}),t.createIndex(mp.Indices.Uncommitted,mp.Fields.Uncommitted,{unique:!1}),t.createIndex(mp.Indices.SyncRequired,mp.Fields.SyncRequired,{unique:!1}),t.createIndex(mp.Indices.Subscribed,mp.Fields.Subscribed,{unique:!1}),e.createObjectStore(vp.Store,{keyPath:vp.Fields.ModelId}).createIndex(vp.Indices.ModelId,vp.Fields.ModelId,{unique:!0});var n=e.createObjectStore(yp.Store,{keyPath:[yp.Fields.ModelId,yp.Fields.Version]});n.createIndex(yp.Indices.ModelId,yp.Fields.ModelId,{unique:!1}),n.createIndex(yp.Indices.ModelId_Version,[yp.Fields.ModelId,yp.Fields.Version],{unique:!0});var i=e.createObjectStore(bp.Store,{keyPath:[bp.Fields.ModelId,bp.Fields.SequenceNumber]});i.createIndex(bp.Indices.ModelId,bp.Fields.ModelId,{unique:!1}),i.createIndex(bp.Indices.ModelId_SequenceNumber,[bp.Fields.ModelId,bp.Fields.SequenceNumber],{unique:!0}),e.createObjectStore(wp.Store,{keyPath:[wp.Fields.UserType,wp.Fields.Username]}).createIndex(wp.Indices.UserType_Username,[wp.Fields.UserType,wp.Fields.Username],{unique:!0});var r=e.createObjectStore(_p.Store,{keyPath:[_p.Fields.SessionId]});r.createIndex(_p.Indices.UserType_Username,[_p.Fields.UserType,_p.Fields.Username],{unique:!1}),r.createIndex(_p.Indices.SessionId,[_p.Fields.SessionId],{unique:!0})}}]),e}(),Cp=function(){function e(){Si(this,e)}return Oi(e,null,[{key:"upgrade",value:function(e,t){if(1===t)kp.upgrade(e)}}]),e}(),Sp=function(e){Mi(n,e);var t=Ni(n);function n(){return Si(this,n),t.apply(this,arguments)}return Oi(n,[{key:"putUser",value:function(e){var t=this,n=wp.Store;return this._withWriteStore(n,(function(n){return Is(t,void 0,void 0,jo().mark((function t(){var i;return jo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={userType:e.userId.userType,username:e.userId.username,displayName:e.displayName,firstName:e.firstName,lastName:e.lastName,email:e.email},t.next=3,up(n.put(i));case 3:case"end":return t.stop()}}),t)})))}))}},{key:"getUsers",value:function(){return Is(this,void 0,void 0,jo().mark((function e(){var t,n;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=wp.Store,e.next=3,this._getAll(t);case 3:return n=e.sent,e.abrupt("return",n.map((function(e){return new da(e.userType,e.username,e.firstName,e.lastName,e.displayName,e.email)})));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"putSession",value:function(e,t){var n=this,i=_p.Store;return this._withWriteStore(i,(function(i){return Is(n,void 0,void 0,jo().mark((function n(){var r;return jo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={sessionId:e,userType:t.userType,username:t.username},n.next=3,up(i.put(r));case 3:case"end":return n.stop()}}),n)})))}))}},{key:"getSessions",value:function(){return Is(this,void 0,void 0,jo().mark((function e(){var t,n,i;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_p.Store,e.next=3,this._getAll(t);case 3:return n=e.sent,i=new Map,n.forEach((function(e){i.set(e.sessionId,new ua(e.userType,e.username))})),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})))}}]),n}(pp),Ep=function(){function e(){Si(this,e),this._db=null,this._disposed=!1}return Oi(e,[{key:"adapterId",value:function(){return"Indexed DB Storage"}},{key:"initialize",value:function(t,n,i){var r=this;if(!t)throw new Error("namespace must be a non-empty string");if(!n)throw new Error("domain must be a non-empty string");if(!i)throw new Error("username must be a non-empty string");var o="".concat(e._DATABASE_NAME,":").concat(t,"/").concat(n,"/").concat(i),s=indexedDB.open(o,e._VERSION);return s.onupgradeneeded=function(){var e=s.result,t=s.result.version;Cp.upgrade(e,t)},cp(s).then((function(e){r._db=e,r._modelStore=new xp(r._db),r._identityStore=new Sp(r._db)}))}},{key:"isInitialized",value:function(){return null!==this._db}},{key:"modelStore",value:function(){return this._modelStore}},{key:"identityStore",value:function(){return this._identityStore}},{key:"destroy",value:function(){var e=this._db.name;this.dispose(),indexedDB.deleteDatabase(e)}},{key:"dispose",value:function(){if(!this.isInitialized())throw new Error("Can not disposed a storage adapter that is not initialized");if(this.isDisposed())throw new Error("Already disposed");this._db.close(),this._db=null,this._disposed=!0}},{key:"isDisposed",value:function(){return this._disposed}}]),e}();Ep._DATABASE_NAME="convergence.offline.storage",Ep._VERSION=1;var Op="CheerpJNotebook",Ap="CheerpJNotebookIndexedDb",Mp="CheerpJNotebookIndexedDbStore",Rp=function(t){Mi(i,t);var n=Ni(i);function i(t){var o;return Si(this,i),(o=n.call(this,t)).state={cells:o.generateDefaultProjectCells(),otherFiles:[],consoleCell:o.generateCell(r.console,"","xml",!0,!0),showModal:!1,importModal:!1},o.graphics=e.createRef(),o}return Oi(i,[{key:"componentDidMount",value:function(){this.loadNotebook(),this.initColabMode()}},{key:"componentDidUpdate",value:function(){this.saveNotebook()}},{key:"addNewCell",value:function(e,t){var n;switch(e){case"empty":n=this.generateCell(r.java,"");break;case"minimal-node":n=this.generateCell(r.java,Vi.DEFAULT_NODE);break;case"markdown":n=this.generateCell(r.markdown,Vi.DEFAULT_MARKDOWN),t&&(n=this.generateCell(r.markdown,t));break;case"periodic-node":n=this.generateCell(r.java,Vi.PERIODIC_NODE);break;case"java-node":default:n=this.generateCell(r.java,t||"");break;case"markdown-node":n=this.generateCell(r.markdown,t||"")}var i=Ci(this.state.cells),o=!1;for(var s in i)i[s].code===n.code&&i[s].type===n.type&&n.type!==r.markdown&&(i[s]=n,o=!0);o||i.push(n),this.setState({cells:i})}},{key:"generateCell",value:function(e,t,n,i,r){return{type:e,code:t,className:this.calculateClassName(t),packageName:this.calculateClassPackageName(t),style:{height:this.calculateCellHeight(t),gutter:void 0===i||i,readOnly:void 0!==r&&r,mode:void 0!==n?n:"java"},markdown:{focused:!1}}}},{key:"generateDefaultProjectCells",value:function(){return[this.generateCell(r.txt,Vi.DEFAULT_CONFIG,"xml"),this.generateCell(r.markdown,Vi.DEFAULT_MARKDOWN),this.generateCell(r.java,Vi.DEFAULT_NODE)]}},{key:"changeConsoleCellCode",value:function(e){var t=this.state.consoleCell,n=e;n.includes("simulation ended")&&(n=this.parseAndGraphics(e)),t.code=n,t.style.height=this.calculateCellHeight(t.code),this.setState({consoleCell:t})}},{key:"addConsoleCellCode",value:function(e){var t=this.state.consoleCell;t.code+=e,t.style.height=this.calculateCellHeight(t.code),this.setState({consoleCell:t})}},{key:"changeCellCode",value:function(e,t){var n=Ci(this.state.cells);n[e].code=t,n[e].type===r.java&&(n[e].className=this.calculateClassName(t),n[e].packageName=this.calculateClassPackageName(t)),n[e].style.height=this.calculateCellHeight(t),this.setState({cells:n})}},{key:"moveCell",value:function(e,t){if(e+t!==0){var n=Ci(this.state.cells),i=n[e];n.splice(e,1),n.splice(e+t,0,i),this.setState({cells:n})}}},{key:"deleteCell",value:function(e){var t=Ci(this.state.cells);t.splice(e,1),this.setState({cells:t})}},{key:"addFile",value:function(e,t,n,i){var r={name:e,type:t,content:n,size:i},o=Ci(this.state.otherFiles),s=!1;for(var a in o)o[a].name===r.name&&o[a].type===r.type&&(o[a]=r,s=!0);s||o.push(r),this.setState({otherFiles:o})}},{key:"onFocusMarkdown",value:function(e,t){var n=Ci(this.state.cells);n[e].markdown.focused=t,this.setState({cells:n})}},{key:"calculateClassName",value:function(e){var t=e.match(new RegExp("class\\s(\\w+)"));return t&&t.length>1?t[1]:""}},{key:"calculateClassPackageName",value:function(e){var t=e.match(new RegExp("package ([\\s\\S]*?);"));return t&&t.length>1?t[1]:""}},{key:"calculateCellHeight",value:function(e){return 30+17*e.split(/\r\n|\r|\n/).length}},{key:"parseAndGraphics",value:function(e){var t=(new Lo).parseOutput(e);return this.graphics.current.storeOutput(t),e}},{key:"initColabMode",value:function(){console.log("Initing collaborative mode."),lp.connectAnonymously("http://localhost:8000/api/realtime/convergence/default","kumin").then((function(e){return e.models().openAutoCreate({collection:"example-ace",id:"kuminExampleId",ephemeral:!0,data:{}})})).then((function(e){e.root().set("host","Kumin"),console.log(e.root().value()),console.log("Handling")})).catch((function(e){console.error("Could not open model ",e)}))}},{key:"deleteAll",value:function(){this.deleteOtherFiles(),this.setState({cells:this.generateDefaultProjectCells()})}},{key:"deleteOtherFiles",value:function(){this.setState({otherFiles:[]}),indexedDB.deleteDatabase(Ap)}},{key:"loadNotebook",value:function(){var e=this.loadFromCache(Op);e&&this.setState(e),this.openIndexedDb(this.loadOtherFiles,this)}},{key:"saveNotebook",value:function(){var e={cells:this.state.cells};this.saveToCache(Op,e),this.state.otherFiles.length>0&&this.openIndexedDb(this.saveOtherFiles,this)}},{key:"loadFromCache",value:function(e){var t=localStorage.getItem(e);return JSON.parse(t)}},{key:"saveToCache",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},{key:"saveOtherFiles",value:function(e,t){var n=e.result,i=n.transaction(Mp,"readwrite");for(var r in t.state.otherFiles)i.objectStore(Mp).put({id:r,file:t.state.otherFiles[r]});i.oncomplete=function(){n.close()}}},{key:"loadOtherFiles",value:function(e,t){var n=e.result,i=n.transaction(Mp,"readwrite"),r=i.objectStore(Mp).getAll();r.onsuccess=function(){var e=r.result,n=[];for(var i in e)n.push(e[i].file);t.setState({otherFiles:n})},i.oncomplete=function(){n.close()}}},{key:"openIndexedDb",value:function(e,t){if(window.indexedDB){var n=window.indexedDB.open(Ap,1);n.onupgradeneeded=function(){n.result.createObjectStore(Mp,{keyPath:"id"})},n.onsuccess=function(){e(n,t)}}}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"handleShow",value:function(e){switch(e){case"import":this.setState({importModal:!0});break;case"export":this.setState({importModal:!1})}this.setState({showModal:!0})}},{key:"exportProject",value:function(){var e={cells:this.state.cells};return encodeURI(JSON.stringify(e))}},{key:"importProject",value:function(e){var t=JSON.parse(decodeURI(e));this.setState({cells:t.cells})}},{key:"render",value:function(){var t=this;return(0,g.jsx)(e.Fragment,{children:(0,g.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,g.jsx)(xi,{className:"side-bar-sticky",children:(0,g.jsx)(Kn,{cells:this.state.cells,otherFiles:this.state.otherFiles,cheerpJInfo:this.state.cheerpJInfo,addNewCell:function(e,n){return t.addNewCell(e,n)},changeConsoleCellCode:function(e){return t.changeConsoleCellCode(e)},addConsoleCellCode:function(e){return t.addConsoleCellCode(e)},addFile:function(e,n,i,r){return t.addFile(e,n,i,r)},deleteAll:function(){return t.deleteAll()},openModal:function(e){return t.handleShow(e)}})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("br",{}),(0,g.jsx)("div",{className:"container-fluid no-padding",children:(0,g.jsxs)(Pi,{className:"full-row",children:[(0,g.jsx)(Ui,{className:"col-sm-1"}),(0,g.jsxs)(Ui,{className:"col-sm-10",children:[(0,g.jsx)(ki,{cells:this.state.cells,changeCellCode:function(e,n){return t.changeCellCode(e,n)},consoleCell:this.state.consoleCell,onFocusMarkdown:function(e,n){return t.onFocusMarkdown(e,n)},moveCell:function(e,n){return t.moveCell(e,n)},deleteCell:function(e){return t.deleteCell(e)}}),(0,g.jsx)(Wi,{ref:this.graphics})]})]})})]}),(0,g.jsx)(Do,{show:this.state.showModal,import:this.state.importModal,handleClose:function(){return t.handleClose()},importProject:function(e){return t.importProject(e)},exportProject:function(){return t.exportProject()}})]})})}}]),i}(e.Component),Tp=Rp;var Dp=function(){return(0,g.jsx)(e.Fragment,{children:(0,g.jsx)(Tp,{})})},Ip=function(e){e&&e instanceof Function&&__webpack_require__.e(787).then(__webpack_require__.bind(__webpack_require__,787)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),i(e),r(e),o(e),s(e)}))};t.render((0,g.jsx)(e.StrictMode,{children:(0,g.jsx)(Dp,{})}),document.getElementById("root")),Ip()}()})();
//# sourceMappingURL=main.d7aeaf2d.js.map